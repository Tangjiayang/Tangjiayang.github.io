<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>RedisåŸç†å­¦ä¹  | donnçš„åšå®¢</title><meta name="author" content="donn"><meta name="copyright" content="donn"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Redis Object Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ Redis åŸºäºå†…å­˜ï¼Œå†…å­˜çš„è®¿é—®é€Ÿåº¦æ˜¯ç£ç›˜çš„ä¸Šåƒå€ï¼›  Redis åŸºäº Reactor æ¨¡å¼è®¾è®¡å¼€å‘äº†ä¸€å¥—é«˜æ•ˆçš„äº‹ä»¶å¤„ç†æ¨¡å‹ï¼Œä¸»è¦æ˜¯å•çº¿ç¨‹äº‹ä»¶å¾ªç¯å’Œ IO å¤šè·¯å¤ç”¨ï¼›  Redis å†…ç½®äº†å¤šç§ä¼˜åŒ–è¿‡åçš„æ•°æ®ç»“æ„å®ç°ï¼Œæ€§èƒ½éå¸¸é«˜ã€‚   Redisæ•°æ®ç»“æ„ï¼šâ€‹	redisçš„æ¯ä¸ªvalueåº•å±‚æ˜¯ç”± redisObjectæŒ‡å‘å…·ä½“çš„æ•°æ®ç»“æ„ redi">
<meta property="og:type" content="article">
<meta property="og:title" content="RedisåŸç†å­¦ä¹ ">
<meta property="og:url" content="https://tangjiayang.github.io/2023/08/15/Redis%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="donnçš„åšå®¢">
<meta property="og:description" content="Redis Object Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ Redis åŸºäºå†…å­˜ï¼Œå†…å­˜çš„è®¿é—®é€Ÿåº¦æ˜¯ç£ç›˜çš„ä¸Šåƒå€ï¼›  Redis åŸºäº Reactor æ¨¡å¼è®¾è®¡å¼€å‘äº†ä¸€å¥—é«˜æ•ˆçš„äº‹ä»¶å¤„ç†æ¨¡å‹ï¼Œä¸»è¦æ˜¯å•çº¿ç¨‹äº‹ä»¶å¾ªç¯å’Œ IO å¤šè·¯å¤ç”¨ï¼›  Redis å†…ç½®äº†å¤šç§ä¼˜åŒ–è¿‡åçš„æ•°æ®ç»“æ„å®ç°ï¼Œæ€§èƒ½éå¸¸é«˜ã€‚   Redisæ•°æ®ç»“æ„ï¼šâ€‹	redisçš„æ¯ä¸ªvalueåº•å±‚æ˜¯ç”± redisObjectæŒ‡å‘å…·ä½“çš„æ•°æ®ç»“æ„ redi">
<meta property="og:locale">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727134719639.png">
<meta property="article:published_time" content="2023-08-15T08:10:37.000Z">
<meta property="article:modified_time" content="2023-09-06T07:56:52.166Z">
<meta property="article:author" content="donn">
<meta property="article:tag" content="æ•°æ®åº“">
<meta property="article:tag" content="åŸç†å­¦ä¹ ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727134719639.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://tangjiayang.github.io/2023/08/15/Redis%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":30,"languages":{"author":"Author: donn","link":"Link: ","source":"Source: donnçš„åšå®¢","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'RedisåŸç†å­¦ä¹ ',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-06 15:56:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./img/bg.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">11</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> é“¾æ¥</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727134719639.png')"><nav id="nav"><span id="blog-info"><a href="/" title="donnçš„åšå®¢"><span class="site-name">donnçš„åšå®¢</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> é“¾æ¥</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">RedisåŸç†å­¦ä¹ </h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-08-15T08:10:37.000Z" title="Created 2023-08-15 16:10:37">2023-08-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-09-06T07:56:52.166Z" title="Updated 2023-09-06 15:56:52">2023-09-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3/">æ•°æ®åº“ç›¸å…³</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">1.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>6min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="RedisåŸç†å­¦ä¹ "><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>Redis Object</p>
<h3 id="Redis-ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ"><a href="#Redis-ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ" class="headerlink" title="Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ"></a>Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ</h3><ol>
<li><p>Redis åŸºäºå†…å­˜ï¼Œå†…å­˜çš„è®¿é—®é€Ÿåº¦æ˜¯ç£ç›˜çš„ä¸Šåƒå€ï¼›</p>
</li>
<li><p>Redis åŸºäº Reactor æ¨¡å¼è®¾è®¡å¼€å‘äº†ä¸€å¥—é«˜æ•ˆçš„äº‹ä»¶å¤„ç†æ¨¡å‹ï¼Œä¸»è¦æ˜¯å•çº¿ç¨‹äº‹ä»¶å¾ªç¯å’Œ IO å¤šè·¯å¤ç”¨ï¼›</p>
</li>
<li><p>Redis å†…ç½®äº†å¤šç§ä¼˜åŒ–è¿‡åçš„æ•°æ®ç»“æ„å®ç°ï¼Œæ€§èƒ½éå¸¸é«˜ã€‚</p>
</li>
</ol>
<h2 id="Redisæ•°æ®ç»“æ„ï¼š"><a href="#Redisæ•°æ®ç»“æ„ï¼š" class="headerlink" title="Redisæ•°æ®ç»“æ„ï¼š"></a>Redisæ•°æ®ç»“æ„ï¼š</h2><p>â€‹	redisçš„æ¯ä¸ªvalue<strong>åº•å±‚æ˜¯ç”± <code>redisObject</code>æŒ‡å‘å…·ä½“çš„æ•°æ®ç»“æ„</strong></p>
<h3 id="redisObjectç»“æ„ï¼š"><a href="#redisObjectç»“æ„ï¼š" class="headerlink" title="redisObjectç»“æ„ï¼š"></a>redisObjectç»“æ„ï¼š</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> LRU_BITS 24</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">redisObject</span> &#123;</span></span><br><span class="line">  <span class="type">unsigned</span> type:<span class="number">4</span>;</span><br><span class="line">  <span class="type">unsigned</span> encoding:<span class="number">4</span>;</span><br><span class="line">  <span class="type">unsigned</span> lru:LRU_BITS;</span><br><span class="line">  </span><br><span class="line">  <span class="type">int</span> refcount;</span><br><span class="line">  <span class="type">void</span> *ptr;</span><br><span class="line">&#125;robj;</span><br></pre></td></tr></table></figure>

<p><strong>type</strong>ï¼šæ˜¯å“ªç§Redliså¯¹è±¡</p>
<p><strong>encoding</strong> ï¼š è¡¨ç¤ºç”¨å“ªç§åº•å±‚ç¼–ç ï¼Œç”¨OBJECT ENCODING [key] å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ç¼–ç æ–¹å¼</p>
<p><strong>Iru</strong>ï¼šè®°å½•å¯¹è±¡è®¿é—®ä¿¡æ¯ï¼Œç”¨äºå†…å­˜æ·˜æ±°ã€‚</p>
<p><strong>refcount</strong>ï¼šå¼•ç”¨è®¡æ•°ï¼Œç”¨æ¥æè¿°æœ‰å¤šå°‘ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥å¯¹è±¡</p>
<p><strong>ptr</strong>ï¼šå†…å®¹æŒ‡é’ˆï¼ŒæŒ‡å‘å®é™…å†…å®¹</p>
<h4 id="ptræŒ‡å‘å„ç§æ•°æ®ç»“æ„å¯¹è±¡å†…å®¹"><a href="#ptræŒ‡å‘å„ç§æ•°æ®ç»“æ„å¯¹è±¡å†…å®¹" class="headerlink" title="*ptræŒ‡å‘å„ç§æ•°æ®ç»“æ„å¯¹è±¡å†…å®¹"></a>*ptræŒ‡å‘å„ç§æ•°æ®ç»“æ„å¯¹è±¡å†…å®¹</h4><ul>
<li><strong>5 ç§åŸºç¡€æ•°æ®ç»“æ„</strong>ï¼šStringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€Listï¼ˆåˆ—è¡¨ï¼‰ã€Setï¼ˆé›†åˆï¼‰ã€Hashï¼ˆæ•£åˆ—ï¼‰ã€Zsetï¼ˆæœ‰åºé›†åˆï¼‰</li>
</ul>
<h4 id="String"><a href="#String" class="headerlink" title="String"></a>String</h4><p>â€‹	<u>Stringæœ€å¤§ä¸º512MB</u></p>
<h5 id="Stringçš„ä¸‰ç§ç¼–ç æ–¹å¼ï¼š"><a href="#Stringçš„ä¸‰ç§ç¼–ç æ–¹å¼ï¼š" class="headerlink" title="Stringçš„ä¸‰ç§ç¼–ç æ–¹å¼ï¼š"></a>Stringçš„ä¸‰ç§ç¼–ç æ–¹å¼ï¼š</h5><h5 id="1-intï¼š"><a href="#1-intï¼š" class="headerlink" title="1. intï¼š"></a>1. intï¼š</h5><p>â€‹	å½“stringçš„valueæ‰§è¡Œè‡ªå¢ç­‰æ•°æ®æ“ä½œæ—¶ï¼Œä¼šè‡ªåŠ¨è½¬æ¢æˆintç±»å‹ã€‚</p>
<ul>
<li><u>intåªèƒ½å­˜æ•´æ•°ï¼Œå°æ•°ç­‰ä¼šä»¥å­—ç¬¦ä¸²å½¢å¼ä¿å­˜</u></li>
</ul>
<h5 id="2-embstrï¼š"><a href="#2-embstrï¼š" class="headerlink" title="2. embstrï¼š"></a>2. embstrï¼š</h5><p>â€‹	å½“å­—ç¬¦ä¸²é•¿åº¦ &lt;&#x3D; è®¾å®šé˜ˆå€¼å­—èŠ‚æ—¶ï¼Œä½¿ç”¨embstrç¼–ç </p>
<h5 id="3-rawï¼š"><a href="#3-rawï¼š" class="headerlink" title="3. rawï¼š"></a>3. rawï¼š</h5><p>â€‹	å½“å­—ç¬¦ä¸²é•¿åº¦ &gt; è®¾å®šé˜ˆå€¼å­—èŠ‚æ—¶ï¼Œä½¿ç”¨rawç¼–ç </p>
<p>Â· é˜ˆå€¼ï¼šredis3.2ä¹‹å‰ä¸º39å­—èŠ‚ï¼›redis3.2ä¹‹åä¸º44å­—èŠ‚</p>
<p>â“ä¸ºä»€ä¹ˆé˜ˆå€¼æ˜¯44Bï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Redisæ˜¯ä½¿ç”¨jemallocå†…å­˜åˆ†é…å™¨ï¼ŒRedisä»¥64å­—èŠ‚ä¸ºé˜ˆå€¼åŒºåˆ†å¤§å°å­—ç¬¦ä¸²ã€‚æ‰€ä»¥EMBSTRçš„è¾¹ç•Œæ•°å€¼ï¼Œå…¶å®æ˜¯å—64è¿™ä¸ªé˜ˆå€¼å½±å“ã€‚rediså¯¹è±¡å ç”¨çš„å†…å­˜å¤§å°ç”±redisObjectå’Œsdshdrè¿™ä¸¤éƒ¨åˆ†ç»„æˆï¼ŒredisObject 16å­—èŠ‚ï¼Œsdshdrä¸­å·²åˆ†é…ã€å·²ç”³è¯·ã€æ ‡è®°ä¸‰ä¸ªå­—æ®µå›ºå®šå äº†3ä¸ªå­—èŠ‚ï¼Œ&#x27;\0&#x27;å äº†ä¸€ä¸ªå­—èŠ‚ï¼Œ</span><br><span class="line">èƒ½å­˜æ”¾çš„æ•°æ®å°±æ˜¯ 64- (16+4ï¼‰ = 44 B</span><br></pre></td></tr></table></figure>





<h5 id="stringåº•å±‚æ„é€ ï¼š"><a href="#stringåº•å±‚æ„é€ ï¼š" class="headerlink" title="stringåº•å±‚æ„é€ ï¼š"></a>stringåº•å±‚æ„é€ ï¼š</h5><p>EMBSTRå’ŒRAWéƒ½æ˜¯ç”±redisObjectå’ŒSDSä¸¤ä¸ªç»“æ„ç»„æˆï¼Œå®ƒä»¬çš„å·®å¼‚åœ¨äºï¼š</p>
<ul>
<li>EMBSTRä¸‹redisObject å’Œ SDSæ˜¯è¿ç»­çš„å†…å­˜ï¼Œ</li>
<li>RAWç¼–ç ä¸‹redisObject å’Œ SDSçš„å†…å­˜æ˜¯åˆ†å¼€çš„ã€‚</li>
</ul>
<p>EMBSTRä¼˜ç‚¹æ˜¯redisObjectå’ŒSDSä¸¤ä¸ªç»“æ„å¯ä»¥ä¸€æ¬¡æ€§åˆ†é…ç©ºé—´ï¼Œç¼ºç‚¹åœ¨äºå¦‚æœé‡æ–°åˆ†é…ç©ºé—´ï¼Œæ•´ä½“éƒ½éœ€è¦å†åˆ†é…ï¼Œæ‰€ä»¥EMBSTRè®¾è®¡ä¸ºåªè¯»ï¼Œä»»ä½•å†™æ“ä½œä¹‹åEMBSTRéƒ½ä¼šå˜æˆRAWï¼Œç†å¿µæ˜¯å‘ç”Ÿè¿‡ä¿®æ”¹çš„å­—ç¬¦ä¸²é€šå¸¸ä¼šè®¤ä¸ºæ˜¯æ˜“å˜çš„ã€‚</p>
<p>éšç€æˆ‘ä»¬çš„æ“ä½œï¼Œç¼–ç å¯èƒ½ä¼šè½¬æ¢ï¼š</p>
<p>INT-&gt; RAWï¼š å½“å­˜çš„å†…å®¹ä¸å†æ˜¯æ•´æ•°ï¼Œæˆ–è€…å¤§å°è¶…è¿‡äº†longçš„æ—¶å€™ï¼›</p>
<p>EMBSTR-&gt;RAWï¼šä»»ä½•å†™æ“ä½œä¹‹åEMBSTRéƒ½ä¼šå˜æˆRAWï¼›</p>
<h5 id="SDSï¼š"><a href="#SDSï¼š" class="headerlink" title="SDSï¼š"></a>SDSï¼š</h5><p>ç”±äºåœ¨Cä¸­ï¼š</p>
<ol>
<li><p>è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦éœ€è¦éå†å­—ç¬¦ä¸²æ•°ç»„ï¼Œç›´åˆ°é‡åˆ° â€˜ \0 â€™ ,å› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºO(n)</p>
</li>
<li><p>å¯¹å­—ç¬¦ä¸²è¿›è¡Œå¢åˆ æ—¶ï¼Œéœ€è¦åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œé‡æ–°åˆ†é…å†…å­˜</p>
</li>
<li><p>éäºŒè¿›åˆ¶å®‰å…¨ â€”-ä¸å†ä»¥ â€˜\0â€™ ä½œä¸ºå­—ç¬¦ä¸²ç»“æŸåˆ¤æ–­æ ‡å‡†ï¼ŒäºŒè¿›åˆ¶å®‰å…¨ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å­˜å‚¨ä¸€äº›äºŒè¿›åˆ¶æ•°æ®ã€‚</p>
</li>
</ol>
<p>ç”±äºè·å–å­—ç¬¦ä¸²é•¿åº¦ã€ä¿®æ”¹å­—ç¬¦ä¸²å†…å®¹çš„æ“ä½œç†åº”é¢‘ç¹ï¼Œä¸ºäº†æå‡æ€§èƒ½ï¼Œåœ¨redisä¸­ï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªSDSçš„å­—ç¬¦ä¸²ç»“æ„ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> __<span class="title">attribute__</span> ((__<span class="title">packed__</span>)) <span class="title">sdshdr8</span> &#123;</span></span><br><span class="line">	<span class="type">uint8_t</span> len;</span><br><span class="line">	<span class="type">uint8_t</span> alloc;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> flags;</span><br><span class="line">	<span class="type">char</span> buf[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹	<strong>len</strong>ï¼šå­—ç¬¦ä¸²é•¿åº¦</p>
<p>â€‹	<strong>alloc</strong>ï¼šåˆ†é…å†…å­˜é•¿åº¦</p>
<p>â€‹	<strong>flags</strong>ï¼šè¡¨ç¤ºæ˜¯å“ªç§sdshdråˆ†ç±»ï¼Œæœ‰sdshdr8ã€sdshdr16ã€sdshdr32ã€sdshdr64ç­‰å¤šç§ç±»å‹ï¼Œå®ƒä»¬çš„åŒºåˆ«å°±æ˜¯å­—ç¬¦ä¸²æœ€å¤§é•¿åº¦çš„ä¸Šé™</p>
<p>â€‹	**buf[]**ï¼šå­˜æ•°æ®çš„charæ•°ç»„</p>
<p>è¿™æ ·ï¼Œå°±å¯ä»¥é€šè¿‡æŸ¥è¯¢lenï¼Œä»è€Œåœ¨O(1)çš„æ—¶é—´ä¸‹æŸ¥è¯¢å¾—stringçš„é•¿åº¦ï¼Œ</p>
<p>å¹¶ä¸”ï¼Œç”±äºæœ‰alloc - lenå¤§å°çš„é¢„ç•™ç©ºé—´ï¼Œå¯ä»¥ä¸ºåç»­è¿½åŠ æ•°æ®ç•™ä½™åœ°ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://javaguide.cn/database/redis/redis-data-structures-01.html">Redis 5 ç§åŸºæœ¬æ•°æ®ç»“æ„è¯¦è§£</a></p>
<h3 id="Redis-å­˜å‚¨å¯¹è±¡ä¿¡æ¯æ˜¯ç”¨-Hash-è¿˜æ˜¯-String"><a href="#Redis-å­˜å‚¨å¯¹è±¡ä¿¡æ¯æ˜¯ç”¨-Hash-è¿˜æ˜¯-String" class="headerlink" title="Redis å­˜å‚¨å¯¹è±¡ä¿¡æ¯æ˜¯ç”¨ Hash è¿˜æ˜¯ String"></a>Redis å­˜å‚¨å¯¹è±¡ä¿¡æ¯æ˜¯ç”¨ Hash è¿˜æ˜¯ String</h3><h4 id="Stringï¼š"><a href="#Stringï¼š" class="headerlink" title="Stringï¼š"></a>Stringï¼š</h4><p>ç”±äº Redis çš„å­—ç¬¦ä¸²æ˜¯åŠ¨æ€å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä¿®æ”¹ï¼Œå†…éƒ¨ç»“æ„ç±»ä¼¼äº Java çš„ ArrayListï¼Œé‡‡ç”¨é¢„åˆ†é…å†—ä½™ç©ºé—´çš„æ–¹å¼æ¥å‡å°‘å†…å­˜çš„é¢‘ç¹åˆ†é…ã€‚</p>
<p>å¦‚æœæ­¤æ—¶å°†æ­¤ç”¨æˆ·ä¿¡æ¯çš„æŸä¸ªå±æ€§å€¼ä¿®æ”¹ï¼Œå†å­˜åˆ° Redis ä¸­ï¼ŒRedis æ˜¯ä¸éœ€è¦é‡æ–°åˆ†é…ç©ºé—´çš„</p>
<p>â€‹	</p>
<h4 id="Hashï¼š"><a href="#Hashï¼š" class="headerlink" title="Hashï¼š"></a>Hashï¼š</h4><p>Hash ç»“æ„ä¹Ÿå¯ä»¥å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œä¸è¿‡æ˜¯<u>å¯¹æ¯ä¸ªå­—æ®µå•ç‹¬å­˜å‚¨ï¼Œå› æ­¤å¯ä»¥åœ¨æŸ¥è¯¢æ—¶è·å–éƒ¨åˆ†å­—æ®µçš„ä¿¡æ¯ï¼ŒèŠ‚çœç½‘ç»œæµé‡</u>ã€‚</p>
<p>but å¤„ç†ç±»ä¸­å±æ€§ä¸ºåˆ«çš„å¼•ç”¨å¯¹è±¡çš„åµŒå¥—çš„æƒ…å†µæ—¶æ¯”è¾ƒå¤æ‚ã€‚</p>
<h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><p>å»ºè®®æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½¿ç”¨ String å­˜å‚¨å°±å¥½ï¼Œæ¯•ç«Ÿåœ¨å­˜å‚¨å…·æœ‰å¤šå±‚åµŒå¥—çš„å¯¹è±¡æ—¶æ–¹ä¾¿å¾ˆå¤šï¼Œå ç”¨çš„ç©ºé—´ä¹Ÿæ¯” Hash å°ã€‚å½“æˆ‘ä»¬éœ€è¦å­˜å‚¨ä¸€ä¸ªç‰¹åˆ«å¤§çš„å¯¹è±¡æ—¶ï¼Œè€Œä¸”åœ¨å¤§å¤šæ•°æƒ…å†µä¸­åªéœ€è¦è®¿é—®è¯¥å¯¹è±¡å°‘é‡çš„å­—æ®µæ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Hashã€‚</p>
<h3 id="RDBä¸AOF"><a href="#RDBä¸AOF" class="headerlink" title="RDBä¸AOF"></a>RDBä¸AOF</h3><p>RDBä¸ºå¿«ç…§</p>
<p>AOFè®°å½•æ¯æ¡æŒ‡ä»¤</p>
<ul>
<li>Redis ä¿å­˜çš„æ•°æ®ä¸¢å¤±ä¸€äº›ä¹Ÿæ²¡ä»€ä¹ˆå½±å“çš„è¯ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ RDBã€‚</li>
<li>ä¸å»ºè®®å•ç‹¬ä½¿ç”¨ AOFï¼Œå› ä¸ºæ—¶ä¸æ—¶åœ°åˆ›å»ºä¸€ä¸ª RDB å¿«ç…§å¯ä»¥è¿›è¡Œæ•°æ®åº“å¤‡ä»½ã€æ›´å¿«çš„é‡å¯ä»¥åŠè§£å†³ AOF å¼•æ“é”™è¯¯ã€‚</li>
<li>å¦‚æœä¿å­˜çš„æ•°æ®è¦æ±‚å®‰å…¨æ€§æ¯”è¾ƒé«˜çš„è¯ï¼Œå»ºè®®åŒæ—¶å¼€å¯ RDB å’Œ AOF æŒä¹…åŒ–æˆ–è€…å¼€å¯ RDB å’Œ AOF æ··åˆæŒä¹…åŒ–ã€‚</li>
</ul>
<h3 id="Redisé˜»å¡çš„åŸå› ï¼š"><a href="#Redisé˜»å¡çš„åŸå› ï¼š" class="headerlink" title="Redisé˜»å¡çš„åŸå› ï¼š"></a>Redisé˜»å¡çš„åŸå› ï¼š</h3><ol>
<li><p>æ‰§è¡Œæ—¶é—´å¤æ‚åº¦ O(n)ä»¥ä¸Šçš„å‘½ä»¤ï¼Œå¦‚ï¼š</p>
<ul>
<li><p>KEYS *ï¼šä¼šè¿”å›æ‰€æœ‰ç¬¦åˆè§„åˆ™çš„ keyã€‚</p>
</li>
<li><p>HGETALLï¼šä¼šè¿”å›ä¸€ä¸ª Hash ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹ã€‚</p>
</li>
<li><p>LRANGEï¼šä¼šè¿”å› List ä¸­æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚</p>
</li>
<li><p>SMEMBERSï¼šè¿”å› Set ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
</li>
<li><p>SINTER&#x2F;SUNION&#x2F;SDIFFï¼šè®¡ç®—å¤šä¸ª Set çš„äº¤é›†&#x2F;å¹¶é›†&#x2F;å·®é›†ã€‚</p>
</li>
</ul>
</li>
<li><p>ä½¿ç”¨saveå‘½ä»¤ç”ŸæˆRDBå¿«ç…§</p>
<ul>
<li><code>save</code> : åŒæ­¥ä¿å­˜æ“ä½œï¼Œä¼šé˜»å¡ Redis ä¸»çº¿ç¨‹ï¼›</li>
<li><code>bgsave</code> : fork å‡ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ Redis ä¸»çº¿ç¨‹ï¼Œ<strong>é»˜è®¤é€‰é¡¹</strong>ã€‚</li>
</ul>
</li>
<li><p>AOFé˜»å¡</p>
<ol>
<li><p>æ—¥å¿—è®°å½•é˜»å¡ï¼š</p>
<ul>
<li>å› ä¸ºAOF è®°å½•æ—¥å¿—æ˜¯åœ¨ Redis ä¸»çº¿ç¨‹ä¸­è¿›è¡Œ</li>
</ul>
</li>
<li><p>åˆ·ç›˜é˜»å¡ï¼š</p>
<ul>
<li>AOFæ—¥å¿—ä» AOFç¼“å†²åŒº-&gt;å†…æ ¸ç¼“å†²åŒºæ—¶ï¼Œéœ€è¦è°ƒç”¨writeå‡½æ•°ï¼Œ(ä¸»çº¿ç¨‹è°ƒç”¨ <code>write</code> å‡½æ•°æ—¶ä¹Ÿä¼šè¢«é˜»å¡)</li>
</ul>
</li>
<li><p>AOFé‡å†™é˜»å¡ï¼š</p>
<ul>
<li>fork å‡ºä¸€æ¡å­çº¿ç¨‹æ¥å°†æ–‡ä»¶é‡å†™ï¼Œåœ¨æ‰§è¡Œ <code>BGREWRITEAOF</code> å‘½ä»¤æ—¶ï¼ŒRedis æœåŠ¡å™¨ä¼šç»´æŠ¤ä¸€ä¸ª AOF é‡å†™ç¼“å†²åŒºï¼Œè¯¥ç¼“å†²åŒºä¼šåœ¨å­çº¿ç¨‹åˆ›å»ºæ–° AOF æ–‡ä»¶æœŸé—´ï¼Œè®°å½•æœåŠ¡å™¨æ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ã€‚</li>
<li>å½“å­çº¿ç¨‹å®Œæˆåˆ›å»ºæ–° AOF æ–‡ä»¶çš„å·¥ä½œä¹‹åï¼ŒæœåŠ¡å™¨ä¼šå°†é‡å†™ç¼“å†²åŒºä¸­çš„æ‰€æœ‰å†…å®¹è¿½åŠ åˆ°æ–° AOF æ–‡ä»¶çš„æœ«å°¾ï¼Œä½¿å¾—æ–°çš„ AOF æ–‡ä»¶ä¿å­˜çš„æ•°æ®åº“çŠ¶æ€ä¸ç°æœ‰çš„æ•°æ®åº“çŠ¶æ€ä¸€è‡´ã€‚</li>
<li>æœ€åï¼ŒæœåŠ¡å™¨ç”¨æ–°çš„ AOF æ–‡ä»¶æ›¿æ¢æ—§çš„ AOF æ–‡ä»¶ï¼Œä»¥æ­¤æ¥å®Œæˆ AOF æ–‡ä»¶é‡å†™æ“ä½œã€‚</li>
</ul>
<p>é˜»å¡å°±æ˜¯å‡ºç°åœ¨ç¬¬ 2 æ­¥çš„è¿‡ç¨‹ä¸­ï¼Œå°†ç¼“å†²åŒºä¸­æ–°æ•°æ®å†™åˆ°æ–°æ–‡ä»¶çš„è¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿ<strong>é˜»å¡</strong>ã€‚</p>
</li>
</ol>
</li>
<li><p>å¤§Key</p>
</li>
</ol>
<ul>
<li>å®¢æˆ·ç«¯è¶…æ—¶é˜»å¡ï¼šç”±äº Redis æ‰§è¡Œå‘½ä»¤æ˜¯å•çº¿ç¨‹å¤„ç†ï¼Œç„¶ååœ¨æ“ä½œå¤§ key æ—¶ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œé‚£ä¹ˆå°±ä¼šé˜»å¡ Redisï¼Œä»å®¢æˆ·ç«¯è¿™ä¸€è§†è§’çœ‹ï¼Œå°±æ˜¯å¾ˆä¹…å¾ˆä¹…éƒ½æ²¡æœ‰å“åº”ã€‚</li>
<li>å¼•å‘ç½‘ç»œé˜»å¡ï¼šæ¯æ¬¡è·å–å¤§ key äº§ç”Ÿçš„ç½‘ç»œæµé‡è¾ƒå¤§ï¼Œå¦‚æœä¸€ä¸ª key çš„å¤§å°æ˜¯ 1 MBï¼Œæ¯ç§’è®¿é—®é‡ä¸º 1000ï¼Œé‚£ä¹ˆæ¯ç§’ä¼šäº§ç”Ÿ 1000MB çš„æµé‡ï¼Œè¿™å¯¹äºæ™®é€šåƒå…†ç½‘å¡çš„æœåŠ¡å™¨æ¥è¯´æ˜¯ç¾éš¾æ€§çš„ã€‚</li>
<li>é˜»å¡å·¥ä½œçº¿ç¨‹ï¼šå¦‚æœä½¿ç”¨ del åˆ é™¤å¤§ key æ—¶ï¼Œä¼šé˜»å¡å·¥ä½œçº¿ç¨‹ï¼Œè¿™æ ·å°±æ²¡åŠæ³•å¤„ç†åç»­çš„å‘½ä»¤ã€‚</li>
</ul>
<ol start="5">
<li><p>æ¸…ç©ºæ•°æ®åº“</p>
</li>
<li><p>é›†ç¾¤æ‰©å®¹</p>
</li>
<li><p>å†…å­˜äº¤æ¢</p>
</li>
<li><p>CPUç«äº‰</p>
</li>
<li><p>ç½‘ç»œå»¶è¿Ÿ</p>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://javaguide.cn/database/redis/redis-common-blocking-problems-summary.html#aof-%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%E9%98%BB%E5%A1%9E">æœ¬æ–‡å‚è€ƒäº†javaguide Redisç›¸å…³éƒ¨åˆ†ï¼Œæ­¤å¤„ä¸ºåŸæ–‡è¿æ¥</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://Tangjiayang.github.io">donn</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://tangjiayang.github.io/2023/08/15/Redis%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/">https://tangjiayang.github.io/2023/08/15/Redis%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a><a class="post-meta__tags" href="/tags/%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/">åŸç†å­¦ä¹ </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727134719639.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> Donate</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/09/09/MySQL%E9%AB%98%E5%8F%AF%E7%94%A8/" title="MySQLé«˜å¯ç”¨"><img class="cover" src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727223615031.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">MySQLé«˜å¯ç”¨</div></div></a></div><div class="next-post pull-right"><a href="/2023/08/10/java%E5%9F%BA%E7%A1%80%E5%A4%8D%E4%B9%A0/" title="javaåŸºç¡€å¤ä¹ "><img class="cover" src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230810141014749.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">javaåŸºç¡€å¤ä¹ </div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2023/07/27/MySQL%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/" title="MySQLåŸç†å­¦ä¹ "><img class="cover" src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727223615031.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-27</div><div class="title">MySQLåŸç†å­¦ä¹ </div></div></a></div><div><a href="/2023/06/02/MyBatis-Plus/" title="MyBatis-Plus"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-02</div><div class="title">MyBatis-Plus</div></div></a></div><div><a href="/2023/06/02/Redis/" title="Redis"><img class="cover" src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727134719639.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-02</div><div class="title">Redis</div></div></a></div><div><a href="/2023/09/09/MySQL%E9%AB%98%E5%8F%AF%E7%94%A8/" title="MySQLé«˜å¯ç”¨"><img class="cover" src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727223615031.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-09</div><div class="title">MySQLé«˜å¯ç”¨</div></div></a></div><div><a href="/2023/05/26/java%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/" title="javaåŸç†å­¦ä¹ "><img class="cover" src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230810141014749.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-26</div><div class="title">javaåŸç†å­¦ä¹ </div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81ODUzNy8zNTAwMA=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./img/bg.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">donn</div><div class="author-info__description">æ¬¢è¿è®¿é—®donnçš„åšå®¢!</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Tangjiayang"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Tangjiayang" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:xxxxxx@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">å°ç«™æˆç«‹äº2023-5-27ï¼</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E4%B9%88%E5%BF%AB%EF%BC%9F"><span class="toc-text">Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="toc-text">Redisæ•°æ®ç»“æ„ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#redisObject%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="toc-text">redisObjectç»“æ„ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ptr%E6%8C%87%E5%90%91%E5%90%84%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AF%B9%E8%B1%A1%E5%86%85%E5%AE%B9"><span class="toc-text">*ptræŒ‡å‘å„ç§æ•°æ®ç»“æ„å¯¹è±¡å†…å®¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#String"><span class="toc-text">String</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#String%E7%9A%84%E4%B8%89%E7%A7%8D%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-text">Stringçš„ä¸‰ç§ç¼–ç æ–¹å¼ï¼š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-int%EF%BC%9A"><span class="toc-text">1. intï¼š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-embstr%EF%BC%9A"><span class="toc-text">2. embstrï¼š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-raw%EF%BC%9A"><span class="toc-text">3. rawï¼š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#string%E5%BA%95%E5%B1%82%E6%9E%84%E9%80%A0%EF%BC%9A"><span class="toc-text">stringåº•å±‚æ„é€ ï¼š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SDS%EF%BC%9A"><span class="toc-text">SDSï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis-%E5%AD%98%E5%82%A8%E5%AF%B9%E8%B1%A1%E4%BF%A1%E6%81%AF%E6%98%AF%E7%94%A8-Hash-%E8%BF%98%E6%98%AF-String"><span class="toc-text">Redis å­˜å‚¨å¯¹è±¡ä¿¡æ¯æ˜¯ç”¨ Hash è¿˜æ˜¯ String</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#String%EF%BC%9A"><span class="toc-text">Stringï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hash%EF%BC%9A"><span class="toc-text">Hashï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-text">æ€»ç»“ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RDB%E4%B8%8EAOF"><span class="toc-text">RDBä¸AOF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis%E9%98%BB%E5%A1%9E%E7%9A%84%E5%8E%9F%E5%9B%A0%EF%BC%9A"><span class="toc-text">Redisé˜»å¡çš„åŸå› ï¼š</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/09/09/MySQL%E9%AB%98%E5%8F%AF%E7%94%A8/" title="MySQLé«˜å¯ç”¨"><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727223615031.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQLé«˜å¯ç”¨"/></a><div class="content"><a class="title" href="/2023/09/09/MySQL%E9%AB%98%E5%8F%AF%E7%94%A8/" title="MySQLé«˜å¯ç”¨">MySQLé«˜å¯ç”¨</a><time datetime="2023-09-09T08:30:38.000Z" title="Created 2023-09-09 16:30:38">2023-09-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/15/Redis%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/" title="RedisåŸç†å­¦ä¹ "><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727134719639.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RedisåŸç†å­¦ä¹ "/></a><div class="content"><a class="title" href="/2023/08/15/Redis%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/" title="RedisåŸç†å­¦ä¹ ">RedisåŸç†å­¦ä¹ </a><time datetime="2023-08-15T08:10:37.000Z" title="Created 2023-08-15 16:10:37">2023-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/10/java%E5%9F%BA%E7%A1%80%E5%A4%8D%E4%B9%A0/" title="javaåŸºç¡€å¤ä¹ "><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230810141014749.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="javaåŸºç¡€å¤ä¹ "/></a><div class="content"><a class="title" href="/2023/08/10/java%E5%9F%BA%E7%A1%80%E5%A4%8D%E4%B9%A0/" title="javaåŸºç¡€å¤ä¹ ">javaåŸºç¡€å¤ä¹ </a><time datetime="2023-08-10T06:08:10.000Z" title="Created 2023-08-10 14:08:10">2023-08-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="è®¡ç®—æœºç½‘ç»œ"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="è®¡ç®—æœºç½‘ç»œ"/></a><div class="content"><a class="title" href="/2023/07/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" title="è®¡ç®—æœºç½‘ç»œ">è®¡ç®—æœºç½‘ç»œ</a><time datetime="2023-07-27T14:37:02.000Z" title="Created 2023-07-27 22:37:02">2023-07-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/27/MySQL%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/" title="MySQLåŸç†å­¦ä¹ "><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727223615031.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQLåŸç†å­¦ä¹ "/></a><div class="content"><a class="title" href="/2023/07/27/MySQL%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0/" title="MySQLåŸç†å­¦ä¹ ">MySQLåŸç†å­¦ä¹ </a><time datetime="2023-07-27T14:32:58.000Z" title="Created 2023-07-27 22:32:58">2023-07-27</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230727134719639.png')"><div id="footer-wrap"><div class="copyright">&copy;2023 By donn</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">å¾ˆé«˜å…´è®¤è¯†ä½ ğŸ¤ª</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>