<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>APIæ¥å£å¼€æ”¾å¹³å°</title>
      <link href="/2023/07/11/API%E6%8E%A5%E5%8F%A3%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/"/>
      <url>/2023/07/11/API%E6%8E%A5%E5%8F%A3%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="APIå¼€æ”¾å¹³å°"><a href="#APIå¼€æ”¾å¹³å°" class="headerlink" title="APIå¼€æ”¾å¹³å°"></a>APIå¼€æ”¾å¹³å°</h1><p>èƒŒæ™¯ï¼š</p><ol><li><p>å‰ç«¯å¼€å‘éœ€è¦ç”¨åˆ°åå°æ¥å£</p></li><li><p>ä½¿ç”¨ç°æˆçš„ç³»ç»Ÿçš„åŠŸèƒ½</p></li></ol><p>åšä¸€ä¸ªAPIæ¥å£å¹³å°ï¼š</p><ol><li>é˜²æ­¢æ”»å‡»(å®‰å…¨æ€§)</li><li>ä¸èƒ½éšä¾¿è°ƒç”¨(é™åˆ¶ã€å¼€é€š)</li><li>ç»Ÿè®¡è°ƒç”¨æ¬¡æ•°</li><li>è®¡è´¹</li><li>æµé‡ä¿æŠ¤</li><li>APIæ¥å…¥</li></ol><h4 id="é¡¹ç›®ä»‹ç»"><a href="#é¡¹ç›®ä»‹ç»" class="headerlink" title="é¡¹ç›®ä»‹ç»"></a>é¡¹ç›®ä»‹ç»</h4><p>åšä¸€ä¸ªæä¾›APIæ¥å£è°ƒç”¨çš„å¹³å°ï¼š</p><ul><li><p>ç”¨æˆ·å¯ä»¥æ³¨å†Œç™»å½•ï¼Œå¼€é€šæ¥å£è°ƒç”¨æƒé™ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨æ¥å£ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨ä¼šè¿›è¡Œç»Ÿè®¡ã€‚</p></li><li><p>ç®¡ç†å‘˜å¯ä»¥å‘å¸ƒæ¥å£ã€ä¸‹çº¿æ¥å£ã€æ¥å…¥æ¥å£ï¼Œä»¥åŠå¯è§†åŒ–æ¥å£çš„è°ƒç”¨æƒ…å†µã€æ•°æ®ã€‚</p></li></ul><h4 id="ä¸šåŠ¡æµç¨‹"><a href="#ä¸šåŠ¡æµç¨‹" class="headerlink" title="ä¸šåŠ¡æµç¨‹"></a>ä¸šåŠ¡æµç¨‹</h4><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711194146565.png" alt="image-20230711194146565"></p><h4 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h4><h5 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h5><p>Ant Design Pro</p><p>React</p><p>Ant Design Procomponents</p><p>Umi</p><p>Umi Request(Axiosçš„å°è£…)</p><h5 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h5><p>Spring Boot</p><p>Spring Boot Starter(SDKå¼€å‘)</p><p>ï¼Ÿï¼Ÿï¼Ÿ(ç½‘å…³ã€é™æµã€æ—¥å¿—å®ç°)</p><h4 id="é¡¹ç›®è®¡åˆ’"><a href="#é¡¹ç›®è®¡åˆ’" class="headerlink" title="é¡¹ç›®è®¡åˆ’"></a>é¡¹ç›®è®¡åˆ’</h4><h5 id="1â€”â€”åˆå§‹åŒ–å’Œå±•ç¤º"><a href="#1â€”â€”åˆå§‹åŒ–å’Œå±•ç¤º" class="headerlink" title="1â€”â€”åˆå§‹åŒ–å’Œå±•ç¤º"></a>1â€”â€”åˆå§‹åŒ–å’Œå±•ç¤º</h5><p>é¡¹ç›®ä»‹ç»ã€è®¾è®¡ã€æŠ€æœ¯é€‰å‹</p><p>åŸºç¡€é¡¹ç›®çš„æ­å»º</p><p>æ¥å£ç®¡ç†</p><p>ç”¨æˆ·æŸ¥çœ‹æ¥å£</p><h5 id="2â€”â€”æ¥å£è°ƒç”¨"><a href="#2â€”â€”æ¥å£è°ƒç”¨" class="headerlink" title="2â€”â€”æ¥å£è°ƒç”¨"></a>2â€”â€”æ¥å£è°ƒç”¨</h5><p>æ¥å£è°ƒç”¨</p><p>æ¥å£æ–‡æ¡£å±•ç¤ºã€æ¥å£åœ¨çº¿è°ƒç”¨</p><p>ä¿è¯è°ƒç”¨çš„å®‰å…¨æ€§(<strong>APIç­¾åè®¤è¯</strong>)</p><p>å®¢æˆ·ç«¯SDKçš„å¼€å‘</p><h5 id="3â€”â€”æ¥å£è®¡è´¹ä¸ä¿æŠ¤"><a href="#3â€”â€”æ¥å£è®¡è´¹ä¸ä¿æŠ¤" class="headerlink" title="3â€”â€”æ¥å£è®¡è´¹ä¸ä¿æŠ¤"></a>3â€”â€”æ¥å£è®¡è´¹ä¸ä¿æŠ¤</h5><p>ç»Ÿè®¡ç”¨æˆ·è°ƒç”¨æ¬¡æ•°</p><p>é™æµ</p><p>è®¡è´¹</p><p>æ—¥å¿—</p><p>å¼€é€š</p><h5 id="4â€”â€”ç®¡ç†ã€ç»Ÿè®¡åˆ†æ"><a href="#4â€”â€”ç®¡ç†ã€ç»Ÿè®¡åˆ†æ" class="headerlink" title="4â€”â€”ç®¡ç†ã€ç»Ÿè®¡åˆ†æ"></a>4â€”â€”ç®¡ç†ã€ç»Ÿè®¡åˆ†æ</h5><p>æä¾›å¯è§†åŒ–å¹³å°ï¼Œç”¨å›¾è¡¨çš„æ–¹å¼å±•ç¤ºæ‰€æœ‰çš„è°ƒç”¨æƒ…å†µï¼Œä¾¿äºè°ƒæ•´ä¸šåŠ¡</p><p><strong>é¢„è­¦</strong></p><h4 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h4><ol><li>ç®¡ç†å‘˜å¯ä»¥å¯¹æ¥å£ä¿¡æ¯è¿›è¡Œå¢åˆ æ”¹æŸ¥</li><li>ç”¨æˆ·å¯ä»¥è®¿é—®å‰å°ï¼ŒæŸ¥çœ‹æ¥å£ä¿¡æ¯</li></ol><h4 id="æ•°æ®åº“è¡¨è®¾è®¡"><a href="#æ•°æ®åº“è¡¨è®¾è®¡" class="headerlink" title="æ•°æ®åº“è¡¨è®¾è®¡"></a>æ•°æ®åº“è¡¨è®¾è®¡</h4><h5 id="æ¥å£ä¿¡æ¯è¡¨"><a href="#æ¥å£ä¿¡æ¯è¡¨" class="headerlink" title="æ¥å£ä¿¡æ¯è¡¨"></a>æ¥å£ä¿¡æ¯è¡¨</h5><p>id</p><p>name æ¥å£åç§°</p><p>description  æè¿°</p><p>url æ¥å£åœ°å€</p><p>typeè¯·æ±‚ç±»å‹</p><p>requestHeaderè¯·æ±‚å¤´</p><p>responseHeader  å“åº”å¤´</p><p>status æ¥å£çŠ¶æ€ 0-å…³é—­ 1-å¼€å¯</p><p>isDelete</p><p>createTime</p><p>updateTime</p><p>isDelete</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">use tjyapi;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ¥å£ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> tjyapi.`interface_info`</span><br><span class="line">(</span><br><span class="line">    `id` <span class="type">bigint</span> <span class="keyword">not</span> <span class="keyword">null</span> auto_increment comment <span class="string">&#x27;ä¸»é”®&#x27;</span> <span class="keyword">primary</span> key,</span><br><span class="line">    `name` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ¥å£åç§°&#x27;</span>,</span><br><span class="line">    `description` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">null</span> comment <span class="string">&#x27;æè¿°&#x27;</span>,</span><br><span class="line">    `url` <span class="type">varchar</span>(<span class="number">512</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ¥å£åœ°å€&#x27;</span>,</span><br><span class="line">    `requestHeader` text <span class="keyword">null</span> comment <span class="string">&#x27;è¯·æ±‚å¤´&#x27;</span>,</span><br><span class="line">    `responseHeader` text <span class="keyword">null</span> comment <span class="string">&#x27;å“åº”å¤´&#x27;</span>,</span><br><span class="line">    `status` <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ¥å£çŠ¶æ€ 0-å…³é—­ 1-å¼€å¯&#x27;</span>,</span><br><span class="line">    `<span class="keyword">method</span>` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ¥å£ç±»å‹&#x27;</span>,</span><br><span class="line">    `userId` <span class="type">bigint</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºäºº&#x27;</span>,</span><br><span class="line">    `createTime` datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">    `updateTime` datetime <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="built_in">CURRENT_TIMESTAMP</span> comment <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">    `isDelete` tinyint <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;æ˜¯å¦åˆ é™¤ 1-å·²åˆ &#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;æ¥å£ä¿¡æ¯&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;å”æœ&#x27;</span>, <span class="string">&#x27;æ±Ÿèƒ¤ç¥¥&#x27;</span>, <span class="string">&#x27;www.hui-russel.net&#x27;</span>, <span class="string">&#x27;7IE&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;å§œçƒ¨ç£Š&#x27;</span>, <span class="number">7</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;èŒƒæµ©&#x27;</span>, <span class="string">&#x27;å´”æŒ¯å®¶&#x27;</span>, <span class="string">&#x27;www.peter-schmeler.info&#x27;</span>, <span class="string">&#x27;Pj0&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;é»„é’°è½©&#x27;</span>, <span class="number">12857921</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;å”èˆª&#x27;</span>, <span class="string">&#x27;å­”å¥é›„&#x27;</span>, <span class="string">&#x27;www.tanner-bednar.name&#x27;</span>, <span class="string">&#x27;Hi9QM&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;å®‹æ˜Šç„¶&#x27;</span>, <span class="number">18787</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;è¢å­é»˜&#x27;</span>, <span class="string">&#x27;çŸ³æ˜æ°&#x27;</span>, <span class="string">&#x27;www.mitsuko-zboncak.net&#x27;</span>, <span class="string">&#x27;4q&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;å‘¨æ¶›&#x27;</span>, <span class="number">954194648</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;æœ±åšæ¶›&#x27;</span>, <span class="string">&#x27;ç§¦æ˜Šç„±&#x27;</span>, <span class="string">&#x27;www.rey-ondricka.biz&#x27;</span>, <span class="string">&#x27;GhO&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;ç‹ç‘¾ç‘œ&#x27;</span>, <span class="number">43144</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;é™†ç»é½&#x27;</span>, <span class="string">&#x27;æ›¹é¸¿æ¶›&#x27;</span>, <span class="string">&#x27;www.cathleen-gusikowski.org&#x27;</span>, <span class="string">&#x27;pP0Z&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;å°¹ä¹é©¹&#x27;</span>, <span class="number">23494</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;å°¹æ€èª&#x27;</span>, <span class="string">&#x27;è´ºé’°è½©&#x27;</span>, <span class="string">&#x27;www.jeni-bartell.co&#x27;</span>, <span class="string">&#x27;ZZdsp&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;å†¯æœ&#x27;</span>, <span class="number">25646340</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;å´”é’°è½©&#x27;</span>, <span class="string">&#x27;å†¯ç† å½¤&#x27;</span>, <span class="string">&#x27;www.timothy-legros.org&#x27;</span>, <span class="string">&#x27;Qr&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;é¾™ä¹é©¹&#x27;</span>, <span class="number">275486388</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;é©¬å­éª&#x27;</span>, <span class="string">&#x27;é‚¹æ™‹é¹&#x27;</span>, <span class="string">&#x27;www.tori-wisoky.io&#x27;</span>, <span class="string">&#x27;cwVv&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;ç†Šä¿Šé©°&#x27;</span>, <span class="number">9055718270</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;æå˜‰æ‡¿&#x27;</span>, <span class="string">&#x27;æ¯›å¼˜æ–‡&#x27;</span>, <span class="string">&#x27;www.tawna-murazik.info&#x27;</span>, <span class="string">&#x27;d8H&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;é’Ÿé–çª&#x27;</span>, <span class="number">596652</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;é¾šç»é½&#x27;</span>, <span class="string">&#x27;å´”ä¼Ÿç¥º&#x27;</span>, <span class="string">&#x27;www.bart-dare.biz&#x27;</span>, <span class="string">&#x27;VM&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;é™†ä¹é©¹&#x27;</span>, <span class="number">720475</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;ä¸¥ç† å½¤&#x27;</span>, <span class="string">&#x27;è®¸ç‚«æ˜&#x27;</span>, <span class="string">&#x27;www.lane-schoen.com&#x27;</span>, <span class="string">&#x27;pc05M&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;ä½™å¥é›„&#x27;</span>, <span class="number">481356844</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;é‚µå‡¯ç‘&#x27;</span>, <span class="string">&#x27;éƒ­æ™ºæ¸Š&#x27;</span>, <span class="string">&#x27;www.von-rempel.org&#x27;</span>, <span class="string">&#x27;FSiqa&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;é¾™åšè¶…&#x27;</span>, <span class="number">1368599</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;èµ–æœ&#x27;</span>, <span class="string">&#x27;æ¨å¤©å®‡&#x27;</span>, <span class="string">&#x27;www.kourtney-lubowitz.name&#x27;</span>, <span class="string">&#x27;3C&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;éŸ©ä¿®æ°&#x27;</span>, <span class="number">6026675</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;æ®µæµ©å®‡&#x27;</span>, <span class="string">&#x27;éŸ©é¸¿æ¶›&#x27;</span>, <span class="string">&#x27;www.rupert-schmeler.co&#x27;</span>, <span class="string">&#x27;mMo&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;é­è¿œèˆª&#x27;</span>, <span class="number">76</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;æ²ˆç‚å½¬&#x27;</span>, <span class="string">&#x27;å¼ æ˜Šå¤©&#x27;</span>, <span class="string">&#x27;www.sheri-kerluke.co&#x27;</span>, <span class="string">&#x27;adMn1&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;è–›æ˜&#x27;</span>, <span class="number">3551</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;é«˜é»æ˜•&#x27;</span>, <span class="string">&#x27;è°¢å¿—æ³½&#x27;</span>, <span class="string">&#x27;www.sterling-adams.org&#x27;</span>, <span class="string">&#x27;baP&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;é‡‘æ˜å“²&#x27;</span>, <span class="number">91</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;èƒ¡è¯­å ‚&#x27;</span>, <span class="string">&#x27;è¦ƒæµ©ç„¶&#x27;</span>, <span class="string">&#x27;www.khalilah-breitenberg.biz&#x27;</span>, <span class="string">&#x27;gDtv&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;é›·ç¿æ¸Š&#x27;</span>, <span class="number">21221843</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;é™†é›¨æ³½&#x27;</span>, <span class="string">&#x27;æ›¾é›ªæ¾&#x27;</span>, <span class="string">&#x27;www.jonas-fritsch.co&#x27;</span>, <span class="string">&#x27;XvfU&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;ä¾¯æ™ºæ¸Š&#x27;</span>, <span class="number">472525914</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tjyapi.`interface_info` (`name`, `description`, `url`, `responseHeader`, `status`, `<span class="keyword">method</span>`, `userId`, `isDelete`) <span class="keyword">values</span> (<span class="string">&#x27;é‚“æ˜Šç„±&#x27;</span>, <span class="string">&#x27;ç§¦èƒ¤ç¥¥&#x27;</span>, <span class="string">&#x27;www.aron-buckridge.com&#x27;</span>, <span class="string">&#x27;fBh3&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;ä¸å­é»˜&#x27;</span>, <span class="number">12000</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®è„šæ‰‹æ¶"><a href="#é¡¹ç›®è„šæ‰‹æ¶" class="headerlink" title="é¡¹ç›®è„šæ‰‹æ¶"></a>é¡¹ç›®è„šæ‰‹æ¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. åœ¨ç»ˆç«¯è¿è¡Œ</span><br><span class="line">npm i @ant-design/pro-cli -g</span><br><span class="line">2. è¿›å…¥ä½ æ”¾çš„ç›®å½•çš„ç»ˆç«¯ï¼Œè‡ªåŠ¨åˆ›å»ºé¡¹ç›®</span><br><span class="line">pro create é¡¹ç›®åç§°</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç‰ˆæœ¬ä¿¡æ¯ï¼š</span><br><span class="line">donn@Macc ~ % node -v</span><br><span class="line">v16.13.0</span><br><span class="line">donn@Macc ~ % npm -v       </span><br><span class="line">8.1.0</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸€ä¸‹ç©ºé¡¹ç›®ï¼š</p><p>![image-20230711212835653](&#x2F;Users&#x2F;donn&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230711212835653.png)</p><p>å‰ç«¯ï¼šant design pro è„šæ‰‹æ¶</p><p>åç«¯ï¼šç›´æ¥ä½¿ç”¨æ¨¡æ¿ springboot-init</p><h4 id="åŸºç¡€åŠŸèƒ½"><a href="#åŸºç¡€åŠŸèƒ½" class="headerlink" title="åŸºç¡€åŠŸèƒ½"></a>åŸºç¡€åŠŸèƒ½</h4><p>å¢åˆ æ”¹æŸ¥ã€ç™»å½•(å¤åˆ¶ç²˜è´´)</p><p>å‰ç«¯æ¥å£è°ƒç”¨ï¼šopenapiæ’ä»¶è‡ªåŠ¨ç”Ÿæˆ</p><p>openapiè§„èŒƒ</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¡¹ç›®å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb</title>
      <link href="/2023/07/04/JavaWeb/"/>
      <url>/2023/07/04/JavaWeb/</url>
      
        <content type="html"><![CDATA[<p> æœ¬åšå®¢å‚ç…§äº†éŸ©é¡ºå¹³è€å¸ˆçš„ JavaWeb è¯¾ç¨‹è®²ä¹‰ï¼</p><h1 id="7-Tomcat"><a href="#7-Tomcat" class="headerlink" title="7 Tomcat"></a>7 Tomcat</h1><h2 id="7-1-å®˜æ–¹æ–‡æ¡£"><a href="#7-1-å®˜æ–¹æ–‡æ¡£" class="headerlink" title="7.1 å®˜æ–¹æ–‡æ¡£"></a>7.1 å®˜æ–¹æ–‡æ¡£</h2><h3 id="7-1-1-åœ°å€-https-tomcat-apache-org-tomcat-8-0-doc"><a href="#7-1-1-åœ°å€-https-tomcat-apache-org-tomcat-8-0-doc" class="headerlink" title="7.1.1 åœ°å€: https://tomcat.apache.org/tomcat-8.0-doc/"></a>7.1.1 åœ°å€: <a href="https://tomcat.apache.org/tomcat-8.0-doc/">https://tomcat.apache.org/tomcat-8.0-doc/</a></h3><h2 id="7-2-WEBå¼€å‘ä»‹ç»"><a href="#7-2-WEBå¼€å‘ä»‹ç»" class="headerlink" title="7.2 WEBå¼€å‘ä»‹ç»"></a>7.2 WEBå¼€å‘ä»‹ç»</h2><ol><li><p>WEBï¼Œåœ¨è‹±è¯­ä¸­ web è¡¨ç¤ºç½‘&#x2F;ç½‘ç»œèµ„æº(é¡µé¢, å›¾ç‰‡, css, js)æ„æ€ï¼Œå®ƒç”¨äºè¡¨ç¤º WEB æœåŠ¡å™¨(ä¸»æœº)ä¾›æµè§ˆå™¨è®¿é—®çš„èµ„æº</p></li><li><p>WEB æœåŠ¡å™¨(ä¸»æœº)ä¸Šä¾›å¤–ç•Œè®¿é—®çš„ web èµ„æºåˆ†ä¸ºï¼š</p></li></ol><ul><li>é™æ€webèµ„æºï¼ˆå¦‚ html é¡µé¢ï¼‰ï¼šæŒ‡webé¡µé¢ä¸­ä¾›äººä»¬æµè§ˆçš„æ•°æ®å§‹ç»ˆæ˜¯ä¸å˜ã€‚</li><li>åŠ¨æ€webèµ„æºï¼Œæ¯”å¦‚ Servlet(java)ã€PHP ç­‰</li></ul><ol start="3"><li>é™æ€web èµ„æºå¼€å‘æŠ€æœ¯</li></ol><ul><li>Htmlã€CSSã€js ç­‰</li></ul><ol start="4"><li>å¸¸ç”¨åŠ¨æ€web èµ„æºå¼€å‘æŠ€æœ¯ï¼š</li></ol><ul><li>Servletã€SpringBootã€SpringvVCã€ PHPã€ASP.NET ç­‰</li></ul><h2 id="7-3-JavaWebå¼€å‘æŠ€æœ¯æ ˆå›¾"><a href="#7-3-JavaWebå¼€å‘æŠ€æœ¯æ ˆå›¾" class="headerlink" title="7.3 JavaWebå¼€å‘æŠ€æœ¯æ ˆå›¾"></a>7.3 JavaWebå¼€å‘æŠ€æœ¯æ ˆå›¾</h2><p>-ä¸€å›¾èƒœåƒè¨€</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230704161447451.png" alt="image-20230704161447451"></p><h2 id="7-4-BS-ä¸-CS-å¼€å‘ä»‹ç»"><a href="#7-4-BS-ä¸-CS-å¼€å‘ä»‹ç»" class="headerlink" title="7.4 BS ä¸ CS å¼€å‘ä»‹ç»"></a>7.4 BS ä¸ CS å¼€å‘ä»‹ç»</h2><h3 id="7-4-1-BSå¼€å‘"><a href="#7-4-1-BSå¼€å‘" class="headerlink" title="7.4.1 BSå¼€å‘"></a>7.4.1 BSå¼€å‘</h3><p><strong>B</strong>: browser(æµè§ˆå™¨,ç§ç±»å¤ªå¤š ff, chrome, ie, edge) </p><p><strong>S</strong>: Server(æœåŠ¡ç«¯,è€ƒè™‘å¾ˆå¤š)<br><strong>ç¤ºæ„å›¾:</strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230704162955992.png" alt="image-20230704162955992" style="zoom:30%;" /><p>å¯¹BSçš„è§£è¯»:</p><ol><li><p>å…¼å®¹æ€§ï¼Œå› ä¸ºæµè§ˆå™¨çš„ç§ç±»å¾ˆå¤šï¼Œå‘ç°ä½ å·çš„ç¨‹åºï¼Œåœ¨æŸä¸ªæµè§ˆå™¨ä¼šå‡ºè§‚é—®é¢˜ï¼Œå…¶å®ƒæµè§ˆå™¨æ­£å¸¸</p></li><li><p>å®‰å…¨æ€§ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼ŒBs å®‰å…¨æ€§ä¸å¦‚ CS å¥½æ§åˆ¶</p></li><li><p>æ˜“ç”¨æ€§ï¼ŒBS å¥½äºCSï¼Œæµè§ˆå™¨å¯ç›´æ¥ä¸‹è½½</p></li><li><p>æ‰©å±•æ€§ï¼ŒBSç›¸å¯¹ç»Ÿä¸€ï¼Œåªéœ€è¦å†™ Server</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230704163213955.png" alt="image-20230704163213955"></p><h3 id="7-4-2-CSå¼€å‘"><a href="#7-4-2-CSå¼€å‘" class="headerlink" title="7.4.2 CSå¼€å‘"></a>7.4.2 CSå¼€å‘</h3><p><strong>C</strong>: Client(å®¢æˆ·ç«¯) </p><p><strong>S</strong>: Server(æœåŠ¡ç«¯) </p><p><strong>ç¤ºæ„å›¾:</strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230704163427794.png" alt="image-20230704163427794" style="zoom:30%;" /><h2 id="7-5-JavaWebæœåŠ¡è½¯ä»¶"><a href="#7-5-JavaWebæœåŠ¡è½¯ä»¶" class="headerlink" title="7.5 JavaWebæœåŠ¡è½¯ä»¶"></a>7.5 JavaWebæœåŠ¡è½¯ä»¶</h2><h3 id="7-5-1-JavaWebæœåŠ¡å™¨è½¯ä»¶ä»‹ç»"><a href="#7-5-1-JavaWebæœåŠ¡å™¨è½¯ä»¶ä»‹ç»" class="headerlink" title="7.5.1 JavaWebæœåŠ¡å™¨è½¯ä»¶ä»‹ç»"></a>7.5.1 JavaWebæœåŠ¡å™¨è½¯ä»¶ä»‹ç»</h3><p>1.å­¦ä¹ Javaweb å¼€å‘ï¼Œéœ€è¦å…ˆå®‰è£… JavaWeb æœåŠ¡è½¯ä»¶ã€æˆ‘ä»¬æŠŠå®‰è£…äº† Javaweb æœåŠ¡è½¯ä»¶ä¸»æœºç§°ä¸º webæœåŠ¡å™¨&#x2F;Javaweb æœåŠ¡å™¨ã€‘ï¼Œç„¶ååœ¨web æœåŠ¡å™¨ä¸­å¼€å‘ç›¸åº”çš„ web èµ„æºã€‚[ Javaweb æœåŠ¡å™¨ï¼ŒMysqlæœåŠ¡å™¨]</p><p>2.è€éŸ©æé—®ï¼šå­¦ä¹ Javaweb å¼€å‘ï¼Œä¸ºä»€ä¹ˆå¿…é¡»è¦å…ˆè£… WEB æœåŠ¡è½¯ä»¶ï¼Ÿ</p><p>ç­”ï¼šéœ€è¦å®‰è£…ï¼Œç†è§£ Tomcat æœ¬è´¨å°±æ˜¯ä¸€ä¸ªJava ç¨‹åºï¼Œä½†æ˜¯è¿™ä¸ª Java ç¨‹åºå¯ä»¥å¤„ç†æ¥è‡ªæµè§ˆå™¨çš„ HTTP è¯·æ±‚ï¼Œå’Œæˆ‘ä»¬å‰é¢è®²çš„ java ç½‘ç»œæœåŠ¡ï¼ˆå¤šäººèŠå¤©,Server)</p><h3 id="7-5-2-æ‰‹å†™ç®€å•-Web-æœåŠ¡ç¨‹åº"><a href="#7-5-2-æ‰‹å†™ç®€å•-Web-æœåŠ¡ç¨‹åº" class="headerlink" title="7.5.2 æ‰‹å†™ç®€å• Web æœåŠ¡ç¨‹åº"></a>7.5.2 æ‰‹å†™ç®€å• <strong>Web</strong> æœåŠ¡ç¨‹åº</h3><p><strong>1.</strong> éœ€æ±‚**:** æ‰‹å†™ <strong>MyWebServer.java ,</strong> è®©å¤§å®¶ä½“éªŒä¸€ä¸‹ <strong>JavaWeb</strong> æœåŠ¡æœ¬è´¨ </p><p> <strong>æé†’</strong>: è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ° JavaåŸºç¡€(IO&#x2F;ç½‘ç»œ),</p><p>â€‹<a href="http://localhost:9999/">http://localhost:9999</a> è¡¨ç¤ºæµè§ˆå™¨å‘localhost(127.0.0.1)è¡¨ç¤ºæœ¬æœºçš„9999ç«¯å£å‘å‡ºè¯·æ±‚</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230704164133005.png" alt="image-20230704164133005" style="zoom:50%;" /><p><strong>2.</strong> <strong>åˆ›å»º</strong> <strong>hspedu_mytomcat</strong> <strong>çš„</strong> <strong>Java</strong> <strong>åº”ç”¨ç¨‹åº</strong>.</p><p><strong>3.</strong> <strong>åˆ›å»º</strong> <strong>D:\idea_java_projects\hspedu_mytomcat\src\hello.html</strong></p><p>â€‹Hello, I AM WEB Server!</p><p><strong>4.</strong> <strong>åˆ›å»º</strong> <strong>D:\idea_java_projects\hspedu_mytomcat\src\MyWebServer.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTomcat</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//1.åœ¨ 9999 ç«¯å£ç›‘å¬</span></span><br><span class="line">    <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line">    <span class="comment">//å¦‚æœ serverSocket æ²¡æœ‰å…³é—­ï¼Œå°±ç­‰å¾…è¿æ¥, ä¸åœçš„ç­‰å¾… </span></span><br><span class="line">    <span class="keyword">while</span> (!serverSocket.isClosed()) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;=====æˆ‘çš„ web æœåŠ¡åœ¨ 9999 ç«¯å£ç›‘å¬=====&quot;</span>); </span><br><span class="line">    <span class="comment">//2. ç­‰å¾…æµè§ˆå™¨/å®¢æˆ·ç«¯è¿æ¥, å¾—åˆ° socket</span></span><br><span class="line">    <span class="comment">// è¯¥ socket ç”¨äºé€šä¿¡</span></span><br><span class="line">    <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">    <span class="comment">//3. é€šè¿‡ socket å¾—åˆ° è¾“å‡ºæµï¼Œ[]</span></span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream(); <span class="comment">// è¿”å›ç»™æµè§ˆå™¨/å®¢æˆ·ç«¯</span></span><br><span class="line">    <span class="comment">//4. è¯»å– hello.html æ–‡ä»¶è¿”å›å³å¯=&gt; å¦‚ä½•è¯»å–æ–‡ä»¶å†…å®¹ </span></span><br><span class="line">    <span class="comment">// å¾—åˆ°æ–‡ä»¶è¾“å…¥æµ(å­—ç¬¦è¾“å…¥æµ), å’Œ src/hello.html </span></span><br><span class="line">    <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;src/hello.html&quot;</span>)); </span><br><span class="line">    <span class="type">String</span> <span class="variable">buf</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="comment">// å¾ªç¯è¯»å– hello.html</span></span><br><span class="line">    <span class="keyword">while</span> ((buf = bufferedReader.readLine())!=<span class="literal">null</span>) &#123;</span><br><span class="line">      outputStream.write(buf.getBytes()); &#125;</span><br><span class="line">      outputStream.close();</span><br><span class="line">    socket.close(); </span><br><span class="line">    &#125;</span><br><span class="line">    serverSocket.close();</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5.</strong> <strong>å®Œæˆæµ‹è¯•</strong>: <strong>æµè§ˆå™¨</strong> <strong><a href="http://localhost:9999/">http://localhost:9999/</a></strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230704165444597.png" alt="image-20230704165444597" style="zoom:33%;" /><h3 id="7-5-3-å¸¸ç”¨-JavaWeb-æœåŠ¡è½¯ä»¶"><a href="#7-5-3-å¸¸ç”¨-JavaWeb-æœåŠ¡è½¯ä»¶" class="headerlink" title="7.5.3 å¸¸ç”¨ JavaWeb æœåŠ¡è½¯ä»¶"></a>7.5.3 å¸¸ç”¨ JavaWeb æœåŠ¡è½¯ä»¶</h3><p><strong>1.</strong> <strong>Tomcat</strong>:ç”± <strong>Apache</strong> ç»„ç»‡æä¾›çš„ä¸€ç§ <strong>Web</strong> æœåŠ¡å™¨ï¼Œæä¾›å¯¹ <strong>jsp</strong> å’Œ <strong>Servlet</strong> çš„æ”¯æŒã€‚å®ƒæ˜¯ä¸€ç§è½»é‡çº§çš„ <strong>javaWeb</strong> å®¹å™¨(æœåŠ¡å™¨)ï¼Œä¹Ÿæ˜¯å½“å‰åº”ç”¨æœ€å¹¿çš„ <strong>JavaWeb</strong> æœåŠ¡å™¨(å…è´¹)ã€‚</p><p><strong>2.</strong> <strong>Jboss:æ˜¯ä¸€ä¸ªéµä»</strong> <strong>JavaEE</strong> <strong>è§„èŒƒçš„ã€å®ƒæ”¯æŒæ‰€æœ‰çš„</strong> <strong>JavaEE</strong> <strong>è§„èŒƒ(å…è´¹)ã€‚</strong></p><p><strong>3.</strong> <strong>GlassFish</strong>: ç”± <strong>Oracle</strong> <strong>å…¬å¸å¼€å‘çš„ä¸€æ¬¾</strong> <strong>JavaWeb</strong> <strong>æœåŠ¡å™¨ï¼Œæ˜¯ä¸€æ¬¾å•†ä¸šæœåŠ¡å™¨ï¼Œè¾¾åˆ°äº§å“çº§è´¨é‡(åº”ç”¨å¾ˆå°‘)ã€‚</strong></p><p><strong>4.</strong> <strong>Resin:æ˜¯CAUCHO</strong> <strong>å…¬å¸çš„äº§å“ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„æœåŠ¡å™¨ï¼Œå¯¹</strong> <strong>servlet</strong> <strong>å’Œ</strong> <strong>JSP</strong> <strong>æä¾›äº†è‰¯å¥½çš„æ”¯æŒï¼Œ æ€§èƒ½ä¹Ÿæ¯”è¾ƒä¼˜è‰¯(æ”¶è´¹)ã€‚</strong></p><p><strong>5.</strong> <strong>WebLogic</strong>ã€å¾ˆçŒ›ã€‘:æ˜¯ <strong>Oracle</strong> <strong>å…¬å¸çš„äº§å“ï¼Œæ”¯æŒ</strong> <strong>JavaEE</strong> <strong>è§„èŒƒï¼Œ è€Œä¸”ä¸æ–­çš„å®Œå–„ä»¥é€‚åº”æ–°çš„å¼€å‘è¦æ±‚ï¼Œé€‚åˆå¤§å‹é¡¹ç›®(æ”¶è´¹ï¼Œç”¨çš„ä¸å¤šï¼Œé€‚åˆå¤§å…¬å¸)ã€‚</strong></p><h2 id="7-6-Tomcat"><a href="#7-6-Tomcat" class="headerlink" title="7.6 Tomcat"></a>7.6 Tomcat</h2><h3 id="7-6-1-Tomcatä¸‹è½½å’Œå®‰è£…"><a href="#7-6-1-Tomcatä¸‹è½½å’Œå®‰è£…" class="headerlink" title="7.6.1 Tomcatä¸‹è½½å’Œå®‰è£…"></a><strong>7.6.1 Tomcat</strong>ä¸‹è½½å’Œå®‰è£…</h3><p><strong>1. Tomcat</strong> å®˜æ–¹ç«™ç‚¹:**<a href="http://tomcat.apache.org/">http://tomcat.apache.org/</a> **</p><p><strong>2.</strong> <strong>è·å–</strong> <strong>Tomcat</strong> <strong>å®‰è£…ç¨‹åºåŒ…</strong></p><p><strong>tar.gz</strong>æ–‡ä»¶æ˜¯<u>Linux</u>æ“ä½œç³»ç»Ÿä¸‹çš„å®‰è£…ç‰ˆæœ¬</p><p><strong>zip</strong>æ–‡ä»¶æ˜¯<u>Windows</u>ç³»ç»Ÿä¸‹çš„å‹ç¼©ç‰ˆæœ¬</p><p><strong>3.</strong> <strong>ä½¿ç”¨</strong> <strong>zip</strong> <strong>åŒ…å®‰è£…</strong> <strong>Tomcat</strong></p><p>**4. which version <a href="https://tomcat.apache.org/whichversion.html">https://tomcat.apache.org/whichversion.html</a> ,**å¯ä»¥çœ‹åˆ° <strong>Tomcat</strong> <strong>ä»ç„¶æ˜¯æ”¯æŒ</strong> <strong>jsp</strong> <strong>å’Œ</strong> <strong>el</strong></p><p><strong>5.</strong> Tomcat <strong>æœ€å¥½çš„å°ä¼™ä¼´æ˜¯</strong> <strong>JSP+EL</strong></p><h3 id="7-6-2-Tomcatå¯åŠ¨"><a href="#7-6-2-Tomcatå¯åŠ¨" class="headerlink" title="7.6.2 Tomcatå¯åŠ¨"></a><strong>7.6.2 Tomcat</strong>å¯åŠ¨</h3><p>windowsç³»ç»Ÿï¼šåŒå‡» <strong>bin</strong> ç›®å½•ä¸‹çš„ <strong>startup.bat</strong> æ–‡ä»¶</p><p>macosï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸŒŸè¿›å…¥tomcatå®‰è£…ç›®å½•çš„binç›®å½•ä¸‹</span><br><span class="line">cd /Applications/å‹ç¼©åŒ…èµ„æº/apache-tomcat-9.0.73/bin</span><br><span class="line"></span><br><span class="line">ğŸŒŸå¯åŠ¨tomcat</span><br><span class="line">./startup.sh</span><br><span class="line">ğŸŒŸå…³é—­tomcat</span><br><span class="line">./shutdown.sh</span><br><span class="line">ğŸŒŸæŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">./version.sh</span><br></pre></td></tr></table></figure><p><strong>è¾“å…¥</strong> <strong><a href="http://localhost:8080/%EF%BC%8C%E6%98%BE%E7%A4%BA%E5%A6%82%E4%B8%8B%E7%95%8C%E9%9D%A2%E4%BB%A3%E8%A1%A8%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F">http://localhost:8080/ï¼Œæ˜¾ç¤ºå¦‚ä¸‹ç•Œé¢ä»£è¡¨å®‰è£…æˆåŠŸ</a></strong>, <strong>é»˜è®¤åœ¨</strong> <strong>8080</strong> <strong>ç«¯å£</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230705084311991.png" alt="image-20230705084311991"></p><p><strong>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹å“ªäº›ç«¯å£åœ¨ç›‘å¬ï¼š</strong> netstat -anb</p><h3 id="7-6-3-Tomcatå¯åŠ¨æ•…éšœæ’é™¤"><a href="#7-6-3-Tomcatå¯åŠ¨æ•…éšœæ’é™¤" class="headerlink" title="7.6.3 Tomcatå¯åŠ¨æ•…éšœæ’é™¤"></a><strong>7.6.3 Tomcat</strong>å¯åŠ¨æ•…éšœæ’é™¤</h3><p><strong>1.</strong> åŒå‡» <strong>startup.bat</strong> æ–‡ä»¶ï¼Œå‡ºç°ä¸€ä¸ªå°é»‘çª—å£ç„¶åå°±æ²¡äº†ï¼ŒåŸå› æ˜¯å› ä¸ºæ²¡æœ‰é…ç½®å¥½<strong>JAVA_HOME</strong> ç¯å¢ƒå˜é‡<strong>Tomcat</strong> <strong>æœ¬è´¨æ˜¯ä¸€ä¸ª</strong> <strong>Java</strong> <strong>ç¨‹åºï¼Œæ‰€ä»¥è¦</strong> <strong>jdk,</strong> <strong>ä¼šå»æ ¹æ®</strong> <strong>JAVA_HOME</strong> <strong>ä½¿ç”¨æŒ‡å®š</strong> <strong>jdk</strong></p><p><strong>2. JAVA_HOME</strong> <strong>å¿…é¡»å…¨å¤§å†™</strong></p><p><strong>3. JAVA_HOME</strong> <strong>ä¸­é—´å¿…é¡»æ˜¯ä¸‹åˆ’çº¿</strong></p><p><strong>4. JAVA_HOME</strong> <strong>é…ç½®çš„è·¯å¾„åªéœ€è¦é…ç½®åˆ°</strong> <strong>jdk</strong> <strong>çš„å®‰è£…ç›®å½•å³å¯ã€‚ä¸éœ€è¦å¸¦ä¸Š</strong> <strong>bin</strong> <strong>ç›®å½•</strong></p><p><strong>5.</strong> <strong>ç«¯å£</strong> <strong>8080</strong> <strong>è¢«å ç”¨</strong> **[**æŸ¥çœ‹ç«¯å£<u>netstat -anb</u>,ä½¿ç”¨çš„éå¸¸å¤š]</p><p><strong>6.</strong> <strong>å¦‚æœå…¶å®ƒæœåŠ¡ç¨‹åºå ç”¨äº†</strong> <strong>8080</strong> <strong>ç«¯å£ï¼Œå¯ä»¥å…³é—­è¯¥æœåŠ¡ï¼Œæˆ–è€…ä¿®æ”¹</strong> <strong>Tomcat</strong> <strong>æœåŠ¡çš„é»˜è®¤ ç«¯å£</strong> **8080 [**åé¢è®²]</p><h3 id="7-6-4-Tomcat-ç›®å½•ç»“æ„"><a href="#7-6-4-Tomcat-ç›®å½•ç»“æ„" class="headerlink" title="7.6.4 Tomcat ç›®å½•ç»“æ„"></a><strong>7.6.4 Tomcat</strong> ç›®å½•ç»“æ„</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230705085601438.png" alt="image-20230705085601438"></p><p>è§£è¯»<br><strong>1. server.xml</strong> <strong>ç”¨äºé…ç½®</strong> <strong>tomcatçš„åŸºæœ¬è®¾ç½®(å¯åŠ¨ç«¯å£ï¼Œå…³é—­ç«¯å£,ä¸»æœºå)</strong></p><p><strong>2. wex.xml ç”¨äºæŒ‡å®š tomcat è¿è¡Œæ—¶é…ç½®(æ¯”å¦‚servletç­‰</strong>.)</p><p><strong>3. webapps ç›®å½•æ˜¯å­˜æ”¾webåº”ç”¨ï¼Œå°±æ˜¯ç½‘ç«™</strong></p><h3 id="7-6-5-catalina-å¯åŠ¨-Tomcat-Windows"><a href="#7-6-5-catalina-å¯åŠ¨-Tomcat-Windows" class="headerlink" title="7.6.5 catalina å¯åŠ¨ Tomcat(Windows)"></a>7.6.5 catalina å¯åŠ¨ Tomcat(Windows)</h3><p><strong>1.</strong> è¿›å…¥åˆ° <strong>Tomcat</strong> çš„ <strong>bin</strong> ç›®å½•ä¸‹</p><p><strong>2.</strong> <strong>æ‰§è¡Œå‘½ä»¤:</strong> <strong>catalina run</strong></p><h3 id="7-6-6-åœæ­¢-Tomcat"><a href="#7-6-6-åœæ­¢-Tomcat" class="headerlink" title="7.6.6 åœæ­¢ Tomcat"></a>7.6.6 åœæ­¢ Tomcat</h3><p><strong>è¿›å…¥</strong> <strong>Tomcat</strong> <strong>çš„</strong> <strong>bin</strong> <strong>ç›®å½•ä¸‹çš„</strong> <strong>shutdown.bat</strong> <strong>åŒå‡»ï¼Œå°±å¯ä»¥åœæ­¢</strong> <strong>Tomcat</strong> <strong>æœåŠ¡å™¨</strong>(windows)</p><h3 id="7-6-7-ä¿®æ”¹-Tomcat-æœåŠ¡ç«¯å£"><a href="#7-6-7-ä¿®æ”¹-Tomcat-æœåŠ¡ç«¯å£" class="headerlink" title="7.6.7 ä¿®æ”¹ Tomcat æœåŠ¡ç«¯å£"></a>7.6.7 ä¿®æ”¹ Tomcat æœåŠ¡ç«¯å£</h3><p><strong>1. Tomcat</strong> ç›®å½•ä¸‹çš„ <strong>conf</strong> ç›®å½•ï¼Œä¿®æ”¹ <strong>server.xml</strong> é…ç½®æ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230705152146388.png" alt="image-20230705152146388"></p><p><strong>2.</strong> <strong>è€éŸ©è¯´æ˜:</strong> <strong><a href="http://localhost/">http://localhost</a> ,</strong> <strong>é»˜è®¤æ˜¯è®¿é—®</strong> <strong>80</strong> <strong>ç«¯å£</strong>,<strong>å³</strong> <a href="http://localhost**ç­‰ä»·**http//localhost:80">http://localhost**ç­‰ä»·**http://localhost:80</a></p><h3 id="7-6-8-Tomcat-æœåŠ¡ä¸­éƒ¨ç½²-WEB-åº”ç”¨"><a href="#7-6-8-Tomcat-æœåŠ¡ä¸­éƒ¨ç½²-WEB-åº”ç”¨" class="headerlink" title="7.6.8 Tomcat æœåŠ¡ä¸­éƒ¨ç½² WEB åº”ç”¨"></a>7.6.8 Tomcat æœåŠ¡ä¸­éƒ¨ç½² <strong>WEB</strong> åº”ç”¨</h3><ul><li>ä»€ä¹ˆæ˜¯<strong>Web</strong>åº”ç”¨</li></ul><ol><li><p>WEBåº”ç”¨æ˜¯å¤šä¸ªwebèµ„æºçš„é›†åˆã€‚ç®€å•çš„è¯´ï¼Œå¯ä»¥æŠŠwebåº”ç”¨ç†è§£ä¸ºç¡¬ç›˜ä¸Šçš„ä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•ç”¨äºç®¡ç†å¤šä¸ªwebèµ„æºã€‚</p></li><li><p>webåº”ç”¨é€šå¸¸ä¹Ÿç§°ä¹‹ä¸ºwebåº”ç”¨ç¨‹åºï¼Œæˆ–webå·¥ç¨‹ï¼Œé€šä¿—çš„è¯´å°±æ˜¯ç½‘ç«™ã€‚</p></li></ol><ul><li><strong>Webåº”ç”¨</strong>ç»„æˆ</li></ul><p>ä¸€ä¸ª WEB åº”ç”¨ç”±å¤šä¸ªWEB èµ„æºæˆ–å…¶å®ƒæ–‡ä»¶ç»„æˆï¼ŒåŒ…æ‹¬html æ–‡ä»¶ã€css æ–‡ä»¶ã€jsæ–‡ä»¶ã€åŠ¨æ€webé¡µé¢ã€java ç¨‹åºã€æ”¯æŒjar åŒ…ã€é…ç½®æ–‡ä»¶ç­‰ã€‚å¼€å‘äººå‘˜åœ¨å¼€å‘ web åº”ç”¨æ—¶ï¼ŒæŒ‰ç…§è§„å®šç›®å½•ç»“æ„å­˜æ”¾è¿™äº›æ–‡ä»¶ã€‚å¦åˆ™ï¼Œåœ¨æŠŠ web åº”ç”¨äº¤ç»™ web æœåŠ¡å™¨ç®¡ç†æ—¶ï¼Œä¸ä»…å¯èƒ½ä¼šä½¿web åº”ç”¨æ— æ³•è®¿é—®ï¼Œè¿˜ä¼šå¯¼è‡´ web æœåŠ¡å™¨å¯åŠ¨æŠ¥é”™ã€‚</p><ul><li>Javawebç¨‹åº&#x2F;åº”ç”¨&#x2F;å·¥ç¨‹ç›®å½•ç»“æ„</li></ul><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230706111003709.png" alt="image-20230706111003709" style="zoom: 40%;" /><ul><li>éƒ¨ç½²æ–¹å¼1ï¼šå°†webå·¥ç¨‹çš„ç›®å½•æ‹·è´åˆ° Tomcat çš„webapps ç›®å½•ä¸‹</li></ul><ol><li><p>news webå·¥ç¨‹(ç›®å‰éƒ½æ˜¯é™æ€èµ„æº htmlï¼Œ å›¾ç‰‡ï¼‰</p></li><li><p>å°†è¯¥newsç›®å½•&#x2F;æ–‡ä»¶å¤¹ æ‹·è´åˆ° Tomcat çš„webappsç›®å½•ä¸‹</p></li><li><p>æµè§ˆå™¨è¾“å…¥ï¼š<a href="http://ip[åŸŸå]:port/news/å­ç›®å½•.../æ–‡ä»¶å">http://ip[åŸŸå]:port/news/å­ç›®å½•.../æ–‡ä»¶å</a></p></li></ol><ul><li>éƒ¨ç½²æ–¹å¼2ï¼š</li></ul><p>åœ¨tomcatä¸‹çš„ conf&#x2F;Catalina&#x2F;localhost&#x2F; ç›®å½•ä¸­ï¼Œæ·»åŠ é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æ˜ å°„åˆ°å…¶ä»–ä½ç½®çš„webåº”ç”¨(åœ¨å…¶ä»–åœ°æ–¹å¯»æ‰¾webåº”ç”¨ï¼Œè§£å†³ç£ç›˜ç©ºé—´åˆ†é…é—®é¢˜)</p><p><strong>ROOT çš„å·¥ç¨‹çš„è®¿é—®:</strong></p><ol><li><p>åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥è®¿é—®åœ°å€å¦‚ä¸‹ï¼š<a href="http://ip[åŸŸå]:portï¼Œ">http://ip[åŸŸå]:portï¼Œ</a><u>æ²¡æœ‰webå·¥ç¨‹&#x2F; åº”ç”¨åæ—¶ï¼Œé»˜è®¤è®¿é—®çš„æ˜¯ ROOT å·¥ç¨‹</u></p></li><li><p>åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥çš„è®¿é—®åœ°å€å¦‚ä¸‹: <a href="http://ip[åŸŸå]:port/å·¥ç¨‹å/">http://ip[åŸŸå]:port/å·¥ç¨‹å/</a> ï¼Œæ²¡æœ‰èµ„æºå,<strong>åˆ™é»˜è®¤è®¿é—®</strong> <strong>index.jsp</strong> <strong>é¡µé¢</strong></p></li></ol><h3 id="7-6-9-æµè§ˆå™¨è®¿é—®-Web-æœåŠ¡è¿‡ç¨‹è¯¦è§£"><a href="#7-6-9-æµè§ˆå™¨è®¿é—®-Web-æœåŠ¡è¿‡ç¨‹è¯¦è§£" class="headerlink" title="7.6.9 æµè§ˆå™¨è®¿é—® Web æœåŠ¡è¿‡ç¨‹è¯¦è§£"></a>7.6.9 æµè§ˆå™¨è®¿é—® Web æœåŠ¡è¿‡ç¨‹è¯¦è§£</h3><h4 id="7-6-9-1-å›é¡¾å‰é¢çš„-JavaWeb-å¼€å‘æŠ€æœ¯æ ˆå›¾"><a href="#7-6-9-1-å›é¡¾å‰é¢çš„-JavaWeb-å¼€å‘æŠ€æœ¯æ ˆå›¾" class="headerlink" title="7.6.9.1 å›é¡¾å‰é¢çš„ JavaWeb å¼€å‘æŠ€æœ¯æ ˆå›¾"></a>7.6.9.1 å›é¡¾å‰é¢çš„ JavaWeb å¼€å‘æŠ€æœ¯æ ˆå›¾</h4><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230704161447451.png" alt="image-20230704161447451"></p><h4 id="7-6-9-2-æµè§ˆå™¨è®¿é—®-web-æœåŠ¡å™¨æ–‡ä»¶-UML-æ—¶åºå›¾"><a href="#7-6-9-2-æµè§ˆå™¨è®¿é—®-web-æœåŠ¡å™¨æ–‡ä»¶-UML-æ—¶åºå›¾" class="headerlink" title="7.6.9.2 æµè§ˆå™¨è®¿é—® web æœåŠ¡å™¨æ–‡ä»¶ UML æ—¶åºå›¾!!!"></a>7.6.9.2 æµè§ˆå™¨è®¿é—® web æœåŠ¡å™¨æ–‡ä»¶ UML æ—¶åºå›¾!!!</h4><p><strong>1.</strong> è¯´æ˜</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å¯¹æµè§ˆå™¨è®¿é—®webæœåŠ¡å™¨èµ„æº(html,css,å›¾ç‰‡,js)åšè¯¦è§£ï¼Œé€šè¿‡ä¸€ä¸ªæ—¶åºå›¾åŠ å¼ºå¯¹è¿™ä¸ªé‡è¦è¿‡ç¨‹çš„ç†è§£,é‡è¦ï¼Œæ ¸å¿ƒ</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230706111724367.png" alt="image-20230706111724367"></p><h2 id="7-7-IDEA-å¼€å‘-JavaWeb-å·¥ç¨‹"><a href="#7-7-IDEA-å¼€å‘-JavaWeb-å·¥ç¨‹" class="headerlink" title="7.7 IDEA å¼€å‘ JavaWeb å·¥ç¨‹"></a>7.7 IDEA å¼€å‘ JavaWeb å·¥ç¨‹</h2><h3 id="7-7-1-å¼€å‘-javaweb-å·¥ç¨‹-amp-é…ç½®-TomCat-amp-å¯åŠ¨é¡¹ç›®"><a href="#7-7-1-å¼€å‘-javaweb-å·¥ç¨‹-amp-é…ç½®-TomCat-amp-å¯åŠ¨é¡¹ç›®" class="headerlink" title="7.7.1 å¼€å‘ javaweb å·¥ç¨‹ &amp; é…ç½® TomCat &amp; å¯åŠ¨é¡¹ç›®"></a>7.7.1 å¼€å‘ javaweb å·¥ç¨‹ &amp; é…ç½® TomCat &amp; å¯åŠ¨é¡¹ç›®</h3><p>1.éœ€æ±‚&#x2F;å›¾è§£ï¼šä½¿ç”¨ IDEA å¼€å‘ Javaweb å·¥ç¨‹fishwebï¼Œå¹¶å°†ç½‘é¡µéƒ¨ç½²åˆ° fishweb å·¥ç¨‹ï¼Œçœ‹è€å¸ˆæ¼”ç¤º</p> <img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230706112454090.png" alt="image-20230706112454090" style="zoom:33%;" /><h3 id="7-7-2-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#7-7-2-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="7.7.2 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>7.7.2 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><h4 id="1-çƒ­åŠ è½½é€‰é¡¹è¯´æ˜"><a href="#1-çƒ­åŠ è½½é€‰é¡¹è¯´æ˜" class="headerlink" title="1. çƒ­åŠ è½½é€‰é¡¹è¯´æ˜"></a>1. çƒ­åŠ è½½é€‰é¡¹è¯´æ˜</h4><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230706135810014.png" alt="image-20230706135810014"></p><p>è§£è¯»ï¼š</p><p>(1)on update action ï¼šè¡¨ç¤ºå½“æˆ‘ä»¬<strong>æ›´æ–°æ“ä½œ</strong>æ—¶ï¼ŒTomcat ä¼šè‡ªåŠ¨æ›´æ–°ç±»å’Œèµ„æºï¼ˆ<u>å½“jsp&#x2F;htmlæ–‡ä»¶ä¿®æ”¹æ—¶ï¼Œå¯ä»¥ç”Ÿæ•ˆï¼Œä½†æ˜¯å¦‚æœä½ ä¿®æ”¹çš„java æ–‡ä»¶ï¼Œéœ€è¦ Redepoly æ‰ä¼šç”Ÿæ•ˆ</u>ï¼‰</p><p>(2) on frame deactivation ï¼šè¡¨ç¤º <strong>IDEA å¤±å»ç„¦ç‚¹</strong>ï¼ˆ(æ¯”å¦‚æœ€å°åŒ–)ï¼Œä¹Ÿä¼šå¯¼è‡´jsp&#x2F;html å‘ç”Ÿæ›´æ–°ï¼Œä½†æ˜¯java ä¿®æ”¹äº†ï¼Œè¿˜æ˜¯éœ€è¦ Redeploy</p><h4 id="2-ç«¯å£ä¿®æ”¹"><a href="#2-ç«¯å£ä¿®æ”¹" class="headerlink" title="2. ç«¯å£ä¿®æ”¹"></a>2. ç«¯å£ä¿®æ”¹</h4><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230706140054643.png" alt="image-20230706140054643" style="zoom:50%;" /><p><strong>è¿™é‡Œä¿®æ”¹çš„ç«¯å£ï¼Œ åªä¼šå½±å“åˆ°å½“å‰çš„é¡¹ç›®ï¼Œè€Œä¸æ˜¯å»ä¿®æ”¹ server.xml</strong></p><h4 id="3-out-ç›®å½•æ˜¯ä»€ä¹ˆ"><a href="#3-out-ç›®å½•æ˜¯ä»€ä¹ˆ" class="headerlink" title="3.out ç›®å½•æ˜¯ä»€ä¹ˆ"></a>3.out ç›®å½•æ˜¯ä»€ä¹ˆ</h4><p>å½“tomcat å¯åŠ¨æ—¶ï¼Œä¼šç”Ÿæˆ out ç›®å½•ï¼Œè¯¥ç›®å½•å°±æ˜¯åŸé¡¹ç›®èµ„æºçš„æ˜ å°„ï¼Œæˆ‘ä»¬æµè§ˆå™¨è®¿é—®çš„èµ„æºæ˜¯ out ç›®å½•</p><h4 id="4-å½“æˆ‘ä»¬ä»å¤–éƒ¨æ‹·è´èµ„æºåˆ°é¡¹ç›®ï¼ˆå›¾ç‰‡ï¼Œæ–‡ä»¶ï¼Œjsï¼Œcss-ç­‰"><a href="#4-å½“æˆ‘ä»¬ä»å¤–éƒ¨æ‹·è´èµ„æºåˆ°é¡¹ç›®ï¼ˆå›¾ç‰‡ï¼Œæ–‡ä»¶ï¼Œjsï¼Œcss-ç­‰" class="headerlink" title="4.å½“æˆ‘ä»¬ä»å¤–éƒ¨æ‹·è´èµ„æºåˆ°é¡¹ç›®ï¼ˆå›¾ç‰‡ï¼Œæ–‡ä»¶ï¼Œjsï¼Œcss ç­‰)"></a>4.å½“æˆ‘ä»¬ä»å¤–éƒ¨æ‹·è´èµ„æºåˆ°é¡¹ç›®ï¼ˆå›¾ç‰‡ï¼Œæ–‡ä»¶ï¼Œjsï¼Œcss ç­‰)</h4><p>å¦‚æœå‡ºç° 404 ä¸èƒ½è®¿é—®é”™è¯¯,è§£å†³æ–¹å¼ rebulid project -ï¼é‡å¯ Tomcat</p><h3 id="7-7-3-JavaWeb-å·¥ç¨‹çš„ç›®å½•ä»‹ç»"><a href="#7-7-3-JavaWeb-å·¥ç¨‹çš„ç›®å½•ä»‹ç»" class="headerlink" title="7.7.3 JavaWeb å·¥ç¨‹çš„ç›®å½•ä»‹ç»"></a><strong>7.7.3 JavaWeb</strong> å·¥ç¨‹çš„ç›®å½•ä»‹ç»</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230706141714376.png" alt="image-20230706141714376"></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230706141833960.png" alt="image-20230706141833960"></p><h1 id="8-åŠ¨æ€-WEB-å¼€å‘æ ¸å¿ƒ-Servlet"><a href="#8-åŠ¨æ€-WEB-å¼€å‘æ ¸å¿ƒ-Servlet" class="headerlink" title="8 åŠ¨æ€ WEB å¼€å‘æ ¸å¿ƒ-Servlet"></a>8 åŠ¨æ€ WEB å¼€å‘æ ¸å¿ƒ-Servlet</h1><h2 id="8-1-å®˜æ–¹æ–‡æ¡£"><a href="#8-1-å®˜æ–¹æ–‡æ¡£" class="headerlink" title="8.1 å®˜æ–¹æ–‡æ¡£"></a>8.1 å®˜æ–¹æ–‡æ¡£</h2><h3 id="8-1-1-åœ°å€-https-tomcat-apache-org-tomcat-8-0-doc-servletapi-index-html"><a href="#8-1-1-åœ°å€-https-tomcat-apache-org-tomcat-8-0-doc-servletapi-index-html" class="headerlink" title="8.1.1 åœ°å€: https://tomcat.apache.org/tomcat-8.0-doc/servletapi/index.html"></a>8.1.1 åœ°å€: <a href="https://tomcat.apache.org/tomcat-8.0-doc/servletapi/index.html">https://tomcat.apache.org/tomcat-8.0-doc/servletapi/index.html</a></h3><h3 id="8-1-3-Servletå’ŒTomcatçš„å…³ç³»-ä¸€å¥è¯-Tomcatæ”¯æŒServlet"><a href="#8-1-3-Servletå’ŒTomcatçš„å…³ç³»-ä¸€å¥è¯-Tomcatæ”¯æŒServlet" class="headerlink" title="8.1.3 Servletå’ŒTomcatçš„å…³ç³»:ä¸€å¥è¯,Tomcatæ”¯æŒServlet"></a>8.1.3 Servletå’ŒTomcatçš„å…³ç³»:ä¸€å¥è¯,Tomcatæ”¯æŒServlet</h3><h2 id="8-2-ä¸ºä»€ä¹ˆä¼šå‡ºç°-Servlet"><a href="#8-2-ä¸ºä»€ä¹ˆä¼šå‡ºç°-Servlet" class="headerlink" title="8.2 ä¸ºä»€ä¹ˆä¼šå‡ºç° Servlet"></a>8.2 ä¸ºä»€ä¹ˆä¼šå‡ºç° Servlet</h2><p>æå‡ºéœ€æ±‚**:** è¯·ç”¨ä½ ç°æœ‰çš„<strong>html css javascript</strong>ï¼Œå¼€å‘ç½‘ç«™ï¼Œæ¯”å¦‚å¯ä»¥è®©ç”¨æˆ·ç•™è¨€**&#x2F;<strong>è´­ç‰©</strong>&#x2F;<strong>æ”¯ä»˜</strong>,** ä½ èƒ½æå®šå—**?**</p><p>â€”ä¸èƒ½ï¼Œå› ä¸ºæ— æ³•æ“ä½œæ•°æ®åº“</p><ul><li>å¼•å…¥æˆ‘ä»¬åŠ¨æ€ç½‘é¡µ(èƒ½å’Œç”¨æˆ·äº¤äº’)æŠ€æœ¯ <strong>&#x3D;&#x3D;&#x3D;&gt; Servlet</strong></li><li>å¯¹Java Web æŠ€æœ¯ä½“ç³»çš„æµç¨‹å›¾æ”¹é€ è¯´æ˜(ç»†åŒ–).[æ•´ä½“çš„æ¦‚å¿µ]</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230706145610695.png" alt="image-20230706145610695"></p><h2 id="8-3-ä»€ä¹ˆæ˜¯-Servlet"><a href="#8-3-ä»€ä¹ˆæ˜¯-Servlet" class="headerlink" title="8.3 ä»€ä¹ˆæ˜¯ Servlet"></a>8.3 ä»€ä¹ˆæ˜¯ Servlet</h2><ul><li><p>ä»€ä¹ˆæ˜¯Servlet</p><ul><li>Servlet åœ¨å¼€å‘åŠ¨æ€ WEB å·¥ç¨‹ä¸­ï¼Œå¾—åˆ°å¹¿æ³›çš„åº”ç”¨ï¼ŒæŒæ¡å¥½ Servlet éå¸¸é‡è¦,Servlet(åŸºçŸ³)æ˜¯ SpringvC çš„åŸºç¡€</li></ul></li><li><p>Servlet(java æœåŠ¡å™¨å°ç¨‹åº)ï¼Œå®ƒçš„ç‰¹ç‚¹ï¼š</p><ul><li>ä»–æ˜¯ç”±æœåŠ¡å™¨ç«¯è°ƒç”¨å’Œæ‰§è¡Œçš„(ä¸€å¥è¯ï¼šæ˜¯Tomcatè§£æå’Œæ‰§è¡Œï¼‰</li><li>ä»–æ˜¯ç”¨javaè¯­è¨€ç¼–å·çš„ï¼Œæœ¬è´¨å°±æ˜¯Javaç±»</li><li>ä»–æ˜¯æŒ‰ç…§Servletè§„èŒƒå¼€å‘çš„ï¼ˆé™¤ äº†tomcat-&gt;Servlet weblogic-&gt;Servlet)</li><li>åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä»¥å®Œæˆå‡ ä¹æ‰€æœ‰çš„ç½‘ç«™åŠŸèƒ½(åœ¨ä»¥å‰ï¼Œæˆ‘ä»¬è€ç¨‹å‘˜ï¼Œä½¿ç”¨Servletå¼€å‘ç½‘ç«™ï¼‰æŠ€æœ¯æ ˆè¦æ±‚é«˜</li></ul></li></ul><h2 id="8-4-Servletåœ¨JavaWebé¡¹ç›®ä½ç½®"><a href="#8-4-Servletåœ¨JavaWebé¡¹ç›®ä½ç½®" class="headerlink" title="8.4 Servletåœ¨JavaWebé¡¹ç›®ä½ç½®"></a>8.4 Servletåœ¨JavaWebé¡¹ç›®ä½ç½®</h2><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230707084620291.png" alt="image-20230707084620291"></p><h2 id="8-5-ServletåŸºæœ¬ä½¿ç”¨"><a href="#8-5-ServletåŸºæœ¬ä½¿ç”¨" class="headerlink" title="8.5 ServletåŸºæœ¬ä½¿ç”¨"></a>8.5 ServletåŸºæœ¬ä½¿ç”¨</h2><h3 id="8-5-1-Servletå¼€å‘æ–¹å¼è¯´æ˜"><a href="#8-5-1-Servletå¼€å‘æ–¹å¼è¯´æ˜" class="headerlink" title="8.5.1 Servletå¼€å‘æ–¹å¼è¯´æ˜"></a><strong>8.5.1 Servlet</strong>å¼€å‘æ–¹å¼è¯´æ˜</h3><ol><li><p>servlet3.0 å‰ä½¿ç”¨ <strong>web.xml , servlet3.0</strong> ç‰ˆæœ¬ä»¥å**(**åŒ…æ‹¬ **3.0)**æ”¯æŒæ³¨è§£ï¼Œ åŒæ—¶æ”¯æŒ <strong>web.xml</strong> é…ç½®</p></li><li><p><strong>å¦‚ä½•æŸ¥çœ‹</strong> <strong>servletç‰ˆæœ¬[å¦‚å›¾]</strong></p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230707085030431.png" alt="image-20230707085030431"></p><ol start="3"><li><p>è®²è§£SpringBoot æ—¶ï¼Œæˆ‘ä»¬ç”¨æ³¨è§£æ–¹å¼ï¼Œä» ssm,springboot åé¢å…¨éƒ¨ä½¿ç”¨æ³¨è§£</p></li><li><p>è¿™ä¸“é—¨è®² servletï¼Œ ä¸ºè®©å¤§å®¶æ›´æ¸…æ™°çŸ¥é“ servlet ä½¿ç”¨åŸç†ï¼Œè€å¸ˆç”¨é…ç½®æ–¹å¼ï¼ˆè¯´æ˜: åŸç”Ÿçš„ Servlet åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å¾ˆå°‘</p></li><li><p>ä¸ç®¡ä½¿ç”¨å“ªç§æ–¹å¼ï¼Œæœ¬è´¨éƒ½ä¸€æ ·</p></li></ol><h3 id="8-5-2-å¿«é€Ÿå…¥é—¨-æ‰‹åŠ¨å¼€å‘-Servlet"><a href="#8-5-2-å¿«é€Ÿå…¥é—¨-æ‰‹åŠ¨å¼€å‘-Servlet" class="headerlink" title="8.5.2 å¿«é€Ÿå…¥é—¨- æ‰‹åŠ¨å¼€å‘ Servlet"></a>8.5.2 å¿«é€Ÿå…¥é—¨- æ‰‹åŠ¨å¼€å‘ Servlet</h3><p>éœ€æ±‚è¯´æ˜</p><p>1ã€å¼€å‘ä¸€ä¸ª Helloservlet</p><p>2ã€å½“æµè§ˆå™¨ è®¿é—® <a href="http://localhost:8080/web%E5%BA%94%E7%94%A8%E5%90%8D/helloServlet">http://localhost:8080/webåº”ç”¨å/helloServlet</a> æ—¶ï¼Œåå°è¾“å‡º â€œhi HelloServeltâ€</p><ul><li>å…·ä½“æ­¥éª¤<ul><li>ç¼–å†™ç±»Helloservletå»å®ç° Servlet <strong>æ¥å£</strong></li><li>å®ç° service æ–¹æ³•ï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶å“åº”æ•°æ®</li><li>åœ¨ web.xml ä¸­å»é…ç½® servlet ç¨‹åºçš„è®¿é—®åœ°å€</li></ul></li></ul><p>1.åˆ›å»º hspedu_servlet JavaWeb å·¥ç¨‹ï¼Œå¹¶é…ç½®å¥½Tomcat</p><p>2.æ·»åŠ servlet-api.jar(åœ¨tomcat&#x2F;libä¸‹)åˆ°å·¥ç¨‹,å› ä¸ºservlet.jarä¸æ˜¯jdkè‡ªå¸¦çš„,è¦å¼•å…¥</p><p>3.åœ¨srcä¸‹åŒ…<strong>com.hspedu.servlet.HelloServlet.java</strong>ï¼Œå¹¶å®ç°Servletæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/7/7</span></span><br><span class="line"><span class="comment"> * 09:06</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">    <span class="comment">//å½“åˆ›å»ºHelloServletæ—¶ï¼Œä¼šè°ƒç”¨initæ–¹æ³•</span></span><br><span class="line">    <span class="comment">//è¯¥æ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;servletè¢«è°ƒç”¨~~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›Servletçš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * service æ–¹æ³•æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†è¯·æ±‚å’Œå“åº”çš„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletRequest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletResponse</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;service~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destroy è¢«è°ƒç”¨...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.åœ¨web.xmlé…ç½®HelloServletï¼Œå³:ç»™HelloServletæä¾›å¯¹å¤–è®¿é—®åœ°å€</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  1.web.xmlä¸»è¦ç”¨æ¥é…ç½®è¯¥webåº”ç”¨ä½¿ç”¨åˆ°çš„Servlet  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  2.servlet-name:ç»™Servletå–å(ç¨‹åºå‘˜å†³å®š)ï¼Œè¯¥åå­—å”¯ä¸€</span></span><br><span class="line"><span class="comment">      3.servlet-classï¼šServletçš„ç±»çš„å…¨è·¯å¾„ï¼šTomcatåœ¨åå°„ç”Ÿæˆè¯¥Servletéœ€è¦ä½¿ç”¨</span></span><br><span class="line"><span class="comment">      4.url-patternï¼šè¯¥servletè®¿é—®çš„urlçš„é…ç½®(è·¯å¾„)</span></span><br><span class="line"><span class="comment">      è¿™æ—¶æˆ‘ä»¬åº”è®¿é—®ï¼šhttp://localhost:8080/servlet/helloServlet</span></span><br><span class="line"><span class="comment">      5.url-pattern å–åæ˜¯ç¨‹åºå‘˜å†³å®šçš„</span></span><br><span class="line"><span class="comment">      6.load-on-startup:è¡¨ç¤ºåœ¨tomcatå¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åŠ è½½servletå®ä¾‹</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.study.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/helloServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>5.é€šè¿‡æµè§ˆå™¨è®¿é—®HelloServlet ,çœ‹æ˜¯å¦æ­£ç¡®(è®°ä½è¦redeploy[å¿«]æˆ–è€…restart[æ…¢])</p><p><a href="http://localhost:8080/servlet/helloServlet">http://localhost:8080/servlet/helloServlet</a></p><h3 id="8-5-3-æµè§ˆå™¨è°ƒç”¨-Servlet-æµç¨‹åˆ†æ"><a href="#8-5-3-æµè§ˆå™¨è°ƒç”¨-Servlet-æµç¨‹åˆ†æ" class="headerlink" title="8.5.3 æµè§ˆå™¨è°ƒç”¨ Servlet æµç¨‹åˆ†æ"></a>8.5.3 æµè§ˆå™¨è°ƒç”¨ Servlet æµç¨‹åˆ†æ</h3><p>ä¸€å›¾èƒœåƒè¨€</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230707095156118.png" alt="image-20230707095156118"></p><p>å¦‚æœåœ¨web.xmlä¸­æœªæŸ¥è¯¢åˆ°è¯·æ±‚çš„èµ„æºï¼Œåˆ™ä¼šè¿”å›404é”™è¯¯ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230707095634908.png" alt="image-20230707095634908"></p><p><strong>Servletå¸¸é©»å†…å­˜ï¼Œå±äºå•ä¾‹æ¨¡å¼</strong></p><h3 id="8-5-4-Servletç”Ÿå‘½å‘¨æœŸ"><a href="#8-5-4-Servletç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="8.5.4 Servletç”Ÿå‘½å‘¨æœŸ"></a><strong>8.5.4 Servlet</strong>ç”Ÿå‘½å‘¨æœŸ</h3><p>â— ä¸»è¦æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š</p><p><strong>1. init()ï¼š</strong>åˆå§‹åŒ–é˜¶æ®µ</p><p><strong>2. service()ï¼š</strong>å¤„ç†æµè§ˆå™¨è¯·æ±‚é˜¶æ®µ</p><p><strong>3. destroy()ï¼š</strong>ç»ˆæ­¢é˜¶æ®µ</p><ul><li><strong>ç¤ºæ„å›¾</strong></li></ul><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230707100629527.png" alt="image-20230707100629527" style="zoom:40%;" /><ul><li><p><strong>åˆå§‹åŒ–é˜¶æ®µ</strong></p><ul><li><p>servlet å®¹å™¨(æ¯”å¦‚ï¼šTomcat)&#x2F;åŠ è½½ Servletï¼ŒåŠ è½½å®Œæˆåï¼ŒServlet å®¹å™¨ä¼šåˆ›å»ºä¸€ä¸ª Servlet å®ä¾‹</p><p>å¹¶è°ƒç”¨ init()æ–¹æ³•ï¼Œinit()æ–¹æ³•åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼ŒServlet å®¹å™¨åœ¨ä¸‹é¢çš„æƒ…å†µè£…è½½ Servlet:</p><ul><li><p>Servlet å®¹å™¨ (Tomcat) å¯åŠ¨æ—¶è‡ªåŠ¨è£…è½½æŸäº› servletï¼Œå®ç°è¿™ä¸ªéœ€è¦åœ¨ web.xml æ–‡ä»¶ä¸­æ·»åŠ </p><p><load-on-startup>1</load-on-startup>1 è¡¨ç¤ºè£…è½½çš„é¡ºåº</p></li><li><p>åœ¨servlet å®¹å™¨å¯åŠ¨åï¼Œæµè§ˆå™¨é¦–æ¬¡å‘ servlet å‘é€è¯·æ±‚(è¿™ä¸ªå‰é¢è¯´è¿‡ï¼‰</p></li><li><p>Servlet é‡æ–°éƒ¨ç½²å(æ¯”å¦‚ tomcat è¿›è¡Œ redeploy ã€*<u><strong>redeploy ä¼šé”€æ¯æ‰€æœ‰çš„ servlet å®ä¾‹!!!</strong></u>*ã€‘ï¼‰ã€‚</p><p>æµè§ˆå™¨å†å‘ Servlet å‘é€ç¬¬1æ¬¡è¯·æ±‚(æˆ–é…ç½®äº†tomcatå¯åŠ¨è‡ªåŠ¨è£…è½½)</p></li></ul></li></ul></li><li><p><strong>å¤„ç†æµè§ˆå™¨è¯·æ±‚é˜¶æ®µ</strong>(service <strong>æ–¹æ³•</strong>)</p></li><li><p>æ¯æ”¶åˆ°ä¸€ä¸ªhttp è¯·æ±‚ï¼ŒæœåŠ¡å™¨å°±ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹å»å¤„ç†[çº¿ç¨‹]</p></li><li><p>åˆ›å»ºä¸€ä¸ªç”¨äºå°è£… HTTP è¯·æ±‚æ¶ˆæ¯çš„ <strong>ServletRequest å¯¹è±¡</strong>å’Œä¸€ä¸ªä»£è¡¨ HTTP å“åº”æ¶ˆæ¯çš„<strong>ServletResponse</strong> å¯¹è±¡</p></li><li><p>ç„¶åè°ƒç”¨ Servlet çš„ service()æ–¹æ³•å¹¶å°†è¯·æ±‚å’Œå“åº”å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’è¿›å»</p></li><li><p>ç»ˆæ­¢é˜¶æ®µ destory æ–¹æ³•(ä½“ç° Servlet å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ)</p><ul><li><p>å½“web åº”ç”¨è¢«çµ‚æ­¢ï¼Œæˆ–è€… servlet å®¹å™¨çµ‚æ­¢è¿è¡Œï¼Œæˆ–è€…Servlet ç±»é‡æ–°è£…è½½æ—¶ï¼Œä¼šè°ƒç”¨ destroy(æ–¹æ³•</p></li><li><p>æ¯”å¦‚é‡å¯ tomcat,æˆ–è€…redeploy web åº”ç”¨</p></li></ul></li></ul><h3 id="8-5-5-GET-å’Œ-POST-è¯·æ±‚çš„åˆ†å‘å¤„ç†"><a href="#8-5-5-GET-å’Œ-POST-è¯·æ±‚çš„åˆ†å‘å¤„ç†" class="headerlink" title="8.5.5 GET å’Œ POST è¯·æ±‚çš„åˆ†å‘å¤„ç†"></a>8.5.5 GET å’Œ POST è¯·æ±‚çš„åˆ†å‘å¤„ç†</h3><ul><li><p>å¼€å‘ servletï¼Œé€šå¸¸ç¼–å†™ doGetã€doPost æ–¹æ³•ã€‚æ¥å¯¹è¡¨å•çš„get å’Œ post è¯·æ±‚è¿›è¡Œåˆ†å‘å¤„ç†</p></li><li><p>ä»£ç æ¼”ç¤º HelloServlet.java   register.html</p></li></ul><ol><li>åˆ›å»º servlet\web\register.html</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ³¨å†Œç”¨æˆ·<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/servlet/helloServlet&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">            u: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ³¨å†Œç”¨æˆ·&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2.</strong> ä¿®æ”¹ <strong>servlet\src\com\hspedu\servlet\HelloServlet.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//æ€è€ƒ-&gt;ä» servletRequest å¯¹è±¡æ¥è·å–è¯·æ±‚æ–¹å¼-&gt;</span></span><br><span class="line">        <span class="comment">//1. ServletRequest æ²¡æœ‰å¾—åˆ°æäº¤æ–¹å¼çš„æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//2. ServletRequest çœ‹çœ‹ ServletRequest å­æ¥å£æœ‰æ²¡æœ‰ç›¸å…³æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//3. è€å¸ˆå°æŠ€å·§:ctrl+alt+b =&gt; å¯ä»¥çœ‹åˆ°æ¥å£çš„å­æ¥å£å’Œå®ç°å­ç±»</span></span><br><span class="line">        <span class="comment">//4. æŠŠ servletReqeust è½¬æˆ HttpServletRequest å¼•ç”¨</span></span><br><span class="line">        <span class="comment">//5. ä»ç„¶æ˜¯ Java åŸºç¡€çš„ OOP</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">httpServletRequest</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> httpServletRequest.getMethod();</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;GET&quot;</span>.equals(method)) &#123;</span><br><span class="line">            doGet();    <span class="comment">//ç”¨ doGet() å¤„ç† GET è¯·æ±‚ &#125;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;POST&quot;</span>.equals(method)) &#123;</span><br><span class="line">            doPost();   <span class="comment">//ç”¨ doPost() å¤„ç† POST è¯·æ±‚</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;doGetè¢«è°ƒç”¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;doPostè¢«è°ƒç”¨&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="8-5-6-é€šè¿‡ç»§æ‰¿-HttpServlet-å¼€å‘-Servlet"><a href="#8-5-6-é€šè¿‡ç»§æ‰¿-HttpServlet-å¼€å‘-Servlet" class="headerlink" title="8.5.6 é€šè¿‡ç»§æ‰¿ HttpServlet å¼€å‘ Servlet"></a>8.5.6 é€šè¿‡ç»§æ‰¿ HttpServlet å¼€å‘ Servlet</h3><ul><li>HttpServlet ä»‹ç»</li></ul><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œéƒ½æ˜¯ä½¿ç”¨ç»§æ‰¿ HttpServlet ç±»å¼€å‘ Servlet ç¨‹åºï¼Œæ›´åŠ æ–¹ä¾¿</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230707112036074.png" alt="image-20230707112036074" style="zoom:50%;" /><ul><li>HttpServlet ä»‹ç»</li></ul><p>1ã€é€šè¿‡ç»§æ‰¿ HttpServlet å¼€å‘ä¸€ä¸ª HiServlet</p><p>2ã€å½“æµè§ˆå™¨ è®¿é—® <a href="http://localhost:8080/web">http://localhost:8080/web</a> åº”ç”¨å&#x2F;hiServlet æ—¶ï¼Œåå°è¾“å‡º â€œhi HiServeltâ€</p><ul><li>å…·ä½“çš„å¼€å‘æ­¥éª¤</li></ul><ol><li>ç¼–å†™ä¸€ä¸ªç±»å»ç»§æ‰¿ HttpServlet ç±»</li><li>æ ¹æ®ä¸šåŠ¡éœ€è¦é‡å†™ doGet æˆ– doPost æ–¹æ³•</li><li>åˆ° web.xml ä¸­çš„é…ç½® Servlet ç¨‹åº</li></ol><ul><li>åº”ç”¨å®ä¾‹</li></ul><p>1.åˆ›å»ºHiServlet.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/7/7</span></span><br><span class="line"><span class="comment"> * 13:46</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HiServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;HiServlet doGet&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;HiServlet doPost&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.ä¿®æ”¹web.xmlå®Œæˆé…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HiServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.study.servlet.HiServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HiServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hiServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.å®Œæˆæµ‹è¯•</p><p><a href="http://localhost:8080/servlet/hiServlet">http://localhost:8080/servlet/hiServlet</a></p><h3 id="8-5-7-IDEA-å¼€å‘-Servlet-ç¨‹åº"><a href="#8-5-7-IDEA-å¼€å‘-Servlet-ç¨‹åº" class="headerlink" title="8.5.7 IDEA å¼€å‘ Servlet ç¨‹åº"></a>8.5.7 IDEA å¼€å‘ Servlet ç¨‹åº</h3><ul><li>è¯´æ˜</li></ul><p>ç¼–æ‰‹åŠ¨å¼€å‘ Servlet éœ€è¦ç¨‹åºå‘˜è‡ªå·±é…ç½® Servlet ,æ¯”è¾ƒéº»çƒ¦ï¼Œåœ¨å·¥ä½œä¸­ï¼Œç›´æ¥ä½¿ç”¨ IDEA å¼€å‘ Servlet ä¼šæ›´åŠ æ–¹ä¾¿</p><ul><li>åº”ç”¨å®ä¾‹</li></ul><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230707140732732.png" alt="image-20230707140732732" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230707140642567.png" alt="image-20230707140642567" style="zoom: 50%;" /><h3 id="8-5-8-Servlet-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#8-5-8-Servlet-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="8.5.8 Servlet æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>8.5.8 Servlet æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><ol><li>Servlet æ˜¯ä¸€ä¸ªä¾›å…¶ä»– Java ç¨‹åºï¼ˆServlet å¼•æ“ï¼‰ è°ƒç”¨çš„ Java ç±»ï¼Œ ä¸èƒ½ç‹¬ç«‹è¿è¡Œ</li><li>é’ˆå¯¹æµè§ˆå™¨çš„å¤šæ¬¡ Servlet è¯·æ±‚ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨åªä¼šåˆ›å»ºä¸€ä¸ª Servlet å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ Servlet å®ä¾‹å¯¹è±¡ä¸€æ—¦åˆ›å»ºï¼Œå®ƒå°±ä¼šé©»ç•™åœ¨å†…å­˜ä¸­ï¼Œä¸ºåç»­çš„å…¶å®ƒè¯·æ±‚æœåŠ¡ï¼Œç›´è‡³web å®¹å™¨é€€å‡º&#x2F;æˆ–è€… redeploy è¯¥ web åº”ç”¨ï¼Œservlet å®ä¾‹å¯¹è±¡æ‰ä¼šé”€æ¯ ã€ç¤ºæ„å›¾ã€‘</li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230710085610919.png" alt="image-20230710085610919" style="zoom:50%;" /><ol start="3"><li><p>åœ¨ Servlet çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ï¼Œinit æ–¹æ³•åªè¢«è°ƒç”¨ä¸€æ¬¡ã€‚è€Œå¯¹æ¯æ¬¡è¯·æ±‚éƒ½å¯¼è‡´ Servlet å¼•æ“è°ƒç”¨ä¸€æ¬¡ servlet çš„ service æ–¹æ³•ã€‚</p></li><li><p>å¯¹äºæ¯æ¬¡è®¿é—®è¯·æ±‚ï¼ŒServlet å¼•æ“éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ HttpServletRequest è¯·æ±‚å¯¹è±¡å’Œä¸€ä¸ªæ–°çš„ HttpServletResponse å“åº”å¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸¤ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒè°ƒç”¨çš„ Servletçš„ service()æ–¹æ³•ï¼Œservice æ–¹æ³•å†æ ¹æ®è¯·æ±‚æ–¹å¼åˆ†åˆ«è°ƒç”¨ doXXX æ–¹æ³•</p></li><li><p>å¦‚æœåœ¨<servlet>å…ƒç´ ä¸­é…ç½®äº†ä¸€ä¸ª<load-on-startup>å…ƒç´ ï¼Œé‚£ä¹ˆ WEB åº”ç”¨ç¨‹åºåœ¨å¯åŠ¨æ—¶ï¼Œå°±ä¼šè£…è½½å¹¶åˆ›å»º Servlet çš„å®ä¾‹å¯¹è±¡ã€ä»¥åŠè°ƒç”¨ Servlet å®ä¾‹å¯¹è±¡çš„ init()æ–¹æ³•         åº”ç”¨åœºæ™¯ï¼š(å®šæ—¶å‘é€é‚®ä»¶çš„æœåŠ¡&#x2F;è‡ªåŠ¨å¯åŠ¨-&gt;å®Œæˆä»»åŠ¡)</p></li></ol><h2 id="8-6-Servlet-æ³¨è§£æ–¹å¼"><a href="#8-6-Servlet-æ³¨è§£æ–¹å¼" class="headerlink" title="8.6 Servlet - æ³¨è§£æ–¹å¼"></a>8.6 Servlet - æ³¨è§£æ–¹å¼</h2><h3 id="8-6-1-å¿«é€Ÿå…¥é—¨"><a href="#8-6-1-å¿«é€Ÿå…¥é—¨" class="headerlink" title="8.6.1 å¿«é€Ÿå…¥é—¨"></a>8.6.1 å¿«é€Ÿå…¥é—¨</h3><ul><li>å…·ä½“æ­¥éª¤</li></ul><ol><li><p>ç¼–å†™ç±»OkServletå»ç»§æ‰¿HttpServlet</p></li><li><p>æ³¨è§£æ–¹å¼é…ç½®OkServlet, ä¸€ä¸ªServletæ”¯æŒé…ç½®å¤šä¸ªurlPattern</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.servlet.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/7/7</span></span><br><span class="line"><span class="comment"> * 14:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * 1.æ³¨è§£æ–¹å¼é…ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@WebServlet</span>æ˜¯ä¸€ä¸ªæ³¨è§£</span></span><br><span class="line"><span class="comment"> * 2.æºç ï¼š</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Target</span>(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Retention</span>(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Documented</span></span></span><br><span class="line"><span class="comment"> * public <span class="doctag">@interface</span> WebServlet &#123;</span></span><br><span class="line"><span class="comment"> *     String name() default &quot;&quot;;</span></span><br><span class="line"><span class="comment"> *     String[] value() default &#123;&#125;;</span></span><br><span class="line"><span class="comment"> *     String[] urlPatterns() default &#123;&#125;;</span></span><br><span class="line"><span class="comment"> *     int loadOnStartup() default -1;</span></span><br><span class="line"><span class="comment"> *     WebInitParam[] initParams() default &#123;&#125;;</span></span><br><span class="line"><span class="comment"> *     boolean asyncSupported() default false;</span></span><br><span class="line"><span class="comment"> *     String smallIcon() default &quot;&quot;;</span></span><br><span class="line"><span class="comment"> *     String largeIcon() default &quot;&quot;;</span></span><br><span class="line"><span class="comment"> *     String description() default &quot;&quot;;</span></span><br><span class="line"><span class="comment"> *     String displayName() default &quot;&quot;;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> * 3.urlPatterns å¯¹åº” &lt;url-patterns&gt;&lt;url-patterns/&gt;</span></span><br><span class="line"><span class="comment"> * 4.&#123;&quot;/ok1&quot;,&quot;/ok2&quot;&#125; å¯ä»¥ç»™OkServleté…ç½®å¤šä¸ªurl-pattern</span></span><br><span class="line"><span class="comment"> * 5.ç”¨æˆ·åœ¨æµè§ˆå™¨å¯ä»¥è¿™æ ·è®¿é—®ï¼šhttp://localhost:8080/servlet/ok2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &#123;&quot;/ok1&quot;,&quot;/ok2&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OkServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ³¨è§£æ–¹å¼ OkServlet doPost&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ³¨è§£æ–¹å¼ OkServlet doGet&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>æ³¨è§£æ–¹å¼æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</p><p>â€”â€”Tomcatå¯¹åŒ…è¿›è¡Œæ‰«æï¼Œå¦‚æœå‘ç°æŸä¸ªç±»è¢«@WebServletä¿®é¥°ï¼Œå°±è¯´æ˜è¯¥ç±»æ˜¯Servletï¼Œå°±è¯»å–æ³¨è§£ä¸­çš„urlPatternsï¼Œç„¶åè¿›è¡Œä¸‹ä¸€æ­¥â€¦â€¦(çœ‹è¯·æ±‚çš„èµ„æºæ˜¯å¦èƒ½ä»æ³¨è§£ä¸­æ‰¾åˆ°â€¦â€¦ï¼Œæ‰¾åˆ°åˆ™å¾—åˆ°urlPatternsï¼Œå»hashmapä¸­çœ‹è¯¥servletæ˜¯å¦å·²ç»åŠ è½½è¿‡â€¦â€¦)</p><h3 id="8-6-2-Servlet-urlPattern-é…ç½®"><a href="#8-6-2-Servlet-urlPattern-é…ç½®" class="headerlink" title="8.6.2 Servlet urlPattern é…ç½®"></a>8.6.2 Servlet urlPattern é…ç½®</h3><h4 id="8-6-2-1-ç²¾ç¡®åŒ¹é…"><a href="#8-6-2-1-ç²¾ç¡®åŒ¹é…" class="headerlink" title="8.6.2.1 ç²¾ç¡®åŒ¹é…"></a>8.6.2.1 ç²¾ç¡®åŒ¹é…</h4><p>â€”â€”æœ€ç®€å•ã€æ™®éçš„è·¯å¾„è®¾ç½®æ–¹å¼</p><p>é…ç½®è·¯å¾„ : @WebServlet(â€œ&#x2F;ok&#x2F;zsâ€)</p><p>è®¿é—® servlet: localhost:8080&#x2F;servlet&#x2F;ok&#x2F;zs</p><h4 id="8-6-2-2-ç›®å½•åŒ¹é…"><a href="#8-6-2-2-ç›®å½•åŒ¹é…" class="headerlink" title="8.6.2.2 ç›®å½•åŒ¹é…"></a>8.6.2.2 ç›®å½•åŒ¹é…</h4><p>â€”â€” * è¡¨ç¤ºï¼šé›¶å±‚ã€ä»»æ„å•å±‚ã€ä»»æ„å¤šå±‚</p><p>é…ç½®è·¯å¾„ : @WebServlet(â€œ&#x2F;ok&#x2F;*â€)</p><p>è®¿é—®æ–‡ä»¶: localhost:8080&#x2F;servlet&#x2F;ok&#x2F;aaa localhost:8080&#x2F;servlet&#x2F;ok&#x2F;bbb</p><h4 id="8-6-2-3-æ‰©å±•ååŒ¹é…"><a href="#8-6-2-3-æ‰©å±•ååŒ¹é…" class="headerlink" title="8.6.2.3 æ‰©å±•ååŒ¹é…"></a>8.6.2.3 æ‰©å±•ååŒ¹é…</h4><p>â€”â€”å¿…é¡»ä¿è¯åç¼€ä¸º .action</p><p>é…ç½®è·¯å¾„ : @WebServlet(â€œ**.actionâ€)*</p><p>è®¿é—®æ–‡ä»¶: localhost:8080&#x2F;hsp&#x2F;zs.action localhost:8080&#x2F;hsp&#x2F;ls.action</p><p>æç¤º: @WebServlet(â€œ&#x2F;*.actionâ€) , ä¸èƒ½å¸¦ &#x2F; , å¦åˆ™ tomcat æŠ¥é”™</p><h4 id="8-6-2-4-ä»»æ„åŒ¹é…"><a href="#8-6-2-4-ä»»æ„åŒ¹é…" class="headerlink" title="8.6.2.4 ä»»æ„åŒ¹é…"></a>8.6.2.4 ä»»æ„åŒ¹é…</h4><p>é…ç½®è·¯å¾„ : @WebServlet(â€œ&#x2F;â€œ) @WebServlet(â€œ&#x2F;**â€)*</p><p>è®¿é—®æ–‡ä»¶: localhost:8080&#x2F;hsp&#x2F;aaa localhost:8080&#x2F;hsp&#x2F;bbb localhost:8080&#x2F;hsp&#x2F;ccc</p><p>æé†’ï¼š &#x2F; å’Œ &#x2F;*çš„é…ç½®ï¼Œ ä¼šåŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼Œ è¿™ä¸ªæ¯”è¾ƒä¸å®ç”¨</p><h4 id="8-6-2-5-æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨ç»†èŠ‚"><a href="#8-6-2-5-æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨ç»†èŠ‚" class="headerlink" title="8.6.2.5 æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨ç»†èŠ‚"></a>8.6.2.5 æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨ç»†èŠ‚</h4><p>1ã€ å½“ Servlet é…ç½®äº† â€œ&#x2F;â€œ, ä¼šè¦†ç›– tomcat çš„ DefaultServlet,ï¼ˆå½“å…¶ä»–çš„ utl-pattern éƒ½åŒ¹é…ä¸ä¸Šæ—¶ ï¼Œéƒ½ä¼šèµ°è¿™ä¸ª Servlet, è¿™æ ·å¯ä»¥æ‹¦æˆªåˆ°å…¶å®ƒé™æ€èµ„æº,æ¯”å¦‚D:\hspedu_javaweb_temp\hspedu_servlet\web\hi.html [ä¸¾ä¾‹]æŸ¥çœ‹ï¼štomcat&#x2F;conf&#x2F;web.xml , é…ç½®çš„ DefaultServlet</p><p>ã€ŒThe default servlet for all web applications, that serves static resources.è¿™ä¸ªé»˜è®¤çš„ servlet æ˜¯å¤„ç†é™æ€èµ„æºçš„ï¼Œä¸€æ—¦æ‹¦æˆªï¼Œé™æ€èµ„æºä¸èƒ½å¤„ç†ã€</p><p>2ã€å½“ Servelt é…ç½®äº† â€œ&#x2F;**â€, è¡¨ç¤ºå¯ä»¥åŒ¹é…ä»»æ„è®¿é—®è·¯å¾„*</p><p>3ã€æç¤º: å»ºè®®ä¸è¦ä½¿ç”¨ &#x2F; å’Œ &#x2F;*, å»ºè®®å°½é‡ä½¿ç”¨ç²¾ç¡®åŒ¹é…</p><p>4ã€ä¼˜å…ˆçº§éµå®ˆ: ç²¾ç¡®è·¯å¾„ &gt; ç›®å½•è·¯å¾„ &gt; æ‰©å±•åè·¯å¾„ &gt; &#x2F;* &gt; &#x2F;</p><h2 id="8-8-ğŸŒŸå…³è”ç¯‡ï¼š-HTTP-åè®®"><a href="#8-8-ğŸŒŸå…³è”ç¯‡ï¼š-HTTP-åè®®" class="headerlink" title="8.8 ğŸŒŸå…³è”ç¯‡ï¼š HTTP åè®®"></a>8.8 ğŸŒŸå…³è”ç¯‡ï¼š HTTP åè®®</h2><h3 id="8-8-1è¯·æ±‚å¤´ã€å“åº”å¤´ä»‹ç»"><a href="#8-8-1è¯·æ±‚å¤´ã€å“åº”å¤´ä»‹ç»" class="headerlink" title="8.8.1è¯·æ±‚å¤´ã€å“åº”å¤´ä»‹ç»"></a>8.8.1è¯·æ±‚å¤´ã€å“åº”å¤´ä»‹ç»</h3><p><a href="https://github.com/Tangjiayang/picodemo/blob/main/img/HTTP%E5%B8%B8%E8%A7%81%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E5%A4%B4-%E8%AF%B4%E6%98%8E.pdf">https://github.com/Tangjiayang/picodemo/blob/main/img/HTTP%E5%B8%B8%E8%A7%81%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E5%A4%B4-%E8%AF%B4%E6%98%8E.pdf</a></p><h3 id="8-8-2HTTPçŠ¶æ€ç "><a href="#8-8-2HTTPçŠ¶æ€ç " class="headerlink" title="8.8.2HTTPçŠ¶æ€ç "></a>8.8.2HTTPçŠ¶æ€ç </h3><p>å½“æµè§ˆè€…è®¿é—®ä¸€ä¸ªç½‘é¡µæ—¶ï¼Œæµè§ˆè€…çš„æµè§ˆå™¨ä¼šå‘ç½‘é¡µæ‰€åœ¨æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚å½“æµè§ˆå™¨æ¥æ”¶å¹¶æ˜¾ç¤ºç½‘é¡µå‰ï¼Œæ­¤ç½‘é¡µæ‰€åœ¨çš„æœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªåŒ…å«HTTPçŠ¶æ€ç çš„ä¿¡æ¯å¤´ï¼ˆserver headerï¼‰ç”¨ä»¥å“åº”æµè§ˆå™¨çš„è¯·æ±‚ã€‚</p><p>HTTPçŠ¶æ€ç çš„è‹±æ–‡ä¸ºHTTP Status Codeã€‚</p><h4 id="ä¸‹é¢æ˜¯å¸¸è§çš„HTTPçŠ¶æ€ç ï¼š"><a href="#ä¸‹é¢æ˜¯å¸¸è§çš„HTTPçŠ¶æ€ç ï¼š" class="headerlink" title="ä¸‹é¢æ˜¯å¸¸è§çš„HTTPçŠ¶æ€ç ï¼š"></a>ä¸‹é¢æ˜¯å¸¸è§çš„HTTPçŠ¶æ€ç ï¼š</h4><p><strong>200 -</strong> <strong>è¯·æ±‚æˆåŠŸ</strong></p><p><strong>301 -</strong> <strong>èµ„æºï¼ˆç½‘é¡µç­‰ï¼‰è¢«æ°¸ä¹…è½¬ç§»åˆ°å…¶å®ƒURL</strong></p><p><strong>404 -</strong> <strong>è¯·æ±‚çš„èµ„æºï¼ˆç½‘é¡µç­‰ï¼‰ä¸å­˜åœ¨</strong></p><p><strong>500 -</strong> <strong>å†…éƒ¨æœåŠ¡å™¨é”™è¯¯</strong></p><h4 id="HTTPçŠ¶æ€ç åˆ†ç±»"><a href="#HTTPçŠ¶æ€ç åˆ†ç±»" class="headerlink" title="HTTPçŠ¶æ€ç åˆ†ç±»"></a>HTTPçŠ¶æ€ç åˆ†ç±»</h4><p>HTTPçŠ¶æ€ç ç”±ä¸‰ä¸ªåè¿›åˆ¶æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªåè¿›åˆ¶æ•°å­—å®šä¹‰äº†çŠ¶æ€ç çš„ç±»å‹ï¼Œåä¸¤ä¸ªæ•°å­—æ²¡æœ‰åˆ†ç±»çš„ä½œç”¨ã€‚HTTPçŠ¶æ€ç å…±åˆ†ä¸º5ç§ç±»å‹ï¼š</p><table><thead><tr><th>HTTPçŠ¶æ€ç åˆ†ç±»</th><th></th></tr></thead><tbody><tr><td><strong>åˆ†ç±»</strong></td><td><strong>åˆ†ç±»æè¿°</strong></td></tr><tr><td><strong>1*</strong>*</td><td><strong>ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ</strong></td></tr><tr><td><strong>2*</strong>*</td><td><strong>æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†</strong></td></tr><tr><td><strong>3*</strong>*</td><td><strong>é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚</strong></td></tr><tr><td><strong>4*</strong>*</td><td><strong>å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚</strong></td></tr><tr><td><strong>5*</strong>*</td><td><strong>æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯</strong></td></tr></tbody></table><h4 id="HTTPçŠ¶æ€ç åˆ—è¡¨"><a href="#HTTPçŠ¶æ€ç åˆ—è¡¨" class="headerlink" title="HTTPçŠ¶æ€ç åˆ—è¡¨:"></a>HTTPçŠ¶æ€ç åˆ—è¡¨:</h4><table><thead><tr><th>çŠ¶æ€ç </th><th><strong>çŠ¶æ€ç è‹±æ–‡åç§°</strong></th><th><strong>ä¸­æ–‡æè¿°</strong></th></tr></thead><tbody><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http100">100</a></strong></td><td><strong>Continue</strong></td><td><strong>ç»§ç»­ã€‚å®¢æˆ·ç«¯åº”ç»§ç»­å…¶è¯·æ±‚</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http101">101</a></strong></td><td><strong>Switching Protocols</strong></td><td><strong>åˆ‡æ¢åè®®ã€‚æœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ‡æ¢åè®®ã€‚åªèƒ½åˆ‡æ¢åˆ°æ›´é«˜çº§çš„åè®®ï¼Œä¾‹å¦‚ï¼Œåˆ‡æ¢åˆ°HTTPçš„æ–°ç‰ˆæœ¬åè®®</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http200">200</a></strong></td><td><strong>OK</strong></td><td><strong>è¯·æ±‚æˆåŠŸã€‚ä¸€èˆ¬ç”¨äºGETä¸POSTè¯·æ±‚</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http201">201</a></strong></td><td><strong>Created</strong></td><td><strong>å·²åˆ›å»ºã€‚æˆåŠŸè¯·æ±‚å¹¶åˆ›å»ºäº†æ–°çš„èµ„æº</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http200">202</a></strong></td><td><strong>Accepted</strong></td><td><strong>å·²æ¥å—ã€‚å·²ç»æ¥å—è¯·æ±‚ï¼Œä½†æœªå¤„ç†å®Œæˆ</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http203">203</a></strong></td><td><strong>Non-Authoritative Information</strong></td><td><strong>éæˆæƒä¿¡æ¯ã€‚è¯·æ±‚æˆåŠŸã€‚ä½†è¿”å›çš„metaä¿¡æ¯ä¸åœ¨åŸå§‹çš„æœåŠ¡å™¨ï¼Œè€Œæ˜¯ä¸€ä¸ªå‰¯æœ¬</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http204">204</a></strong></td><td><strong>No Content</strong></td><td><strong>æ— å†…å®¹ã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†ï¼Œä½†æœªè¿”å›å†…å®¹ã€‚åœ¨æœªæ›´æ–°ç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯ç¡®ä¿æµè§ˆå™¨ç»§ç»­æ˜¾ç¤ºå½“å‰æ–‡æ¡£</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http205">205</a></strong></td><td><strong>Reset Content</strong></td><td><strong>é‡ç½®å†…å®¹ã€‚æœåŠ¡å™¨å¤„ç†æˆåŠŸï¼Œç”¨æˆ·ç»ˆç«¯ï¼ˆä¾‹å¦‚ï¼šæµè§ˆå™¨ï¼‰åº”é‡ç½®æ–‡æ¡£è§†å›¾ã€‚å¯é€šè¿‡æ­¤è¿”å›ç æ¸…é™¤æµè§ˆå™¨çš„è¡¨å•åŸŸ</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http206">206</a></strong></td><td><strong>Partial Content</strong></td><td><strong>éƒ¨åˆ†å†…å®¹ã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†éƒ¨åˆ†GETè¯·æ±‚</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http300">300</a></strong></td><td><strong>Multiple Choices</strong></td><td><strong>å¤šç§é€‰æ‹©ã€‚è¯·æ±‚çš„èµ„æºå¯åŒ…æ‹¬å¤šä¸ªä½ç½®ï¼Œç›¸åº”å¯è¿”å›ä¸€ä¸ªèµ„æºç‰¹å¾ä¸åœ°å€çš„åˆ—è¡¨ç”¨äºç”¨æˆ·ç»ˆç«¯ï¼ˆä¾‹å¦‚ï¼šæµè§ˆå™¨ï¼‰é€‰æ‹©</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http301">301</a></strong></td><td><strong>Moved Permanently</strong></td><td><strong>æ°¸ä¹…ç§»åŠ¨ã€‚è¯·æ±‚çš„èµ„æºå·²è¢«æ°¸ä¹…çš„ç§»åŠ¨åˆ°æ–°URIï¼Œè¿”å›ä¿¡æ¯ä¼šåŒ…æ‹¬æ–°çš„URIï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å®šå‘åˆ°æ–°URIã€‚ä»Šåä»»ä½•æ–°çš„è¯·æ±‚éƒ½åº”ä½¿ç”¨æ–°çš„URIä»£æ›¿</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http302">302</a></strong></td><td><strong>Found</strong></td><td><strong>ä¸´æ—¶ç§»åŠ¨ã€‚ä¸301ç±»ä¼¼ã€‚ä½†èµ„æºåªæ˜¯ä¸´æ—¶è¢«ç§»åŠ¨ã€‚å®¢æˆ·ç«¯åº”ç»§ç»­ä½¿ç”¨åŸæœ‰URI</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http303">303</a></strong></td><td><strong>See Other</strong></td><td><strong>æŸ¥çœ‹å…¶å®ƒåœ°å€ã€‚ä¸301ç±»ä¼¼ã€‚ä½¿ç”¨GETå’ŒPOSTè¯·æ±‚æŸ¥çœ‹</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http304">304</a></strong></td><td><strong>Not Modified</strong></td><td><strong>æœªä¿®æ”¹ã€‚æ‰€è¯·æ±‚çš„èµ„æºæœªä¿®æ”¹ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤çŠ¶æ€ç æ—¶ï¼Œä¸ä¼šè¿”å›ä»»ä½•èµ„æºã€‚å®¢æˆ·ç«¯é€šå¸¸ä¼šç¼“å­˜è®¿é—®è¿‡çš„èµ„æºï¼Œé€šè¿‡æä¾›ä¸€ä¸ªå¤´ä¿¡æ¯æŒ‡å‡ºå®¢æˆ·ç«¯å¸Œæœ›åªè¿”å›åœ¨æŒ‡å®šæ—¥æœŸä¹‹åä¿®æ”¹çš„èµ„æº</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http305">305</a></strong></td><td><strong>Use Proxy</strong></td><td><strong>ä½¿ç”¨ä»£ç†ã€‚æ‰€è¯·æ±‚çš„èµ„æºå¿…é¡»é€šè¿‡ä»£ç†è®¿é—®</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http306">306</a></strong></td><td><strong>Unused</strong></td><td><strong>å·²ç»è¢«åºŸå¼ƒçš„HTTPçŠ¶æ€ç </strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http307">307</a></strong></td><td><strong>Temporary Redirect</strong></td><td><strong>ä¸´æ—¶é‡å®šå‘ã€‚ä¸302ç±»ä¼¼ã€‚ä½¿ç”¨GETè¯·æ±‚é‡å®šå‘</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http400">400</a></strong></td><td><strong>Bad Request</strong></td><td><strong>å®¢æˆ·ç«¯è¯·æ±‚çš„è¯­æ³•é”™è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•ç†è§£</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http401">401</a></strong></td><td><strong>Unauthorized</strong></td><td><strong>è¯·æ±‚è¦æ±‚ç”¨æˆ·çš„èº«ä»½è®¤è¯</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http402">402</a></strong></td><td><strong>Payment Required</strong></td><td><strong>ä¿ç•™ï¼Œå°†æ¥ä½¿ç”¨</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http403">403</a></strong></td><td><strong>Forbidden</strong></td><td><strong>æœåŠ¡å™¨ç†è§£è¯·æ±‚å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œæ­¤è¯·æ±‚</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http404">404</a></strong></td><td><strong>Not Found</strong></td><td><strong>æœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚æ‰¾åˆ°èµ„æºï¼ˆç½‘é¡µï¼‰ã€‚é€šè¿‡æ­¤ä»£ç ï¼Œç½‘ç«™è®¾è®¡äººå‘˜å¯è®¾ç½®â€æ‚¨æ‰€è¯·æ±‚çš„èµ„æºæ— æ³•æ‰¾åˆ°â€çš„ä¸ªæ€§é¡µé¢</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http405">405</a></strong></td><td><strong>Method Not Allowed</strong></td><td><strong>å®¢æˆ·ç«¯è¯·æ±‚ä¸­çš„æ–¹æ³•è¢«ç¦æ­¢</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http406">406</a></strong></td><td><strong>Not Acceptable</strong></td><td><strong>æœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚çš„å†…å®¹ç‰¹æ€§å®Œæˆè¯·æ±‚</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http407">407</a></strong></td><td><strong>Proxy Authentication Required</strong></td><td><strong>è¯·æ±‚è¦æ±‚ä»£ç†çš„èº«ä»½è®¤è¯ï¼Œä¸401ç±»ä¼¼ï¼Œä½†è¯·æ±‚è€…åº”å½“ä½¿ç”¨ä»£ç†è¿›è¡Œæˆæƒ</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http408">408</a></strong></td><td><strong>Request Time-out</strong></td><td><strong>æœåŠ¡å™¨ç­‰å¾…å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚æ—¶é—´è¿‡é•¿ï¼Œè¶…æ—¶</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http409">409</a></strong></td><td><strong>Conflict</strong></td><td><strong>æœåŠ¡å™¨å®Œæˆå®¢æˆ·ç«¯çš„PUTè¯·æ±‚æ˜¯å¯èƒ½è¿”å›æ­¤ä»£ç ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿäº†å†²çª</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http410">410</a></strong></td><td><strong>Gone</strong></td><td><strong>å®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºå·²ç»ä¸å­˜åœ¨ã€‚410ä¸åŒäº404ï¼Œå¦‚æœèµ„æºä»¥å‰æœ‰ç°åœ¨è¢«æ°¸ä¹…åˆ é™¤äº†å¯ä½¿ç”¨410ä»£ç ï¼Œç½‘ç«™è®¾è®¡äººå‘˜å¯é€šè¿‡301ä»£ç æŒ‡å®šèµ„æºçš„æ–°ä½ç½®</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http411">411</a></strong></td><td><strong>Length Required</strong></td><td><strong>æœåŠ¡å™¨æ— æ³•å¤„ç†å®¢æˆ·ç«¯å‘é€çš„ä¸å¸¦Content-Lengthçš„è¯·æ±‚ä¿¡æ¯</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http412">412</a></strong></td><td><strong>Precondition Failed</strong></td><td><strong>å®¢æˆ·ç«¯è¯·æ±‚ä¿¡æ¯çš„å…ˆå†³æ¡ä»¶é”™è¯¯</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http413">413</a></strong></td><td><strong>Request Entity Too Large</strong></td><td><strong>ç”±äºè¯·æ±‚çš„å®ä½“è¿‡å¤§ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†ï¼Œå› æ­¤æ‹’ç»è¯·æ±‚ã€‚ä¸ºé˜²æ­¢å®¢æˆ·ç«¯çš„è¿ç»­è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šå…³é—­è¿æ¥ã€‚å¦‚æœåªæ˜¯æœåŠ¡å™¨æš‚æ—¶æ— æ³•å¤„ç†ï¼Œåˆ™ä¼šåŒ…å«ä¸€ä¸ªRetry-Afterçš„å“åº”ä¿¡æ¯</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http414">414</a></strong></td><td><strong>Request-URI Too Large</strong></td><td><strong>è¯·æ±‚çš„URIè¿‡é•¿ï¼ˆURIé€šå¸¸ä¸ºç½‘å€ï¼‰ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http415">415</a></strong></td><td><strong>Unsupported Media Type</strong></td><td><strong>æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚é™„å¸¦çš„åª’ä½“æ ¼å¼</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http416">416</a></strong></td><td><strong>Requested range not satisfiable</strong></td><td><strong>å®¢æˆ·ç«¯è¯·æ±‚çš„èŒƒå›´æ— æ•ˆ</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http417">417</a></strong></td><td><strong>Expectation Failed</strong></td><td><strong>æœåŠ¡å™¨æ— æ³•æ»¡è¶³Expectçš„è¯·æ±‚å¤´ä¿¡æ¯</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http500">500</a></strong></td><td><strong>Internal Server Error</strong></td><td><strong>æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http501">501</a></strong></td><td><strong>Not Implemented</strong></td><td><strong>æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚çš„åŠŸèƒ½ï¼Œæ— æ³•å®Œæˆè¯·æ±‚</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http502">502</a></strong></td><td><strong>Bad Gateway</strong></td><td><strong>å……å½“ç½‘å…³æˆ–ä»£ç†çš„æœåŠ¡å™¨ï¼Œä»è¿œç«¯æœåŠ¡å™¨æ¥æ”¶åˆ°äº†ä¸€ä¸ªæ— æ•ˆçš„è¯·æ±‚</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http503">503</a></strong></td><td><strong>Service Unavailable</strong></td><td><strong>ç”±äºè¶…è½½æˆ–ç³»ç»Ÿç»´æŠ¤ï¼ŒæœåŠ¡å™¨æš‚æ—¶çš„æ— æ³•å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚å»¶æ—¶çš„é•¿åº¦å¯åŒ…å«åœ¨æœåŠ¡å™¨çš„Retry-Afterå¤´ä¿¡æ¯ä¸­</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http504">504</a></strong></td><td><strong>Gateway Time-out</strong></td><td><strong>å……å½“ç½‘å…³æˆ–ä»£ç†çš„æœåŠ¡å™¨ï¼ŒæœªåŠæ—¶ä»è¿œç«¯æœåŠ¡å™¨è·å–è¯·æ±‚</strong></td></tr><tr><td><strong><a href="https://www.w3cschool.cn/http/g9prxfmx.html#http505">505</a></strong></td><td><strong>HTTP Version not supported</strong></td><td><strong>æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚çš„HTTPåè®®çš„ç‰ˆæœ¬ï¼Œæ— æ³•å®Œæˆå¤„ç†</strong></td></tr></tbody></table><h3 id="GETè¯·æ±‚è¡Œå’Œè¯·æ±‚å¤´è§£æï¼š"><a href="#GETè¯·æ±‚è¡Œå’Œè¯·æ±‚å¤´è§£æï¼š" class="headerlink" title="GETè¯·æ±‚è¡Œå’Œè¯·æ±‚å¤´è§£æï¼š"></a>GETè¯·æ±‚è¡Œå’Œè¯·æ±‚å¤´è§£æï¼š</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230710100130745.png" alt="image-20230710100130745"></p><h3 id="POSTè¯·æ±‚è¡Œå’Œè¯·æ±‚å¤´è§£æï¼š"><a href="#POSTè¯·æ±‚è¡Œå’Œè¯·æ±‚å¤´è§£æï¼š" class="headerlink" title="POSTè¯·æ±‚è¡Œå’Œè¯·æ±‚å¤´è§£æï¼š"></a>POSTè¯·æ±‚è¡Œå’Œè¯·æ±‚å¤´è§£æï¼š</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230710101351184.png" alt="image-20230710101351184"></p><h3 id="ä½•æ—¶ä½¿ç”¨-get-x2F-post-ï¼Ÿ"><a href="#ä½•æ—¶ä½¿ç”¨-get-x2F-post-ï¼Ÿ" class="headerlink" title="ä½•æ—¶ä½¿ç”¨ get &#x2F; post ï¼Ÿ"></a>ä½•æ—¶ä½¿ç”¨ get &#x2F; post ï¼Ÿ</h3><p>getå’Œpostæ–¹æ³•åŠŸèƒ½ç±»ä¼¼çš„ï¼Œä½¿ç”¨å»ºè®®ï¼š<br>1ã€getæ–¹å¼çš„å®‰å…¨æ€§è¾ƒPostæ–¹å¼è¦å·®äº›ï¼ŒåŒ…å«æœºå¯†ä¿¡æ¯çš„è¯ï¼Œå»ºè®®ç”¨Postæ•°æ®æäº¤æ–¹å¼ï¼›<br>2ã€åœ¨åšæ•°æ®æŸ¥è¯¢æ—¶ï¼Œå»ºè®®ç”¨Getæ–¹å¼ï¼›è€Œåœ¨åšæ•°æ®æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤æ—¶ï¼Œå»ºè®®ç”¨Postæ–¹å¼ï¼›</p><p>åŒºåˆ«è¡¨ç°å¦‚ä¸‹ï¼š</p><ol><li>getæ˜¯ä»æœåŠ¡å™¨ä¸Šè·å–æ•°æ®ï¼Œpostæ˜¯å‘æœåŠ¡å™¨ä¼ é€æ•°æ®ã€‚</li><li>getæ˜¯æŠŠå‚æ•°æ•°æ®é˜Ÿåˆ—åŠ åˆ°æäº¤è¡¨å•çš„ACTIONå±æ€§æ‰€æŒ‡çš„URLä¸­ï¼Œå€¼å’Œè¡¨å•å†…å„ä¸ªå­—æ®µä¸€ä¸€å¯¹åº”ï¼Œåœ¨URLä¸­å¯ä»¥çœ‹åˆ°ã€‚postæ˜¯é€šè¿‡HTTP postæœºåˆ¶ï¼Œå°†è¡¨å•å†…å„ä¸ªå­—æ®µä¸å…¶å†…å®¹æ”¾ç½®åœ¨HTML HEADERå†…ä¸€èµ·ä¼ é€åˆ°ACTIONå±æ€§æ‰€æŒ‡çš„URLåœ°å€ã€‚ç”¨æˆ·çœ‹ä¸åˆ°è¿™ä¸ªè¿‡ç¨‹ã€‚</li><li>å¯¹äºgetæ–¹å¼ï¼ŒæœåŠ¡å™¨ç«¯ç”¨Request.QueryStringè·å–å˜é‡çš„å€¼ï¼Œå¯¹äºpostæ–¹å¼ï¼ŒæœåŠ¡å™¨ç«¯ç”¨Request.Formè·å–æäº¤çš„æ•°æ®ã€‚</li><li>getä¼ é€çš„æ•°æ®é‡è¾ƒå°ï¼Œä¸èƒ½å¤§äº2KBã€‚postä¼ é€çš„æ•°æ®é‡è¾ƒå¤§ï¼Œä¸€èˆ¬è¢«é»˜è®¤ä¸ºä¸å—é™åˆ¶ã€‚ä½†ç†è®ºä¸Šï¼ŒIIS4ä¸­æœ€å¤§é‡ä¸º80KBï¼ŒIIS5ä¸­ä¸º100KBã€‚</li><li>getå®‰å…¨æ€§éå¸¸ä½ï¼Œpostå®‰å…¨æ€§è¾ƒé«˜ã€‚ä½†æ˜¯æ‰§è¡Œæ•ˆç‡å´æ¯”Postæ–¹æ³•å¥½ã€‚</li></ol><p><strong>è‹¥ç¬¦åˆä¸‹åˆ—ä»»ä¸€æƒ…å†µï¼Œåˆ™ç”¨POSTæ–¹æ³•ï¼š</strong></p><ul><li>è¯·æ±‚çš„ç»“æœæœ‰æŒç»­æ€§çš„å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ï¼Œæ•°æ®åº“å†…æ·»åŠ æ–°çš„æ•°æ®è¡Œã€‚</li><li>è‹¥ä½¿ç”¨GETæ–¹æ³•ï¼Œåˆ™è¡¨å•ä¸Šæ”¶é›†çš„æ•°æ®å¯èƒ½è®©URLè¿‡é•¿ã€‚</li><li>è¦ä¼ é€çš„æ•°æ®ä¸æ˜¯é‡‡ç”¨7ä½çš„ASCIIç¼–ç ã€‚</li></ul><p><strong>è‹¥ç¬¦åˆä¸‹åˆ—ä»»ä¸€æƒ…å†µï¼Œåˆ™ç”¨GETæ–¹æ³•ï¼š</strong></p><ul><li>è¯·æ±‚æ˜¯ä¸ºäº†æŸ¥æ‰¾èµ„æºï¼ŒHTMLè¡¨å•æ•°æ®ä»…ç”¨æ¥å¸®åŠ©æœç´¢ã€‚</li><li>è¯·æ±‚ç»“æœæ— æŒç»­æ€§çš„å‰¯ä½œç”¨ã€‚</li><li>æ”¶é›†çš„æ•°æ®åŠHTMLè¡¨å•å†…çš„è¾“å…¥å­—æ®µåç§°çš„æ€»é•¿ä¸è¶…è¿‡1024ä¸ªå­—ç¬¦ã€‚</li></ul><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/qq_47443027/article/details/114696716">https://blog.csdn.net/qq_47443027/article/details/114696716</a></p><h3 id="å“åº”ä½“ï¼š"><a href="#å“åº”ä½“ï¼š" class="headerlink" title="å“åº”ä½“ï¼š"></a>å“åº”ä½“ï¼š</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230710211832628.png" alt="image-20230710211832628"></p><h3 id="å¸¸è§çŠ¶æ€ç è¯´æ˜ï¼š"><a href="#å¸¸è§çŠ¶æ€ç è¯´æ˜ï¼š" class="headerlink" title="å¸¸è§çŠ¶æ€ç è¯´æ˜ï¼š"></a>å¸¸è§çŠ¶æ€ç è¯´æ˜ï¼š</h3><h4 id="302"><a href="#302" class="headerlink" title="302"></a>302</h4><p>â€‹èµ„æºè¢«è½¬ç§»äº†ï¼Œè¿”å›ç»™ä½ 302 è¿˜å‘Šè¯‰ä½ è¯¥å»å“ªé‡Œæ‰¾ä¸è§çš„èµ„æºï¼Œå› æ­¤æµè§ˆå™¨éœ€è¦å‘é€ä¸¤æ¬¡è¯·æ±‚æ‰èƒ½è®¿é—®åˆ°åŸæ¥çš„èµ„æº(åªå‘ç”Ÿä¸€æ¬¡302çš„æƒ…å†µ)</p><h4 id="304"><a href="#304" class="headerlink" title="304"></a>304</h4><p>(åœ¨æµè§ˆå™¨å…è®¸ç¼“å­˜çš„æƒ…å†µä¸‹)æµè§ˆå™¨åœ¨è¯·æ±‚æŸèµ„æºæ—¶ï¼Œå¦‚æœæœ‰è¯¥èµ„æºçš„ç¼“å­˜ï¼Œå°±ä¼šæŠŠè¯¥èµ„æºçš„æœ€åä¿®æ”¹æ—¥æœŸä¹Ÿå‘ç»™æœåŠ¡å™¨ã€‚</p><p>å¦‚æœæœ€åä¿®æ”¹æ—¥æœŸ &#x3D; æœåŠ¡å™¨ç«¯è¯¥èµ„æºçš„æœ€åä¿®æ”¹æ—¥æœŸï¼Œåˆ™æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨è¯·æ±‚çš„èµ„æºæœªä¿®æ”¹è¿‡ï¼Œè¿”å›304ï¼Œä¸è¿”å›èµ„æºç»™æµè§ˆå™¨ï¼Œè®©æµè§ˆå™¨å»è‡ªå·±çš„ç¼“å­˜å»æ‰¾ã€‚</p><h4 id="MIMEç±»å‹"><a href="#MIMEç±»å‹" class="headerlink" title="MIMEç±»å‹"></a>MIMEç±»å‹</h4><h5 id="MIME-ä»‹ç»ï¼š"><a href="#MIME-ä»‹ç»ï¼š" class="headerlink" title="MIME ä»‹ç»ï¼š"></a>MIME ä»‹ç»ï¼š</h5><ol><li><p>MIME æ˜¯ HTTP åè®®ä¸­æ•°æ®ç±»å‹ã€‚ MIME çš„è‹±æ–‡å…¨ç§°æ˜¯â€Multipurpose Internet Mail Extensionsâ€ å¤šåŠŸèƒ½ Internet é‚®ä»¶æ‰©å……æœåŠ¡ã€‚ MIME ç±»å‹çš„æ ¼å¼æ˜¯**â€å¤§ç±»å‹&#x2F;å°ç±»å‹â€**ï¼Œå¹¶ä¸æŸä¸€ç§æ–‡ä»¶çš„æ‰©å±•åç›¸å¯¹åº”</p></li><li><p>åœ¨å“åº”åŒ…çš„Content-Type å°±æœ‰æŒ‡å®š</p></li></ol><h5 id="å¸¸è§çš„-MIME-ç±»å‹ï¼š"><a href="#å¸¸è§çš„-MIME-ç±»å‹ï¼š" class="headerlink" title="å¸¸è§çš„ MIME ç±»å‹ï¼š"></a>å¸¸è§çš„ MIME ç±»å‹ï¼š</h5><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711083211146.png" alt="image-20230711083211146" style="zoom: 67%;" /><h2 id="8-9-ServletConfig"><a href="#8-9-ServletConfig" class="headerlink" title="8.9 ServletConfig"></a>8.9 ServletConfig</h2><h3 id="8-9-1-ServletConfig-åŸºæœ¬ä»‹ç»"><a href="#8-9-1-ServletConfig-åŸºæœ¬ä»‹ç»" class="headerlink" title="8.9.1 ServletConfig åŸºæœ¬ä»‹ç»"></a>8.9.1 ServletConfig åŸºæœ¬ä»‹ç»</h3><ol><li>ServletConfig ç±»æ˜¯ä¸º Servlet ç¨‹åºçš„<strong>é…ç½®ä¿¡æ¯çš„ç±»</strong></li><li>Servlet ç¨‹åºå’Œ ServletConfig å¯¹è±¡éƒ½æ˜¯ç”± Tomcat è´Ÿè´£åˆ›å»º</li><li>Servlet ç¨‹åºé»˜è®¤æ˜¯ç¬¬ 1 æ¬¡è®¿é—®çš„æ—¶å€™åˆ›å»ºï¼Œ <u>ServletConfig åœ¨ Servlet ç¨‹åºåˆ›å»ºæ—¶ï¼Œ å°±åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ ServletConfig å¯¹è±¡</u>(æ¯ä¸ªservletéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„servletConfig)</li></ol><p>8.9.2 ServletConfig ç±»èƒ½å¹²ä»€ä¹ˆ</p><ul><li><p>è·å– Servlet ç¨‹åºçš„ <strong>servlet-name</strong> çš„å€¼</p></li><li><p>è·å–<strong>åˆå§‹åŒ–å‚æ•° init-param</strong></p></li><li><p>è·å– <strong>ServletContext å¯¹è±¡</strong></p></li></ul><h3 id="8-9-3-ServletConfig"><a href="#8-9-3-ServletConfig" class="headerlink" title="8.9.3 ServletConfig"></a>8.9.3 ServletConfig</h3><p>åº”ç”¨å®ä¾‹</p><p>â— éœ€æ±‚: ç¼–å†™ DBServlet.java å®Œæˆå¦‚ä¸‹åŠŸèƒ½</p><ol><li><p>åœ¨ web.xml é…ç½®è¿æ¥ mysql çš„ç”¨æˆ·åå’Œå¯†ç </p></li><li><p>åœ¨ DBServlet æ‰§è¡Œ doGet()&#x2F;doPost() æ—¶ï¼Œå¯ä»¥è·å–åˆ° web.xml é…ç½®çš„ç”¨æˆ·åå’Œå¯†ç </p></li><li><p>ç¤ºæ„å›¾(æ€è·¯åˆ†æ)</p></li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711084923867.png" alt="image-20230711084923867" style="zoom: 50%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;DBServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;com.study.servlet.DBServlet&lt;/servlet-class&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;username&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;donn&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;password&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;<span class="number">123456</span>&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> getServletConfig();</span><br><span class="line">    System.out.println(servletConfig.getInitParameter(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">    System.out.println(servletConfig.getInitParameter(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="8-10-ServletContext"><a href="#8-10-ServletContext" class="headerlink" title="8.10 ServletContext"></a>8.10 ServletContext</h2><p><strong><u><em>â€”â€”å¤šä¸ªServletå…±äº«çš„æ•°æ®ç©ºé—´</em></u></strong></p><h3 id="8-10-1-ä¸ºä»€ä¹ˆéœ€è¦-ServletContext"><a href="#8-10-1-ä¸ºä»€ä¹ˆéœ€è¦-ServletContext" class="headerlink" title="8.10.1 ä¸ºä»€ä¹ˆéœ€è¦ ServletContext"></a>8.10.1 ä¸ºä»€ä¹ˆéœ€è¦ ServletContext</h3><ol><li>å…ˆçœ‹ä¸€ä¸ªéœ€æ±‚ï¼š å¦‚æœæˆ‘ä»¬å¸Œæœ›ç»Ÿè®¡æŸä¸ª web åº”ç”¨çš„æ‰€æœ‰ Servlet è¢«è®¿é—®çš„æ¬¡æ•°ï¼Œ æ€ä¹ˆåŠ?</li></ol><p>â€‹æ–¹æ¡ˆ1-DB:</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711091848410.png" alt="image-20230711091848410" style="zoom:50%;" /><p>â€‹æ–¹æ¡ˆ2-ServletContextï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711092040710.png" alt="image-20230711092040710"></p><h3 id="8-10-2-ServletContext-åŸºæœ¬ä»‹ç»"><a href="#8-10-2-ServletContext-åŸºæœ¬ä»‹ç»" class="headerlink" title="8.10.2 ServletContext åŸºæœ¬ä»‹ç»"></a>8.10.2 ServletContext åŸºæœ¬ä»‹ç»</h3><ol><li><p>ServletContext æ˜¯ä¸€ä¸ªæ¥å£ï¼Œ å®ƒè¡¨ç¤º Servlet ä¸Šä¸‹æ–‡å¯¹è±¡</p></li><li><p><strong>ä¸€ä¸ª web å·¥ç¨‹ï¼Œåªæœ‰ä¸€ä¸ª ServletContext å¯¹è±¡å®ä¾‹</strong></p></li><li><p><strong>ServletContext å¯¹è±¡ æ˜¯åœ¨ web å·¥ç¨‹å¯åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œåœ¨ web å·¥ç¨‹åœæ­¢çš„æ—¶é”€æ¯</strong>  </p></li><li><p>ServletContext å¯¹è±¡å¯ä»¥é€šè¿‡ <strong>ServletConfig.getServletContext æ–¹æ³•</strong>è·å¾—å¯¹ ServletContextå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ **this.getServletContext()**æ¥è·å¾—å…¶å¯¹è±¡çš„å¼•ç”¨ã€‚</p></li><li><p>ç”±äºä¸€ä¸ª WEB åº”ç”¨ä¸­çš„æ‰€æœ‰ Servlet å…±äº«åŒä¸€ä¸ª ServletContext å¯¹è±¡ï¼Œå› æ­¤ Servlet å¯¹è±¡ä¹‹é—´å¯ä»¥é€šè¿‡ ServletContext å¯¹è±¡æ¥å®ç°å¤šä¸ª Servlet é—´é€šè®¯ã€‚<strong>ServletContext å¯¹è±¡é€šå¸¸ä¹Ÿè¢«ç§°ä¹‹ä¸ºåŸŸå¯¹è±¡</strong>ã€‚ã€ç¤ºæ„å›¾ã€‘</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711092825430.png" alt="image-20230711092825430"></p><h3 id="8-10-3-ServletContext-å¯ä»¥åšä»€ä¹ˆ"><a href="#8-10-3-ServletContext-å¯ä»¥åšä»€ä¹ˆ" class="headerlink" title="8.10.3 ServletContext å¯ä»¥åšä»€ä¹ˆ"></a>8.10.3 ServletContext å¯ä»¥åšä»€ä¹ˆ</h3><ol><li><p>è·å– web.xml ä¸­é…ç½®çš„ä¸Šä¸‹æ–‡å‚æ•° context-param [ä¿¡æ¯å’Œæ•´ä¸ª web åº”ç”¨ç›¸å…³ï¼Œ è€Œä¸æ˜¯å±äºæŸä¸ª Servlet]</p></li><li><p><strong>è·å–å½“å‰çš„å·¥ç¨‹è·¯å¾„</strong>ï¼Œæ ¼å¼: &#x2F;å·¥ç¨‹è·¯å¾„ &#x3D;&#x3D;&gt; æ¯”å¦‚ &#x2F;servlet.          <strong>å…¶å®å°±æ˜¯&#x2F;å·¥ç¨‹å</strong></p></li><li><p>è·å–<strong>å·¥ç¨‹éƒ¨ç½²ååœ¨æœåŠ¡å™¨ç¡¬ç›˜ä¸Šçš„ç»å¯¹è·¯å¾„</strong>( æ¯” å¦‚ :D:\hspedu_javaweb\servlet\out\artifacts\servlet_war_exploded)</p></li><li><p>åƒ Map ä¸€æ ·å­˜å–æ•°æ®, å¤šä¸ª Servlet å…±äº«æ•°æ®</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711093633773.png" alt="image-20230711093633773"></p><p>8.10.4 åº”ç”¨å®ä¾‹ </p><p>1-è·å–å·¥ç¨‹ç›¸å…³ä¿¡æ¯</p><p>â— éœ€æ±‚å¦‚ä¸‹ï¼š</p><ol><li>è·å– web.xml ä¸­é…ç½®çš„ä¸Šä¸‹æ–‡å‚æ•° context-param</li><li>è·å–å½“å‰çš„å·¥ç¨‹è·¯å¾„ï¼Œ æ ¼å¼: &#x2F;å·¥ç¨‹è·¯å¾„</li><li>è·å–å·¥ç¨‹éƒ¨ç½²ååœ¨æœåŠ¡å™¨ç¡¬ç›˜ä¸Šçš„ç»å¯¹è·¯å¾„</li></ol><p>â— ä»£ç å®ç° - å…·ä½“çœ‹ é¡¹ç›®ä¸­çš„ä»£ç .</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> getServletConfig();</span><br><span class="line">    System.out.println(servletConfig.getInitParameter(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">    System.out.println(servletConfig.getInitParameter(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;å…¬å…±æ•°æ®ï¼š&quot;</span> + servletConfig.getServletContext().getInitParameter(<span class="string">&quot;website&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;å·¥ç¨‹è·¯å¾„&quot;</span> + servletConfig.getServletContext().getContextPath());</span><br><span class="line">  <span class="comment">// â€œ/â€è¡¨ç¤ºé¡¹ç›®å‘å¸ƒåçš„æ ¹ç›®å½•(outç›®å½•ä¸­)</span></span><br><span class="line">    System.out.println(<span class="string">&quot;ç»å¯¹è·¯å¾„&quot;</span> + servletConfig.getServletContext().getRealPath(<span class="string">&quot;/&quot;</span>));</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-10-5-åº”ç”¨å®ä¾‹-2-ç®€å•çš„ç½‘ç«™è®¿é—®æ¬¡æ•°è®¡æ•°å™¨"><a href="#8-10-5-åº”ç”¨å®ä¾‹-2-ç®€å•çš„ç½‘ç«™è®¿é—®æ¬¡æ•°è®¡æ•°å™¨" class="headerlink" title="8.10.5 åº”ç”¨å®ä¾‹ 2-ç®€å•çš„ç½‘ç«™è®¿é—®æ¬¡æ•°è®¡æ•°å™¨"></a>8.10.5 åº”ç”¨å®ä¾‹ 2-ç®€å•çš„ç½‘ç«™è®¿é—®æ¬¡æ•°è®¡æ•°å™¨</h3><p>â€¦â€¦</p><h2 id="8-11-HttpServletRequest"><a href="#8-11-HttpServletRequest" class="headerlink" title="8.11 HttpServletRequest"></a>8.11 HttpServletRequest</h2><h3 id="8-11-1-HttpServletRequest-ä»‹ç»"><a href="#8-11-1-HttpServletRequest-ä»‹ç»" class="headerlink" title="8.11.1 HttpServletRequest ä»‹ç»"></a>8.11.1 HttpServletRequest ä»‹ç»</h3><p><strong><u>â€”â€”httpè¯·æ±‚ä¸­çš„ä¿¡æ¯éƒ½è¢«å°è£…åœ¨HttpServletRequestä¸­</u></strong></p><ol><li>HttpServletRequest å¯¹è±¡ä»£è¡¨å®¢æˆ·ç«¯çš„è¯·æ±‚</li><li>å½“å®¢æˆ·ç«¯&#x2F;æµè§ˆå™¨é€šè¿‡ HTTP åè®®è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œ<strong>HTTP è¯·æ±‚å¤´ä¸­çš„æ‰€æœ‰ä¿¡æ¯éƒ½å°è£…åœ¨è¿™ä¸ªå¯¹è±¡ä¸­</strong></li><li>é€šè¿‡è¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œå¯ä»¥è·å¾—å®¢æˆ·ç«¯è¿™äº›ä¿¡æ¯ã€‚</li></ol><h3 id="8-11-2-HttpServletRequest-ç±»å›¾"><a href="#8-11-2-HttpServletRequest-ç±»å›¾" class="headerlink" title="8.11.2 HttpServletRequest ç±»å›¾"></a>8.11.2 HttpServletRequest ç±»å›¾</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711102743263.png" alt="image-20230711102743263"></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711102808631.png" alt="image-20230711102808631" style="zoom:50%;" /><h3 id="8-11-3-HttpServletRequest-å¸¸ç”¨æ–¹æ³•"><a href="#8-11-3-HttpServletRequest-å¸¸ç”¨æ–¹æ³•" class="headerlink" title="8.11.3 HttpServletRequest å¸¸ç”¨æ–¹æ³•"></a>8.11.3 HttpServletRequest å¸¸ç”¨æ–¹æ³•</h3><ol><li><p>getRequestURI() è·å–è¯·æ±‚çš„<strong>èµ„æºè·¯å¾„</strong></p><p>å³  <a href="http://localhost:8080/servlet/loginServlet%E4%B8%AD%E7%9A%84%E3%80%8Cservlet/loginServlet%E3%80%8D">http://localhost:8080/servlet/loginServletä¸­çš„ã€Œservlet/loginServletã€</a></p></li><li><p>getRequestURL() è·å–è¯·æ±‚çš„ç»Ÿä¸€èµ„æºå®šä½ç¬¦ ï¼ˆ ç» å¯¹ è·¯ å¾„ ï¼‰<a href="http://localhost:8080/servlet/loginServlet">http://localhost:8080/servlet/loginServlet</a></p></li><li><p>getRemoteHost() è·å–å®¢æˆ·ç«¯çš„ä¸»æœº, getRemoteAddr()</p></li><li><p>getHeader() è·å–è¯·æ±‚å¤´                <strong>request.getHeader(â€œCookie(ä¾‹)â€) å¯ä»¥è·å–httpè¯·æ±‚å¤´ä¸­çš„ä»»æ„ä¿¡æ¯</strong></p></li><li><p>getParameter() è·å–è¯·æ±‚çš„å‚æ•°</p></li><li><p>getParameterValues() è·å–è¯·æ±‚çš„å‚æ•°ï¼ˆå¤šä¸ªå€¼çš„æ—¶å€™ä½¿ç”¨ï¼‰ , æ¯”å¦‚ checkbox, è¿”å›çš„æ•°ç»„</p><p><strong>å¯ä»¥è·å–å‰ç«¯è¡¨å•ä¼ æ¥çš„æ•°æ®ï¼Œæ ¹æ®é”®(å‰ç«¯æ ‡ç­¾ä¸­çš„nameå±æ€§)è·å–å€¼</strong></p></li><li><p>getMethod() è·å–è¯·æ±‚çš„æ–¹å¼ GET æˆ– POST</p></li><li><p>setAttribute(key, value); <strong>è®¾ç½®åŸŸæ•°æ®</strong></p></li><li><p>getAttribute(key); <strong>è·å–åŸŸæ•°æ®</strong></p></li><li><p>ğŸŒŸgetRequestDispatcher() <u><strong>è·å–è¯·æ±‚è½¬å‘å¯¹è±¡, è¯·æ±‚è½¬å‘çš„æ ¸å¿ƒå¯¹è±¡</strong></u></p></li></ol><h3 id="8-11-4-HttpServletRequest-åº”ç”¨å®ä¾‹"><a href="#8-11-4-HttpServletRequest-åº”ç”¨å®ä¾‹" class="headerlink" title="8.11.4 HttpServletRequest åº”ç”¨å®ä¾‹"></a>8.11.4 HttpServletRequest åº”ç”¨å®ä¾‹</h3><p>â€¦â€¦</p><h3 id="8-11-5-HttpServletRequest-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#8-11-5-HttpServletRequest-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="8.11.5 HttpServletRequest æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>8.11.5 HttpServletRequest æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><ol><li>è· å– doPost å‚æ•°ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ¡ˆ , æ³¨ æ„ setCharacterEncoding(â€œutf-8â€) è¦ å†™ åœ¨request.getParameter()å‰(åœ¨æ¥å—å‚æ•°å‰è®¾ç½®å­—ä½“ )ã€‚</li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711110015613.png" alt="image-20230711110015613" style="zoom:50%;" /><ol start="2"><li>æ³¨æ„ï¼šå¦‚æœé€šè¿‡ PrintWriter writer, æœ‰è¿”å›æ•°æ®ç»™æµè§ˆå™¨ï¼Œå»ºè®®å°†<strong>è·å–å‚æ•°ä»£ç å†™åœ¨writer.print() ä¹‹å‰</strong>ï¼Œå¦åˆ™å¯èƒ½è·å–ä¸åˆ°å‚æ•°å€¼(doPost)</li><li>å¤„ç† http <strong>å“åº”æ•°æ®ä¸­æ–‡ä¹±ç </strong>é—®é¢˜ (æ”¹å˜ç¼–ç ä¸ºutf-8)</li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711110448507.png" alt="image-20230711110448507" style="zoom:50%;" /><ol start="4"><li>å†æ¬¡ç†è§£ Http åè®®å“åº” Content-Type çš„å«ä¹‰, æ¯”å¦‚ text&#x2F;plain(ä»¥æ–‡æœ¬æ–¹å¼è§£æ)    application&#x2F;x-tar(è¡¨ç¤ºè¿”å›çš„æ˜¯æ–‡ä»¶ï¼Œæµè§ˆå™¨ä¼šä»¥ä¸‹è½½æ–‡ä»¶çš„æ–¹å¼å¤„ç†)</li></ol><h3 id="8-11-7-è¯·æ±‚è½¬å‘"><a href="#8-11-7-è¯·æ±‚è½¬å‘" class="headerlink" title="8.11.7 è¯·æ±‚è½¬å‘"></a>8.11.7 è¯·æ±‚è½¬å‘</h3><h4 id="8-11-7-1-ä¸ºä»€ä¹ˆéœ€è¦è¯·æ±‚è½¬å‘"><a href="#8-11-7-1-ä¸ºä»€ä¹ˆéœ€è¦è¯·æ±‚è½¬å‘" class="headerlink" title="8.11.7.1 ä¸ºä»€ä¹ˆéœ€è¦è¯·æ±‚è½¬å‘"></a>8.11.7.1 ä¸ºä»€ä¹ˆéœ€è¦è¯·æ±‚è½¬å‘</h4><ol><li>ç›®å‰æˆ‘ä»¬å­¦ä¹ çš„éƒ½æ˜¯ä¸€æ¬¡è¯·æ±‚ï¼Œ å¯¹åº”ä¸€ä¸ª Servletï¼Œ å¦‚å›¾</li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711111006356.png" alt="image-20230711111006356" style="zoom: 50%;" /><ol start="2"><li>ä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¾€å¾€ä¸šåŠ¡æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦åœ¨ä¸€æ¬¡è¯·æ±‚ä¸­ï¼Œ<strong>ä½¿ç”¨åˆ°å¤šä¸ª Servlet å®Œæˆä¸€ä¸ªä»»åŠ¡(Servlet é“¾, æµæ°´ä½œä¸š)</strong> å¦‚å›¾:</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711111046853.png" alt="image-20230711111046853"></p><h4 id="8-11-7-2-è¯·æ±‚è½¬å‘è¯´æ˜"><a href="#8-11-7-2-è¯·æ±‚è½¬å‘è¯´æ˜" class="headerlink" title="8.11.7.2 è¯·æ±‚è½¬å‘è¯´æ˜"></a>8.11.7.2 è¯·æ±‚è½¬å‘è¯´æ˜</h4><ol><li><p>å®ç°è¯·æ±‚è½¬å‘ï¼š è¯·æ±‚è½¬å‘æŒ‡ä¸€ä¸ª web èµ„æºæ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œ é€šçŸ¥æœåŠ¡å™¨å»è°ƒç”¨å¦å¤–ä¸€ä¸ª web èµ„æºè¿›è¡Œå¤„ç†</p></li><li><p>HttpServletRequest å¯¹è±¡(ä¹Ÿå« Request å¯¹è±¡)æä¾›äº†ä¸€ä¸ª getRequestDispatcher æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª RequestDispatcher å¯¹è±¡ï¼Œ<strong>è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„ forward æ–¹æ³•å¯ä»¥å®ç°è¯·æ±‚è½¬å‘</strong></p></li><li><p>request å¯¹è±¡åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªåŸŸå¯¹è±¡ï¼Œå¼€å‘äººå‘˜é€šè¿‡ request å¯¹è±¡åœ¨å®ç°è½¬å‘æ—¶ï¼ŒæŠŠæ•°æ®é€šè¿‡ request å¯¹è±¡å¸¦ç»™å…¶å®ƒ web èµ„æºå¤„ç†</p><ul><li><p>setAttributeæ–¹æ³•</p></li><li><p>getAttributeæ–¹æ³•</p></li><li><p>removeAttributeæ–¹æ³•</p></li><li><p>getAttributeNamesæ–¹æ³•</p></li></ul></li></ol><h4 id="8-11-7-3-å®ç°è¯·æ±‚è½¬å‘"><a href="#8-11-7-3-å®ç°è¯·æ±‚è½¬å‘" class="headerlink" title="8.11.7.3 å®ç°è¯·æ±‚è½¬å‘"></a>8.11.7.3 å®ç°è¯·æ±‚è½¬å‘</h4><p>è¯·æ±‚è½¬å‘åŸç†ç¤ºæ„å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711134908152.png" alt="image-20230711134908152"></p><h4 id="8-11-7-4-è¯·æ±‚è½¬å‘åº”ç”¨å®ä¾‹"><a href="#8-11-7-4-è¯·æ±‚è½¬å‘åº”ç”¨å®ä¾‹" class="headerlink" title="8.11.7.4 è¯·æ±‚è½¬å‘åº”ç”¨å®ä¾‹"></a>8.11.7.4 è¯·æ±‚è½¬å‘åº”ç”¨å®ä¾‹</h4><p>â€¦â€¦</p><p>è¯·æ±‚è½¬å‘ä¸­ï¼Œå„ä¸ªservletå¯ä»¥å…±äº«requeståŸŸå¯¹è±¡çš„åŸå› ï¼š</p><p>â€‹å› ä¸ºè¯·æ±‚è½¬å‘çš„æ–¹å¼ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  â€œ/manageServletâ€ä¸ºå‘é€çš„å¯¹è±¡(è½¬å‘ç»™è°)</span></span><br><span class="line"><span class="comment">//å…¶ä¸­:â€œ/â€ ä¼šè¢«è§£ææˆâ€œ/é¡¹ç›®åâ€ (å‰é¢ä¸€å®šæ˜¯è¡¨ç¤ºè¯¥æœåŠ¡å™¨çš„http://å·¥ç¨‹åï¼šç«¯å£)</span></span><br><span class="line"><span class="comment">//manageServletä¸ºèµ„æºå</span></span><br><span class="line"><span class="comment">//ğŸŒŸå› æ­¤ï¼Œè¯·æ±‚è½¬å‘æ˜¯ä¸èƒ½è½¬å‘åˆ°å¤–ç½‘çš„(åªèƒ½åœ¨æœåŠ¡å™¨ä¸»æœºå†…éƒ¨è¿›è¡Œè½¬å‘)</span></span><br><span class="line"><span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> request.getRequestDispatcher(<span class="string">&quot;/manageServlet&quot;</span>);</span><br><span class="line"><span class="comment">//è€Œæ­¤å¤„çš„requestå°†è¢«ä¼ ç»™ä¸‹ä¸€ä¸ªservletï¼Œæ‰€ä»¥å¯ä»¥å…±äº«requestå¯¹è±¡ä¸­çš„æ•°æ®ï¼ï¼ï¼ï¼</span></span><br><span class="line">requestDispatcher.forward(request, response);</span><br></pre></td></tr></table></figure><h4 id="8-11-7-5-è¯·æ±‚è½¬å‘æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#8-11-7-5-è¯·æ±‚è½¬å‘æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="8.11.7.5 è¯·æ±‚è½¬å‘æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>8.11.7.5 è¯·æ±‚è½¬å‘æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><ol><li><p>ğŸŒŸ<strong>æµè§ˆå™¨åœ°å€ä¸ä¼šå˜åŒ–(åœ°å€ä¼šä¿ç•™åœ¨ç¬¬ 1 ä¸ª servlet çš„ url)</strong></p></li><li><p>åœ¨åŒä¸€æ¬¡ HTTP è¯·æ±‚ä¸­ï¼Œè¿›è¡Œå¤šæ¬¡è½¬å‘ï¼Œä»ç„¶æ˜¯ä¸€æ¬¡ HTTP è¯·æ±‚</p></li><li><p>åœ¨åŒä¸€æ¬¡ HTTP è¯·æ±‚ä¸­ï¼Œè¿›è¡Œå¤šæ¬¡è½¬å‘ï¼Œå¤šä¸ª Servlet å¯ä»¥å…±äº« request åŸŸ&#x2F;å¯¹è±¡çš„æ•°æ®(å› ä¸ºå§‹ç»ˆæ˜¯åŒä¸€ä¸ª request å¯¹è±¡)</p></li><li><p>å¯ä»¥è½¬å‘åˆ° WEB-INF ç›®å½•ä¸‹(åé¢åšé¡¹ç›®ä½¿ç”¨)</p></li><li><p><strong>ä¸èƒ½è®¿é—®å½“å‰ WEB å·¥ç¨‹å¤–çš„èµ„æº</strong></p></li><li><p><u>å› ä¸ºæµè§ˆå™¨åœ°å€æ ä¼šåœæ­¢åœ¨ç¬¬ä¸€ä¸ª servlet ,å¦‚æœä½ åˆ·æ–°é¡µé¢ï¼Œä¼šå†æ¬¡å‘å‡ºè¯·æ±‚(å¹¶ä¸”ä¼šå¸¦æ•°æ®), æ‰€ä»¥åœ¨æ”¯ä»˜é¡µé¢æƒ…å†µä¸‹ï¼Œä¸è¦ä½¿ç”¨è¯·æ±‚è½¬å‘ï¼Œå¦åˆ™ä¼šé€ æˆé‡å¤æ”¯ä»˜</u></p></li></ol><h3 id="8-11-8-è¯¾åä½œä¸š"><a href="#8-11-8-è¯¾åä½œä¸š" class="headerlink" title="8.11.8 è¯¾åä½œä¸š"></a>8.11.8 è¯¾åä½œä¸š</h3><p>â€¦â€¦</p><h2 id="8-12-HttpServletResponse"><a href="#8-12-HttpServletResponse" class="headerlink" title="8.12 HttpServletResponse"></a>8.12 HttpServletResponse</h2><h3 id="8-12-1-HttpServletResponse-ä»‹ç»"><a href="#8-12-1-HttpServletResponse-ä»‹ç»" class="headerlink" title="8.12.1 HttpServletResponse ä»‹ç»"></a>8.12.1 HttpServletResponse ä»‹ç»</h3><ol><li><p>æ¯æ¬¡ HTTP è¯·æ±‚ï¼Œ Tomcat ä¼šåˆ›å»ºä¸€ä¸ª HttpServletResponse å¯¹è±¡ä¼ é€’ç»™ Servlet ç¨‹åºå»ä½¿ç”¨ã€‚</p></li><li><p><strong>HttpServletRequest è¡¨ç¤ºè¯·æ±‚è¿‡æ¥çš„ä¿¡æ¯</strong>ï¼Œ<strong>HttpServletResponse è¡¨ç¤ºæ‰€æœ‰<u>å“åº”</u>çš„ä¿¡æ¯</strong>ï¼Œå¦‚æœ<u>éœ€è¦è®¾ç½®è¿”å›ç»™å®¢æˆ·ç«¯çš„ä¿¡æ¯</u>ï¼Œé€šè¿‡ HttpServletResponse å¯¹è±¡æ¥è¿›è¡Œè®¾ç½®å³å¯</p></li></ol><h3 id="8-12-2-HttpServletResponse-ç±»å›¾"><a href="#8-12-2-HttpServletResponse-ç±»å›¾" class="headerlink" title="8.12.2 HttpServletResponse ç±»å›¾"></a>8.12.2 HttpServletResponse ç±»å›¾</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711152642270.png" alt="image-20230711152642270"></p><h3 id="8-12-3-å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®æ–¹æ³•"><a href="#8-12-3-å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®æ–¹æ³•" class="headerlink" title="8.12.3 å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®æ–¹æ³•"></a>8.12.3 å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®æ–¹æ³•</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711152728428.png" alt="image-20230711152728428"></p><ol><li>å­—èŠ‚æµ getOutputStream(); <strong>å¸¸ç”¨äºä¸‹è½½</strong>ï¼ˆå¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼‰</li><li>å­—ç¬¦æµ getWriter(); å¸¸ç”¨äº<strong>å›ä¼ </strong>å­—ç¬¦ä¸²</li><li>(ç»†èŠ‚ï¼š)ä¸¤ä¸ªæµ<strong>åŒæ—¶åªèƒ½ä½¿ç”¨ä¸€ä¸ª</strong>ã€‚ ä½¿ç”¨äº†å­—èŠ‚æµï¼Œå°±ä¸èƒ½å†ä½¿ç”¨å­—ç¬¦æµï¼Œåä¹‹äº¦ç„¶ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™</li></ol><h3 id="8-12-4-å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®åº”ç”¨å®ä¾‹"><a href="#8-12-4-å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®åº”ç”¨å®ä¾‹" class="headerlink" title="8.12.4 å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®åº”ç”¨å®ä¾‹"></a>8.12.4 å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®åº”ç”¨å®ä¾‹</h3><ol><li>éœ€æ±‚ï¼š æµè§ˆå™¨è¯·æ±‚ , è¿”å› hello, world</li></ol><p>â€¦â€¦</p><h3 id="8-12-5-å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#8-12-5-å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="8.12.5 å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>8.12.5 å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><ol><li>å¤„ç†ä¸­æ–‡ä¹±ç é—®é¢˜-æ–¹æ¡ˆ 1</li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711153139236.png" alt="image-20230711153139236" style="zoom:50%;" /><ol start="2"><li>å¤„ç†ä¸­æ–‡ä¹±ç é—®é¢˜-æ–¹æ¡ˆ 2(å¸¸ç”¨ï¼Œæ–¹ä¾¿)</li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711153202800.png" alt="image-20230711153202800" style="zoom:50%;" /><h3 id="8-12-6-è¯·æ±‚é‡å®šå‘"><a href="#8-12-6-è¯·æ±‚é‡å®šå‘" class="headerlink" title="8.12.6 è¯·æ±‚é‡å®šå‘"></a>8.12.6 è¯·æ±‚é‡å®šå‘</h3><h4 id="8-12-6-1-è¯·æ±‚é‡å®šå‘ä»‹ç»"><a href="#8-12-6-1-è¯·æ±‚é‡å®šå‘ä»‹ç»" class="headerlink" title="8.12.6.1 è¯·æ±‚é‡å®šå‘ä»‹ç»"></a>8.12.6.1 è¯·æ±‚é‡å®šå‘ä»‹ç»</h4><ol><li><p>è¯·æ±‚é‡å®šå‘æŒ‡ï¼š ä¸€ä¸ª web èµ„æºæ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œ <u><strong>é€šçŸ¥å®¢æˆ·ç«¯å»è®¿é—®å¦å¤–ä¸€ä¸ª webèµ„æº</strong></u>ï¼Œ è¿™ç§°ä¹‹ä¸ºè¯·æ±‚é‡å®šå‘</p></li><li><p>è¯·æ±‚é‡å®šå‘åŸç†ç¤ºæ„å›¾</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230711153900776.png" alt="image-20230711153900776"></p><h4 id="8-12-6-2-è¯·æ±‚é‡å®šå‘åº”ç”¨å®ä¾‹"><a href="#8-12-6-2-è¯·æ±‚é‡å®šå‘åº”ç”¨å®ä¾‹" class="headerlink" title="8.12.6.2 è¯·æ±‚é‡å®šå‘åº”ç”¨å®ä¾‹"></a>8.12.6.2 è¯·æ±‚é‡å®šå‘åº”ç”¨å®ä¾‹</h4><ol><li>éœ€ æ±‚ ï¼š æ¼”ç¤ºè¯·æ±‚é‡å®šå‘çš„ä½¿ç”¨å½“è®¿é—® DownServlet ä¸‹ è½½ æ–‡ ä»¶ ï¼Œ é‡å®šå‘åˆ°DownServletNew ä¸‹è½½æ–‡ä»¶</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. sendRedirect æœ¬è´¨å°±ä¼š è¿”å› 302 çŠ¶æ€ç  Location: /servlet/downservletNew</span></span><br><span class="line"><span class="comment">//2ï¼å› æ­¤ 302å’Œ/servlet/downservletNew æ˜¯æµè§ˆå™¨è§£æï¼Œè€Œä¸æ˜¯æœåŠ¡å™¨</span></span><br><span class="line"><span class="comment">//3ï¼æµè§ˆå™¨åœ¨è§£æ /servlet/downservletnew =&gt; http://localhost:8080/downServletNew</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹æ³•1:</span></span><br><span class="line">response.sendRedirect(<span class="string">&quot;/servlet/downServletNew&quot;</span>);</span><br><span class="line"><span class="comment">//æ–¹æ³•2:</span></span><br><span class="line">response.setStatus(<span class="number">302</span>);</span><br><span class="line">response.setHeader(<span class="string">&quot;Location&quot;</span>,<span class="string">&quot;/servlet/downServletNew&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="8-12-6-3-è¯·æ±‚é‡å®šå‘æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#8-12-6-3-è¯·æ±‚é‡å®šå‘æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="8.12.6.3 è¯·æ±‚é‡å®šå‘æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>8.12.6.3 è¯·æ±‚é‡å®šå‘æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><ol><li><p>æœ€ä½³åº”ç”¨åœºæ™¯ï¼šç½‘ç«™è¿ç§»ï¼Œ æ¯”å¦‚åŸåŸŸåæ˜¯ <a href="http://www.hsp.com/">www.hsp.com</a> è¿ç§»åˆ° <a href="http://www.hsp.cn/">www.hsp.cn</a> ï¼Œ ä½†æ˜¯ç™¾åº¦æŠ“å–çš„è¿˜æ˜¯åŸæ¥ç½‘å€.</p></li><li><p>æµè§ˆå™¨åœ°å€ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæœ¬è´¨æ˜¯ä¸¤æ¬¡ http è¯·æ±‚.</p></li><li><p><strong>ä¸èƒ½å…±äº« Request åŸŸä¸­çš„æ•°æ®ï¼Œæœ¬è´¨æ˜¯ä¸¤æ¬¡ http è¯·æ±‚ï¼Œä¼šç”Ÿæˆä¸¤ä¸ª HttpServletRequestå¯¹è±¡</strong></p></li><li><p><u>ä¸èƒ½é‡å®šå‘åˆ° &#x2F;WEB-INF ä¸‹çš„èµ„æº</u></p></li><li><p>å¯ä»¥é‡å®šå‘åˆ° Web å·¥ç¨‹ä»¥å¤–çš„èµ„æºï¼Œ æ¯”å¦‚ åˆ° <a href="http://www.baidu.com/">www.baidu.com</a> </p></li><li><p>é‡å®šå‘æœ‰ä¸¤ç§æ–¹å¼, <strong>æ¨èä½¿ç”¨ç¬¬ 1 ç§.</strong></p></li><li><p>åŠ¨æ€è·å–åˆ° application context(è¿™ä¸ªæ˜¯æŒ‡è¯¥é¡¹ç›®åœ¨tomcatä¸Šè¿è¡Œæ—¶çš„é¡¹ç›®åç§°ï¼Œé‡å®šå‘æ—¶æ¯æ¬¡éƒ½éœ€è¦å¡«ä¸Šï¼Œå› æ­¤åœ¨ä¿®æ”¹æ—¶ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–åŠ¨æ€è·å–çš„æ–¹å¼ç®€åŒ–å®ƒ</p><p>ä½¿ç”¨æ–¹æ³•ï¼šgetServletContext().getContextPath()è·å–å³å¯)</p></li></ol><h3 id="8-12-7-è¯¾åä½œä¸š"><a href="#8-12-7-è¯¾åä½œä¸š" class="headerlink" title="8.12.7 è¯¾åä½œä¸š"></a>8.12.7 è¯¾åä½œä¸š</h3><ol><li><p>ç¼–å†™ä¸€ä¸ª MyPayServlet , èƒ½å¤Ÿæ¥æ”¶åˆ°æäº¤çš„æ•°æ®</p></li><li><p>ç¼–å†™ä¸€ä¸ªç®€å•çš„æ”¯ä»˜é¡µé¢ pay.html(å¦‚å›¾)</p></li><li><p>å¦‚æœæ”¯ä»˜é‡‘é¢å¤§äº 100, åˆ™é‡å®šå‘åˆ° payok.html, å¦åˆ™é‡å®šå‘åˆ°åŸæ¥çš„ pay.html</p></li></ol><p>â€‹â€¦â€¦</p><h1 id="10-æ‰‹åŠ¨å®ç°-Tomcat-åº•å±‚æœºåˆ¶-è‡ªå·±è®¾è®¡-Servlet"><a href="#10-æ‰‹åŠ¨å®ç°-Tomcat-åº•å±‚æœºåˆ¶-è‡ªå·±è®¾è®¡-Servlet" class="headerlink" title="10 æ‰‹åŠ¨å®ç° Tomcat åº•å±‚æœºåˆ¶+ è‡ªå·±è®¾è®¡ Servlet"></a>10 æ‰‹åŠ¨å®ç° Tomcat åº•å±‚æœºåˆ¶+ è‡ªå·±è®¾è®¡ Servlet</h1><h2 id="10-1-å…ˆçœ‹ä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œ-å¼•å‡ºå¯¹-Tomcat-åº•å±‚å®ç°æ€è€ƒ"><a href="#10-1-å…ˆçœ‹ä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œ-å¼•å‡ºå¯¹-Tomcat-åº•å±‚å®ç°æ€è€ƒ" class="headerlink" title="10.1 å…ˆçœ‹ä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œ å¼•å‡ºå¯¹ Tomcat åº•å±‚å®ç°æ€è€ƒ"></a>10.1 å…ˆçœ‹ä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œ å¼•å‡ºå¯¹ Tomcat åº•å±‚å®ç°æ€è€ƒ</h2><h3 id="10-1-1-å®Œæˆå°æ¡ˆä¾‹"><a href="#10-1-1-å®Œæˆå°æ¡ˆä¾‹" class="headerlink" title="10.1.1 å®Œæˆå°æ¡ˆä¾‹"></a>10.1.1 å®Œæˆå°æ¡ˆä¾‹</h3><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230712184414696.png" alt="image-20230712184414696" style="zoom:50%;" /><ol start="0"><li>æˆ‘ä»¬å‡†å¤‡ä½¿ç”¨ Maven æ¥åˆ›å»ºä¸€ä¸ª WEB é¡¹ç›®, è€å¸ˆå…ˆç®€å•ç»™å°ä¼™ä¼´ä»‹ç»ä¸€ä¸‹ Maven æ˜¯ä»€ä¹ˆ, æ›´åŠ è¯¦ç»†çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿˜ä¼šç»†è®², ç°åœ¨å…ˆä½¿ç”¨ä¸€æŠŠ</li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230712184444044.png" alt="image-20230712184444044" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230712184525975.png" alt="image-20230712184525975" style="zoom:67%;" /><ol><li>å…ˆåˆ›å»ºä¸€ä¸ª Maven çš„ Web é¡¹ç›® hsp-tomcat</li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230712185354190.png" alt="image-20230712185354190" style="zoom:50%;" /><ul><li>é…ç½®é˜¿é‡Œ maven é•œåƒ</li></ul><p>â€‹åœ¨mavençš„settings.xmlæ–‡ä»¶ä¸­ä¿®æ”¹mirroræ ‡ç­¾ä¸­çš„å†…å®¹å³å¯</p><ol start="2"><li>ä¿®æ”¹ D:\java_projects2\hsp\pom.xml</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.donn<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mytomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mytomcat Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--1.å¼•å…¥javax.servlet-api.jarï¼Œä¸ºäº†å¼€å‘servlet</span></span><br><span class="line"><span class="comment">          2.&lt;dependency&gt;æ ‡ç­¾è¡¨ç¤ºå¼•å…¥ä¸€ä¸ªåŒ…</span></span><br><span class="line"><span class="comment">          3.groudIdï¼šåŒ…çš„å…¬å¸ä¿¡æ¯ï¼šjavax.servlet</span></span><br><span class="line"><span class="comment">          4.artifactIdï¼šé¡¹ç›®åï¼šjavax.servlet-api</span></span><br><span class="line"><span class="comment">            groupId+artifactId å°†ä»¥ç›®å½•å½¢å¼ä½“ç°(åœ¨ä»“åº“ä¸­ç»„æˆjaråŒ…è·¯å¾„</span></span><br><span class="line"><span class="comment">          5.versionï¼šç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment">          6.scopeï¼šè¡¨ç¤ºå¼•å…¥åŒ…çš„ä½œç”¨èŒƒå›´</span></span><br><span class="line"><span class="comment">            åœ¨ä»€ä¹ˆåœ°æ–¹ã€åœ¨ä»€ä¹ˆé˜¶æ®µç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">            &lt;scope&gt;provided&lt;/scope&gt; è¡¨ç¤ºtomcatæœ¬èº«æœ‰jaråŒ…ï¼Œ</span></span><br><span class="line"><span class="comment">            åœ¨ç¼–è¯‘ã€æµ‹è¯•æ—¶æœ‰æ•ˆï¼Œä½†æ˜¯æ‰“åŒ…å‘å¸ƒåä¸è¦å¸¦ä¸Šè¿™ä¸ªåŒ…</span></span><br><span class="line"><span class="comment">            (æ„æ€å°±æ˜¯æ‰“åŒ…æ—¶ï¼Œé¡¹ç›®ä¼šæœ‰è‡ªå¸¦çš„è¯¥jaråŒ…ï¼Œ</span></span><br><span class="line"><span class="comment">            ä½†æ˜¯ç¼–è¯‘ã€æµ‹è¯•æ—¶æ²¡æœ‰ï¼ŒprovidedæŒ‡åªåœ¨ç¼–è¯‘æµ‹è¯•æ—¶æ·»åŠ è¯¥jaråŒ…)</span></span><br><span class="line"><span class="comment">          7.ä¸‹è½½çš„åŒ…åœ¨æŒ‡å®šçš„æœ¬åœ°ä»“åº“</span></span><br><span class="line"><span class="comment">          --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>mytomcat<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»º D:\java_projects2\hsp\src\main\webapp\cal.html</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>è®¡ç®—å™¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>è®¡ç®—å™¨<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/calServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">    num1:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;num1&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    num2:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;num2&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="4"><li><p>åˆ›å»º java ç›®å½•ï¼Œå­˜æ”¾ java æºæ–‡ä»¶.</p></li><li><p>åˆ›å»º CalServlet.java</p></li><li><p>ä¿®æ”¹ web.xml , é…ç½® Servlet</p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CalServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.donn.servlet.CalServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CalServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/calServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="7"><li>ä¿®æ”¹CalServlet.java, å®Œæˆè®¡ç®—ä»»åŠ¡</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.donn.servlet; <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/7/12</span></span><br><span class="line"><span class="comment"> * 22:27</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.donn.utils.WebUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CalServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//æ¥å—æäº¤çš„æ•°æ®è¿›è¡Œè®¡ç®—</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">num1</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;num1&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">num2</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;num2&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> WebUtils.parseInt(num1, <span class="number">0</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i2</span> <span class="operator">=</span> WebUtils.parseInt(num2, <span class="number">0</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> i1 + i2;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        writer.print(<span class="string">&quot;&lt;h1&gt;&quot;</span> + i1 + <span class="string">&quot;+&quot;</span> + i2 + <span class="string">&quot;=&quot;</span> + res + <span class="string">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="8"><li>åˆ› å»º å·¥ å…· ç±»\utils\WebUtils.java</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.donn.utils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/7/12</span></span><br><span class="line"><span class="comment"> * 22:38</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†ä¸€ä¸ªå­—ç¬¦ä¸²æ•°å­—ï¼Œè½¬æˆ int, å¦‚æœè½¬æ¢å¤±è´¥ï¼Œå°±è¿”å›ä¼ å…¥ defaultVal</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> strNum</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> defaultVal</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">parseInt</span><span class="params">(String strNum, <span class="type">int</span> defaultVal)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Integer.parseInt(strNum);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">            System.out.println(strNum + <span class="string">&quot; æ ¼å¼ä¸å¯¹ï¼Œè½¬æ¢å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> defaultVal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-1-3-å®Œæˆæµ‹è¯•"><a href="#10-1-3-å®Œæˆæµ‹è¯•" class="headerlink" title="10.1.3 å®Œæˆæµ‹è¯•"></a>10.1.3 å®Œæˆæµ‹è¯•</h3><h4 id="10-1-3-1-é…ç½®-tomcat"><a href="#10-1-3-1-é…ç½®-tomcat" class="headerlink" title="10.1.3.1 é…ç½® tomcat"></a>10.1.3.1 é…ç½® tomcat</h4><h4 id="10-1-3-2-å¯åŠ¨-tomcat"><a href="#10-1-3-2-å¯åŠ¨-tomcat" class="headerlink" title="10.1.3.2 å¯åŠ¨ tomcat"></a>10.1.3.2 å¯åŠ¨ tomcat</h4><h4 id="10-1-3-3-æµè§ˆå™¨è®¿é—®-http-localhost-8080-cal-html"><a href="#10-1-3-3-æµè§ˆå™¨è®¿é—®-http-localhost-8080-cal-html" class="headerlink" title="10.1.3.3 æµè§ˆå™¨è®¿é—®: http://localhost:8080/cal.html"></a>10.1.3.3 æµè§ˆå™¨è®¿é—®: <a href="http://localhost:8080/cal.html">http://localhost:8080/cal.html</a></h4><h3 id="10-1-4-æ€è€ƒé—®é¢˜-Tomcat-åº•å±‚å®ç°-å’Œ-è°ƒç”¨åˆ°-Servlet-æµç¨‹"><a href="#10-1-4-æ€è€ƒé—®é¢˜-Tomcat-åº•å±‚å®ç°-å’Œ-è°ƒç”¨åˆ°-Servlet-æµç¨‹" class="headerlink" title="10.1.4 æ€è€ƒé—®é¢˜: Tomcat åº•å±‚å®ç° å’Œ è°ƒç”¨åˆ° Servlet æµç¨‹?"></a>10.1.4 æ€è€ƒé—®é¢˜: Tomcat åº•å±‚å®ç° å’Œ è°ƒç”¨åˆ° Servlet æµç¨‹?</h3><h3 id="10-1-5-æˆ‘ä»¬çš„ç›®æ ‡"><a href="#10-1-5-æˆ‘ä»¬çš„ç›®æ ‡" class="headerlink" title="10.1.5 æˆ‘ä»¬çš„ç›®æ ‡:"></a>10.1.5 æˆ‘ä»¬çš„ç›®æ ‡:</h3><p><u><strong>ä¸ç”¨ Tomcat, ä¸ç”¨ç³»ç»Ÿæä¾›çš„ Servlet, æ¨¡æ‹Ÿ Tomcat åº•å±‚å®ç°å¹¶èƒ½è°ƒç”¨æˆ‘ä»¬è‡ªå·±è®¾è®¡çš„ Servle, ä¹Ÿèƒ½å®Œæˆç›¸åŒçš„åŠŸèƒ½</strong></u></p><h2 id="10-2-ğŸŒŸTomcat-æ•´ä½“æ¶æ„åˆ†æ"><a href="#10-2-ğŸŒŸTomcat-æ•´ä½“æ¶æ„åˆ†æ" class="headerlink" title="10.2 ğŸŒŸTomcat æ•´ä½“æ¶æ„åˆ†æ"></a>10.2 ğŸŒŸTomcat æ•´ä½“æ¶æ„åˆ†æ</h2><h3 id="10-2-1-ä¸€å›¾èƒœåƒè¨€"><a href="#10-2-1-ä¸€å›¾èƒœåƒè¨€" class="headerlink" title="10.2.1 ä¸€å›¾èƒœåƒè¨€"></a>10.2.1 ä¸€å›¾èƒœåƒè¨€</h3>]]></content>
      
      
      <categories>
          
          <category> WebåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux</title>
      <link href="/2023/06/20/Linux/"/>
      <url>/2023/06/20/Linux/</url>
      
        <content type="html"><![CDATA[<p>æœ¬åšå®¢å‚ç…§äº†éŸ©é¡ºå¹³è€å¸ˆçš„Linuxè¯¾ç¨‹ï¼Œbç«™å¯æœï¼</p><h1 id="Linuxå­¦ä¹ ğŸš€"><a href="#Linuxå­¦ä¹ ğŸš€" class="headerlink" title="Linuxå­¦ä¹ ğŸš€"></a>Linuxå­¦ä¹ ğŸš€</h1><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620231850984.png" alt="image-20230620231850984" style="zoom:50%;" /><h2 id="åŸºç¡€ç¯‡ï¼š"><a href="#åŸºç¡€ç¯‡ï¼š" class="headerlink" title="åŸºç¡€ç¯‡ï¼š"></a>åŸºç¡€ç¯‡ï¼š</h2><h3 id="Linuxå…¥é—¨ï¼š"><a href="#Linuxå…¥é—¨ï¼š" class="headerlink" title="Linuxå…¥é—¨ï¼š"></a>Linuxå…¥é—¨ï¼š</h3><h4 id="linuxçš„åº”ç”¨é¢†åŸŸï¼š"><a href="#linuxçš„åº”ç”¨é¢†åŸŸï¼š" class="headerlink" title="linuxçš„åº”ç”¨é¢†åŸŸï¼š"></a>linuxçš„åº”ç”¨é¢†åŸŸï¼š</h4><ul><li><strong>ä¸ªäººæ¡Œé¢é¢†åŸŸ</strong><ul><li>æ­¤é¢†åŸŸæ˜¯ä¼ ç»ŸLinuxåº”ç”¨è–„å¼±çš„ç¯èŠ‚ï¼Œè¿‘äº›å¹´æ¥éšç€ubuntuã€fedoraç­‰ä¼˜ç§€æ¡Œé¢ç¯å¢ƒçš„å…´èµ·ï¼ŒLinuxåœ¨ä¸ªäººæ¡Œé¢é¢†åŸŸçš„å æœ‰ç‡æ­£åœ¨é€æ¸çš„æé«˜</li></ul></li><li><strong>æœåŠ¡å™¨é¢†åŸŸ</strong><ul><li>linuxåœ¨<u>æœåŠ¡å™¨é¢†åŸŸçš„åº”ç”¨æ˜¯æœ€å¼ºçš„</u>ã€‚</li><li>linux <u><em>å…è´¹ã€ç¨³å®šã€é«˜æ•ˆ</em></u> ç­‰ç‰¹ç‚¹åœ¨è¿™é‡Œå¾—åˆ°äº†å¾ˆå¥½çš„ä½“ç°ï¼Œå°¤å…¶åœ¨ä¸€äº›é«˜ç«¯é¢†åŸŸå°¤ä¸ºå¹¿æ³›( c&#x2F;c+ + &#x2F;php&#x2F;java&#x2F;python) .</li></ul></li><li><strong>åµŒå…¥å¼é¢†åŸŸ</strong><ul><li>linuxè¿è¡Œç¨³å®šã€å¯¹ç½‘ç»œçš„è‰¯å¥½æ”¯æŒæ€§ï¼Œä½æˆæœ¬ï¼Œä¸”<strong>å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè½¯ä»¶è£å‰ª</strong>ï¼Œå†…æ ¸æœ€å°å¯ä»¥è¾¾åˆ°å‡ ç™¾KBç­‰ç‰¹ç‚¹ï¼Œä½¿å…¶è¿‘äº›å¹´æ¥åœ¨åµŒå…¥å¼é¢†åŸŸçš„åº”ç”¨å¾—åˆ°éå¸¸å¤§çš„æé«˜ï¼›</li><li>ä¸»è¦åº”ç”¨ï¼šæœºé¡¶ç›’ã€æ•°å®‡ç”µè§†ã€ç½‘ç»œç”µè¯ã€ç¨‹æ§äº¤æ¢æœºã€æ‰‹æœºã€PDAã€æ™ºèƒ½å®¶å±…ã€æ™ºèƒ½ç¡¬ä»¶ç­‰éƒ½æ˜¯å…¶åº”ç”¨é¢†åŸŸã€‚ä»¥ååœ¨ç‰©è”ç½‘ä¸­åº”ç”¨ä¼šæ›´åŠ å¹¿æ³›ã€‚</li></ul></li></ul><h3 id="vmå’ŒLinuxå®‰è£…ï¼š"><a href="#vmå’ŒLinuxå®‰è£…ï¼š" class="headerlink" title="vmå’ŒLinuxå®‰è£…ï¼š"></a>vmå’ŒLinuxå®‰è£…ï¼š</h3><p>â€¦â€¦è·Ÿç€è€å¸ˆçš„æ•™ç¨‹èµ°ï¼Œmacç”¨æˆ·å°±å»ç½‘ä¸Šæœæ•™ç¨‹å³å¯</p><h4 id="ç½‘ç»œè¿æ¥çš„ä¸‰ç§æ–¹å¼ï¼š"><a href="#ç½‘ç»œè¿æ¥çš„ä¸‰ç§æ–¹å¼ï¼š" class="headerlink" title="ç½‘ç»œè¿æ¥çš„ä¸‰ç§æ–¹å¼ï¼š"></a>ç½‘ç»œè¿æ¥çš„ä¸‰ç§æ–¹å¼ï¼š</h4><ol><li><p>æ¡¥æ¥æ¨¡å¼</p></li><li><p>NATæ¨¡å¼</p></li><li><p>ä¸»æœºæ¨¡å¼</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/IMG_31492E73D3F2-1.jpeg" alt="IMG_31492E73D3F2-1"></p><h4 id="è™šæ‹Ÿæœºå…‹éš†-æ–¹ä¾¿å¿«é€Ÿæ„å»ºé›†ç¾¤"><a href="#è™šæ‹Ÿæœºå…‹éš†-æ–¹ä¾¿å¿«é€Ÿæ„å»ºé›†ç¾¤" class="headerlink" title="è™šæ‹Ÿæœºå…‹éš†(æ–¹ä¾¿å¿«é€Ÿæ„å»ºé›†ç¾¤)"></a>è™šæ‹Ÿæœºå…‹éš†(æ–¹ä¾¿å¿«é€Ÿæ„å»ºé›†ç¾¤)</h4><p>â€‹å¦‚æœä½ å·²ç»å®‰è£…äº†ä¸€åˆlinuxæ“ä½œç³»ç»Ÿï¼Œä½ è¿˜æƒ³å†æ›´å¤šçš„ï¼Œè€éŸ©æç¤ºå¤§å®¶ï¼šæ²¡æœ‰å¿…è¦å†é‡æ–°å®‰è£…ï¼Œä½ åªéœ€è¦å…‹éš†å°±å¯ä»¥ã€‚</p><ul><li>æ–¹å¼1ï¼šç›´æ¥æ‹·è´ä¸€ä»½å®‰è£…å¥½çš„è™›æ‹Ÿæœºæ–‡ä»¶</li><li>æ–¹å¼2ï¼šä½¿ç”¨vmwareçš„å…‹éš†æ“ä½œï¼Œæ³¨æ„ï¼Œå…‹éš†æ—¶ï¼Œéœ€è¦å…ˆå…³é—­linuxç³»ç»Ÿ</li></ul><h4 id="è™šæ‹Ÿæœºå¿«ç…§"><a href="#è™šæ‹Ÿæœºå¿«ç…§" class="headerlink" title="è™šæ‹Ÿæœºå¿«ç…§"></a>è™šæ‹Ÿæœºå¿«ç…§</h4><p>å¦‚æœä½ åœ¨ä½¿ç”¨è™›æ‹Ÿæœºç³»ç»Ÿçš„æ—¶å€™(æ¯”å¦‚linuxï¼‰ï¼Œä½ æƒ³<strong>å›åˆ°åŸå…ˆçš„æŸä¸€ä¸ªçŠ¶æ€</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ æ‹…å¿ƒå¯èƒ½æœ‰äº›è¯¯æ“ä½œé€ æˆç³»ç»Ÿå¼‚å¸¸ï¼Œéœ€è¦å›åˆ°åŸå…ˆæŸä¸ªæ­£å¸¸è¿è¡Œçš„çŠ¶æ€ï¼Œvmwareä¹Ÿæä¾›äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œå°±å«å¿«ç…§ç®¡ç†ã€‚</p><h4 id="å®‰è£…vmtools"><a href="#å®‰è£…vmtools" class="headerlink" title="å®‰è£…vmtools"></a>å®‰è£…vmtools</h4><ul><li><p>ä»‹ç»</p><ol><li><p>vmtools å®‰è£…åï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨windowsä¸‹é‡å¥½çš„ç®¡ç†vmè™›æ‹Ÿæœº</p></li><li><p>å¯ä»¥è®¾ç½®windowså’Œcentosçš„å…±äº«æ–‡ä»¶å¤¹</p></li></ol></li></ul><h3 id="Linuxç›®å½•ç»“æ„ï¼š"><a href="#Linuxç›®å½•ç»“æ„ï¼š" class="headerlink" title="Linuxç›®å½•ç»“æ„ï¼š"></a>Linuxç›®å½•ç»“æ„ï¼š</h3><h2 id="å®æ“ç¯‡ï¼š"><a href="#å®æ“ç¯‡ï¼š" class="headerlink" title="å®æ“ç¯‡ï¼š"></a>å®æ“ç¯‡ï¼š</h2><h2 id="é«˜çº§ç¯‡ï¼š"><a href="#é«˜çº§ç¯‡ï¼š" class="headerlink" title="é«˜çº§ç¯‡ï¼š"></a>é«˜çº§ç¯‡ï¼š</h2>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½¯ä»¶å·¥ç¨‹</title>
      <link href="/2023/06/07/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/"/>
      <url>/2023/06/07/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="è½¯ä»¶å·¥ç¨‹"><a href="#è½¯ä»¶å·¥ç¨‹" class="headerlink" title="è½¯ä»¶å·¥ç¨‹"></a>è½¯ä»¶å·¥ç¨‹</h1><h2 id="Chapter1-Introduction"><a href="#Chapter1-Introduction" class="headerlink" title="Chapter1 Introduction"></a>Chapter1 Introduction</h2><h3 id="è½¯ä»¶å·¥ç¨‹å­¦ç§‘äº§ç”Ÿçš„èƒŒæ™¯ï¼š"><a href="#è½¯ä»¶å·¥ç¨‹å­¦ç§‘äº§ç”Ÿçš„èƒŒæ™¯ï¼š" class="headerlink" title="è½¯ä»¶å·¥ç¨‹å­¦ç§‘äº§ç”Ÿçš„èƒŒæ™¯ï¼š"></a>è½¯ä»¶å·¥ç¨‹å­¦ç§‘äº§ç”Ÿçš„èƒŒæ™¯ï¼š</h3><h4 id="è½¯ä»¶å±æœºï¼š"><a href="#è½¯ä»¶å±æœºï¼š" class="headerlink" title="è½¯ä»¶å±æœºï¼š"></a>è½¯ä»¶å±æœºï¼š</h4><h5 id="ä»ç»“æœæ¥çœ‹ï¼Œè½¯ä»¶å±æœºä½“ç°åœ¨ï¼š"><a href="#ä»ç»“æœæ¥çœ‹ï¼Œè½¯ä»¶å±æœºä½“ç°åœ¨ï¼š" class="headerlink" title="ä»ç»“æœæ¥çœ‹ï¼Œè½¯ä»¶å±æœºä½“ç°åœ¨ï¼š"></a>ä»ç»“æœæ¥çœ‹ï¼Œè½¯ä»¶å±æœºä½“ç°åœ¨ï¼š</h5><ul><li>è½¯ä»¶è´¨é‡å·®ã€å¯é æ€§éš¾ä»¥ä¿è¯</li><li>æˆæœ¬éš¾ä»¥æ§åˆ¶</li><li>å¼€å‘è¿›åº¦éš¾ä»¥æŠŠæ¡</li><li>å¯ç»´æŠ¤æ€§è¾ƒå·®</li></ul><h5 id="ä»åŸå› æ¥çœ‹ï¼Œè½¯ä»¶å±æœºç”±ä»¥ä¸‹ä¸¤ç‚¹å¯¼è‡´ï¼š"><a href="#ä»åŸå› æ¥çœ‹ï¼Œè½¯ä»¶å±æœºç”±ä»¥ä¸‹ä¸¤ç‚¹å¯¼è‡´ï¼š" class="headerlink" title="ä»åŸå› æ¥çœ‹ï¼Œè½¯ä»¶å±æœºç”±ä»¥ä¸‹ä¸¤ç‚¹å¯¼è‡´ï¼š"></a>ä»åŸå› æ¥çœ‹ï¼Œè½¯ä»¶å±æœºç”±ä»¥ä¸‹ä¸¤ç‚¹å¯¼è‡´ï¼š</h5><ol><li>ä¸æ–­å¢é•¿çš„ç³»ç»Ÿå¤æ‚æ€§</li><li>æœªæœ‰æ•ˆé‡‡ç”¨è½¯ä»¶å·¥ç¨‹æ–¹æ³•è¿›è¡Œå¼€å‘</li></ol><h3 id="Frequently-asked-questions-about-software-engineering"><a href="#Frequently-asked-questions-about-software-engineering" class="headerlink" title="Frequently asked questions about software engineering"></a><strong>Frequently asked questions about software engineering</strong></h3><table><thead><tr><th><strong>Question</strong></th><th><strong>Answer</strong></th></tr></thead><tbody><tr><td>What  is software?</td><td><strong>Computer  programs</strong> and <strong>associated documentation</strong>. Software products may be developed for  a particular customer or may be developed for a general market.</td></tr><tr><td>What  are the attributes of good software?</td><td>Good  software should deliver the required functionality and performance to the  user and should be maintainable, dependable and usable.</td></tr><tr><td>What  is software engineering?</td><td>Software  engineering is an engineering discipline that is concerned with all aspects  of software production.</td></tr><tr><td>What  are the fundamental software engineering activities?</td><td>Software  specification(è§„èŒƒ), software development, software validation(éªŒè¯) and software  evolution(æ¼”è¿›).</td></tr><tr><td>What  is the difference between software engineering and computer science?</td><td>Computer  science focuses on theory and fundamentals; software engineering is concerned  with the practicalities of developing and delivering useful software.</td></tr><tr><td>What  is the difference between software engineering and system engineering?</td><td>System  engineering is concerned with all aspects of computer-based systems  development including hardware, software and process engineering. Software  engineering is part of this more general process.</td></tr><tr><td>What are the key challenges facing  software engineering?</td><td>Coping with increasing diversity,  demands for reduced delivery times and developing trustworthy software.</td></tr><tr><td>What  are the costs of software engineering?</td><td>Roughly  60% of software costs are development costs, 40% are testing costs. For  custom software, evolution costs often exceed development costs.</td></tr><tr><td>What  are the best software engineering techniques and methods?</td><td>While  all software projects have to be professionally managed and developed,  <strong>different techniques are appropriate for different types of system</strong>. For  example, games should always be developed using a series of prototypes  whereas safety critical control systems require a complete and analyzable  specification to be developed. You canâ€™t, therefore, say that one method is  better than another.</td></tr></tbody></table><h3 id="å¥½çš„è½¯ä»¶çš„åŸºæœ¬å±æ€§"><a href="#å¥½çš„è½¯ä»¶çš„åŸºæœ¬å±æ€§" class="headerlink" title="å¥½çš„è½¯ä»¶çš„åŸºæœ¬å±æ€§"></a>å¥½çš„è½¯ä»¶çš„åŸºæœ¬å±æ€§</h3><ul><li>å¯æ¥å—æ€§(æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚ï¼Œç”¨æˆ·èƒ½ç”¨ï¼Œå¥½ç”¨)</li><li>å¯ä¾èµ–æ€§å’Œä¿¡æ¯å®‰å…¨æ€§</li><li>æ•ˆç‡é«˜</li><li>å¯ç»´æŠ¤æ€§</li></ul><h3 id="è½¯ä»¶è¿‡ç¨‹â€”â€”å››é¡¹åŸºæœ¬æ´»åŠ¨"><a href="#è½¯ä»¶è¿‡ç¨‹â€”â€”å››é¡¹åŸºæœ¬æ´»åŠ¨" class="headerlink" title="è½¯ä»¶è¿‡ç¨‹â€”â€”å››é¡¹åŸºæœ¬æ´»åŠ¨"></a>è½¯ä»¶è¿‡ç¨‹â€”â€”å››é¡¹åŸºæœ¬æ´»åŠ¨</h3><ol><li><strong>è½¯ä»¶è§„æ ¼è¯´æ˜</strong>ï¼ˆlike éœ€æ±‚åˆ†æ</li><li><strong>è½¯ä»¶å¼€å‘</strong></li><li><strong>è½¯ä»¶ç¡®è®¤</strong>ï¼ˆlike éªŒæ”¶</li><li><strong>è½¯ä»¶æ¼”åŒ–</strong>ï¼ˆlike ç»´æŠ¤</li></ol><h2 id="Chapter2-è½¯ä»¶è¿‡ç¨‹"><a href="#Chapter2-è½¯ä»¶è¿‡ç¨‹" class="headerlink" title="Chapter2 è½¯ä»¶è¿‡ç¨‹"></a>Chapter2 è½¯ä»¶è¿‡ç¨‹</h2><h3 id="2-1è½¯ä»¶è¿‡ç¨‹æ¨¡å‹"><a href="#2-1è½¯ä»¶è¿‡ç¨‹æ¨¡å‹" class="headerlink" title="2.1è½¯ä»¶è¿‡ç¨‹æ¨¡å‹"></a>2.1è½¯ä»¶è¿‡ç¨‹æ¨¡å‹</h3><h4 id="ç€‘å¸ƒæ¨¡å‹ï¼š"><a href="#ç€‘å¸ƒæ¨¡å‹ï¼š" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹ï¼š"></a>ç€‘å¸ƒæ¨¡å‹ï¼š</h4><p>â€‹å¦‚æœæ¯é˜¶æ®µåšçš„äº‹æ˜¯æ­£ç¡®çš„ï¼Œå°±èƒ½ä¿è¯æœ€ç»ˆç»“æœçš„æ­£ç¡®</p><p>â€‹ç³»ç»Ÿéœ€æ±‚&lt;&#x3D;&gt;è½¯ä»¶éœ€æ±‚&lt;&#x3D;&gt;éœ€æ±‚åˆ†æ&lt;&#x3D;&gt;è®¾è®¡&lt;&#x3D;&gt;ç¼–ç &lt;&#x3D;&gt;æµ‹è¯•&lt;&#x3D;&gt;è¿è¡Œ</p><h5 id="ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç‚¹ï¼š"><a href="#ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç‚¹ï¼š" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç‚¹ï¼š"></a>ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç‚¹ï¼š</h5><p>è™½ç„¶ç€‘å¸ƒæ¨¡å‹æ˜¯ä¸€ä¸ªæ¯”è¾ƒ â€œè€â€çš„ã€‚ç”šè‡³è¿‡æ—¶çš„å¼€å‘æ¨¡å‹ï¼Œä½†å…¶ä¼˜ç‚¹ä¸ºï¼š</p><ul><li><p>åœ¨å†³å®šç³»ç»Ÿæ€æ ·åšä¹‹å‰ï¼Œå­˜åœ¨ä¸€ä¸ªéœ€æ±‚é˜¶æ®µã€‚<strong>é¼“åŠ±å¯¹ç³»ç»Ÿâ€œåšä»€ä¹ˆâ€ è¿›è¡Œè§„çº¦</strong>ï¼ˆå³è®¾è®¡ä¹‹å‰çš„è§„çº¦ï¼‰ã€‚</p></li><li><p>åœ¨å»ºé€ æ„ä»¶ä¹‹å‰ã€‚å­˜åœ¨ä¸€ä¸ªè®¾è®¡é˜¶æ®µï¼Œ<strong>é¼“åŠ±è§„åˆ’ç³»ç»Ÿç»“æ„</strong>ï¼ˆå³ç¼–ç ä¹‹å‰çš„è®¾è®¡ï¼‰ã€‚</p></li><li><p><u>åœ¨æ¯ä¸€é˜¶æ®µç»“æŸæ—¶è¿›è¡Œå¤å®¡ï¼Œå…è®¸è·å–æ–¹å’Œç”¨æˆ·çš„å‚ä¸ã€‚</u></p></li><li><p>å‰ä¸€æ­¥å·¥ä½œäº§å“å¯ä½œä¸ºä¸‹ä¸€æ­¥è¢«è®¤å¯çš„ã€‚æ–‡æ¡£åŒ–çš„åŸºçº¿ã€‚å…è®¸åŸºçº¿å’Œé…ç½®æ—©æœŸæ¥å—æ§åˆ¶ã€‚</p></li></ul><h5 id="ç€‘å¸ƒæ¨¡å‹çš„ç¼ºç‚¹ï¼š"><a href="#ç€‘å¸ƒæ¨¡å‹çš„ç¼ºç‚¹ï¼š" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹çš„ç¼ºç‚¹ï¼š"></a>ç€‘å¸ƒæ¨¡å‹çš„ç¼ºç‚¹ï¼š</h5><p>ç€‘å¸ƒæ¨¡å‹ä¸‹ï¼Œå®¢æˆ·å’Œå¼€å‘è€…å¯èƒ½ä¼šè¿‡æ—©åœ°å†»ç»“äº†éœ€æ±‚ï¼Œè¿™æ ·çš„è¯åç»­å°±ä¸èƒ½å‘ç”Ÿè¿›ä¸€æ­¥çš„å˜åŒ–(é™¤éè¿”å·¥)</p><ul><li><p>å®¢æˆ·<u>å¿…é¡»èƒ½å¤Ÿå®Œæ•´ã€æ­£ç¡®å’Œæ¸…æ™°åœ°è¡¨è¾¾ä»–ä»¬çš„éœ€æ±‚</u>ï¼šå¼€å‘äººå‘˜ä¸€å¼€å§‹å°±å¿…é¡»ç†è§£éœ€æ±‚ã€‚</p></li><li><p>ç¼ºä¹çµæ´»æ€§ã€‚ä¸€æ—¦è½¯ä»¶éœ€æ±‚å­˜åœ¨åå·®ï¼Œå°±ä¼šå¯¼è‡´å¼€å‘å‡ºçš„è½¯ä»¶äº§å“ä¸èƒ½æ»¡è¶³ç”¨æˆ·çš„å®é™…è¦æ±‚(éœ€è¦è¿”å·¥)ã€‚</p></li><li><p>åœ¨ä¸€ä¸ªé¡¹ç›®çš„æ—©æœŸé˜¶æ®µï¼Œè¿‡åˆ†åœ°å¼ºè°ƒäº†åŸºçº¿å’Œé‡Œç¨‹ç¢‘å¤„çš„æ–‡æ¡£,å¯èƒ½è¦èŠ±è´¹æ›´å¤šçš„æ—¶é—´ï¼Œç”¨äºå»ºç«‹ä¸€äº›ç”¨å¤„ä¸å¤§çš„æ–‡æ¡£ã€‚</p></li><li><p>ç›´åˆ°é¡¹ç›®ç»“æŸä¹‹å‰ï¼Œéƒ½ä¸èƒ½æ¼”ç¤ºç³»ç»Ÿçš„èƒ½åŠ›,å¢åŠ äº†é¡¹ç›®çš„é£é™©ã€‚</p></li></ul><h4 id="å¢é‡æ¨¡å‹ï¼š"><a href="#å¢é‡æ¨¡å‹ï¼š" class="headerlink" title="å¢é‡æ¨¡å‹ï¼š"></a>å¢é‡æ¨¡å‹ï¼š</h4><p>â€‹è¯¥æ¨¡å‹æœ‰ä¸€ä¸ªå‡è®¾ï¼šå‡è®¾éœ€æ±‚å¯ä»¥åˆ†æ®µï¼Œæˆä¸ºä¸€ç³»åˆ—å¢é‡äº§å“ï¼Œæ¯ä¸€å¢é‡å¯ä»¥åˆ†åˆ«åœ°å¼€å‘ã€‚</p><p>ç³»ç»Ÿå¼€å‘ä½“ç°ä¸ºä¸€ç³»åˆ—çš„ç‰ˆæœ¬(å¢é‡)ï¼Œæ¯ä¸ªç‰ˆæœ¬åœ¨å‰ä¸€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå¢åŠ ä¸€äº›åŠŸèƒ½ã€‚</p><h5 id="å¢é‡æ¨¡å‹çš„ä¼˜ç‚¹ï¼š"><a href="#å¢é‡æ¨¡å‹çš„ä¼˜ç‚¹ï¼š" class="headerlink" title="å¢é‡æ¨¡å‹çš„ä¼˜ç‚¹ï¼š"></a>å¢é‡æ¨¡å‹çš„ä¼˜ç‚¹ï¼š</h5><p>ä½œä¸ºç€‘å¸ƒæ¨¡å‹çš„ç¬¬ä¸€ä¸ªå˜ä½“ï¼Œå…·æœ‰ç€‘å¸ƒæ¨¡å‹çš„æ‰€æœ‰ä¼˜ç‚¹ã€‚</p><p>æ­¤å¤–ï¼Œå®ƒè¿˜æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li><p>æ›´å®¹æ˜“è·å¾—ç”¨æˆ·çš„åé¦ˆ</p></li><li><p>ç¬¬ä¸€ä¸ªå¯äº¤ä»˜ç‰ˆæœ¬æ‰€éœ€è¦çš„æˆæœ¬å’Œæ—¶é—´æ˜¯å¾ˆå°‘çš„ï¼š</p></li><li><p>å¼€å‘ç”±å¢é‡è¡¨ç¤ºçš„å°ç³»ç»Ÿæ‰€æ‰¿æ‹…çš„é£é™©æ˜¯ä¸å¤§çš„ï¼š</p></li><li><p>ç”±äºå¾ˆå¿«å‘å¸ƒäº†ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå› æ­¤å¯ä»¥å‡å°‘ç”¨æˆ·éœ€æ±‚çš„å˜æ›´ï¼š</p></li><li><p>å…è®¸å¢é‡æŠ•èµ„ï¼Œå³åœ¨é¡¹ç›®å¼€å§‹æ—¶ï¼Œå¯ä»¥ä»…å¯¹ä¸€ä¸ªæˆ–ä¸¤ä¸ªå¢é‡æŠ•èµ„ã€‚</p></li></ul><p>æ³¨ï¼šå¦‚æœé‡‡ç”¨å¢é‡æŠ•èµ„æ–¹å¼ï¼Œé‚£ä¹ˆå®¢æˆ·å°±å¯ä»¥å¯¹ä¸€äº›å¢é‡è¿›è¡Œæ‹›æ ‡ã€‚</p><p>ç„¶åï¼Œå¼€å‘äººå‘˜æŒ‰æå‡ºçš„æˆªæ­¢æœŸé™è¿›è¡Œå¢é‡å¼€å‘ï¼Œè¿™æ ·å®¢æˆ·å°±å¯ä»¥ç”¨å¤šä¸ªå¥‘çº¦æ¥ç®¡ç†ç»„ç»‡çš„èµ„æºå’Œæˆæœ¬ã€‚</p><h5 id="å¢é‡æ¨¡å‹çš„ç¼ºç‚¹ï¼š"><a href="#å¢é‡æ¨¡å‹çš„ç¼ºç‚¹ï¼š" class="headerlink" title="å¢é‡æ¨¡å‹çš„ç¼ºç‚¹ï¼š"></a>å¢é‡æ¨¡å‹çš„ç¼ºç‚¹ï¼š</h5><p>å¦‚æœå¢é‡æ¨¡å‹ä¸é€‚äºæŸäº›é¡¹ç›®ï¼Œæˆ–ä½¿ç”¨æœ‰è¯¯ï¼Œåˆ™æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š</p><ul><li><p>ï»¿å¦‚æœæ²¡æœ‰å¯¹ç”¨æˆ·çš„å˜æ›´è¦æ±‚è¿›è¡Œè§„åˆ’ï¼Œé‚£ä¹ˆäº§ç”Ÿçš„åˆå§‹å¢é‡å¯èƒ½ä¼šé€ æˆåæ¥å¢é‡çš„ä¸ç¨³å®šï¼›</p></li><li><p>ï»¿å¦‚æœéœ€æ±‚ä¸åƒæ—©æœŸæ€è€ƒçš„é‚£æ ·ç¨³å®šå’Œå®Œæ•´ï¼Œé‚£ä¹ˆä¸€äº›å¢é‡å°±å¯èƒ½éœ€è¦é‡æ–°å¼€å‘(è¿”å·¥)ï¼Œé‡æ–°å‘å¸ƒï¼š</p></li><li><p>ç®¡ç†å‘ç”Ÿçš„æˆæœ¬ã€è¿›åº¦å’Œé…ç½®çš„å¤æ‚æ€§ï¼Œå¯èƒ½ä¼šè¶…å‡ºä¸€äº›ç»„ç»‡çš„èƒ½åŠ›ã€‚</p></li><li><p>è¿‡ç¨‹ä¸å¯è§ï¼šç®¡ç†è€…éœ€è¦å®šæœŸäº¤ä»˜æˆæœæ¥è¡¡é‡è¿›åº¦ã€‚å¦‚æœç³»ç»Ÿå¼€å‘è¿…é€Ÿï¼Œåˆ™ç”Ÿæˆåæ˜ ç³»ç»Ÿæ¯ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£å¹¶ä¸å…·æœ‰æˆæœ¬æ•ˆç›Šã€‚</p></li></ul><h4 id="é›†æˆå’Œé…ç½®ï¼š"><a href="#é›†æˆå’Œé…ç½®ï¼š" class="headerlink" title="é›†æˆå’Œé…ç½®ï¼š"></a>é›†æˆå’Œé…ç½®ï¼š</h4><p>â€‹è¯¥æ–¹æ³•ä¾èµ–äºå¯å¤ç”¨çš„æ„ä»¶æˆ–ç³»ç»Ÿã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230610130513298.png" alt="image-20230610130513298"></p><h4 id="æ¼”åŒ–æ¨¡å‹ï¼š"><a href="#æ¼”åŒ–æ¨¡å‹ï¼š" class="headerlink" title="æ¼”åŒ–æ¨¡å‹ï¼š"></a>æ¼”åŒ–æ¨¡å‹ï¼š</h4><p>ï¼ˆé’ˆå¯¹ä¸€å¼€å§‹ä¸èƒ½æ˜ç¡®éœ€æ±‚çš„æƒ…å†µï¼š</p><p>æ˜¯ä¸€ç§æœ‰å¼¹æ€§çš„è¿‡ç¨‹æ¨¡å¼ï¼Œç”±ä¸€äº›å°çš„å¼€å‘æ­¥ç»„æˆï¼Œæ¯ä¸€æ­¥éƒ½å†ç»<strong>éœ€æ±‚åˆ†æã€è®¾è®¡ã€å®ç°å’ŒéªŒè¯</strong></p><h4 id="å–·æ³‰æ¨¡å‹ï¼š"><a href="#å–·æ³‰æ¨¡å‹ï¼š" class="headerlink" title="å–·æ³‰æ¨¡å‹ï¼š"></a>å–·æ³‰æ¨¡å‹ï¼š</h4><p>â€‹ç‰¹å¾ï¼š<strong>è¿­ä»£ã€æ— ç¼</strong></p><h2 id="chapter1-è½¯ä»¶å·¥ç¨‹æ¦‚è®º"><a href="#chapter1-è½¯ä»¶å·¥ç¨‹æ¦‚è®º" class="headerlink" title="chapter1 è½¯ä»¶å·¥ç¨‹æ¦‚è®º"></a>chapter1 è½¯ä»¶å·¥ç¨‹æ¦‚è®º</h2><h3 id="1-1-è½¯ä»¶çš„å®šä¹‰åŠç‰¹ç‚¹"><a href="#1-1-è½¯ä»¶çš„å®šä¹‰åŠç‰¹ç‚¹" class="headerlink" title="1.1 è½¯ä»¶çš„å®šä¹‰åŠç‰¹ç‚¹"></a>1.1 è½¯ä»¶çš„å®šä¹‰åŠç‰¹ç‚¹</h3><h3 id="1-2-è½¯ä»¶å·¥ç¨‹çš„èµ·æºå’Œæ¦‚å¿µ"><a href="#1-2-è½¯ä»¶å·¥ç¨‹çš„èµ·æºå’Œæ¦‚å¿µ" class="headerlink" title="1.2 è½¯ä»¶å·¥ç¨‹çš„èµ·æºå’Œæ¦‚å¿µ"></a>1.2 è½¯ä»¶å·¥ç¨‹çš„èµ·æºå’Œæ¦‚å¿µ</h3><h3 id="1-3-è½¯ä»¶å¼€å‘çš„æœ¬è´¨å’ŒåŸºæœ¬æ‰‹æ®µ"><a href="#1-3-è½¯ä»¶å¼€å‘çš„æœ¬è´¨å’ŒåŸºæœ¬æ‰‹æ®µ" class="headerlink" title="1.3 è½¯ä»¶å¼€å‘çš„æœ¬è´¨å’ŒåŸºæœ¬æ‰‹æ®µ"></a>1.3 è½¯ä»¶å¼€å‘çš„æœ¬è´¨å’ŒåŸºæœ¬æ‰‹æ®µ</h3><h3 id="1-4-è½¯ä»¶å·¥ç¨‹æ¡†æ¶"><a href="#1-4-è½¯ä»¶å·¥ç¨‹æ¡†æ¶" class="headerlink" title="1.4 è½¯ä»¶å·¥ç¨‹æ¡†æ¶"></a>1.4 è½¯ä»¶å·¥ç¨‹æ¡†æ¶</h3><h2 id="chapter2-è½¯ä»¶è¿‡ç¨‹"><a href="#chapter2-è½¯ä»¶è¿‡ç¨‹" class="headerlink" title="chapter2 è½¯ä»¶è¿‡ç¨‹"></a>chapter2 è½¯ä»¶è¿‡ç¨‹</h2><h3 id="2-1è½¯ä»¶ç”Ÿå­˜å‘¨æœŸè¿‡ç¨‹çš„æ¦‚å¿µ"><a href="#2-1è½¯ä»¶ç”Ÿå­˜å‘¨æœŸè¿‡ç¨‹çš„æ¦‚å¿µ" class="headerlink" title="2.1è½¯ä»¶ç”Ÿå­˜å‘¨æœŸè¿‡ç¨‹çš„æ¦‚å¿µ"></a>2.1è½¯ä»¶ç”Ÿå­˜å‘¨æœŸè¿‡ç¨‹çš„æ¦‚å¿µ</h3><h3 id="2-2è½¯ä»¶ç”Ÿå­˜å‘¨æœŸè¿‡ç¨‹çš„åˆ†ç±»"><a href="#2-2è½¯ä»¶ç”Ÿå­˜å‘¨æœŸè¿‡ç¨‹çš„åˆ†ç±»" class="headerlink" title="2.2è½¯ä»¶ç”Ÿå­˜å‘¨æœŸè¿‡ç¨‹çš„åˆ†ç±»"></a>2.2è½¯ä»¶ç”Ÿå­˜å‘¨æœŸè¿‡ç¨‹çš„åˆ†ç±»</h3><h3 id="2-3è½¯ä»¶ç”Ÿå­˜å‘¨æœŸæ¨¡å‹çš„æ¦‚å¿µ"><a href="#2-3è½¯ä»¶ç”Ÿå­˜å‘¨æœŸæ¨¡å‹çš„æ¦‚å¿µ" class="headerlink" title="2.3è½¯ä»¶ç”Ÿå­˜å‘¨æœŸæ¨¡å‹çš„æ¦‚å¿µ"></a>2.3è½¯ä»¶ç”Ÿå­˜å‘¨æœŸæ¨¡å‹çš„æ¦‚å¿µ</h3><h3 id="2-4å¸¸è§çš„è½¯ä»¶ç”Ÿå­˜å‘¨æœŸæ¨¡å‹"><a href="#2-4å¸¸è§çš„è½¯ä»¶ç”Ÿå­˜å‘¨æœŸæ¨¡å‹" class="headerlink" title="2.4å¸¸è§çš„è½¯ä»¶ç”Ÿå­˜å‘¨æœŸæ¨¡å‹"></a>2.4å¸¸è§çš„è½¯ä»¶ç”Ÿå­˜å‘¨æœŸæ¨¡å‹</h3><h4 id="ç€‘å¸ƒæ¨¡å‹ï¼š-1"><a href="#ç€‘å¸ƒæ¨¡å‹ï¼š-1" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹ï¼š"></a>ç€‘å¸ƒæ¨¡å‹ï¼š</h4><p>â€‹å¦‚æœæ¯é˜¶æ®µåšçš„äº‹æ˜¯æ­£ç¡®çš„ï¼Œå°±èƒ½ä¿è¯æœ€ç»ˆç»“æœçš„æ­£ç¡®</p><p>â€‹ç³»ç»Ÿéœ€æ±‚&lt;&#x3D;&gt;è½¯ä»¶éœ€æ±‚&lt;&#x3D;&gt;éœ€æ±‚åˆ†æ&lt;&#x3D;&gt;è®¾è®¡&lt;&#x3D;&gt;ç¼–ç &lt;&#x3D;&gt;æµ‹è¯•&lt;&#x3D;&gt;è¿è¡Œ</p><h5 id="ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç‚¹ï¼š-1"><a href="#ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç‚¹ï¼š-1" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç‚¹ï¼š"></a>ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç‚¹ï¼š</h5><p>è™½ç„¶ç€‘å¸ƒæ¨¡å‹æ˜¯ä¸€ä¸ªæ¯”è¾ƒ â€œè€â€çš„ã€‚ç”šè‡³è¿‡æ—¶çš„å¼€å‘æ¨¡å‹ï¼Œä½†å…¶ä¼˜ç‚¹ä¸ºï¼š</p><ul><li><p>åœ¨å†³å®šç³»ç»Ÿæ€æ ·åšä¹‹å‰ï¼Œå­˜åœ¨ä¸€ä¸ªéœ€æ±‚é˜¶æ®µã€‚<strong>é¼“åŠ±å¯¹ç³»ç»Ÿâ€œåšä»€ä¹ˆâ€ è¿›è¡Œè§„çº¦</strong>ï¼ˆå³è®¾è®¡ä¹‹å‰çš„è§„çº¦ï¼‰ã€‚</p></li><li><p>åœ¨å»ºé€ æ„ä»¶ä¹‹å‰ã€‚å­˜åœ¨ä¸€ä¸ªè®¾è®¡é˜¶æ®µï¼Œ<strong>é¼“åŠ±è§„åˆ’ç³»ç»Ÿç»“æ„</strong>ï¼ˆå³ç¼–ç ä¹‹å‰çš„è®¾è®¡ï¼‰ã€‚</p></li><li><p><u>åœ¨æ¯ä¸€é˜¶æ®µç»“æŸæ—¶è¿›è¡Œå¤å®¡ï¼Œå…è®¸è·å–æ–¹å’Œç”¨æˆ·çš„å‚ä¸ã€‚</u></p></li><li><p>å‰ä¸€æ­¥å·¥ä½œäº§å“å¯ä½œä¸ºä¸‹ä¸€æ­¥è¢«è®¤å¯çš„ã€‚æ–‡æ¡£åŒ–çš„åŸºçº¿ã€‚å…è®¸åŸºçº¿å’Œé…ç½®æ—©æœŸæ¥å—æ§åˆ¶ã€‚</p></li></ul><h5 id="ç€‘å¸ƒæ¨¡å‹çš„ç¼ºç‚¹ï¼š-1"><a href="#ç€‘å¸ƒæ¨¡å‹çš„ç¼ºç‚¹ï¼š-1" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹çš„ç¼ºç‚¹ï¼š"></a>ç€‘å¸ƒæ¨¡å‹çš„ç¼ºç‚¹ï¼š</h5><ul><li><p>å®¢æˆ·<u>å¿…é¡»èƒ½å¤Ÿå®Œæ•´ã€æ­£ç¡®å’Œæ¸…æ™°åœ°è¡¨è¾¾ä»–ä»¬çš„éœ€æ±‚</u>ï¼šå¼€å‘äººå‘˜ä¸€å¼€å§‹å°±å¿…é¡»ç†è§£éœ€æ±‚ã€‚</p></li><li><p>ç¼ºä¹çµæ´»æ€§ã€‚ä¸€æ—¦è½¯ä»¶éœ€æ±‚å­˜åœ¨åå·®ï¼Œå°±ä¼šå¯¼è‡´å¼€å‘å‡ºçš„è½¯ä»¶äº§å“ä¸èƒ½æ»¡è¶³ç”¨æˆ·çš„å®é™…è¦æ±‚ã€‚</p></li><li><p>åœ¨ä¸€ä¸ªé¡¹ç›®çš„æ—©æœŸé˜¶æ®µï¼Œè¿‡åˆ†åœ°å¼ºè°ƒäº†åŸºçº¿å’Œé‡Œç¨‹ç¢‘å¤„çš„æ–‡æ¡£,å¯èƒ½è¦èŠ±è´¹æ›´å¤šçš„æ—¶é—´ï¼Œç”¨äºå»ºç«‹ä¸€äº›ç”¨å¤„ä¸å¤§çš„æ–‡æ¡£ã€‚</p></li><li><p>ç›´åˆ°é¡¹ç›®ç»“æŸä¹‹å‰ï¼Œéƒ½ä¸èƒ½æ¼”ç¤ºç³»ç»Ÿçš„èƒ½åŠ›,å¢åŠ äº†é¡¹ç›®çš„é£é™©ã€‚</p></li></ul><h4 id="å¢é‡æ¨¡å‹ï¼š-1"><a href="#å¢é‡æ¨¡å‹ï¼š-1" class="headerlink" title="å¢é‡æ¨¡å‹ï¼š"></a>å¢é‡æ¨¡å‹ï¼š</h4><p>â€‹è¯¥æ¨¡å‹æœ‰ä¸€ä¸ªå‡è®¾ï¼šå‡è®¾éœ€æ±‚å¯ä»¥åˆ†æ®µï¼Œæˆä¸ºä¸€ç³»åˆ—å¢é‡äº§å“ï¼Œæ¯ä¸€å¢é‡å¯ä»¥åˆ†åˆ«åœ°å¼€å‘ã€‚</p><h5 id="å¢é‡æ¨¡å‹çš„ä¼˜ç‚¹ï¼š-1"><a href="#å¢é‡æ¨¡å‹çš„ä¼˜ç‚¹ï¼š-1" class="headerlink" title="å¢é‡æ¨¡å‹çš„ä¼˜ç‚¹ï¼š"></a>å¢é‡æ¨¡å‹çš„ä¼˜ç‚¹ï¼š</h5><p>ä½œä¸ºç€‘å¸ƒæ¨¡å‹çš„ç¬¬ä¸€ä¸ªå˜ä½“ï¼Œå…·æœ‰ç€‘å¸ƒæ¨¡å‹çš„æ‰€æœ‰ä¼˜ç‚¹ã€‚</p><p>æ­¤å¤–ï¼Œå®ƒè¿˜æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li><p>ç¬¬ä¸€ä¸ªå¯äº¤ä»˜ç‰ˆæœ¬æ‰€éœ€è¦çš„æˆæœ¬å’Œæ—¶é—´æ˜¯å¾ˆå°‘çš„ï¼š</p></li><li><p>å¼€å‘ç”±å¢é‡è¡¨ç¤ºçš„å°ç³»ç»Ÿæ‰€æ‰¿æ‹…çš„é£é™©æ˜¯ä¸å¤§çš„ï¼š</p></li><li><p>ç”±äºå¾ˆå¿«å‘å¸ƒäº†ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå› æ­¤å¯ä»¥å‡å°‘ç”¨æˆ·éœ€æ±‚çš„å˜æ›´ï¼š</p></li><li><p>å…è®¸å¢é‡æŠ•èµ„ï¼Œå³åœ¨é¡¹ç›®å¼€å§‹æ—¶ï¼Œå¯ä»¥ä»…å¯¹ä¸€ä¸ªæˆ–ä¸¤ä¸ªå¢é‡æŠ•èµ„ã€‚</p></li></ul><p>æ³¨ï¼šå¦‚æœé‡‡ç”¨å¢é‡æŠ•èµ„æ–¹å¼ï¼Œé‚£ä¹ˆå®¢æˆ·å°±å¯ä»¥å¯¹ä¸€äº›å¢é‡è¿›è¡Œæ‹›æ ‡ã€‚</p><p>ç„¶åï¼Œå¼€å‘äººå‘˜æŒ‰æå‡ºçš„æˆªæ­¢æœŸé™è¿›è¡Œå¢é‡å¼€å‘ï¼Œè¿™æ ·å®¢æˆ·å°±å¯ä»¥ç”¨å¤šä¸ªå¥‘çº¦æ¥ç®¡ç†ç»„ç»‡çš„èµ„æºå’Œæˆæœ¬ã€‚</p><h5 id="å¢é‡æ¨¡å‹çš„ç¼ºç‚¹ï¼š-1"><a href="#å¢é‡æ¨¡å‹çš„ç¼ºç‚¹ï¼š-1" class="headerlink" title="å¢é‡æ¨¡å‹çš„ç¼ºç‚¹ï¼š"></a>å¢é‡æ¨¡å‹çš„ç¼ºç‚¹ï¼š</h5><p>å¦‚æœå¢é‡æ¨¡å‹ä¸é€‚äºæŸäº›é¡¹ç›®ï¼Œæˆ–ä½¿ç”¨æœ‰è¯¯ï¼Œåˆ™æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š</p><ul><li><p>ï»¿å¦‚æœæ²¡æœ‰å¯¹ç”¨æˆ·çš„å˜æ›´è¦æ±‚è¿›è¡Œè§„åˆ’ï¼Œé‚£ä¹ˆäº§ç”Ÿçš„åˆå§‹å¢é‡å¯èƒ½ä¼šé€ æˆåæ¥å¢é‡çš„ä¸ç¨³å®šï¼›</p></li><li><p>ï»¿å¦‚æœéœ€æ±‚ä¸åƒæ—©æœŸæ€è€ƒçš„é‚£æ ·ç¨³å®šå’Œå®Œæ•´ï¼Œé‚£ä¹ˆä¸€äº›å¢é‡å°±å¯èƒ½éœ€è¦é‡æ–°å¼€å‘ï¼Œé‡æ–°å‘å¸ƒï¼š</p></li><li><p>ç®¡ç†å‘ç”Ÿçš„æˆæœ¬ã€è¿›åº¦å’Œé…ç½®çš„å¤æ‚æ€§ï¼Œå¯èƒ½ä¼šè¶…å‡ºä¸€äº›ç»„ç»‡çš„èƒ½åŠ›ã€‚</p></li></ul><h4 id="æ¼”åŒ–æ¨¡å‹ï¼š-1"><a href="#æ¼”åŒ–æ¨¡å‹ï¼š-1" class="headerlink" title="æ¼”åŒ–æ¨¡å‹ï¼š"></a>æ¼”åŒ–æ¨¡å‹ï¼š</h4><p>ï¼ˆé’ˆå¯¹ä¸€å¼€å§‹ä¸èƒ½æ˜ç¡®éœ€æ±‚çš„æƒ…å†µï¼š</p><p>æ˜¯ä¸€ç§æœ‰å¼¹æ€§çš„è¿‡ç¨‹æ¨¡å¼ï¼Œç”±ä¸€äº›å°çš„å¼€å‘æ­¥ç»„æˆï¼Œæ¯ä¸€æ­¥éƒ½å†ç»<strong>éœ€æ±‚åˆ†æã€è®¾è®¡ã€å®ç°å’ŒéªŒè¯</strong></p><h4 id="å–·æ³‰æ¨¡å‹ï¼š-1"><a href="#å–·æ³‰æ¨¡å‹ï¼š-1" class="headerlink" title="å–·æ³‰æ¨¡å‹ï¼š"></a>å–·æ³‰æ¨¡å‹ï¼š</h4><p>â€‹ç‰¹å¾ï¼š<strong>è¿­ä»£ã€æ— ç¼</strong></p><h2 id="chapter3-è½¯ä»¶éœ€æ±‚ä¸è½¯ä»¶éœ€æ±‚è§„çº¦"><a href="#chapter3-è½¯ä»¶éœ€æ±‚ä¸è½¯ä»¶éœ€æ±‚è§„çº¦" class="headerlink" title="chapter3 è½¯ä»¶éœ€æ±‚ä¸è½¯ä»¶éœ€æ±‚è§„çº¦"></a>chapter3 è½¯ä»¶éœ€æ±‚ä¸è½¯ä»¶éœ€æ±‚è§„çº¦</h2><h3 id="3-1éœ€æ±‚çš„ä½œç”¨"><a href="#3-1éœ€æ±‚çš„ä½œç”¨" class="headerlink" title="3.1éœ€æ±‚çš„ä½œç”¨"></a>3.1éœ€æ±‚çš„ä½œç”¨</h3><p>â€‹è½¯ä»¶å¼€å‘çš„å·¥ä½œåŸºç¡€</p><h3 id="3-2éœ€æ±‚çš„å®šä¹‰"><a href="#3-2éœ€æ±‚çš„å®šä¹‰" class="headerlink" title="3.2éœ€æ±‚çš„å®šä¹‰"></a>3.2éœ€æ±‚çš„å®šä¹‰</h3><p>â€‹æè¿°äº†å¾…å¼€å‘äº§å“&#x2F;ç³»ç»ŸåŠŸèƒ½ä¸Šçš„èƒ½åŠ›ã€æ€§èƒ½å‚æ•°æˆ–å…¶ä»–æ€§è´¨</p><p>éœ€æ±‚çš„åŸºæœ¬æ€§è´¨ï¼š</p><ul><li>å¿…è¦æ€§æ˜¯è¦æ±‚çš„</li><li>æ— æ­§ä¹‰æ€§            æ˜¯å¦åªèƒ½ç”¨ä¸€ç§æ–¹å¼æ¥è§£é‡Š</li><li>å¯æµ‹çš„ (æµ‹è¯•)     èƒ½å¦è¿›è¡Œæµ‹è¯•ï¼Œå¯¹ä¸€å®šçš„è¾“å…¥ï¼Œä¼šæœ‰ç›¸åŒçš„è¾“å‡º</li><li>å¯è·Ÿè¸ªçš„            ä»ä¸€ä¸ªå¼€å‘é˜¶æ®µåˆ°å¦ä¸€ä¸ªé˜¶æ®µèƒ½å¦è¿›è¡Œè·Ÿè¸ª</li><li>å¯æµ‹é‡çš„            èƒ½å¦æµ‹é‡</li></ul><h3 id="3-3éœ€æ±‚çš„åˆ†ç±»"><a href="#3-3éœ€æ±‚çš„åˆ†ç±»" class="headerlink" title="3.3éœ€æ±‚çš„åˆ†ç±»"></a>3.3éœ€æ±‚çš„åˆ†ç±»</h3><h4 id="åŠŸèƒ½éœ€æ±‚ï¼š"><a href="#åŠŸèƒ½éœ€æ±‚ï¼š" class="headerlink" title="åŠŸèƒ½éœ€æ±‚ï¼š"></a>åŠŸèƒ½éœ€æ±‚ï¼š</h4><ul><li><p>å…³äºè¯¥åŠŸèƒ½è¾“å…¥çš„æ‰€æœ‰å‡å®šï¼Œæˆ–ä¸ºäº†éªŒè¯è¯¥åŠŸèƒ½è¾“å…¥æœ‰å…³æ£€æµ‹çš„å‡å®šã€‚</p></li><li><p>ï»¿åŠŸèƒ½å†…çš„ä»»ä¸€æ¬¡åºï¼Œè¿™ä¸€æ¬¡åºæ˜¯ä¸å¤–éƒ¨æœ‰å…³çš„ã€‚</p></li><li><p>ï»¿å¯¹å¼‚å¸¸æ¡ä»¶çš„å“åº”ï¼ŒåŒ…æ‹¬æ‰€æœ‰å†…å¤–éƒ¨æ‰€äº§ç”Ÿçš„é”™è¯¯ã€‚</p></li><li><p>ï»¿éœ€æ±‚çš„æ—¶åºæˆ–ä¼˜å…ˆç¨‹åº¦ã€‚</p></li><li><p>ï»¿åŠŸèƒ½ä¹‹é—´çš„äº’æ–¥è§„åˆ™ã€‚</p></li><li><p>ï»¿ç³»ç»Ÿå†…éƒ¨çŠ¶æ€çš„å‡å®šã€‚</p></li><li><p>ä¸ºäº†è¯¥åŠŸèƒ½çš„æ‰§è¡Œï¼Œæ‰€éœ€è¦çš„è¾“å…¥å’Œè¾“å‡ºæ¬¡åºã€‚</p></li><li><p>ç”¨äºè½¬æ¢æˆ–å†…éƒ¨è®¡ç®—æ‰€éœ€è¦çš„å…¬å¼ã€‚</p></li></ul><h4 id="æ€§èƒ½éœ€æ±‚ï¼š"><a href="#æ€§èƒ½éœ€æ±‚ï¼š" class="headerlink" title="æ€§èƒ½éœ€æ±‚ï¼š"></a>æ€§èƒ½éœ€æ±‚ï¼š</h4><p>â€‹è§„çº¦äº†ä¸€ä¸ªç³»ç»Ÿæˆ–ç³»ç»Ÿæ„å»ºå¿…é¡»å…·æœ‰çš„<strong>æ€§èƒ½ç‰¹æ€§</strong>(é€Ÿåº¦ã€å‡†ç¡®ç‡ã€å¹¶å‘ç­‰è¦æ±‚)</p><h4 id="å¤–éƒ¨æ¥å£éœ€æ±‚ï¼š"><a href="#å¤–éƒ¨æ¥å£éœ€æ±‚ï¼š" class="headerlink" title="å¤–éƒ¨æ¥å£éœ€æ±‚ï¼š"></a>å¤–éƒ¨æ¥å£éœ€æ±‚ï¼š</h4><p>â€‹å¤–éƒ¨æ¥å£éœ€æ±‚ (External interface requirement) è§„çº¦äº†ç³»ç»Ÿæˆ–ç³»ç»Ÿæ„ä»¶å¿…é¡»ä¸ä¹‹äº¤äº’çš„ç¡¬ä»¶ã€è½¯ä»¶æˆ–æ•°æ®åº“å…ƒç´ ã€‚å®ƒä¹Ÿå¯èƒ½è§„çº¦å…¶æ ¼å¼ã€æ—¶é—´æˆ–å…¶ä»–å› ç´ ã€‚</p><ul><li><p>ç³»ç»Ÿæ¥å£ (Systeminterfaces)ï¼šæè¿°ä¸€ä¸ªåº”ç”¨å¦‚ä½•ä¸ç³»ç»Ÿçš„å…¶ä»–åº”ç”¨è¿›è¡Œäº¤äº’ã€‚</p></li><li><p>ç”¨æˆ·æ¥å£ (User interfaces)ï¼šè§„çº¦äº†è½¯ä»¶äº§å“å’Œç”¨æˆ·ä¹‹é—´æ¥å£çš„é€»è¾‘ç‰¹æ€§ã€‚å³è§„çº¦å¯¹ç»™ç”¨æˆ·æ‰€æ˜¾ç¤ºçš„æ•°æ®ï¼Œå¯¹ç”¨æˆ·æ‰€è¦æ±‚çš„æ•°æ®ä»¥åŠç”¨æˆ·å¦‚ä½•æ§åˆ¶è¯¥ç”¨æˆ·æ¥å£ã€‚</p></li><li><p>ç¡¬ä»¶æ¥å£ (Hardware interfaces)ï¼šå¦‚æœè½¯ä»¶ç³»ç»Ÿå¿…é¡»ä¸ç¡¬ä»¶è®¾å¤‡è¿›è¡Œäº¤äº’ï¼Œé‚£ä¹ˆå°±åº”è¯´æ˜æ‰€è¦æ±‚çš„æ”¯æŒå’Œåè®®ç±»å‹ã€‚</p></li><li><p>è½¯ä»¶æ¥å£ (Software interfaces)ï¼šå…è®¸ä¸å…¶å®ƒè½¯ä»¶äº§å“è¿›è¡Œäº¤äº’ï¼Œå¦‚ï¼Œæ•°æ®ç®¡ç†ç³»ç»Ÿã€æ“ä½œç³»ç»Ÿæˆ–æ•°å­¦è½¯ä»¶åŒ…ã€‚</p></li><li><p>é€šè®¯æ¥å£ (Communications interfaces)ï¼šè§„çº¦å¾…å¼€å‘ç³»ç»Ÿä¸é€šè®¯è®¾æ–½ï¼ˆå¦‚ï¼Œå±€åŸŸç½‘ï¼‰ä¹‹é—´çš„äº¤äº’ã€‚å¦‚æœé€šè®¯éœ€æ±‚åŒ…å«äº†ç³»ç»Ÿå¿…é¡»ä½¿ç”¨çš„ç½‘ç»œç±»å‹ (TCP&#x2F;IP. WindowsNT. Novell)ï¼Œé‚£ä¹ˆæœ‰å…³ç±»å‹çš„ä¿¡æ¯å°±åº”åŒ…å«åœ¨SRSä¸­ã€‚</p></li></ul><p></p><h4 id="è®¾è®¡çº¦æŸéœ€æ±‚ï¼š"><a href="#è®¾è®¡çº¦æŸéœ€æ±‚ï¼š" class="headerlink" title="è®¾è®¡çº¦æŸéœ€æ±‚ï¼š"></a>è®¾è®¡çº¦æŸéœ€æ±‚ï¼š</h4><p>â€‹è®¾è®¡çº¦æŸ<strong>é™åˆ¶äº†ç³»ç»Ÿæˆ–ç³»ç»Ÿæ„ä»¶</strong>çš„è®¾è®¡æ–¹æ¡ˆã€‚å°±çº¦æŸçš„æœ¬èº«è€Œè¨€ã€‚å¯¹å…¶è¿›è¡Œæƒè¡¡æˆ–è°ƒæ•´æ˜¯ç›¸å½“å›°éš¾çš„ï¼Œç”šè‡³æ˜¯ä¸å¯èƒ½çš„ã€‚<u>å®ƒä»¬å¿…é¡»äºˆä»¥æ»¡è¶³</u>ã€‚è¿™ä¸€æ€§è´¨æ˜¯ä¸å…¶å®ƒéœ€æ±‚çš„æœ€ä¸»è¦å·®åˆ«ã€‚ä¸ºäº†æ»¡è¶³åŠŸèƒ½ã€æ€§èƒ½å’Œå…¶å®ƒéœ€æ±‚ï¼Œè®¸å¤šè®¾è®¡çº¦æŸå°†å¯¹è½¯ä»¶é¡¹ç›®è§„åˆ’ã€æ‰€éœ€è¦çš„é™„åŠ æˆæœ¬å’Œå·¥ä½œäº§ç”Ÿç›´æ¥å½±å“ã€‚ä¾‹å¦‚ï¼š</p><ul><li>ç³»ç»Ÿå¿…é¡»ç”¨C++æˆ–å…¶ä»–é¢å‘å¯¹è±¡è¯­æ–¹ç¼–å†™ã€‚ç³»ç»Ÿç”¨æˆ·æ¥å£éœ€è¦èœå•â€¦â€¦</li></ul><h4 id="è´¨é‡å±æ€§ï¼š"><a href="#è´¨é‡å±æ€§ï¼š" class="headerlink" title="è´¨é‡å±æ€§ï¼š"></a>è´¨é‡å±æ€§ï¼š</h4><p>â€‹è§„çº¦äº†è½¯ä»¶äº§å“å¿…é¡»å…·æœ‰çš„æ€§è´¨æ˜¯å¦è¾¾åˆ°è´¨é‡æ–¹é¢ä¸€ä¸ªæ‰€æœŸæœ›çš„æ°´å¹³</p><p>â€‹ä¾‹å¦‚ï¼š</p><p>â€‹å¯é æ€§è½¯ä»¶ç³»ç»Ÿåœ¨æŒ‡å®šç¯å¢ƒä¸­æ²¡æœ‰å¤±è´¥è€Œæ­£å¸¸è¿è¡Œçš„æ¦‚ç‡ã€‚</p><p>â€‹å­˜æ´»æ€§å½“ç³»ç»Ÿçš„æŸä¸€éƒ¨åˆ†ç³»ç»Ÿä¸èƒ½è¿è¡Œæ—¶ï¼Œè¯¥è½¯ä»¶ç»´ç»­è¿è¡Œæˆ–æ”¯æŒå…³é”®åŠŸèƒ½çš„å¯èƒ½æ€§ã€‚</p><p>â€‹å¯ç»´æŠ¤æ€§å‘ç¾å’Œæ”¹æ­£ä¸€ä¸ªè½¯ä»¶æ•…éšœæˆ–å¯¹ç‰¹å®šçš„èŠ±æ˜è¿›è¡Œä¿®æ”¹æ‰€è¦æ±‚çš„å¹³å‡å·¥ä½œã€‚</p><p>â€‹ç”¨æˆ·å‹å¥½æ€§    å­¦ä¹ å’Œä½¿ç”¨ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿçš„å®¹æ˜“ç¨‹åº¦ã€‚</p><p>â€‹å®‰å…¨æ€§åœ¨ä¸€ä¸ªé¢„å®šçš„æ—¶é—´å†…ï¼Œä½¿è½¯ä»¶ç³»ç»Ÿå®‰å…¨çš„å¯èƒ½æ€§ã€‚</p><p>â€‹å¯ç§»æ¤æ€§è½¯ä»¶ç³»ç»Ÿè¿è¡Œçš„å¹³å°ç±»å‹ã€‚</p><h3 id="3-4éœ€æ±‚å‘ç°"><a href="#3-4éœ€æ±‚å‘ç°" class="headerlink" title="3.4éœ€æ±‚å‘ç°"></a>3.4éœ€æ±‚å‘ç°</h3><p>â€‹éœ€æ±‚æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ</p><h4 id="è‡ªæ‚Ÿ-Introspection"><a href="#è‡ªæ‚Ÿ-Introspection" class="headerlink" title="è‡ªæ‚Ÿ(Introspection)"></a>è‡ªæ‚Ÿ(Introspection)</h4><p>â€‹éœ€æ±‚äººå‘˜æŠŠè‡ªå·±ä½œä¸ºç³»ç»Ÿçš„æœ€ç»ˆç”¨æˆ·ï¼Œå®¡è§†è¯¥ç³»ç»Ÿå¹¶æå‡ºé—®é¡Œï¼šâ€œå¦‚æœæ˜¯æˆ‘ä½¿ç”¨è¿™ä¸€ç³»ç»Ÿï¼Œåˆ™æˆ‘éœ€è¦â€¦â€</p><h5 id="é€‚ç”¨æ¡ä»¶ï¼š"><a href="#é€‚ç”¨æ¡ä»¶ï¼š" class="headerlink" title="é€‚ç”¨æ¡ä»¶ï¼š"></a>é€‚ç”¨æ¡ä»¶ï¼š</h5><p>â€‹éœ€æ±‚å·¥ç¨‹å¸ˆä¸èƒ½ç›´æ¥ä¸ç”¨æˆ·è¿›è¡Œäº¤æµï¼Œè‡ªæ‚Ÿä¼¼ä¹æ˜¯ä¸€ç§æ¯”è¾ƒæœ‰å¸å¼•åŠ›çš„æ–¹æ³•ï¼Œå¯èƒ½ç¡®å®æ˜¯å¿…é¡»çš„ã€‚</p><h5 id="æˆåŠŸæ¡ä»¶ï¼š"><a href="#æˆåŠŸæ¡ä»¶ï¼š" class="headerlink" title="æˆåŠŸæ¡ä»¶ï¼š"></a>æˆåŠŸæ¡ä»¶ï¼š</h5><p>â€‹è‹¥ä½¿è‡ªæ‚Ÿæ˜¯æˆåŠŸçš„ï¼Œéœ€æ±‚äººå‘˜å¿…é¡»å…·æœ‰æ¯”æœ€ç»ˆç”¨æˆ·è¿˜è¦å¤šçš„åº”ç”¨é¢†åŸŸå’Œè¿‡ç¨‹æ–¹é¢çš„çŸ¥è¯†ï¼Œå¹¶å…·æœ‰è‰¯å¥½çš„æƒ³è±¡èƒ½åŠ›ã€‚</p><h4 id="äº¤è°ˆ-Individual-interviews"><a href="#äº¤è°ˆ-Individual-interviews" class="headerlink" title="äº¤è°ˆ(Individual interviews)"></a>äº¤è°ˆ(Individual interviews)</h4><p>ä¸ºäº†ç¡®å®šç³»ç»Ÿåº”è¯¥æä¾›çš„åŠŸèƒ½ï¼Œéœ€æ±‚äººå‘˜é€šè¿‡æå‡ºé—®é¢˜ï¼Œç”¨æˆ·å›ç­”ï¼Œç›´æ¥è¯¢é—®ç”¨æˆ·æƒ³è¦çš„æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„ç³»ç»Ÿã€‚</p><h5 id="æˆåŠŸæ¡ä»¶ï¼š-1"><a href="#æˆåŠŸæ¡ä»¶ï¼š-1" class="headerlink" title="æˆåŠŸæ¡ä»¶ï¼š"></a>æˆåŠŸæ¡ä»¶ï¼š</h5><p>äº¤è°ˆé€šå¸¸æ˜¯ä¸€ç§æ¯”è‡ªæ‚Ÿæ›´å¥½çš„æŠ€æœ¯ã€‚è¿™ç§é€”å¾„æˆåŠŸä¸å¦ä¾èµ–äºï¼š</p><p>ä¸€ä¸€éœ€æ±‚äººå‘˜æ˜¯å¦å…·æœ‰â€œ<u>æ­£ç¡®æå‡ºé—®é¢˜</u>çš„çš„èƒ½åŠ›ï¼Œ</p><p>ä¸€ä¸€å›ç­”äººå‘˜æ˜¯å¦å…·æœ‰â€œ<u>æ­ç¤ºéœ€æ±‚æœ¬æ„</u>â€çš„èƒ½åŠ›ã€‚</p><p>åœ¨åœ¨çš„é£é™©ï¼šåœ¨äº¤è°ˆæœŸé—´éœ€æ±‚å¯èƒ½ä¸æ–­å¢é•¿ï¼Œæˆ–æ˜¯ä»¥å‰æ²¡æœ‰è®¤è¯†åˆ°çš„åˆç†éœ€æ±‚çš„ä¸€ç§è¡¨ç°ï¼Œè¯´æ˜¯â€œå®Œç¾è •è¡Œâ€(Creepingelegance)ç—…ç—‡çš„ä½“ç°ï¼Œä»¥è‡³äºå¾ˆéš¾äºˆä»¥æ§åˆ¶ï¼Œå¯èƒ½å¯¼è‡´è¶…å‡ºé¡¹ç›®æˆæœ¬å’Œè¿›åº¦çš„é™åˆ¶ã€‚</p><h5 id="åº”å¯¹æªæ–½ï¼š"><a href="#åº”å¯¹æªæ–½ï¼š" class="headerlink" title="åº”å¯¹æªæ–½ï¼š"></a>åº”å¯¹æªæ–½ï¼š</h5><p>é¡¹ç›®ç®¡ç†äººå‘˜å’Œå®¢æˆ·ç®¡ç†äººå‘˜åº”è¯¥å®šæœŸåœ°å¯¹äº¤è°ˆè¿‡ç¨‹çš„ç»“æœè¿›è¡Œå¤è»Šã€‚å…¶ä¸­å…·æœ‰æŒ‘æˆ˜çš„é—®é¢˜æ˜¯ï¼š</p><p>åˆ¤æ–­ï¼š</p><p>ä¸€ä¸€ä»€ä¹ˆæ—¶å€™å¯¹è¿™ä¸€å¢é•¿åˆ’ç•Œï¼š</p><p>ä¸€ä¸€ä»€ä¹ˆæ—¶å€™å°†è¿™ä¸€å¢é•¿é€šçŸ¥å®¢æˆ·ã€‚</p><h4 id="è§‚å¯Ÿ-Observation"><a href="#è§‚å¯Ÿ-Observation" class="headerlink" title="è§‚å¯Ÿ(Observation)"></a>è§‚å¯Ÿ(Observation)</h4><p>é€šè¿‡è§‚å¯Ÿç”¨æˆ·æ‰§è¡Œå…¶ç°è¡Œçš„ä»»åŠ¡å’Œè¿‡ç¨‹ï¼Œæˆ–é€šè¿‡è§‚å¯Ÿä»–ä»¬å¦‚ä½•æ“ä½œä¸æ‰€æœŸæœ›çš„æ–°ç³»ç»Ÿæœ‰å…³çš„ç°æœ‰ç³»ç»Ÿï¼Œäº†è§£ç³»ç»Ÿè¿è¡Œçš„ç¯å¢ƒï¼Œç‰¹åˆ«æ˜¯äº†è§£è¦å»ºçš„æ–°ç³»ç»Ÿä¸ç°å­˜ç³»ç»Ÿã€è¿‡ç¨‹ä»¥åŠå·¥ä½œæ–¹æ³•ä¹‹é—´å¿…é¡»è¿›è¡Œçš„äº¤äº’ã€‚å°½ç®¡äº†è§£çš„è¿™äº›ä¿¡æ¯å¯ä»¥é€šè¿‡äº¤è°ˆè·å–ï¼Œä½†â€œç¬¬ä¸€æ‰‹ææ–™â€ä¸€èˆ¬æ€»æ˜¯èƒ½å¤Ÿæ¯”è¾ƒå¥½çš„ç¬¦åˆç°å®çš„ã€‚</p><h5 id="å­˜åœ¨çš„é£é™©ï¼š"><a href="#å­˜åœ¨çš„é£é™©ï¼š" class="headerlink" title="å­˜åœ¨çš„é£é™©ï¼š"></a>å­˜åœ¨çš„é£é™©ï¼š</h5><p>ä¸€ä¸€å®¢æˆ·å¯èƒ½æŠµè§¦è¿™ä¸€è§‚å¯Ÿã€‚å…¶åŸå› æ˜¯ä»–ä»¬è®¤ä¸ºå¼€å‘è€…æ‰“æ‰°äº†ä»–ä»¬çš„æ­£å¸¸ä¸šåŠ¡ã€‚</p><p>ä¸€ä¸€å®¢æˆ·è¿˜å¯èƒ½è®¤ä¸ºå¼€å‘è€…åœ¨ç­¾çº¦ä¹‹å‰ï¼Œå°±å·²ç»ç†Ÿæ‚‰äº†ä»–ä»¬çš„ä¸šåŠ¡ã€‚</p><h4 id="å°ç»„ä¼š-Group-session"><a href="#å°ç»„ä¼š-Group-session" class="headerlink" title="å°ç»„ä¼š(Group session)"></a>å°ç»„ä¼š(Group session)</h4><p>ä¸¾è¡Œå®¢æˆ·å’Œå¼€å‘äººå‘˜çš„è”å¸­ä¼šè®®ï¼Œä¸å®¢æˆ·ç»„ç»‡çš„ä¸€äº›ä»£è¡¨å…±åŒå¼€å‘éœ€æ±‚ã€‚å…¶ä¸­ï¼š</p><p>ä¸€é€šå¸¸æ˜¯ç”±<u>å¼€å‘ç»„ç»‡çš„ä¸€ä¸ªä»£è¡¨ä½œä¸ºé¦–å¸­éœ€æ±‚å·¥ç¨‹å¸ˆæˆ–è½¯ä»¶å·¥ç¨‹é¡¹ç›®ç»ç†</u>ï¼Œä¸»æŒè¿™ä¸€ä¼šè®®ã€‚ä½†è¿˜å¯ä»¥é‡‡ç”¨å…¶å®ƒå½¢å¼ï¼Œè¿™ä¾èµ–äºå…¶åº”ç”¨é¢†åŸå’Œä¸»æŒäººçš„èƒ½åŠ›ã€‚ä¸»æŒäººçš„ä½œç”¨ä¸»è¦æ˜¯æŒæ¡ä¼šè®®çš„è¿›ç¨‹ã€‚</p><p>ä¸€å¿…é¡»ä»”ç»†åœ°é€‰æ‹©è¯¥å°ç»„çš„æˆå‘˜ï¼Œä¸ä»…è¦è€ƒè™‘ä»–ä»¬å¯¹ç°å­˜çš„å’Œæœªæ¥è¿è¡Œç¯å¢ƒçš„ç†è§£ç¨‹åº¦ï¼Œè¿˜è¦è€ƒè™‘ä»–ä»¬çš„äººå“ã€‚</p><h4 id="æç‚¼-Extraction"><a href="#æç‚¼-Extraction" class="headerlink" title="æç‚¼(Extraction)"></a>æç‚¼(Extraction)</h4><p>å¤å®¡æŠ€æœ¯æ–‡æ¡£ï¼ˆä¾‹å¦‚ï¼Œæœ‰å…³éœ€è¦çš„é™ˆè¾¾ï¼ŒåŠŸèƒ½å’Œæ€§èƒ½ç›®æ ‡çš„é™ˆè¿°ï¼Œç³»ç»Ÿè§„çº¦æ¥å£æ ‡å‡†ï¼Œç¡¬ä»¶è®¾è®¡æ–‡æ¡£ä»¥åŠConOpsæ–‡æ¡£ï¼‰ï¼Œå¹¶æå‡ºç›¸å…³çš„ä¿¡æ¯ã€‚</p><h5 id="é€‚ç”¨æ¡ä»¶ï¼š-1"><a href="#é€‚ç”¨æ¡ä»¶ï¼š-1" class="headerlink" title="é€‚ç”¨æ¡ä»¶ï¼š"></a>é€‚ç”¨æ¡ä»¶ï¼š</h5><p>æç‚¼æ–¹æ³•æ˜¯é’ˆå¯¹<u><strong>å·±ç»æœ‰äº†éƒ¨åˆ†éœ€æ±‚æ–‡æ¡£çš„æƒ…å†µ</strong></u>ã€‚ä¾æ®äº§å“çš„æœ¬æ¥æƒ…å†µï¼Œå¯èƒ½æœ‰å¾ˆå¤šæ–‡æ¡£éœ€è¦å¤å®¡ï¼Œä»¥ç¡®å®šå…¶ä¸­æ˜¯å¦åŒ…å«ç›¸å…³è”çš„ä¿¡æ¯ã€‚åœ¨æœ‰çš„æƒ…å†µï¼Œä¹Ÿå¯èƒ½åªæœ‰å°‘æ•°æ–‡æ¡£éœ€è¦å¤å®¡ã€‚</p><p>åœ¨è®¸å¤šé¡¹ç›®ä¸­ï¼Œåœ¨ä»»ä½•äº¤è°ˆã€è§‚å¯Ÿã€å°ç»„ä¼šæˆ–è‡ªæ‚Ÿä¹‹å‰ï¼Œåº”è¯¥å¯¹è¯¥é¡¹ç›®çš„èƒŒæ™¯æ–‡æ¡£è¿›è¡Œå¤å®¡ï¼Œè¿˜åº”å¯¹ç³»ç»Ÿè§„çº¦è¿›è¡Œå¤å®¡ï¼ŒåŒæ—¶äº†è§£ç›¸å…³çš„æ ‡å‡†å’Œæ”¿ç­–ã€‚</p><h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><ul><li>åœ¨ä»»æ„ç‰¹å®šçš„ç¯å¢ƒä¸­ï¼Œæ¯é¡¹æŠ€æœ¯éƒ½æœ‰å…¶è‡ªå·±çš„ä¼˜ç‚¹å’Œä¸è¶³ã€‚åœ¨å®æ–½ä¸Šè¿°ä»»ä½•ä¸€é¡¹æŠ€æœ¯æ—¶ï¼Œéƒ½å¯ä»¥è¾…ä»¥å…¶ä»–</li></ul><p>æ–¹æ³•ï¼Œä¾‹å¦‚åŸå‹æ„é€ ï¼Œåœ¨ä¸¾è¡Œå°ç»„ä¼šæ—¶å¯ä»¥ä½¿ç”¨åŸå‹ï¼Œæ–¹ä¾¿äººå‘˜ä¹‹é—´çš„äº¤æµã€‚</p><ul><li><p>ä¾æ®éœ€æ±‚å·¥ç¨‹äººå‘˜çš„æŠ€èƒ½å’Œäº§å“ã€åˆåŒçš„å®é™…æƒ…å†µï¼Œå¾€å¾€éœ€è¦â€œç»„åˆâ€åœ°ä½¿ç”¨è¿™äº›æŠ€æœ¯æ¥å¼€å‘åˆå§‹éœ€æ±‚ã€‚</p></li><li><p>æ‰§è¡Œéœ€æ±‚å‘ç°è¿™é¡¹æ´»åŠ¨çš„äººï¼Œå…¶æŠ€èƒ½æ°´å¹³å°†å¯¹è¿™é¡¹æ´»åŠ¨çš„æˆåŠŸå…·æœ‰é‡å¤§çš„å½±å“ã€‚</p></li><li><p>å¤§å‹å¤æ‚é¡¹ç›®å’Œä¸€äº›æœ‰èƒ½åŠ›çš„ç»„ç»‡ï¼Œåœ¨å¼€å‘éœ€æ±‚æ–‡æ¡£æ—¶ï¼Œå¾€å¾€ä½¿ç”¨ç³»ç»ŸåŒ–çš„éœ€æ±‚è·å–ã€åˆ†ææŠ€æœ¯å’Œå·¥å…·ã€‚</p></li></ul><p>ä¸€äº›æ–¹æ³•æä¾›äº† ç³»ç»ŸåŒ–ã€è‡ªåŠ¨åŒ–çš„åŠŸèƒ½ï¼Œå¹¶å¯é€ä¸€éªŒè¯å•ä¸€éœ€æ±‚æ‰€å…·æœ‰çš„äº”ä¸ªæ€§è´¨ï¼ŒéªŒè¯éœ€æ±‚è§„çº¦æ˜¯å¦å…·</p><p>æœ‰å››ä¸ªæ€§è´¨ã€‚</p><h3 id="3-5éœ€æ±‚è§„çº¦-SRS"><a href="#3-5éœ€æ±‚è§„çº¦-SRS" class="headerlink" title="3.5éœ€æ±‚è§„çº¦(SRS)"></a>3.5éœ€æ±‚è§„çº¦(SRS)</h3><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ:"></a>æ¦‚å¿µ:</h4><p>ä¸€ä¸ªéœ€æ±‚è§„çº¦æ˜¯ä¸€ä¸ªè½¯ä»¶é¡¹&#x2F;äº§å“&#x2F;ç³»ç»Ÿæ‰€æœ‰éœ€æ±‚é™ˆè¿°çš„æ­£å¼æ–‡æ¡£ï¼Œæ˜¯ä¸€ä¸ªè½¯ä»¶äº§å“&#x2F; ç³»ç»Ÿçš„æ¦‚å¿µæ¨¡å‹ã€‚</p><h4 id="åŸºæœ¬æ€§è´¨"><a href="#åŸºæœ¬æ€§è´¨" class="headerlink" title="åŸºæœ¬æ€§è´¨:"></a>åŸºæœ¬æ€§è´¨:</h4><p>ä¸€èˆ¬æ¥è¯´ï¼ŒSRSåº”å¿…é¡»å…·æœ‰ä»¥ä¸‹4ä¸ªæ€§è´¨ï¼š</p><ul><li><p>é‡è¦æ€§å’Œç¨³å®šæ€§ç¨‹åº¦ (Banlked for importaance and stability).ä¾‹å¦‚ï¼šåŸºæœ¬éœ€æ±‚ã€å¯é€çš„éœ€æ±‚å’ŒæœŸæœ›çš„éœ€æ±‚ã€‚</p></li><li><p>å¯ä¿®æ”¹çš„ (Modifiable)ï¼šåœ¨ä¸è¿‡å¤šåœ°å½±å“å…¶å®ƒéœ€æ±‚çš„å‰æä¸‹ï¼Œå¯ä»¥å®¹æ˜“åœ°ä¿®æ”¹ä¸€ä¸ªå•ä¸€éœ€æ±‚.</p></li><li><p>å®Œæ•´çš„(Couplete)ï¼šæ²¡æœ‰è¢«é—æ¼çš„éœ€æ±‚.</p></li><li><p>ä¸€è‡´çš„ (Consistent)ï¼šä¸å­˜åœ¨äº’æ–¥çš„éœ€æ±‚.</p></li></ul><h4 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼:"></a>æ ¼å¼:</h4><p>å¼•è¨€â€¦â€¦æ€»ä½“æè¿°â€¦â€¦ç‰¹å®šéœ€æ±‚â€¦â€¦</p><h3 id="3-6éœ€æ±‚è§„çº¦çš„ä½œç”¨"><a href="#3-6éœ€æ±‚è§„çº¦çš„ä½œç”¨" class="headerlink" title="3.6éœ€æ±‚è§„çº¦çš„ä½œç”¨"></a>3.6éœ€æ±‚è§„çº¦çš„ä½œç”¨</h3><p>ç¬¬ä¸€ï¼Œæ˜¯æœ€é‡è¦çš„ï¼Œä½œä¸ºè½¯ä»¶å¼€å‘ç»„ç»‡å’Œç”¨æˆ·ä¹‹é—´ä¸€ä»½äº‹å®ä¸Šçš„æŠ€æœ¯åˆåŒä¹¦ï¼›æ˜¯äº§å“åŠŸèƒ½åŠå…¶ç¯å¢ƒçš„ä½“ç°ã€‚</p><p>ç¬¬äºŒï¼Œå¯¹äºé¡¹ç›®çš„å…¶ä½™å¤§å¤šæ•°å·¥ä½œï¼Œå®ƒæ˜¯ä¸€ä¸ªç®¡ç†æ§åˆ¶ç‚¹ã€‚</p><p>ç¬¬ä¸‰ï¼Œå¯¹äºäº§å“çš„è®¾è®¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ­£å¼çš„ã€å—æ§çš„èµ·å§‹ç‚¹ã€‚</p><p>ç¬¬å››ï¼Œæ˜¯åˆ›å»ºäº§å“éªŒæ”¶æµ‹è¯•è®¡åˆ’å’Œç”¨æˆ·æŒ‡å—çš„åŸºç¡€ï¼Œå³åŸºäºéœ€æ±‚è§„çº¦ä¸€èˆ¬è¿˜ä¼šäº§ç”Ÿå¦å¤–ä¸¤ä¸ªæ–‡æ¡£â€”â€”<strong>åˆå§‹</strong></p><p><strong>æµ‹è¯•è®¡åˆ’</strong>å’Œ<strong>ç”¨æˆ·ç³»ç»Ÿæ“ä½œæè¿°</strong>ã€‚</p><h3 id="3-7é¡¹ç›®çš„éœ€æ±‚åŠéœ€æ±‚è§„çº¦"><a href="#3-7é¡¹ç›®çš„éœ€æ±‚åŠéœ€æ±‚è§„çº¦" class="headerlink" title="3.7é¡¹ç›®çš„éœ€æ±‚åŠéœ€æ±‚è§„çº¦"></a>3.7é¡¹ç›®çš„éœ€æ±‚åŠéœ€æ±‚è§„çº¦</h3><p>é¡¹ç›®éœ€æ±‚æ˜¯å®¢æˆ·å’Œå¼€å‘è€…ä¹‹é—´æœ‰å…³æŠ€æœ¯åˆåŒ-äº§å“&#x2F;ç³»ç»Ÿéœ€æ±‚çš„ç†è§£ï¼Œåº”è®°å½•åœ¨å·¥ä½œé™ˆè¿°SOWä¸­æˆ–å…¶ä»–æŸä¸€é¡¹ç›®æ–‡æ¡£ï¼ˆä¾‹å¦‚ï¼Œé¡¹ç›®ç®¡ç†è®¡åˆ’ï¼‰ä¸­ã€‚</p><p>å³<strong>éœ€æ±‚è§„çº¦</strong>(SRS)åº”åªå…³æ³¨äº§å“éœ€æ±‚ï¼Œå³ï¼š</p><p>â€‹äº§å“&#x2F;ç³»ç»Ÿéœ€æ±‚ä¸€â€œäº¤ä»˜ç»™å®¢æˆ·çš„äº§å“æ˜¯ä»€ä¹ˆâ€</p><p><strong>é¡¹ç›®çš„éœ€æ±‚</strong>(SOW)åº”å…³æ³¨é¡¹ç›®å·¥ä½œä¸ç®¡ç†ï¼Œå³ï¼š</p><p>â€‹é¡¹ç›®éœ€æ±‚-â€œå¼€å‘ç»„è¦åšçš„æ˜¯ä»€ä¹ˆâ€</p><h2 id="chapter4-ç»“æ„åŒ–åˆ†ææ–¹æ³•"><a href="#chapter4-ç»“æ„åŒ–åˆ†ææ–¹æ³•" class="headerlink" title="chapter4 ç»“æ„åŒ–åˆ†ææ–¹æ³•"></a>chapter4 ç»“æ„åŒ–åˆ†ææ–¹æ³•</h2><h3 id="ç»“æ„åŒ–åˆ†æï¼š"><a href="#ç»“æ„åŒ–åˆ†æï¼š" class="headerlink" title="ç»“æ„åŒ–åˆ†æï¼š"></a>ç»“æ„åŒ–åˆ†æï¼š</h3><p>â€‹éœ€æ±‚åˆ†æçš„ç›®æ ‡<br>â€‹å¯¹éœ€æ±‚é™ˆè¿°è¿›è¡Œåˆ†æï¼Œè§£å†³å…¶ä¸­çš„æ­§ä¹‰ã€ä¸ä¸€è‡´ç­‰é—®é¢˜ä»¥ç³»ç»ŸåŒ–çš„å½¢å¼è¡¨è¾¾ç”¨æˆ·çš„éœ€æ±‚ï¼Œå³ç»™å‡ºé—®é¢˜çš„å½¢å¼åŒ–æˆ–åŠå½¢å¼åŒ–çš„æè¿°(ç§°ä¸ºç³»ç»Ÿçš„æ¦‚å¿µæ¨¡å‹ï¼Œæˆ–ç³»ç»Ÿçš„éœ€æ±‚è§„çº¦æˆ–éœ€æ±‚è§„æ ¼è¯´æ˜)ã€‚ä½œä¸ºå¼€å‘äººå‘˜å’Œå®¢æˆ·é—´æŠ€æœ¯å¥‘çº¦çš„åŸºç¡€ï¼Œå¹¶ä½œä¸ºè€Œåå¼€å‘æ´»åŠ¨çš„ä¸€ä¸ªåŸºæœ¬è¾“å…¥ã€‚</p><p>2å®ç°è½¯ä»¶éœ€æ±‚åˆ†æçš„ç›®æ ‡å¯¹æ–¹æ³•å­¦çš„éœ€æ±‚</p><ul><li>**æä¾›ä¸€ç»„æœ¯è¯­(ç¬¦å·)**ï¼ŒæŒ‡å¯¼éœ€æ±‚æŠ½è±¡ä¸­éœ€è¦å…³æ³¨çš„ä¸»è¦æ–¹é¢ï¼Œå¹¶ç”¨äºè¡¨è¾¾åˆ†æä¸­æ‰€ä½¿ç”¨çš„ä¿¡æ¯ã€‚è¿™äº›æœ¯è¯­å½¢æˆä¸€ä¸ªç‰¹å®šçš„æŠ½è±¡å±‚ï¼Œå³éœ€æ±‚å±‚ã€‚</li><li>ä¾æ®è¿™äº›æœ¯è¯­æ‰€å½¢æˆçš„â€œç©ºé—´â€ï¼Œ<strong>ç»™å‡ºè¡¨è¾¾æ¨¡å‹çš„å·¥å…·</strong>,æ”¯æŒè¡¨è¾¾ç³»ç»ŸåŠŸèƒ½å½¢æ€ã€‚</li><li><strong>ç»™å‡ºè¿‡ç¨‹æŒ‡å¯¼</strong>ï¼Œä»¥æ”¯æŒç³»ç»ŸåŒ–åœ°ä½¿ç”¨ç›¸å…³ä¿¡æ¯å»ºé€ ç³»ç»Ÿæ¨¡å‹ã€‚</li></ul><p>åŸºæœ¬æœ¯è¯­ï¼š</p><p>æ¨¡å‹è¡¨è¾¾å·¥å…·</p><p>â€‹æ•°æ®æµå›¾ï¼š</p><p>â€‹æ•°æ®å­—å…¸ï¼šå®šä¹‰æ•°æ®æµå’Œæ•°æ®å­˜å‚¨</p><p>â€‹åŠ å·¥å°è¯´æ˜ï¼š</p><ul><li>ç»“æ„åŒ–è‡ªç„¶è¯­è¨€</li><li>åˆ¤å®šè¡¨ </li><li>åˆ¤å®šæ ‘</li></ul><h3 id="ç»“æ„åŒ–æ–¹æ³•ï¼š"><a href="#ç»“æ„åŒ–æ–¹æ³•ï¼š" class="headerlink" title="ç»“æ„åŒ–æ–¹æ³•ï¼š"></a>ç»“æ„åŒ–æ–¹æ³•ï¼š</h3><h4 id="ç»“æ„åŒ–åˆ†ææ–¹æ³•ï¼š"><a href="#ç»“æ„åŒ–åˆ†ææ–¹æ³•ï¼š" class="headerlink" title="ç»“æ„åŒ–åˆ†ææ–¹æ³•ï¼š"></a>ç»“æ„åŒ–åˆ†ææ–¹æ³•ï¼š</h4><p>â€‹</p><h4 id="ç»“æ„åŒ–è®¾è®¡æ–¹æ³•"><a href="#ç»“æ„åŒ–è®¾è®¡æ–¹æ³•" class="headerlink" title="ç»“æ„åŒ–è®¾è®¡æ–¹æ³•"></a>ç»“æ„åŒ–è®¾è®¡æ–¹æ³•</h4><h4 id="ç»“æ„åŒ–ç¨‹åºè®¾è®¡æ–¹æ³•"><a href="#ç»“æ„åŒ–ç¨‹åºè®¾è®¡æ–¹æ³•" class="headerlink" title="ç»“æ„åŒ–ç¨‹åºè®¾è®¡æ–¹æ³•"></a>ç»“æ„åŒ–ç¨‹åºè®¾è®¡æ–¹æ³•</h4><h2 id="chapter5"><a href="#chapter5" class="headerlink" title="chapter5"></a>chapter5</h2><h2 id="chapter6"><a href="#chapter6" class="headerlink" title="chapter6"></a>chapter6</h2><h2 id="chapter7"><a href="#chapter7" class="headerlink" title="chapter7"></a>chapter7</h2><h2 id="chapter8-è½¯ä»¶æµ‹è¯•"><a href="#chapter8-è½¯ä»¶æµ‹è¯•" class="headerlink" title="chapter8 è½¯ä»¶æµ‹è¯•"></a>chapter8 è½¯ä»¶æµ‹è¯•</h2><h2 id="chapter9-è½¯ä»¶é¡¹ç›®ç®¡ç†"><a href="#chapter9-è½¯ä»¶é¡¹ç›®ç®¡ç†" class="headerlink" title="chapter9 è½¯ä»¶é¡¹ç›®ç®¡ç†"></a>chapter9 è½¯ä»¶é¡¹ç›®ç®¡ç†</h2><h2 id="Chapter10-è½¯ä»¶å¼€å‘å·¥å…·ä¸ç¯å¢ƒ"><a href="#Chapter10-è½¯ä»¶å¼€å‘å·¥å…·ä¸ç¯å¢ƒ" class="headerlink" title="Chapter10 è½¯ä»¶å¼€å‘å·¥å…·ä¸ç¯å¢ƒ"></a>Chapter10 è½¯ä»¶å¼€å‘å·¥å…·ä¸ç¯å¢ƒ</h2>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å¼€å‘åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¯ä»¶å·¥ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»Ÿ</title>
      <link href="/2023/06/02/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
      <url>/2023/06/02/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h1><p>(å‚ç…§æ¸…åâ€”â€”æ“ä½œç³»ç»Ÿè¯¾ç¨‹)ï¼š</p><p>osï¼šå¯¹ç¡¬ä»¶çš„ç®¡ç†å’Œæ§åˆ¶ æœ¬è¯¾ç¨‹ç€é‡å¯¹<strong>kernelå±‚</strong>çš„ç ”ç©¶</p><h2 id="Chapter1-æ¦‚è¿°"><a href="#Chapter1-æ¦‚è¿°" class="headerlink" title="Chapter1 æ¦‚è¿°"></a>Chapter1 æ¦‚è¿°</h2><h4 id="ä»€ä¹ˆæ˜¯OSï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯OSï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯OSï¼Ÿ"></a>ä»€ä¹ˆæ˜¯OSï¼Ÿ</h4><p>CPU â€”â€“&gt; è¿›ç¨‹</p><p>ç£ç›˜ â€”â€“&gt; æ–‡ä»¶</p><p>å†…å­˜ â€”â€“&gt; åœ°å€ç©ºé—´</p><h5 id="ç”¨æˆ·è§’åº¦ï¼š"><a href="#ç”¨æˆ·è§’åº¦ï¼š" class="headerlink" title="ç”¨æˆ·è§’åº¦ï¼š"></a>ç”¨æˆ·è§’åº¦ï¼š</h5><ul><li>ç®¡ç†åº”ç”¨ç¨‹åº</li><li>ä¸ºåº”ç”¨ç¨‹åºæä¾›æœåŠ¡</li><li>æ€æ­»åº”ç”¨ç¨‹åº</li></ul><h5 id="èµ„æºè§’åº¦ï¼š"><a href="#èµ„æºè§’åº¦ï¼š" class="headerlink" title="èµ„æºè§’åº¦ï¼š"></a>èµ„æºè§’åº¦ï¼š</h5><ul><li>èµ„æºç®¡ç†</li><li>ç®¡ç†å¤–è®¾ã€åˆ†é…èµ„æº</li></ul><h4 id="Kernelå±‚å†…éƒ¨ç»„ä»¶ï¼š"><a href="#Kernelå±‚å†…éƒ¨ç»„ä»¶ï¼š" class="headerlink" title="Kernelå±‚å†…éƒ¨ç»„ä»¶ï¼š"></a>Kernelå±‚å†…éƒ¨ç»„ä»¶ï¼š</h4><ul><li>CPUè°ƒåº¦å™¨</li><li>ç‰©ç†å†…å­˜ç®¡ç†</li><li>è™šæ‹Ÿå†…å­˜ç®¡ç†</li><li>æ–‡ä»¶ç³»ç»Ÿç®¡ç†</li><li>ä¸­æ–­å¤„ç†ä¸è®¾å¤‡é©±åŠ¨</li></ul><h4 id="OS-Kernelçš„ç‰¹å¾ï¼š"><a href="#OS-Kernelçš„ç‰¹å¾ï¼š" class="headerlink" title="OS Kernelçš„ç‰¹å¾ï¼š"></a>OS Kernelçš„ç‰¹å¾ï¼š</h4><ul><li><p>å¹¶å‘</p><ul><li>è®¡ç®—æœºç³»ç»Ÿä¸­åŒæ—¶å­˜åœ¨å¤šä¸ªè¿è¡Œçš„ç¨‹åºï¼Œéœ€è¦OSç®¡ç†å’Œè°ƒåº¦</li></ul></li><li><p>å…±äº«</p><ul><li>äº’æ–¥å…±äº«</li></ul></li><li><p>è™šæ‹Ÿ</p><ul><li>åˆ©ç”¨<strong>å¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯</strong>è®©æ¯ä¸ªç”¨æˆ·éƒ½è§‰å¾—æœ‰ä¸€ä¸ªè®¡ç®—æœºä¸“é—¨ä¸ºä»–æœåŠ¡ã€‚</li></ul></li><li><p>å¼‚æ­¥</p><ul><li>ç¨‹åºçš„æ‰§è¡Œä¸æ˜¯ä¸€è´¯åˆ°åº•ï¼Œè€Œæ˜¯èµ°èµ°åœåœï¼Œå‘å‰æ¨è¿›çš„é€Ÿåº¦ä¸å¯é¢„çŸ¥</li><li>åªè¦è¿è¡Œç¯å¢ƒç›¸åŒï¼ŒOSéœ€è¦ä¿è¯ç¨‹åºçš„è¿è¡Œç»“æœä¹Ÿç›¸åŒ</li></ul></li></ul><h2 id="Chapter2-æ“ä½œç³»ç»ŸåŸºç¡€æ“ä½œ"><a href="#Chapter2-æ“ä½œç³»ç»ŸåŸºç¡€æ“ä½œ" class="headerlink" title="Chapter2 æ“ä½œç³»ç»ŸåŸºç¡€æ“ä½œ"></a>Chapter2 æ“ä½œç³»ç»ŸåŸºç¡€æ“ä½œ</h2><h3 id="2-1-æ“ä½œç³»ç»Ÿçš„å¯åŠ¨"><a href="#2-1-æ“ä½œç³»ç»Ÿçš„å¯åŠ¨" class="headerlink" title="2.1 æ“ä½œç³»ç»Ÿçš„å¯åŠ¨"></a>2.1 æ“ä½œç³»ç»Ÿçš„å¯åŠ¨</h3><h4 id="å¼€æœºé¡ºåºï¼š"><a href="#å¼€æœºé¡ºåºï¼š" class="headerlink" title="å¼€æœºé¡ºåºï¼š"></a>å¼€æœºé¡ºåºï¼š</h4><p>â€‹ç”µè„‘å¼€æœºåï¼Œå°†å…ˆæ‰§è¡Œbootstrap programç¨‹åº(å¼•å¯¼ç¨‹åº)ï¼Œå¼•å¯¼ç¨‹åºä¸€èˆ¬ä½äºè®¡ç®—æœºçš„å›ºä»¶ä¸­ï¼Œç”±å®ƒåˆå§‹åŒ–ç³»ç»Ÿçš„å†…æ ¸ä»¥åŠå„ä¸ªç»„ä»¶ã€‚</p><h3 id="2-2-ä¸­æ–­ã€å¼‚å¸¸å’Œç³»ç»Ÿè°ƒç”¨"><a href="#2-2-ä¸­æ–­ã€å¼‚å¸¸å’Œç³»ç»Ÿè°ƒç”¨" class="headerlink" title="2.2 ä¸­æ–­ã€å¼‚å¸¸å’Œç³»ç»Ÿè°ƒç”¨"></a>2.2 ä¸­æ–­ã€å¼‚å¸¸å’Œç³»ç»Ÿè°ƒç”¨</h3><h4 id="ä¸­æ–­-from-å¤–è®¾"><a href="#ä¸­æ–­-from-å¤–è®¾" class="headerlink" title="ä¸­æ–­(from å¤–è®¾)"></a>ä¸­æ–­(from å¤–è®¾)</h4><ul><li><p>æ¥è‡ªä¸åŒçš„ç¡¬ä»¶è®¾å¤‡çš„è®¡æ—¶å™¨å’Œç½‘ç»œçš„ä¸­æ–­</p></li><li><p>å¼‚æ­¥</p></li><li><p>å¯¹ç”¨æˆ·åº”ç”¨ç¨‹åºæ˜¯é€æ˜çš„</p></li></ul><h5 id="ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹ï¼š"><a href="#ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹ï¼š" class="headerlink" title="ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹ï¼š"></a>ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹ï¼š</h5><h6 id="ç¡¬ä»¶ï¼š"><a href="#ç¡¬ä»¶ï¼š" class="headerlink" title="ç¡¬ä»¶ï¼š"></a>ç¡¬ä»¶ï¼š</h6><ul><li>è®¾ç½®ä¸­æ–­æ ‡è®°[CPUåˆå§‹åŒ–]<br>1. å°†å†…éƒ¨äº‹ä»¶ã€å¤–éƒ¨äº‹ä»¶è®¾ç½®ä¸­æ–­æ ‡è®°<br>      1. CPUé€šè¿‡æ ‡è®°è·å¾—ä¸­æ–­äº‹ä»¶çš„ID(å‡­å€Ÿä¸­æ–­å‘é‡è¡¨)</li></ul><p></p><h6 id="è½¯ä»¶ï¼š"><a href="#è½¯ä»¶ï¼š" class="headerlink" title="è½¯ä»¶ï¼š"></a>è½¯ä»¶ï¼š</h6><ul><li>ä¿å­˜å½“å‰å¤„ç†çŠ¶æ€</li><li>ä¸­æ–­æœåŠ¡ç¨‹åºå¤„ç†</li><li>æ¸…é™¤ä¸­æ–­æ ‡è®°</li><li>æ¢å¤ä¹‹å‰ä¿å­˜çš„å¤„ç†çŠ¶æ€</li></ul><h4 id="å¼‚å¸¸-from-ä¸è‰¯çš„åº”ç”¨ç¨‹åº"><a href="#å¼‚å¸¸-from-ä¸è‰¯çš„åº”ç”¨ç¨‹åº" class="headerlink" title="å¼‚å¸¸(from ä¸è‰¯çš„åº”ç”¨ç¨‹åº)"></a>å¼‚å¸¸(from ä¸è‰¯çš„åº”ç”¨ç¨‹åº)</h4><ul><li><p>åº”ç”¨ç¨‹åºäº§ç”Ÿï¼Œç”±äºéæ³•æŒ‡ä»¤æˆ–è€…å…¶ä»–åçš„å¤„ç†çŠ¶æ€</p></li><li><p>åŒæ­¥</p></li><li><p>æ€æ­»æˆ–é‡æ–°æ‰§è¡Œæ„æƒ³ä¸åˆ°çš„åº”ç”¨ç¨‹åºæŒ‡ä»¤</p></li></ul><h5 id="å¼‚å¸¸çš„å¤„ç†è¿‡ç¨‹ï¼š"><a href="#å¼‚å¸¸çš„å¤„ç†è¿‡ç¨‹ï¼š" class="headerlink" title="å¼‚å¸¸çš„å¤„ç†è¿‡ç¨‹ï¼š"></a>å¼‚å¸¸çš„å¤„ç†è¿‡ç¨‹ï¼š</h5><ul><li>ä¿å­˜ç°åœº</li><li>å¼‚å¸¸å¤„ç†<ul><li>æ€æ­»å¼‚å¸¸ç¨‹åº</li><li>æˆ–è€… é‡æ–°æ‰§è¡Œå¼‚å¸¸å‘½ä»¤</li></ul></li><li>æ¢å¤ç°åœº</li></ul><h4 id="ç³»ç»Ÿè°ƒç”¨-from-åº”ç”¨ç¨‹åº"><a href="#ç³»ç»Ÿè°ƒç”¨-from-åº”ç”¨ç¨‹åº" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨(from åº”ç”¨ç¨‹åº)"></a>ç³»ç»Ÿè°ƒç”¨(from åº”ç”¨ç¨‹åº)</h4><ul><li><p>åº”ç”¨ç¨‹åºä¸»åŠ¨å‘OSå‘é€æœåŠ¡è¯·æ±‚</p></li><li><p>åŒæ­¥æˆ–å¼‚æ­¥</p></li><li><p>ç­‰å¾…åç»§ç»­æ‰§è¡Œ</p></li></ul><h5 id="ç³»ç»Ÿè°ƒç”¨çš„å¤„ç†è¿‡ç¨‹ï¼š"><a href="#ç³»ç»Ÿè°ƒç”¨çš„å¤„ç†è¿‡ç¨‹ï¼š" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨çš„å¤„ç†è¿‡ç¨‹ï¼š"></a>ç³»ç»Ÿè°ƒç”¨çš„å¤„ç†è¿‡ç¨‹ï¼š</h5><p>â€‹è°ƒç”¨ç³»ç»Ÿå‡½æ•° å¦‚printf()åï¼Œä¼šè§¦å‘ç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨å±å¹•ä¸Šæ‰“å°</p><p><u>å°†OSèƒ½æä¾›çš„ç³»ç»Ÿè°ƒç”¨è¿›è¡ŒæŸç§é›†æˆï¼Œå½¢æˆå„è‰²å„æ ·çš„APIä¾›å¼€å‘äººå‘˜ä½¿ç”¨</u></p><ul><li><p>Win32 API ç”¨äºWindows</p></li><li><p>POSIX API ç”¨äº POSIX-based systems(such as: UNIXã€LINUXã€MAX OS X)</p></li><li><p>Java API ç”¨äº JVM</p><ol><li>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¯ä¸ªç³»ç»Ÿè°ƒç”¨æœ‰è‡ªå·±çš„åºå·ï¼Œç³»ç»Ÿè°ƒç”¨æ¥å£æ ¹æ®è¿™äº›åºå·ç»´æŠ¤è¡¨çš„ç´¢å¼•</li><li>ç³»ç»Ÿè°ƒç”¨æ¥å£ è°ƒç”¨å†…æ ¸æ€ä¸­çš„ç³»ç»Ÿè°ƒç”¨ï¼Œè¿”å›ç³»ç»Ÿè°ƒç”¨çš„çŠ¶æ€å’Œç»“æœ(å…¶è¿”å›å€¼)</li><li>ç”¨æˆ·ä¸éœ€è¦çŸ¥é“ç³»ç»Ÿè°ƒç”¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Œåªéœ€è¦è·å–å„ä¸ªAPIçš„ä½œç”¨å³å¯ï¼›æ“ä½œç³»ç»Ÿæ¥å£çš„ç»†èŠ‚å¤§éƒ¨åˆ†éšè—åœ¨APIä¸­</li></ol></li></ul><p><strong>ğŸŒŸç”¨æˆ·ä»ç³»ç»Ÿè°ƒç”¨çš„åº“ä¸­è°ƒç”¨ç³»ç»Ÿè°ƒç”¨æ¥å£ï¼Œåœ¨è°ƒç”¨ç³»ç»Ÿè°ƒç”¨æ¥å£æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªä»ç”¨æˆ·æ€-&gt;å†…æ ¸æ€çš„è½¬æ¢ï¼Œæ‰§è¡Œå†…æ ¸æ€ä¸­çš„ç³»ç»Ÿè°ƒç”¨ã€‚</strong></p><p>ç³»ç»Ÿè°ƒç”¨çš„å¼€é”€ä¼šå¤§äºæ™®é€šçš„å‡½æ•°è°ƒç”¨ï¼Œå› ä¸ºï¼š</p><p>â€‹ç³»ç»Ÿè°ƒç”¨ä¼šä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œéœ€è¦ä¸¤æ¬¡å»ºç«‹å‡½æ•°ç©ºé—´ï¼Œè€Œå‡½æ•°è°ƒç”¨åªæœ‰è‡ªå·±å”¯ä¸€çš„æ ˆç©ºé—´</p><h4 id="è·¨è¶Šæ“ä½œç³»ç»Ÿè¾¹ç•Œçš„å¼€é”€-ä¸­æ–­ã€å¼‚å¸¸ã€ç³»ç»Ÿè°ƒç”¨"><a href="#è·¨è¶Šæ“ä½œç³»ç»Ÿè¾¹ç•Œçš„å¼€é”€-ä¸­æ–­ã€å¼‚å¸¸ã€ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="è·¨è¶Šæ“ä½œç³»ç»Ÿè¾¹ç•Œçš„å¼€é”€(ä¸­æ–­ã€å¼‚å¸¸ã€ç³»ç»Ÿè°ƒç”¨)"></a>è·¨è¶Šæ“ä½œç³»ç»Ÿè¾¹ç•Œçš„å¼€é”€(ä¸­æ–­ã€å¼‚å¸¸ã€ç³»ç»Ÿè°ƒç”¨)</h4><p>åœ¨æ‰§è¡Œæ—¶é—´ä¸Šå¼€é”€è¶…è¿‡åº”ç”¨ç¨‹åº</p><p>å¼€é”€ä½“ç°äºï¼š</p><ul><li>å»ºç«‹ä¸­æ–­&#x2F;å¼‚å¸¸&#x2F;ç³»ç»Ÿ<strong>è°ƒç”¨å· ä¸ å¯¹åº”æœåŠ¡ä¾‹ç¨‹æ˜ å°„å…³ç³»çš„åˆå§‹åŒ–å¼€é”€</strong>(å› ä¸ºä½ è·¨è¶Šäº†OSè¾¹ç•Œï¼Œä¸èƒ½æŠŠåŸæœ¬çš„çŠ¶æ€å¸¦è¿‡å»ï¼Œæ‰€ä»¥éœ€è¦ä¸€å¼ æ˜ å°„è¡¨ï¼Œç”±ç¼–å·æ‰¾åˆ°ä½ éœ€è¦åšçš„äº‹)</li><li>å»ºç«‹å†…æ ¸å †æ ˆ(å› ä¸ºåœ¨å†…æ ¸æ€è¿›è¡Œæ“ä½œï¼Œéœ€è¦åœ¨å†…æ ¸æ€å»ºç«‹å˜é‡å­˜å‚¨ç©ºé—´)</li><li>éªŒè¯å‚æ•°(å†…æ ¸æ€ä¸ä¿¡ä»»ç”¨æˆ·æ€ï¼Œéœ€è¦è¿›è¡ŒéªŒè¯)</li><li>å†…æ ¸æ€æ˜ å°„åˆ°ç”¨æˆ·æ€çš„åœ°å€ç©ºé—´(å†…æ ¸æ€äº§ç”Ÿçš„æ•°æ®éœ€è¦æ‹·è´å›ç”¨æˆ·æ€)</li><li>å†…æ ¸æ€ç‹¬ç«‹åœ°å€ç©ºé—´(TLB)</li></ul><p>è¿™äº›å¼€é”€éƒ½æ˜¯å€¼å¾—çš„ï¼Œå®ƒä»¬ä¿è¯äº†OSçš„æ“ä½œå®‰å…¨ã€å¯é ï¼</p><h2 id="Chapter3-è¿ç»­å¼å†…å­˜åˆ†é…"><a href="#Chapter3-è¿ç»­å¼å†…å­˜åˆ†é…" class="headerlink" title="Chapter3 è¿ç»­å¼å†…å­˜åˆ†é…"></a>Chapter3 è¿ç»­å¼å†…å­˜åˆ†é…</h2><h3 id="è®¡ç®—æœºä½“ç³»ç»“æ„åŠå†…å­˜åˆ†å±‚ä½“ç³»"><a href="#è®¡ç®—æœºä½“ç³»ç»“æ„åŠå†…å­˜åˆ†å±‚ä½“ç³»" class="headerlink" title="è®¡ç®—æœºä½“ç³»ç»“æ„åŠå†…å­˜åˆ†å±‚ä½“ç³»"></a>è®¡ç®—æœºä½“ç³»ç»“æ„åŠå†…å­˜åˆ†å±‚ä½“ç³»</h3><p>åˆ†å±‚â€¦â€¦è®¡ç»„é‡Œéƒ½å­¦è¿‡</p><h4 id="æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†æ–¹é¢çš„å››ä¸ªç›®æ ‡"><a href="#æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†æ–¹é¢çš„å››ä¸ªç›®æ ‡" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†æ–¹é¢çš„å››ä¸ªç›®æ ‡"></a>æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†æ–¹é¢çš„å››ä¸ªç›®æ ‡</h4><ul><li>æŠ½è±¡<ul><li>é€»è¾‘åœ°å€ç©ºé—´</li></ul></li><li>ä¿æŠ¤<ul><li>ç‹¬ç«‹åœ°å€ç©ºé—´</li></ul></li><li>å…±äº«<ul><li>è®¿é—®ç›¸åŒå†…å­˜</li></ul></li><li>è™šæ‹ŸåŒ–<ul><li>æ›´å¤šçš„åœ°å€ç©ºé—´</li></ul></li></ul><h3 id="åœ°å€ç©ºé—´ä¸åœ°å€ç”Ÿæˆ"><a href="#åœ°å€ç©ºé—´ä¸åœ°å€ç”Ÿæˆ" class="headerlink" title="åœ°å€ç©ºé—´ä¸åœ°å€ç”Ÿæˆ"></a>åœ°å€ç©ºé—´ä¸åœ°å€ç”Ÿæˆ</h3><h4 id="1-åœ°å€ç©ºé—´å®šä¹‰"><a href="#1-åœ°å€ç©ºé—´å®šä¹‰" class="headerlink" title="1.åœ°å€ç©ºé—´å®šä¹‰"></a>1.åœ°å€ç©ºé—´å®šä¹‰</h4><p>â€‹ç‰©ç†åœ°å€ç©ºé—´ï¼šç¡¬ä»¶æ”¯æŒçš„åœ°å€ç©ºé—´</p><p>â€‹é€»è¾‘åœ°å€ç©ºé—´ï¼šä¸€ä¸ªè¿è¡Œçš„ç¨‹åºæ‰€æ‹¥æœ‰çš„å†…å­˜èŒƒå›´</p><h4 id="2-åœ°å€ç”Ÿæˆ"><a href="#2-åœ°å€ç”Ÿæˆ" class="headerlink" title="2.åœ°å€ç”Ÿæˆ"></a>2.åœ°å€ç”Ÿæˆ</h4><p>â€‹é€»è¾‘åœ°å€ç”Ÿæˆï¼šä»å˜é‡çš„ç¬¦å·ï¼Œé€šè¿‡ä¸€ç³»åˆ—æ“ä½œ(ç¼–è¯‘ã€æ±‡ç¼–ã€é“¾æ¥ã€è½½å…¥)å˜ä¸ºé€»è¾‘åœ°å€</p><p>â€‹ç‰©ç†åœ°å€ç”Ÿæˆï¼šå·²çŸ¥é€»è¾‘åœ°å€ï¼Œé€šè¿‡ç¡¬ä»¶MMUå°†é€»è¾‘åœ°å€æ˜ å°„åˆ°ç‰©ç†åœ°å€</p><h4 id="3-åœ°å€å®‰å…¨æ£€æŸ¥"><a href="#3-åœ°å€å®‰å…¨æ£€æŸ¥" class="headerlink" title="3.åœ°å€å®‰å…¨æ£€æŸ¥"></a>3.åœ°å€å®‰å…¨æ£€æŸ¥</h4><p>â€‹OSè®°å½•æ¯ä¸€ä¸ªç¨‹åºèƒ½å¤Ÿè®¿é—®çš„åœ°å€ç©ºé—´(å¼€å§‹ä½ç½®å’Œå¤§å°)</p><p>â€‹è¿™ä¸ªè¡¨ç”±OSç»´æŠ¤ï¼ŒCPUè¦æ‰§è¡ŒæŸä¸ªç¨‹åºæ—¶ï¼ŒOSæ£€æŸ¥è¯¥ç¨‹åºçš„åœ°å€æ˜¯å¦æ»¡è¶³è¡¨ä¸­çš„é™åˆ¶(ä¸ä¸å·²å ç”¨ç©ºé—´å†²çª)ï¼Œèƒ½æ»¡è¶³åˆ™æ­£å¸¸æ‰§è¡Œï¼›å¦åˆ™CPUäº§ç”Ÿå†…å­˜è®¿é—®å¼‚å¸¸ï¼Œè®©OSè¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚</p><h3 id="è¿ç»­å†…å­˜åˆ†é…ï¼šå†…å­˜ç¢ç‰‡ä¸åˆ†åŒºçš„åŠ¨æ€åˆ†é…"><a href="#è¿ç»­å†…å­˜åˆ†é…ï¼šå†…å­˜ç¢ç‰‡ä¸åˆ†åŒºçš„åŠ¨æ€åˆ†é…" class="headerlink" title="è¿ç»­å†…å­˜åˆ†é…ï¼šå†…å­˜ç¢ç‰‡ä¸åˆ†åŒºçš„åŠ¨æ€åˆ†é…"></a>è¿ç»­å†…å­˜åˆ†é…ï¼šå†…å­˜ç¢ç‰‡ä¸åˆ†åŒºçš„åŠ¨æ€åˆ†é…</h3><h4 id="å†…å­˜ç¢ç‰‡é—®é¢˜"><a href="#å†…å­˜ç¢ç‰‡é—®é¢˜" class="headerlink" title="å†…å­˜ç¢ç‰‡é—®é¢˜"></a>å†…å­˜ç¢ç‰‡é—®é¢˜</h4><p>ç©ºé—²å†…å­˜ä¸èƒ½è¢«åˆ©ç”¨</p><ul><li>å¤–éƒ¨ç¢ç‰‡</li></ul><p>åœ¨**åˆ†é…å•å…ƒ<u>é—´</u>**çš„æœªä½¿ç”¨å†…å­˜</p><ul><li>å†…éƒ¨ç¢ç‰‡</li></ul><p>åœ¨**åˆ†é…å•å…ƒ<u>ä¸­</u>**çš„æœªä½¿ç”¨å†…å­˜</p><h4 id="åˆ†åŒºçš„åŠ¨æ€åˆ†é…"><a href="#åˆ†åŒºçš„åŠ¨æ€åˆ†é…" class="headerlink" title="åˆ†åŒºçš„åŠ¨æ€åˆ†é…"></a>åˆ†åŒºçš„åŠ¨æ€åˆ†é…</h4><h5 id="å¸¸è§åˆ†é…ç­–ç•¥"><a href="#å¸¸è§åˆ†é…ç­–ç•¥" class="headerlink" title="å¸¸è§åˆ†é…ç­–ç•¥"></a>å¸¸è§åˆ†é…ç­–ç•¥</h5><h6 id="ç¬¬ä¸€é€‚é…"><a href="#ç¬¬ä¸€é€‚é…" class="headerlink" title="ç¬¬ä¸€é€‚é…"></a>ç¬¬ä¸€é€‚é…</h6><p>â€‹æ”¾åœ¨<strong>ç¬¬ä¸€ä¸ª</strong>èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚çš„ç©ºé—²å—ä¸­</p><p>â€‹<strong>ç®€å•å®ç°ï¼š</strong></p><ul><li>å¯¹ç©ºé—²å—åˆ—è¡¨æŒ‰åœ°å€æ’åº</li><li>åˆ†é…åˆ°ç¬¬ä¸€ä¸ªåˆé€‚çš„åˆ†åŒº</li><li>å›æ”¶æ—¶è¿›è¡Œæ£€æŸ¥ï¼Œçœ‹çœ‹è‡ªç”±åˆ†åŒºèƒ½ä¸èƒ½ä¸ç›¸é‚»çš„ç©ºé—²åˆ†åŒºåˆå¹¶<ul><li>ç¼ºç‚¹ï¼šäº§ç”Ÿå¤–éƒ¨ç¢ç‰‡ã€ä¸ç¡®å®šæ€§</li></ul></li></ul><h6 id="æœ€ä½³é€‚é…"><a href="#æœ€ä½³é€‚é…" class="headerlink" title="æœ€ä½³é€‚é…"></a>æœ€ä½³é€‚é…</h6><p>â€‹åœ¨èƒ½æ”¾ä¸‹ç©ºé—²å—çš„åˆ†åŒºä¸­ï¼Œå¯»æ‰¾<strong>æœ€å°</strong>çš„åˆ†åŒºï¼ˆé¿å…äº†åˆ†å‰²å¤§ç©ºé—²å—ï¼Œä¸ºäº†æœ€å°åŒ–å¤–éƒ¨ç¢ç‰‡äº§ç”Ÿçš„å°ºå¯¸ï¼‰</p><p>â€‹<strong>ç®€å•å®ç°ï¼š</strong></p><ul><li>æŒ‰å°ºå¯¸æ’åˆ—ç©ºé—²å—åˆ—è¡¨</li><li>åˆ†é…æ—¶éœ€è¦å¯»æ‰¾æœ€åˆé€‚çš„åˆ†åŒº</li><li>å›æ”¶æ—¶è¿›è¡Œæ£€æŸ¥ï¼Œçœ‹çœ‹è‡ªç”±åˆ†åŒºèƒ½ä¸èƒ½ä¸ç›¸é‚»çš„ç©ºé—²åˆ†åŒºåˆå¹¶<ul><li>ä¼˜åŠ¿ï¼šå½“å¤§éƒ¨åˆ†åˆ†é…æ˜¯å°å°ºå¯¸æ—¶ååˆ†æœ‰æ•ˆ</li><li>åŠ£åŠ¿ï¼šä¼šäº§ç”Ÿå¤–éƒ¨ç¢ç‰‡ï¼Œé‡åˆ†é…(å›æ”¶)æ…¢ï¼Œå®¹æ˜“äº§ç”Ÿå¾ˆå¤šå¾ˆå°çš„å†…éƒ¨ç¢ç‰‡</li></ul></li></ul><p></p><h6 id="æœ€å·®é€‚é…"><a href="#æœ€å·®é€‚é…" class="headerlink" title="æœ€å·®é€‚é…"></a>æœ€å·®é€‚é…</h6><p>â€‹åœ¨èƒ½æ”¾ä¸‹ç©ºé—²å—çš„åˆ†åŒºä¸­ï¼Œå¯»æ‰¾<strong>æœ€å¤§</strong>çš„åˆ†åŒºï¼ˆä¸ºäº†é¿å…æœ‰å¤ªå¤šå¾®å°çš„ç¢ç‰‡ï¼‰</p><p>â€‹<strong>ç®€å•å®ç°ï¼š</strong></p><ul><li>æŒ‰å°ºå¯¸æ’åˆ—ç©ºé—²å—åˆ—è¡¨(ä»å¤§åˆ°å°)</li><li>åˆ†é…æ—¶éœ€è¦å¯»æ‰¾æœ€åˆé€‚çš„åˆ†åŒº(æ‰¾æœ€å¤§çš„ï¼Œæ‰€ä»¥æ‰¾éå¸¸å¿«)</li><li>å›æ”¶æ—¶è¿›è¡Œæ£€æŸ¥ï¼Œçœ‹çœ‹è‡ªç”±åˆ†åŒºèƒ½ä¸èƒ½ä¸ç›¸é‚»çš„ç©ºé—²åˆ†åŒºåˆå¹¶<ul><li>ä¼˜åŠ¿ï¼šåˆ†é…ä¸­ç­‰å¤§å°çš„å—æ•ˆæœæœ€å¥½</li><li>åŠ£åŠ¿ï¼šé‡åˆ†é…æ…¢ã€å¤–éƒ¨ç¢ç‰‡ã€æ¯æ¬¡éƒ½ä½¿ç”¨å¤§ç©ºé—²å—å¯èƒ½å¯¼è‡´å¤§åˆ†åŒºæ— æ³•è¢«åˆ†é…</li></ul></li></ul><h4 id="å‹ç¼©å¼ç¢ç‰‡æ•´ç†"><a href="#å‹ç¼©å¼ç¢ç‰‡æ•´ç†" class="headerlink" title="å‹ç¼©å¼ç¢ç‰‡æ•´ç†"></a>å‹ç¼©å¼ç¢ç‰‡æ•´ç†</h4><p>â€‹åœ¨ç¨‹åºå¤„äºç­‰å¾…çŠ¶æ€æ—¶ï¼Œå°†å…¶è¿›è¡Œç§»åŠ¨ï¼Œä»è€Œæ¶ˆé™¤å¤–éƒ¨ç¢ç‰‡â€”â€”â€”â€”ç›®çš„æ˜¯æ¶ˆé™¤å¤–éƒ¨ç¢ç‰‡</p><h4 id="äº¤æ¢å¼ç¢ç‰‡æ•´ç†"><a href="#äº¤æ¢å¼ç¢ç‰‡æ•´ç†" class="headerlink" title="äº¤æ¢å¼ç¢ç‰‡æ•´ç†"></a>äº¤æ¢å¼ç¢ç‰‡æ•´ç†</h4><p>â€‹å¦‚æœè¿è¡Œä¸­çš„ç¨‹åºéœ€è¦æ¯”è¾ƒå¤§çš„å†…å­˜ç©ºé—´ï¼Œé‚£ä¹ˆå¯ä»¥è®©å®ƒ<u>æŠ¢å ç­‰å¾…ä¸­çš„ç¨‹åºçš„å†…å­˜ç©ºé—´(</u>å…ˆå°†å ç”¨äº†å†…å­˜ç©ºé—´çš„ç­‰å¾…ä¸­çš„ç¨‹åºè½¬å­˜åˆ°ç¡¬ç›˜ä¸­)</p><p>â€‹é—®é¢˜ï¼šå°†å“ªä¸ªç­‰å¾…ä¸­çš„ç¨‹åºæ¢å‡ºå‘¢ï¼Ÿä»€ä¹ˆæ—¶å€™æ‰§è¡Œæ¢å…¥ã€æ¢å‡ºçš„æ“ä½œå‘¢ï¼Ÿ</p><h2 id="Chapter4-éè¿ç»­å¼å†…å­˜åˆ†é…"><a href="#Chapter4-éè¿ç»­å¼å†…å­˜åˆ†é…" class="headerlink" title="Chapter4 éè¿ç»­å¼å†…å­˜åˆ†é…"></a>Chapter4 éè¿ç»­å¼å†…å­˜åˆ†é…</h2><h3 id="è¿ç»­å†…å­˜åˆ†é…çš„ç¼ºç‚¹ï¼š"><a href="#è¿ç»­å†…å­˜åˆ†é…çš„ç¼ºç‚¹ï¼š" class="headerlink" title="è¿ç»­å†…å­˜åˆ†é…çš„ç¼ºç‚¹ï¼š"></a>è¿ç»­å†…å­˜åˆ†é…çš„ç¼ºç‚¹ï¼š</h3><p>â€‹åˆ†é…ç»™ä¸€ä¸ªç¨‹åºçš„ç‰©ç†å†…å­˜æ˜¯è¿ç»­çš„ã€å†…å­˜åˆ©ç”¨ç‡è¾ƒä½ã€æœ‰å¤–ã€å†…éƒ¨ç¢ç‰‡çš„é—®é¢˜</p><h3 id="éè¿ç»­å†…å­˜åˆ†é…çš„ä¼˜ç‚¹ï¼š"><a href="#éè¿ç»­å†…å­˜åˆ†é…çš„ä¼˜ç‚¹ï¼š" class="headerlink" title="éè¿ç»­å†…å­˜åˆ†é…çš„ä¼˜ç‚¹ï¼š"></a>éè¿ç»­å†…å­˜åˆ†é…çš„ä¼˜ç‚¹ï¼š</h3><ul><li>æ›´å¥½çš„å†…å­˜åˆ©ç”¨å’Œç®¡ç†</li><li>å…è®¸å…±äº«ä»£ç ä¸æ•°æ®</li><li>æ”¯æŒåŠ¨æ€åŠ è½½å’ŒåŠ¨æ€é“¾æ¥</li></ul><h3 id="éè¿ç»­å†…å­˜åˆ†é…çš„ç¼ºç‚¹ï¼š"><a href="#éè¿ç»­å†…å­˜åˆ†é…çš„ç¼ºç‚¹ï¼š" class="headerlink" title="éè¿ç»­å†…å­˜åˆ†é…çš„ç¼ºç‚¹ï¼š"></a>éè¿ç»­å†…å­˜åˆ†é…çš„ç¼ºç‚¹ï¼š</h3><ul><li>å¦‚ä½•å»ºç«‹è™šæ‹Ÿåœ°å€ä¸ç‰©ç†åœ°å€ä¹‹é—´çš„è”ç³»<ul><li>ç¡¬ä»¶æ–¹æ¡ˆ<ul><li>åˆ†æ®µ(åˆ†æ®µå’Œåˆ†é¡µçš„åŒºåˆ«ï¼šæ®µçš„å¤§å°å¯ä»¥æ”¹å˜ã€é¡µçš„å¤§å°æ˜¯å›ºå®šçš„)</li><li>åˆ†é¡µ</li></ul></li><li>è½¯ä»¶æ–¹æ¡ˆ(å¼€é”€å¤§ï¼Œä¸å±•å¼€è®¨è®º)</li></ul></li></ul><h3 id="åˆ†æ®µ"><a href="#åˆ†æ®µ" class="headerlink" title="åˆ†æ®µ"></a>åˆ†æ®µ</h3><h4 id="ç¨‹åºçš„åˆ†æ®µåœ°å€ç©ºé—´"><a href="#ç¨‹åºçš„åˆ†æ®µåœ°å€ç©ºé—´" class="headerlink" title="ç¨‹åºçš„åˆ†æ®µåœ°å€ç©ºé—´"></a>ç¨‹åºçš„åˆ†æ®µåœ°å€ç©ºé—´</h4><p>â€‹æœ‰å †ã€æ ˆã€å„ç§éƒ¨åˆ†  é€»è¾‘ç©ºé—´æ˜¯è¿ç»­çš„ï¼Œä½†å®é™…ä¸Šç‰©ç†åœ°å€ç©ºé—´æ¯«æ— å…³è”(è·Ÿåˆ†é…ç­–ç•¥æœ‰å…³)</p><h4 id="åˆ†æ®µå¯»å€æ–¹æ¡ˆ"><a href="#åˆ†æ®µå¯»å€æ–¹æ¡ˆ" class="headerlink" title="åˆ†æ®µå¯»å€æ–¹æ¡ˆ"></a>åˆ†æ®µå¯»å€æ–¹æ¡ˆ</h4><h5 id="æ®µè®¿é—®æœºåˆ¶ï¼š"><a href="#æ®µè®¿é—®æœºåˆ¶ï¼š" class="headerlink" title="æ®µè®¿é—®æœºåˆ¶ï¼š"></a>æ®µè®¿é—®æœºåˆ¶ï¼š</h5><p>â€‹s + addr ï¼ˆæ®µå· + æ®µå†…åç§»ï¼‰å¤šåœ°å€ç©ºé—´</p><p>â€‹sä¸addrä¸€èµ·å­˜ å•åœ°å€ç©ºé—´</p><p>â€‹sé€šè¿‡ <strong>segment table(æ®µè¡¨)</strong> æ ¹æ®æ®µå· æŸ¥è¯¢ æ®µæ‰€å¯¹åº”çš„ç‰©ç†åœ°å€ï¼Œå†åŠ ä¸Šåç§»é‡å°± &#x3D; ç‰©ç†åœ°å€æ®µè¡¨ç”±OSå»ºç«‹</p><h3 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h3><ul><li>é€»è¾‘ç©ºé—´ï¼šé¡µç‰©ç†é¡µé¢ï¼šå¸§</li><li>ç‰©ç†å†…å­˜è¢«åˆ†æˆå¤§å°ç›¸åŒçš„å¸§</li></ul><p>ä¸€ä¸ªç¨‹åºçš„é€»è¾‘åœ°å€ç©ºé—´è¢«åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„é¡µ</p><p>â€‹<strong>ğŸŒŸ(é¡µå†…åç§»å¤§å°&#x3D;å¸§å†…åç§»å¤§å°ï¼›é¡µå·å¤§å° !&#x3D; å¸§å·å¤§å°{åœ¨é¡µè¡¨ä¸­ï¼Œé€šè¿‡é¡µå·å¾—åˆ°å¸§å·})</strong></p><ul><li>é¡µæ˜ å°„åˆ°å¸§</li><li>é¡µæ˜¯è¿ç»­çš„è™šæ‹Ÿå†…å­˜</li><li>å¸§æ˜¯éè¿ç»­çš„ç‰©ç†å†…å­˜</li><li>ä¸æ˜¯æ‰€æœ‰çš„é¡µéƒ½æœ‰å¯¹åº”çš„å¸§</li></ul><h4 id="åˆ†é¡µåœ°å€ç©ºé—´"><a href="#åˆ†é¡µåœ°å€ç©ºé—´" class="headerlink" title="åˆ†é¡µåœ°å€ç©ºé—´"></a>åˆ†é¡µåœ°å€ç©ºé—´</h4><p>â€‹å¸§çš„ç‰©ç†åœ°å€&#x3D;å¸§å· + å¸§å†…åç§»</p><h4 id="é¡µå¯»å€æ–¹æ¡ˆâ€”â€”é¡µè¡¨"><a href="#é¡µå¯»å€æ–¹æ¡ˆâ€”â€”é¡µè¡¨" class="headerlink" title="é¡µå¯»å€æ–¹æ¡ˆâ€”â€”é¡µè¡¨"></a>é¡µå¯»å€æ–¹æ¡ˆâ€”â€”é¡µè¡¨</h4><h5 id="åˆ†é¡µæœºåˆ¶æ€§èƒ½é—®é¢˜ï¼š"><a href="#åˆ†é¡µæœºåˆ¶æ€§èƒ½é—®é¢˜ï¼š" class="headerlink" title="åˆ†é¡µæœºåˆ¶æ€§èƒ½é—®é¢˜ï¼š"></a>åˆ†é¡µæœºåˆ¶æ€§èƒ½é—®é¢˜ï¼š</h5><h6 id="è®¿é—®ä¸€ä¸ªå†…å­˜å•å…ƒéœ€è¦2æ¬¡å†…å­˜è®¿é—®"><a href="#è®¿é—®ä¸€ä¸ªå†…å­˜å•å…ƒéœ€è¦2æ¬¡å†…å­˜è®¿é—®" class="headerlink" title="è®¿é—®ä¸€ä¸ªå†…å­˜å•å…ƒéœ€è¦2æ¬¡å†…å­˜è®¿é—®"></a>è®¿é—®ä¸€ä¸ªå†…å­˜å•å…ƒéœ€è¦2æ¬¡å†…å­˜è®¿é—®</h6><p>â€‹        1.ç”¨äºè·å–é¡µè¡¨é¡¹</p><p>â€‹2.æ ¹æ®è·å¾—çš„é¡µè¡¨é¡¹è®¿é—®æ•°æ®</p><h6 id="é¡µè¡¨å¯èƒ½éå¸¸å¤§"><a href="#é¡µè¡¨å¯èƒ½éå¸¸å¤§" class="headerlink" title="é¡µè¡¨å¯èƒ½éå¸¸å¤§"></a>é¡µè¡¨å¯èƒ½éå¸¸å¤§</h6><h5 id="å¦‚ä½•è§£å†³ï¼Ÿ"><a href="#å¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³ï¼Ÿ"></a>å¦‚ä½•è§£å†³ï¼Ÿ</h5><h6 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h6><p>â€‹TLBï¼šç¼“å­˜è¿‘æœŸè®¿é—®çš„é¡µ-å¸§è½¬æ¢è¡¨é¡¹(TLBå­˜äºCacheä¸­)</p><h6 id="é—´æ¥è®¿é—®"><a href="#é—´æ¥è®¿é—®" class="headerlink" title="é—´æ¥è®¿é—®"></a>é—´æ¥è®¿é—®</h6><p>â€‹äºŒçº§ã€å¤šçº§é¡µè¡¨ï¼šå¤šæ¬¡å¯»å€é€Ÿåº¦é™ä½ï¼Œä½†æ˜¯ç¼©å‡äº†é¡µè¡¨(æ—¶é—´æ¢ç©ºé—´ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡TLBæé€Ÿï¼)</p><h6 id="åå‘é¡µè¡¨-è¯´å®è¯æ²¡å¬æ˜ç™½ï¼Œå…ˆæŒ–ä¸ªå‘ï¼Œå›é¡¾æ—¶å¡«ä¸Š"><a href="#åå‘é¡µè¡¨-è¯´å®è¯æ²¡å¬æ˜ç™½ï¼Œå…ˆæŒ–ä¸ªå‘ï¼Œå›é¡¾æ—¶å¡«ä¸Š" class="headerlink" title="åå‘é¡µè¡¨(è¯´å®è¯æ²¡å¬æ˜ç™½ï¼Œå…ˆæŒ–ä¸ªå‘ï¼Œå›é¡¾æ—¶å¡«ä¸Š)"></a><u>åå‘</u>é¡µè¡¨(è¯´å®è¯æ²¡å¬æ˜ç™½ï¼Œå…ˆæŒ–ä¸ªå‘ï¼Œå›é¡¾æ—¶å¡«ä¸Š)</h6><p>â€‹ç¨‹åºçš„åœ°å€ç©ºé—´å¾ˆå¤§æ—¶ï¼Œé€»è¾‘åœ°å€ç©ºé—´ä¼šå¤§äºå†…å­˜çš„ç‰©ç†åœ°å€ç©ºé—´</p><p>â€‹è¿™æ—¶ æˆ‘ä»¬<u>ä¸æ˜¯è®©é¡µè¡¨ä¸é€»è¾‘åœ°å€ç©ºé—´çš„å¤§å°ç›¸å¯¹åº”</u>ï¼Œè€Œæ˜¯<strong>è®©é¡µè¡¨ä¸ç‰©ç†åœ°å€ç©ºé—´çš„å¤§å°ç›¸å¯¹åº”</strong></p><p>â€‹åˆ©ï¼š</p><ul><li><p>è½¬æ¢è¡¨çš„å¤§å°ç›¸å¯¹äºç‰©ç†å†…å­˜æ¥è¯´å¾ˆå°</p></li><li><p>è½¬æ¢è¡¨çš„å¤§å°è·Ÿé€»è¾‘åœ°å€ç©ºé—´çš„å¤§å°æ— å…³</p><p>å¼Šï¼š</p></li><li><p>éœ€è¦çš„ä¿¡æ¯å¯¹è°ƒäº†ï¼Œå³ç°åœ¨åªèƒ½æ ¹æ®å¸§å·æ‰¾åˆ°é¡µå·</p></li><li><p>å¦‚ä½•è½¬æ¢å›æ¥ï¼Ÿå³å¦‚ä½•æ ¹æ®é¡µå·æ‰¾åˆ°å¸§å·ï¼Ÿ</p></li><li><p>éœ€è¦åœ¨åå‘é¡µè¡¨ä¸­æœç´¢æƒ³è¦çš„é¡µå·</p></li></ul><p></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å¦‚ä½•å®ç°å‘¢ï¼Ÿ</span></span><br><span class="line"><span class="comment">*å¯¹é¡µå·åšhashè®¡ç®—ï¼Œä¸ºäº†åœ¨â€œå¸§è¡¨â€ä¸­è·å–å¯¹åº”çš„å¸§å·</span></span><br><span class="line"><span class="comment">*é¡µiè¢«æ”¾ç½®åœ¨â€œå¸§è¡¨â€ä¸­f(i)çš„ä½ç½® #fä¸ºhashå‡½æ•°</span></span><br><span class="line"><span class="comment">*ä¸ºäº†æŸ¥æ‰¾é¡µiï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</span></span><br><span class="line"><span class="comment">*å¯¹äºé¡µiï¼Œè®¡ç®—f(i)å¹¶ä½¿ç”¨å®ƒä½œä¸ºé¡µå¯„å­˜å™¨è¡¨çš„ç´¢å¼•ï¼Œè·å–å¯¹åº”çš„é¡µå¯„å­˜å™¨</span></span><br><span class="line"><span class="comment">*æ£€æŸ¥å¯„å­˜å™¨æ ‡ç­¾æ˜¯å¦åŒ…å«iï¼Œå¦‚æœåŒ…å«ï¼Œåˆ™ä»£è¡¨æˆåŠŸè·å–å¸§å·ï¼Œå¦åˆ™å¤±è´¥ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="Chapter5-è™šæ‹Ÿå†…å­˜"><a href="#Chapter5-è™šæ‹Ÿå†…å­˜" class="headerlink" title="Chapter5 è™šæ‹Ÿå†…å­˜"></a>Chapter5 è™šæ‹Ÿå†…å­˜</h2><h3 id="è¦†ç›–æŠ€æœ¯ï¼š"><a href="#è¦†ç›–æŠ€æœ¯ï¼š" class="headerlink" title="è¦†ç›–æŠ€æœ¯ï¼š"></a>è¦†ç›–æŠ€æœ¯ï¼š</h3><p>â€‹ä¸ºäº†åœ¨è¾ƒå°çš„å†…å­˜ä¸­è¿è¡Œè¾ƒå¤§çš„ç¨‹åºï¼Œå¸¸ç”¨äºå¤šé“ç¨‹åºç³»ç»Ÿï¼Œä¸åˆ†åŒºå­˜å‚¨ç®¡ç†é…åˆä½¿ç”¨</p><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†:"></a>åŸç†:</h4><p>ç›®æ ‡ï¼šæŠŠç¨‹åºæŒ‰ç…§å…¶è‡ªèº«é€»è¾‘ç»“æ„ï¼Œåˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªåŠŸèƒ½ä¸Šç›¸å¯¹ç‹¬ç«‹çš„ç¨‹åºæ¨¡å—é‚£äº›ä¸ä¼šåŒæ—¶æ‰§è¡Œçš„æ¨¡å—å…±äº«åŒä¸€å—å†…å­˜åŒºåŸŸï¼ŒæŒ‰æ—¶é—´å…ˆåæ¥è¿è¡Œã€‚</p><ul><li><p>å¿…è¦éƒ¨åˆ† (å¸¸ç”¨åŠŸèƒ½)çš„ä»£ç å’Œæ•°æ®<strong>å¸¸é©»å†…å­˜</strong></p></li><li><p>å¯é€‰éƒ¨åˆ†(ä¸å¸¸ç”¨åŠŸèƒ½)åœ¨å…¶ä»–ç¨‹åºæ¨¡å—ä¸­å®ç°,<u><em>å¹³æ—¶å­˜æ”¾åœ¨å¤–å­˜ä¸­ï¼Œåœ¨éœ€è¦ç”¨åˆ°æ—¶æ‰è£…å…¥å†…å­˜</em></u>;</p><ul><li>ä¸å­˜åœ¨è°ƒç”¨å…³ç³»çš„æ¨¡å—ä¸å¿…åŒæ—¶è£…å…¥åˆ°å†…å­˜ï¼Œä»è€Œå¯ä»¥ç›¸äº’è¦†ç›–,å³è¿™äº›æ¨¡å—å…±ç”¨ä¸€ä¸ªåˆ†åŒºã€‚</li></ul></li></ul><h4 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h4><ul><li>ç¨‹åºçš„åˆ’åˆ†å¤æ‚ï¼Œè´¹æ—¶è´¹åŠ›</li><li>ç»å¸¸æ€§çš„ä»å¤–å­˜è¯»å–æ•°æ®ï¼Œå®é™…ä¸Šæ˜¯æ—¶é—´æ¢ç©ºé—´</li><li>éœ€è¦ç¨‹åºå‘˜è‡ªå·±æŠŠæ•´ä¸ªç¨‹åºåˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå°çš„åŠŸèƒ½æ¨¡å—ï¼Œå¹¶ç¡®å®šå„ä¸ªæ¨¡å—ä¹‹é—´çš„è¦†ç›–å…³ç³»ï¼Œå¢åŠ äº†ç¨‹åºå‘˜çš„è´Ÿæ‹…;</li></ul><h3 id="äº¤æ¢æŠ€æœ¯ï¼š"><a href="#äº¤æ¢æŠ€æœ¯ï¼š" class="headerlink" title="äº¤æ¢æŠ€æœ¯ï¼š"></a>äº¤æ¢æŠ€æœ¯ï¼š</h3><p>â€‹å¤šé“ç¨‹åºåœ¨å†…å­˜ä¸­æ—¶,è®©æ­£åœ¨è¿è¡Œçš„ç¨‹åºæˆ–éœ€è¦è¿è¡Œçš„ç¨‹åºè·å¾—æ›´å¤šçš„å†…å­˜èµ„æºã€‚</p><h4 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†:"></a>åŸç†:</h4><ul><li>â€‹å¯å°†æš‚æ—¶ä¸èƒ½è¿è¡Œçš„ç¨‹åºé€åˆ°å¤–å­˜ï¼Œä»è€Œè·å¾—ç©ºé—²å†…å­˜ç©ºé—´ã€‚</li><li>â€‹æ“ä½œç³»ç»ŸæŠŠä¸€ä¸ªè¿›ç¨‹çš„æ•´ä¸ªåœ°å€ç©ºé—´çš„å†…å®¹ä¿å­˜åˆ°å¤–å­˜ä¸­(æ¢å‡ºswap out)ï¼Œè€Œå°†å¤–å­˜ä¸­çš„æŸä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´è¯»å…¥åˆ°å†…å­˜ä¸­(æ¢å…¥swap in)ã€‚æ¢å…¥æ¢å‡ºå†…å®¹çš„å¤§å°ä¸ºæ•´ä¸ªç¨‹åºçš„åœ°å€ç©ºé—´ã€‚</li></ul><p></p><h4 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h4><ul><li>ä½•æ—¶äº¤æ¢ï¼Ÿ<ul><li>åªæœ‰å½“å†…å­˜ä¸å¤Ÿæˆ–è€…æœ‰ä¸å¤Ÿçš„é£é™©æ—¶è¿›è¡Œäº¤æ¢</li></ul></li><li>äº¤æ¢åŒºçš„å¤§å°<ul><li>å¿…é¡»è¶³å¤Ÿå­˜æ”¾ç”¨æˆ·è¿›ç¨‹ä¸­æ‰€æœ‰å†…å­˜æ˜ åƒçš„æ‹·è´</li><li>å¿…é¡»èƒ½å¯¹è¿™äº›å†…å­˜æ˜ åƒè¿›è¡Œç›´æ¥å­˜å–</li></ul></li><li>äº¤æ¢æŠ€æœ¯:ä»¥è¿›ç¨‹ä½œä¸ºäº¤æ¢çš„å•ä½ï¼Œéœ€è¦æŠŠè¿›ç¨‹çš„æ•´ä¸ªåœ°å€ç©ºé—´éƒ½æ¢è¿›æ¢å‡ºï¼Œå¢åŠ äº†å¤„ç†å™¨çš„å¼€é”€ã€‚</li></ul><h3 id="è¦†ç›–ä¸äº¤æ¢çš„æ¯”è¾ƒï¼š"><a href="#è¦†ç›–ä¸äº¤æ¢çš„æ¯”è¾ƒï¼š" class="headerlink" title="è¦†ç›–ä¸äº¤æ¢çš„æ¯”è¾ƒï¼š"></a>è¦†ç›–ä¸äº¤æ¢çš„æ¯”è¾ƒï¼š</h3><p><strong>è¦†ç›–æŠ€æœ¯</strong>åªèƒ½å‘ç”Ÿåœ¨é‚£äº›ç›¸äº’ä¹‹é—´æ²¡æœ‰è°ƒç”¨å…³ç³»çš„ç¨‹åºæ¨¡å—ä¹‹é—´ã€‚å› æ­¤ç¨‹åºå‘˜å¿…é¡»ç»™å‡ºç¨‹åºå†…çš„å„ä¸ªæ¨¡å—ä¹‹é—´çš„é€»è¾‘è¦†ç›–ç»“æ„ã€‚(ç§»åŠ¨çš„æœ€å°ç²’åº¦ä¸ºä¸€ä¸ªç¨‹åº)</p><p><strong>äº¤æ¢æŠ€æœ¯</strong>æ˜¯ä»¥åœ¨å†…å­˜ä¸­çš„ç¨‹åºå¤§å°ä¸ºå•ä½æ¥è¿›è¡Œçš„ï¼Œå®ƒä¸éœ€è¦ç¨‹åºå‘˜ç»™å‡ºå„ä¸ªæ¨¡å—ä¹‹é—´çš„é€»è¾‘è¦†ç›–ç»“æ„ã€‚(ç§»åŠ¨çš„æœ€å°ç²’åº¦ä¸ºç¨‹åºçš„ä¸€ä¸ªå­æ¨¡å—)</p><p>æ¢è¨€ä¹‹ï¼Œäº¤æ¢å‘ç”Ÿåœ¨å†…å­˜ä¸­ç¨‹åºä¸ç®¡ç†ç¨‹åºæˆ–æ“ä½œç³»ç»Ÿä¹‹é—´ï¼Œè€Œè¦†ç›–åˆ™å‘ç”Ÿåœ¨è¿è¡Œç¨‹åºçš„å†…éƒ¨ã€‚</p><h3 id="è™šå­˜æŠ€æœ¯ï¼š"><a href="#è™šå­˜æŠ€æœ¯ï¼š" class="headerlink" title="è™šå­˜æŠ€æœ¯ï¼š"></a>è™šå­˜æŠ€æœ¯ï¼š</h3><p>åƒè¦†ç›–æŠ€æœ¯é‚£æ ·ï¼Œ<u>ä¸æ˜¯æŠŠç¨‹åºçš„æ‰€æœ‰å†…å®¹éƒ½æ”¾åœ¨å†…å­˜ä¸­</u>ï¼Œå› è€Œèƒ½å¤Ÿè¿è¡Œæ¯”å½“å‰çš„ç©ºé—²å†…å­˜ç©ºé—´è¿˜è¦å¤§çš„ç¨‹åºã€‚ä½†åšå¾—æ›´å¥½ï¼Œç”±<u>æ“ä½œç³»ç»Ÿè‡ªåŠ¨æ¥å®Œæˆï¼Œæ— é¡»ç¨‹åºå‘˜çš„å¹²æ¶‰;</u></p><p>åƒäº¤æ¢æŠ€æœ¯é‚£æ ·ï¼Œèƒ½å¤Ÿå®ç°è¿›ç¨‹åœ¨å†…å­˜ä¸å¤–å­˜ä¹‹é—´çš„äº¤æ¢ï¼Œå› è€Œè·å¾—æ›´å¤šçš„ç©ºé—²å†…å­˜ç©ºé—´ã€‚ä½†åšå¾—æ›´å¥½ï¼Œ<u>åªå¯¹è¿›ç¨‹çš„éƒ¨åˆ†å†…å®¹åœ¨å†…å­˜å’Œå¤–å­˜ä¹‹é—´è¿›è¡Œäº¤æ¢ã€‚</u></p><h4 id="ç¨‹åºçš„å±€éƒ¨æ€§åŸç†-principle-of-locality"><a href="#ç¨‹åºçš„å±€éƒ¨æ€§åŸç†-principle-of-locality" class="headerlink" title="ç¨‹åºçš„å±€éƒ¨æ€§åŸç†(principle of locality):"></a>ç¨‹åºçš„å±€éƒ¨æ€§åŸç†(principle of locality):</h4><p>â€‹æŒ‡ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­çš„<strong>ä¸€ä¸ªè¾ƒçŸ­æ—¶æœŸ</strong>ï¼Œæ‰€æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€å’ŒæŒ‡ä»¤çš„æ“ä½œæ•°åœ°å€ï¼Œåˆ†åˆ«<strong>å±€é™äºä¸€å®šåŒºåŸŸ</strong>ã€‚è¿™å¯ä»¥è¡¨ç°ä¸º:</p><ul><li><u>æ—¶é—´å±€éƒ¨æ€§</u>:ä¸€æ¡æŒ‡ä»¤çš„ä¸€æ¬¡æ‰§è¡Œå’Œä¸‹æ¬¡æ‰§è¡Œï¼Œä¸€ä¸ªæ•°æ®çš„ä¸€æ¬¡è®¿é—®å’Œä¸‹æ¬¡è®¿é—®éƒ½é›†ä¸­åœ¨ä¸€ä¸ªè¾ƒçŸ­æ—¶æœŸå†…;</li><li><u>ç©ºé—´å±€éƒ¨æ€§</u>:å½“å‰æŒ‡ä»¤å’Œé‚»è¿‘çš„å‡ æ¡æŒ‡ä»¤ï¼Œå½“å‰è®¿é—®çš„æ•°æ®å’Œé‚»è¿‘çš„å‡ ä¸ªæ•°æ®éƒ½é›†ä¸­åœ¨ä¸€ä¸ªè¾ƒå°åŒºåŸŸå†…ã€‚</li></ul><p>ç¨‹åºçš„å±€éƒ¨æ€§åŸç†è¡¨æ˜ï¼Œä»ç†è®ºä¸Šæ¥è¯´ï¼Œè™šæ‹Ÿå­˜å‚¨æŠ€æœ¯æ˜¯èƒ½å¤Ÿå®ç°çš„ï¼Œè€Œä¸”åœ¨å®ç°äº†ä»¥ååº”è¯¥æ˜¯èƒ½å¤Ÿå–å¾—ä¸€ä¸ªæ»¡æ„çš„æ•ˆæœçš„ã€‚</p><h4 id="åŸºæœ¬æ¦‚å¿µï¼š"><a href="#åŸºæœ¬æ¦‚å¿µï¼š" class="headerlink" title="åŸºæœ¬æ¦‚å¿µï¼š"></a>åŸºæœ¬æ¦‚å¿µï¼š</h4><p>â€‹å¯ä»¥åœ¨é¡µå¼æˆ–æ®µå¼å†…å­˜ç®¡ç†çš„åŸºç¡€ä¸Šå®ç°</p><ul><li><p>åœ¨è£…å…¥ç¨‹åºæ—¶ï¼Œä¸å¿…å°†å…¶å…¨éƒ¨è£…å…¥åˆ°å†…å­˜ï¼Œè€Œåªéœ€å°†å½“å‰éœ€è¦æ‰§è¡Œçš„éƒ¨åˆ†é¡µé¢æˆ–æ®µè£…å…¥åˆ°å†…å­˜ï¼Œå°±å¯è®©ç¨‹åºå¼€å§‹æ‰§è¡Œï¼›</p></li><li><p>åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœéœ€æ‰§è¡Œçš„æŒ‡ä»¤æˆ–è®¿é—®çš„æ•°æ®å°šæœªåœ¨å†…å­˜ï¼ˆç§°ä¸ºç¼ºé¡µæˆ–ç¼ºæ®µï¼‰ï¼Œåˆ™ç”±å¤„ç†å™¨é€šçŸ¥æ“ä½œç³»ç»Ÿå°†ç›¸åº”çš„é¡µé¢æˆ–æ®µè°ƒå…¥åˆ°å†…å­˜ï¼Œç„¶åç»§ç»­æ‰§è¡Œç¨‹åºï¼›</p></li><li><p>å¦ä¸€æ–¹é¢ï¼Œæ“ä½œç³»ç»Ÿå°†å†…å­˜ä¸­æš‚æ—¶ä¸ä½¿ç”¨çš„é¡µé¢æˆ–æ®µè°ƒå‡ºä¿å­˜åœ¨å¤–å­˜ä¸Šï¼Œä»è€Œè…¾å‡ºæ›´å¤šç©ºé—²ç©ºé—´å­˜æ”¾å°†è¦è£…å…¥çš„ç¨‹åºä»¥åŠå°†è¦è°ƒå…¥çš„é¡µé¢æˆ–æ®µã€‚</p></li></ul><h4 id="åŸºæœ¬ç‰¹å¾ï¼š"><a href="#åŸºæœ¬ç‰¹å¾ï¼š" class="headerlink" title="åŸºæœ¬ç‰¹å¾ï¼š"></a>åŸºæœ¬ç‰¹å¾ï¼š</h4><ul><li><p>å¤§çš„ç”¨æˆ·ç©ºé—´ï¼šé€šè¿‡æŠŠç‰©ç†å†…å­˜ä¸å¤–å­˜ç›¸ç»“åˆï¼Œæä¾›ç»™ç”¨æˆ·çš„è™šæ‹Ÿå†…å­˜ç©ºé—´é€šå¸¸å¤§äºå®é™…çš„ç‰©ç†å†…å­˜ï¼Œå³å®ç°äº†è¿™ä¸¤è€…çš„åˆ†ç¦»ã€‚å¦‚32ä½çš„è™šæ‹Ÿåœ°å€ç†è®ºä¸Šå¯ä»¥è®¿é—®4GBï¼Œè€Œå¯èƒ½è®¡ç®—æœºä¸Šä»… æœ‰256Mçš„ç‰©ç†å†…å­˜ï¼Œä½†ç¡¬ç›˜å®¹é‡å¤§äº4GBã€‚</p></li><li><p>éƒ¨åˆ†äº¤æ¢ï¼šä¸äº¤æ¢æŠ€æœ¯ç›¸æ¯”è¾ƒï¼Œè™šæ‹Ÿå­˜å‚¨çš„è°ƒå…¥å’Œè°ƒå‡ºæ˜¯å¯¹éƒ¨åˆ†è™›æ‹Ÿåœ°å€ç©ºé—´è¿›è¡Œçš„ï¼š</p></li><li><p>ä¸è¿ç»­æ€§ï¼šç‰©ç†å†…å­˜åˆ†é…çš„ä¸è¿ç»­ï¼Œè™šæ‹Ÿåœ°å€ç©ºé—´ä½¿ç”¨çš„ä¸è¿ç»­ã€‚</p></li></ul><h4 id="è™šæ‹Ÿé¡µå¼å†…å­˜ç®¡ç†ï¼š"><a href="#è™šæ‹Ÿé¡µå¼å†…å­˜ç®¡ç†ï¼š" class="headerlink" title="è™šæ‹Ÿé¡µå¼å†…å­˜ç®¡ç†ï¼š"></a>è™šæ‹Ÿé¡µå¼å†…å­˜ç®¡ç†ï¼š</h4><ul><li><p>å¤§éƒ¨åˆ†è™šæ‹Ÿå­˜å‚¨ç³»ç»Ÿéƒ½é‡‡ç”¨è™šæ‹Ÿé¡µå¼å­˜å‚¨ç®¡ç†æŠ€æœ¯ï¼Œå³åœ¨<strong>é¡µå¼å­˜å‚¨ç®¡ç†</strong>çš„åŸºç¡€ä¸Šï¼Œ<strong>å¢åŠ </strong><u>è¯·æ±‚è°ƒé¡µå’Œé¡µé¢ç½®æ¢åŠŸèƒ½</u>ã€‚</p></li><li><p>åŸºæœ¬æ€è·¯ï¼š</p><ul><li>å½“ä¸€ä¸ªç”¨æˆ·ç¨‹åºè¦è°ƒå…¥å†…å­˜è¿è¡Œæ—¶ï¼Œ<u>ä¸æ˜¯å°†è¯¥ç¨‹åºçš„æ‰€æœ‰é¡µé¢éƒ½è£…å…¥å†…å­˜ï¼Œè€Œæ˜¯åªè£…å…¥éƒ¨åˆ†çš„é¡µé¢</u>ï¼Œå°±å¯å¯åŠ¨ç¨‹åºè¿è¡Œã€‚</li><li>åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°è¦è¿è¡Œçš„ç¨‹åºæˆ–è¦è®¿é—®æ•°æ®<u>ä¸åœ¨å†…å­˜ï¼Œåˆ™å‘ç³»ç»Ÿå‘å‡ºç¼ºé¡µä¸­æ–­è¯·æ±‚</u>ï¼Œç³»ç»Ÿåœ¨å¤„ç†è¿™ä¸ªä¸­æ–­æ—¶ï¼Œå°†å¤–å­˜ä¸­ç›¸åº”çš„é¡µé¢è°ƒå…¥å†…å­˜ï¼Œä½¿å¾—è¯¥ç¨‹åºèƒ½å¤Ÿç»§ç»­è¿è¡Œã€‚</li></ul></li></ul><h5 id="é¡µè¡¨è¡¨é¡¹éœ€è¦å¢åŠ ï¼š"><a href="#é¡µè¡¨è¡¨é¡¹éœ€è¦å¢åŠ ï¼š" class="headerlink" title="é¡µè¡¨è¡¨é¡¹éœ€è¦å¢åŠ ï¼š"></a>é¡µè¡¨è¡¨é¡¹éœ€è¦å¢åŠ ï¼š</h5><ol><li><strong>é©»ç•™ä½ï¼š1è¡¨ç¤ºè¯¥é¡µåœ¨å†…å­˜ä¸­ï¼›0è¡¨ç¤ºåœ¨å¤–å­˜ä¸­</strong></li><li><strong>ä¿æŠ¤ä½</strong>ï¼šè¡¨ç¤ºå…è®¸å¯¹è¯¥é¡µåšä½•ç§ç±»å‹çš„è®¿é—®ï¼Œå¦‚åªè¯»ã€å¯è¯»å†™ã€å¯æ‰§è¡Œç­‰</li><li><strong>ä¿®æ”¹ä½</strong>ï¼šè¡¨æ˜æ­¤é¡µåœ¨å†…å­˜ä¸­æ˜¯å¦è¢«ä¿®æ”¹è¿‡ã€‚è‹¥ä¿®æ”¹è¿‡ï¼Œåœ¨å›æ”¶æ­¤é¡µæ—¶éœ€è¦æŠŠè¿™ä¸ªé¡µçš„å†…å®¹åŒæ­¥åˆ°å¤–å­˜ã€‚</li><li><strong>è®¿é—®ä½</strong>ï¼šå¦‚æœæœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œç½®ä¸º1ï¼›ç”¨äºé¡µé¢ç½®æ¢ç®—æ³•</li></ol><h5 id="ç¼ºé¡µä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼š"><a href="#ç¼ºé¡µä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼š" class="headerlink" title="ç¼ºé¡µä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼š"></a>ç¼ºé¡µä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼š</h5><ol><li><p>å¦‚æœåœ¨å†…å­˜ä¸­æœ‰ç©ºé—²çš„ç‰©ç†é¡µé¢ï¼Œåˆ™åˆ†é…ä¸€ç‰©ç†é¡µå¸§fï¼Œç„¶åè½¬ç¬¬4æ­¥ï¼šå¦åˆ™è½¬ç¬¬2æ­¥ï¼š</p></li><li><p>é‡‡ç”¨æŸç§é¡µé¢ç½®æ¢ç®—æ³•ï¼Œé€‰æ‹©ä¸€ä¸ªå°†è¢«æ›¿æ¢çš„ç‰©ç†é¡µå¸§fï¼Œå®ƒæ‰€å¯¹åº”çš„é€»è¾‘é¡µä¸ºqã€‚å¦‚æœè¯¥é¡µåœ¨å†…å­˜æœŸé—´è¢«ä¿®æ”¹è¿‡ï¼Œåˆ™éœ€æŠŠå®ƒå†™å›å¤–å­˜ï¼›</p></li><li><p>å¯¹qæ‰€å¯¹åº”çš„é¡µè¡¨é¡¹è¿›è¡Œä¿®æ”¹ï¼ŒæŠŠé©»ç•™ä½ç½®ä¸º0ï¼›</p></li><li><p>å°†éœ€è¦è®¿é—®çš„é¡µpè£å…¥åˆ°ç‰©ç†é¡µé¢få½“ä¸­ï¼›</p></li><li><p>ä¿®æ”¹pæ‰€å¯¹åº”çš„é¡µè¡¨é¡¹çš„å†…å®¹ï¼ŒæŠŠé©»ç•™ä½ç½®ä¸º1ï¼ŒæŠŠç‰©ç†é¡µå¸§å·ç½®ä¸ºf</p></li><li><p>é‡æ–°è¿è¡Œè¢«ä¸­æ–­çš„æŒ‡ä»¤ã€‚</p></li></ol><h5 id="åå¤‡å­˜å‚¨-Backing-Store"><a href="#åå¤‡å­˜å‚¨-Backing-Store" class="headerlink" title="åå¤‡å­˜å‚¨ Backing Store"></a>åå¤‡å­˜å‚¨ Backing Store</h5><h6 id="æ¦‚å¿µï¼š"><a href="#æ¦‚å¿µï¼š" class="headerlink" title="æ¦‚å¿µï¼š"></a>æ¦‚å¿µï¼š</h6><ul><li><p>ä¸€ä¸ªè™šæ‹Ÿåœ°å€ç©ºé—´çš„é¡µé¢å¯ä»¥è¢«æ˜ å°„åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼ˆåœ¨äºŒçº§å­˜å‚¨ä¸­ï¼‰ä¸­çš„æŸä¸ªä½ç½®</p></li><li><p>ä»£ç æ®µï¼šæ˜ å°„åˆ°å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶</p></li><li><p>åŠ¨æ€åŠ è½½çš„å…±äº«åº“ç¨‹åºæ®µï¼šæ˜ å°„åˆ°åŠ¨æ€è°ƒç”¨çš„åº“æ–‡ä»¶</p></li><li><p>å…¶å®ƒæ®µï¼šå¯èƒ½è¢«æ˜ å°„åˆ°äº¤æ¢æ–‡ä»¶(swap file)</p></li></ul><p>â€‹åœ¨ä½•å¤„ä¿å­˜æœªè¢«æ˜ å°„çš„é¡µï¼Ÿ</p><ul><li><p>èƒ½å¤Ÿç®€å•åœ°è¯†åˆ«åœ¨äºŒçº§å­˜å‚¨å™¨ä¸­çš„é¡µ</p></li><li><p>äº¤æ¢ç©ºé—´ï¼ˆç£ç›˜æˆ–è€…æ–‡ä»¶ï¼‰ï¼šç‰¹æ®Šæ ¼å¼ï¼Œç”¨äºå­˜å‚¨æœ«è¢«æ˜ å°„çš„é¡µé¢</p></li></ul><h2 id="Chapter6-é¡µé¢ç½®æ¢ç®—æ³•"><a href="#Chapter6-é¡µé¢ç½®æ¢ç®—æ³•" class="headerlink" title="Chapter6 é¡µé¢ç½®æ¢ç®—æ³•"></a>Chapter6 é¡µé¢ç½®æ¢ç®—æ³•</h2><h3 id="å±€éƒ¨é¡µé¢ç½®æ¢ç®—æ³•"><a href="#å±€éƒ¨é¡µé¢ç½®æ¢ç®—æ³•" class="headerlink" title="å±€éƒ¨é¡µé¢ç½®æ¢ç®—æ³•"></a>å±€éƒ¨é¡µé¢ç½®æ¢ç®—æ³•</h3><h4 id="åŠŸèƒ½ä¸ç›®æ ‡"><a href="#åŠŸèƒ½ä¸ç›®æ ‡" class="headerlink" title="åŠŸèƒ½ä¸ç›®æ ‡"></a>åŠŸèƒ½ä¸ç›®æ ‡</h4><p><strong>åŠŸèƒ½</strong>ï¼šç¼ºé¡µï¼Œä½†ä¸»å­˜æ»¡äº†ï¼Œæ¢è°å‡ºå»ï¼Ÿ</p><p><strong>ç›®æ ‡</strong>ï¼š<strong>å°½å¯èƒ½å‡å°‘é¡µé¢æ›´æ¢çš„æ¬¡æ•°</strong>ï¼Œ(é€šå¸¸åœ¨å±€éƒ¨æ€§åŸç†æŒ‡å¯¼ä¸‹ä¾æ®è¿‡å»çš„ç»Ÿè®¡æ•°æ®è¿›è¡Œé¢„æµ‹)</p><p>&lt;é¡µé¢é”å®š&gt;:æœ‰äº›é¡µé¢å¿…é¡»å¸¸é©»äºå†…å­˜ä¸­ï¼Œä¸åº”å‚ä¸é¡µé¢ç½®æ¢ç®—æ³•ã€‚(é€šè¿‡åœ¨é¡µè¡¨ä¸­æ·»åŠ  â€˜é”å®šæ ‡å¿—ä½,lock bitâ€™ åˆ¤æ–­)</p><h4 id="6-1æœ€ä¼˜é¡µé¢ç½®æ¢ç®—æ³•"><a href="#6-1æœ€ä¼˜é¡µé¢ç½®æ¢ç®—æ³•" class="headerlink" title="6.1æœ€ä¼˜é¡µé¢ç½®æ¢ç®—æ³•"></a>6.1æœ€ä¼˜é¡µé¢ç½®æ¢ç®—æ³•</h4><p>â€‹æ˜¯ä¸€ç§ç†æƒ³æƒ…å†µä¸‹çš„é¡µé¢ç½®æ¢ç®—æ³•, è¯¥ç®—æ³•ä½¿ç”¨çš„å‰ææ˜¯OSæå‰çŸ¥é“æ¥ä¸‹æ¥è¦è®¿é—®çš„é¡µé¢ï¼Œæ¢å‡ºè¿‘æœŸæœ€ä¸ä¼šè¢«ç”¨åˆ°çš„é¡µé¢ã€‚</p><p>æ— å®é™…æ„ä¹‰ï¼Œä½†å¯ä»¥ç”¨äºè¯„ä»·åˆ«çš„ç®—æ³•çš„æ€§èƒ½ï¼Œä½œä¸ºä¸€ä¸ªç†æƒ³çš„æ ‡æ†</p><h4 id="6-2FIFOç®—æ³•"><a href="#6-2FIFOç®—æ³•" class="headerlink" title="6.2FIFOç®—æ³•"></a>6.2FIFOç®—æ³•</h4><p>ç³»ç»Ÿç»´æŠ¤ä¸€ä¸ªé¡µé¢çš„é“¾è¡¨ï¼Œ<strong>æ¯æ¬¡æ·˜æ±°é©»ç•™æ—¶é—´æœ€é•¿çš„é¡µé¢</strong>(ä¸€ä¸ªå·²ç»åœ¨é“¾è¡¨ä¸­çš„é¡µé¢å†æ¬¡è¢«ä½¿ç”¨å¹¶ä¸ä¼šåˆ·æ–°è¯¥é¡µé¢çš„é©»ç•™æ—¶é—´ï¼Œè€Œæ˜¯ç»§ç»­æŒ‰åŸæ¥çš„è®¡æ—¶)</p><p><strong>æ€§èƒ½è¾ƒå·®</strong>ï¼Œè°ƒå‡ºçš„é¡µé¢å¯èƒ½æ˜¯ç»å¸¸è¢«è°ƒç”¨çš„é¡µé¢ï¼Œå¹¶ä¸”æœ‰**<u><em>Beladyç°è±¡</em></u>**</p><h4 id="6-3æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•-LRU"><a href="#6-3æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•-LRU" class="headerlink" title="6.3æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•(LRU)"></a>6.3æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç®—æ³•(LRU)</h4><p>å½“ç¼ºé¡µä¸­æ–­å‘ç”Ÿæ—¶ï¼Œé€‰æ‹©æ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢ï¼ˆæ ¹æ®å†å²ï¼Œæ¨æµ‹æœªæ¥ï¼Œä¾æ®ç¨‹åºçš„è®¿é—®å…·æœ‰å±€éƒ¨æ€§</p><p>â€‹LRUç®—æ³•éœ€è¦è®°å½•æ¯ä¸ªé¡µé¢ä½¿ç”¨æ—¶é—´çš„å…ˆåé¡ºåºï¼Œ<u><strong>å¼€é”€æ¯”è¾ƒå¤§</strong></u></p><p>ä¸¤ç§å¯èƒ½çš„å®ç°æ–¹æ³•ï¼š</p><ul><li>ç»´æŠ¤ä¸€ä¸ªé“¾è¡¨ï¼Œè¿è¡Œæ–°é¡µé¢ï¼šåˆ™æ”¾åœ¨é“¾è¡¨å¤´ï¼›è¿è¡Œé“¾è¡¨ä¸­å‡ºç°è¿‡çš„é¡µé¢ï¼šå°†è¯¥ç»“ç‚¹ç§»åŠ¨åˆ°é“¾è¡¨å¤´éƒ¨ï¼›è‹¥è¦æ·˜æ±°é¡µé¢ï¼Œåˆ™åˆ é™¤é˜Ÿå°¾çš„é¡µé¢ã€‚</li><li>ç»´æŠ¤ä¸€ä¸ªæ ˆï¼Œåˆšä½¿ç”¨çš„é¡µé¢æ”¾åœ¨æ ˆé¡¶ï¼Œå¦‚æœæ ˆä¸­å·²ç»æœ‰è¯¥é¡µé¢åˆ™è¿˜éœ€è¦å°†æ ˆä¸­è®°å½•åˆ å»ï¼Œè‹¥è¦æ·˜æ±°é¡µé¢ï¼Œåˆ™åˆ é™¤æ ˆåº•éƒ¨çš„é¡µé¢(ps:æ²¡å•¥åŒºåˆ«å•Š)</li></ul><h4 id="6-4æ—¶é’Ÿé¡µé¢ç½®æ¢ç®—æ³•"><a href="#6-4æ—¶é’Ÿé¡µé¢ç½®æ¢ç®—æ³•" class="headerlink" title="6.4æ—¶é’Ÿé¡µé¢ç½®æ¢ç®—æ³•"></a>6.4æ—¶é’Ÿé¡µé¢ç½®æ¢ç®—æ³•</h4><ul><li>clocké¡µé¢ç½®æ¢ç®—æ³•ï¼ŒLRUçš„è¿‘ä¼¼ï¼Œæ˜¯å¯¹FIFOçš„ä¸€ç§æ”¹è¿›ï¼š</li></ul><h5 id="åŸºæœ¬æ€è·¯ï¼š"><a href="#åŸºæœ¬æ€è·¯ï¼š" class="headerlink" title="åŸºæœ¬æ€è·¯ï¼š"></a>åŸºæœ¬æ€è·¯ï¼š</h5><ul><li><p>ï»¿ï»¿éœ€è¦ç”¨åˆ°é¡µè¡¨é¡¹å½“ä¸­çš„è®¿é—®ä½ï¼Œå½“ä¸€ä¸ªé¡µé¢è¢«è£…å…¥å†…å­˜æ—¶ï¼ŒæŠŠè¯¥ä½åˆå§‹åŒ–ä¸º0ã€‚ç„¶åå¦‚æœè¿™ä¸ªé¡µé¢è¢«è®¿é—®ï¼ˆè¯»&#x2F;å†™)ï¼Œåˆ™æŠŠè¯¥ä½ç½®ä¸º1;</p></li><li><p>ï»¿æŠŠå„ä¸ªé¡µé¢ç»„ç»‡æˆç¯å½¢é“¾è¡¨ï¼ˆç±»ä¼¼é’Ÿè¡¨é¢ï¼‰ï¼ŒæŠŠæŒ‡é’ˆæŒ‡å‘æœ€è€çš„é¡µé¢ï¼ˆæœ€<br> å…ˆè¿›æ¥ï¼‰ï¼›</p></li><li><p>å½“å‘ç”Ÿä¸€ä¸ªç¼ºé¡µä¸­æ–­æ—¶ï¼Œè€ƒå¯ŸæŒ‡é’ˆæ‰€æŒ‡å‘çš„æœ€è€é¡µé¢ï¼Œè‹¥å®ƒçš„è®¿é—®ä½ä¸º0ï¼Œç«‹å³æ·˜æ±°ï¼šè‹¥è®¿é—®ä½ä¸º1ï¼Œåˆ™æŠŠè¯¥ä½ç½®ä¸º0ï¼Œç„¶åæŒ‡é’ˆå¾€ä¸‹ç§»åŠ¨ä¸€æ ¼ã€‚å¦‚æ­¤ä¸‹å»ï¼Œç›´åˆ°æ‰¾åˆ°è¢«æ·˜æ±°çš„é¡µé¢ï¼Œç„¶åæŠŠæŒ‡é’ˆç§»åŠ¨åˆ°å®ƒçš„ä¸‹ä¸€æ ¼ã€‚</p></li></ul><h4 id="6-5äºŒæ¬¡æœºä¼šæ³•"><a href="#6-5äºŒæ¬¡æœºä¼šæ³•" class="headerlink" title="6.5äºŒæ¬¡æœºä¼šæ³•"></a>6.5äºŒæ¬¡æœºä¼šæ³•</h4><p><strong>æ·»åŠ è„ä½</strong>(ç”¨äºæ ‡è¯†æœ‰æ²¡æœ‰è¢«å†™è¿‡)ï¼Œå¦‚æœè¢«æ·˜æ±°çš„é¡µåªè¢«è¯»è¿‡ï¼Œåˆ™ç›´æ¥åˆ é™¤ï¼›å¦‚æœè¯¥é¡µé¢è¢«ä¿®æ”¹è¿‡ï¼Œå°±éœ€è¦å°†æ›´æ–°çš„æ•°æ®åŒæ­¥è‡³ç¡¬ç›˜ã€‚</p><p>ç”¨è®¿é—®ä½ã€è„ä½ä¸¤ä¸ªä½æ¥åˆ¤æ–­è¢«æ·˜æ±°çš„é¡µé¢ï¼Œåªæœ‰éƒ½ä¸º0çš„é¡µé¢æ‰ä¼šç«‹å³è¢«æ·˜æ±°ï¼Œæœ‰1çš„é¡µé¢ä¼šé¦–å…ˆå¤±å»ä¸€ä¸ª1ï¼Œå¹¸å…äºæœ¬è½®å¾ªç¯ã€‚(è„ä½ç”±1å˜0æ—¶ï¼Œä¹Ÿéœ€è¦å†™å›ç¡¬ç›˜)</p><p>ç»™ä¿®æ”¹è¿‡çš„é¡µé¢æ›´å¤šçš„æœºä¼šç•™åœ¨ä¸»å­˜ä¸­(<u>å…¶å®åªé’ˆå¯¹ä¸€ç§æƒ…å†µï¼šè®¿é—®ä½ã€è„ä½éƒ½ä¸º1æ—¶ï¼Œé¡µé¢è¢«å¾ªç¯è½®åˆ°åä¼šå…ˆæŠŠè®¿é—®ä½ç½®ä¸º0ï¼Œè€Œä¸æ˜¯æ”¹å˜è„ä½ï¼Œè¿™æ ·å°±ç›¸å½“äºç»™è¿™ä¸ªé¡µé¢å¤šä¸€æ¡å‘½ï¼</u>)â€”â€”é€šè¿‡å‡å°‘å†™å›ç¡¬ç›˜çš„æ¬¡æ•°æ¥é™ä½å¼€é”€</p><h4 id="6-6æœ€ä¸å¸¸ç”¨æ³•"><a href="#6-6æœ€ä¸å¸¸ç”¨æ³•" class="headerlink" title="6.6æœ€ä¸å¸¸ç”¨æ³•"></a>6.6æœ€ä¸å¸¸ç”¨æ³•</h4><p>Least frequency used LFU:</p><h5 id="åŸºæœ¬æ€è·¯ï¼š-1"><a href="#åŸºæœ¬æ€è·¯ï¼š-1" class="headerlink" title="åŸºæœ¬æ€è·¯ï¼š"></a>åŸºæœ¬æ€è·¯ï¼š</h5><p>â€‹å½“ä¸€ä¸ªç¼ºé¡µä¸­æ–­äº§ç”Ÿæ—¶ï¼Œé€‰æ‹©è¢«è®¿é—®æ¬¡æ•°æœ€å°‘çš„é¡µé¢æ·˜æ±°</p><p>â€‹ç»™ä¸»å­˜ä¸­çš„æ¯ä¸ªé¡µéƒ½å®‰æ’ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ·˜æ±°è®¡æ•°å™¨å€¼æœ€å°çš„é¡µé¢</p><p>ç¼ºç‚¹ï¼šè®¡æ•°å™¨å¼€é”€å¤§</p><h4 id="6-7Beladyç°è±¡"><a href="#6-7Beladyç°è±¡" class="headerlink" title="6.7Beladyç°è±¡"></a>6.7Beladyç°è±¡</h4><p>â€‹åœ¨é‡‡ç”¨FIFOç®—æ³•æ—¶ï¼Œæœ‰æ—¶ä¼šå‡ºç°åˆ†é…çš„ç‰©ç†é¡µé¢æ•°å¢åŠ ï¼Œç¼ºé¡µç‡åè€Œæé«˜çš„ç°è±¡ï¼›</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230605214433150.png" alt="image-20230605214433150" style="zoom:30%;" /><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230605214507498.png" alt="image-20230605214507498" style="zoom:31%;" /><h4 id="6-8å±€éƒ¨é¡µé¢æ›¿æ¢ç®—æ³•çš„é—®é¢˜ã€å·¥ä½œé›†æ¨¡å‹"><a href="#6-8å±€éƒ¨é¡µé¢æ›¿æ¢ç®—æ³•çš„é—®é¢˜ã€å·¥ä½œé›†æ¨¡å‹" class="headerlink" title="6.8å±€éƒ¨é¡µé¢æ›¿æ¢ç®—æ³•çš„é—®é¢˜ã€å·¥ä½œé›†æ¨¡å‹"></a>6.8å±€éƒ¨é¡µé¢æ›¿æ¢ç®—æ³•çš„é—®é¢˜ã€å·¥ä½œé›†æ¨¡å‹</h4><p><strong>å·¥ä½œé›†ï¼šä¸€ä¸ªè¿›ç¨‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„é€»è¾‘é¡µé¢é›†åˆï¼Œå¯ä»¥ç”¨ä¸€ä¸ªäºŒå…ƒå‡½æ•°w(tï¼Œâˆ†)æ¥è¡¨ç¤º</strong></p><ul><li><p>tæ˜¯å½“å‰çš„æ‰§è¡Œæ—¶åˆ»ï¼›</p></li><li><p>âˆ†ç§°ä¸ºå·¥ä½œé›†çª—å£ (working set windowï¼‰ï¼Œå³ä¸€ä¸ªå®šé•¿çš„é¡µé¢è®¿é—®çš„æ—¶åŒçª—å£ï¼š</p></li><li><p>w(tï¼Œâˆ†)ä¸€åœ¨å½“å‰æ—¶åˆ» t ä¹‹å‰çš„ âˆ†æ—¶é—´çª—å£å½“ä¸­çš„æ‰€æœ‰é¡µé¢æ‰€ç»„æˆçš„é›†åˆ(éšç€ t çš„å˜åŒ–ï¼Œè¯¥é›†åˆä¹Ÿåœ¨ä¸æ–­åœ°å˜åŒ–ï¼‰</p></li><li><p>|w(tï¼Œâˆ†ï¼‰|æŒ‡å·¥ä½œé›†çš„å¤§å°ï¼Œå³é¡µé¢æ•°ç›®ã€‚</p></li></ul><p><strong>å¸¸é©»é›†ï¼šæ˜¯æŒ‡åœ¨å½“å‰æ—¶åˆ»ï¼Œè¿›ç¨‹å®é™…é©»ç•™åœ¨å†…å­˜å½“ä¸­çš„é¡µé¢é›†åˆã€‚</strong></p><h5 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h5><ol><li><p>å·¥ä½œé›†æ˜¯è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å›ºæœ‰çš„æ€§è´¨ï¼Œè€Œå¸¸é©»é›†å–å†³äºç³»ç»Ÿåˆ†é…ç»™è¿›ç¨‹çš„ç‰©ç†é¡µé¢æ•°æ—¥ï¼Œä»¥åŠæ‰€é‡‡ç”¨çš„é¡µé¢ç½®æ¢ç®—æ³•ï¼›</p></li><li><p>å¦‚æœä¸€ä¸ªè¿›ç¨‹çš„æ•´ä¸ªå·¥ä½œé›†éƒ½åœ¨å†…å­˜å½“ä¸­ï¼Œå³å¸¸é©»é›†&gt;&#x3D;å·¥ä½œé›†ï¼Œé‚£ä¹ˆè¿›ç¨‹å°†å¾ˆé¡ºåˆ©åœ°è¿è¡Œï¼Œè€Œä¸ä¼šé€ æˆå¤ªå¤šçš„ç¼ºé¡µä¸­æ–­ï¼ˆç›´åˆ°å·¥ä½œé›†å‘ç”Ÿå‰§çƒˆå˜åŠ¨ï¼Œä»è€Œè¿‡æ¸¡åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼‰</p></li><li><p>å½“è¿›ç¨‹å¸¸é©»é›†çš„å¤§å°è¾¾åˆ°æŸä¸ªæ•°ç›®ä¹‹åï¼Œå†ç»™å®ƒåˆ†é…æ›´å¤šçš„ç‰©ç†é¡µé¢ï¼Œç¼ºé¡µç‡ä¹Ÿä¸ä¼šæ˜æ˜¾ä¸‹é™ã€‚</p></li></ol><h3 id="å…¨å±€é¡µé¢ç½®æ¢ç®—æ³•ï¼š"><a href="#å…¨å±€é¡µé¢ç½®æ¢ç®—æ³•ï¼š" class="headerlink" title="å…¨å±€é¡µé¢ç½®æ¢ç®—æ³•ï¼š"></a>å…¨å±€é¡µé¢ç½®æ¢ç®—æ³•ï¼š</h3><h4 id="1-å·¥ä½œé›†é¡µé¢ç½®æ¢ç®—æ³•"><a href="#1-å·¥ä½œé›†é¡µé¢ç½®æ¢ç®—æ³•" class="headerlink" title="1.å·¥ä½œé›†é¡µé¢ç½®æ¢ç®—æ³•"></a>1.å·¥ä½œé›†é¡µé¢ç½®æ¢ç®—æ³•</h4><p>â€‹å¦‚æœé¡µé¢ä¸åœ¨å·¥ä½œé›†ä¸­ï¼Œé‚£ä¹ˆå³ä½¿æ²¡æœ‰å‘ç”Ÿç¼ºé¡µä¸­æ–­ï¼Œä¹Ÿä¼šæŠŠè¯¥é¡µé¢æ¢å‡ºã€‚</p><p>â€‹æ¯æ¬¡éƒ½çœ‹çœ‹è‡ªå·±çš„å¸¸é©»é›†å’Œå·¥ä½œé›†ï¼Œå¸¸é©»é›†é‡Œæœ‰ï¼Œä½†å·¥ä½œé›†ä¸­æ²¡æœ‰çš„é¡µé¢éƒ½ä¼šè¢«ç§»é™¤</p><h4 id="2-ç¼ºé¡µç‡é¡µé¢ç½®æ¢ç®—æ³•"><a href="#2-ç¼ºé¡µç‡é¡µé¢ç½®æ¢ç®—æ³•" class="headerlink" title="2.ç¼ºé¡µç‡é¡µé¢ç½®æ¢ç®—æ³•"></a>2.ç¼ºé¡µç‡é¡µé¢ç½®æ¢ç®—æ³•</h4><h5 id="å¯å˜åˆ†é…ç­–è·¯ï¼š"><a href="#å¯å˜åˆ†é…ç­–è·¯ï¼š" class="headerlink" title="å¯å˜åˆ†é…ç­–è·¯ï¼š"></a>å¯å˜åˆ†é…ç­–è·¯ï¼š</h5><p>â€‹å¸¸é©»é›†å¤§å°å¯å˜ï¼Œä¾‹å¦‚ï¼šæ¯ä¸ªè¿›ç¨‹åœ¨åˆšå¼€å§‹è¿è¡Œçš„æ—¶å€™ï¼Œå…ˆæ ¹æ®ç¨‹åºå¤§å°ç»™å®ƒåˆ†é…ä¸€å®šæ•°ç›®çš„ç‰©ç†é¡µé¢ï¼Œç„¶ååœ¨è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå†<u>åŠ¨æ€åœ°è°ƒæ•´å¸¸é©»é›†çš„å¤§å°</u>ã€‚</p><ul><li>å¯é‡‡ç”¨å…¨å±€é¡µé¢ç½®æ¢çš„æ–¹å¼ã€‚å½“å‘ç”Ÿä¸€ä¸ªç¼ºé¡µä¸­æ–­æ—¶ï¼Œè¢«ç½®æ¢çš„é¡µé¢å¯ä»¥æ˜¯åœ¨å…¶å®ƒè¿›ç¨‹å½“ä¸­ï¼Œå„ä¸ªå¹¶å‘è¿›ç¨‹ç«äº‰åœ°ä½¿ç”¨ç‰©ç†é¡µé¢ã€‚</li><li>ä¼˜ç¼ºç‚¹ï¼šæ€§èƒ½è¾ƒå¥½ã€‚ä½†å¢åŠ äº†ç³»ç»Ÿå¼€é”€ã€‚</li><li>å…·ä½“å®ç°ï¼šå¯ä»¥ä½¿ç”¨<strong>ç¼ºé¡µç‡ç®—æ³•</strong> (PPF, page fault freguency)æ¥åŠ¨æ€è°ƒæ•´å¸¸é©»é›†çš„å¤§å°ã€‚</li></ul><p><strong>ğŸŒŸå¦‚ä½•åŠ¨æ€åœ°è°ƒæ•´å¸¸é©»é›†çš„å¤§å°ï¼Ÿ</strong></p><p>â€‹è®¾ç½®ä¸€ä¸ªé˜ˆå€¼kï¼Œå°†æœ¬æ¬¡å‘ç”Ÿç¼ºé¡µçš„ä¸‹æ ‡ - ä¸Šæ¬¡å‘ç”Ÿç¼ºé¡µçš„ä¸‹æ ‡ ä¸ k è¿›è¡Œæ¯”è¾ƒï¼Œ</p><ul><li><p>å¦‚æœkæ¯”è¾ƒå¤§ï¼Œè¯´æ˜ä¸­æ–­å¼‚å¸¸å‡ºç°çš„å¤ªé¢‘ç¹äº†ï¼Œç›´æ¥å°†ç¼ºå¤±é¡µåŠ å…¥åˆ°å·¥ä½œé›†ä¸­(æ‰©å¤§å·¥ä½œé›†ï¼Œé™ä½ç¼ºé¡µæ¦‚ç‡)</p></li><li><p>å¦‚æœkæ¯”è¾ƒå°ï¼Œè¯´æ˜ä¸æ€ä¹ˆå‡ºç°ä¸­æ–­ï¼Œé‚£ä¹ˆæ‰§è¡Œä¸‹è¿°æ“ä½œï¼šå°†å·¥ä½œé›†ä¸­ä¸åœ¨[t_last, t_current]åŒºé—´å†…å‡ºç°çš„é¡µé¢ç§»é™¤   (t_last, t_currentæŒ‡ä¸Šä¸€æ¬¡ã€è¿™æ¬¡å‡ºç°ä¸­æ–­å¼‚å¸¸çš„æ—¶é—´ä¸‹æ ‡)</p></li></ul><h3 id="æŠ–åŠ¨é—®é¢˜ï¼š"><a href="#æŠ–åŠ¨é—®é¢˜ï¼š" class="headerlink" title="æŠ–åŠ¨é—®é¢˜ï¼š"></a>æŠ–åŠ¨é—®é¢˜ï¼š</h3><ul><li>ï»¿å¦‚æœåˆ†é…ç»™ä¸€ä¸ªè¿›ç¨‹çš„ç‰©ç†é¡µé¢å¤ªå°‘ï¼Œä¸èƒ½åŒ…å«æ•´ä¸ªçš„å·¥ä½œé›†ï¼Œå³å¸¸é©»é›†ï¼œ å·¥ä½œé›†ï¼Œé‚£ä¹ˆè¿›ç¨‹å°†ä¼šé€ æˆå¾ˆå¤šçš„ç¼ºé¡µä¸­æ–­ï¼Œéœ€è¦é¢‘ç¹åœ°åœ¨å†…å­˜ä¸å¤–å­˜ä¹‹é—´æ›¿æ¢é¡µé¢ï¼Œä»è€Œä½¿è¿›ç¨‹çš„è¿è¡Œé€Ÿåº¦å˜å¾—å¾ˆæ…¢ï¼Œæˆ‘ä»¬æŠŠè¿™ç§ç‹€æ€ç§°ä¸º â€œæŠ–åŠ¨â€ã€‚</li><li>ï»¿äº§ç”ŸæŠ–åŠ¨çš„åŸå› ï¼šéšç€é©»ç•™å†…å­˜çš„è¿›ç¨‹æ•°ç›®å¢åŠ ï¼Œåˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹çš„ç‰©ç†é¡µé¢æ•°ä¸æ–­å‡å°ï¼Œå¯¼è‡´ç¼ºé¡µç‡ä¸æ–­ä¸Šå‡ã€‚æ‰€ä»¥<strong>osè¦é€‰æ‹©ä¸€ä¸ªé€‚å½“çš„è¿›ç¨‹æ•°ç›®å’Œè¿›ç¨‹éœ€è¦çš„å¸§æ•°</strong>ï¼Œä»¥ä¾¿åœ¨å¹¶å‘æ°´å¹³å’Œç¼ºé¡µç‡ä¹‹é—´è¾¾åˆ°ä¸€ä¸ªå¹³è¡¡ã€‚</li></ul><p>æŠ–åŠ¨é—®é¢˜åœ¨ä¸€äº›æƒ…å†µä¸‹å¯ä»¥è¢«æœ¬åœ°çš„é¡µé¢ç½®æ¢ç®—æ³•æ”¹å–„</p><h2 id="Chapter7-è¿›ç¨‹å’Œçº¿ç¨‹"><a href="#Chapter7-è¿›ç¨‹å’Œçº¿ç¨‹" class="headerlink" title="Chapter7 è¿›ç¨‹å’Œçº¿ç¨‹"></a>Chapter7 è¿›ç¨‹å’Œçº¿ç¨‹</h2><h3 id="7-1è¿›ç¨‹-process-çš„æè¿°"><a href="#7-1è¿›ç¨‹-process-çš„æè¿°" class="headerlink" title="7.1è¿›ç¨‹(process)çš„æè¿°"></a>7.1è¿›ç¨‹(process)çš„æè¿°</h3><h4 id="è¿›ç¨‹å®šä¹‰ï¼š"><a href="#è¿›ç¨‹å®šä¹‰ï¼š" class="headerlink" title="è¿›ç¨‹å®šä¹‰ï¼š"></a>è¿›ç¨‹å®šä¹‰ï¼š</h4><p>â€‹ä¸€ä¸ªå…·æœ‰ä¸€å®šåŠŸèƒ½çš„ç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œçš„è¿‡ç¨‹</p><h4 id="è¿›ç¨‹ç»„æˆï¼š"><a href="#è¿›ç¨‹ç»„æˆï¼š" class="headerlink" title="è¿›ç¨‹ç»„æˆï¼š"></a>è¿›ç¨‹ç»„æˆï¼š</h4><p>åŒ…å«äº†ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯</p><pre><code>        1. ç¨‹åºçš„ä»£ç         1. ç¨‹åºå¤„ç†çš„æ•°æ®        1. ç¨‹åºè®¡æ•°å™¨çš„å€¼ï¼ŒæŒ‡ç¤ºä¸‹ä¸€æ¡å³å°†è¿è¡Œçš„æŒ‡ä»¤        1. ä¸€ç»„é€šç”¨çš„å¯„å­˜å™¨çš„å½“å‰å€¼ï¼Œå †ã€æ ˆ        1. ä¸€ç»„ç³»ç»Ÿèµ„æº(å¦‚æ‰“å¼€çš„ç¨‹åº)</code></pre><h5 id="è¿›ç¨‹ä¸ç¨‹åºçš„è”ç³»ï¼š"><a href="#è¿›ç¨‹ä¸ç¨‹åºçš„è”ç³»ï¼š" class="headerlink" title="è¿›ç¨‹ä¸ç¨‹åºçš„è”ç³»ï¼š"></a>è¿›ç¨‹ä¸ç¨‹åºçš„è”ç³»ï¼š</h5><ul><li>ï»¿ç¨‹åºæ˜¯äº§ç”Ÿè¿›ç¨‹çš„åŸºç¡€</li><li>ï»¿<u>ç¨‹åºçš„æ¯æ¬¡è¿è¡Œæ„æˆä¸åŒçš„è¿›ç¨‹</u></li><li>ï»¿è¿›ç¨‹æ˜¯ç¨‹åºåŠŸèƒ½çš„ä½“ç°</li><li>ï»¿é€šè¿‡å¤šæ¬¡æ‰§è¡Œï¼Œä¸€ä¸ªç¨‹åºå¯å¯¹åº”å¤šä¸ªè¿›ç¨‹ï¼›é€šè¿‡è°ƒç”¨å…³ç³»ï¼Œä¸€ä¸ªè¿›ç¨‹å¯åŒ…æ‹¬å¤šä¸ªç¨‹åºã€‚</li></ul><h5 id="è¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ«ï¼š"><a href="#è¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ«ï¼š" class="headerlink" title="è¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ«ï¼š"></a>è¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ«ï¼š</h5><ul><li><p>è¿›ç¨‹æ˜¯åŠ¨æ€çš„ï¼Œç¨‹åºæ˜¯é™æ€çš„ï¼šç¨‹åºæ˜¯æœ‰åºä»£ç çš„é›†åˆï¼›è¿›ç¨‹æ˜¯ç¨‹åºçš„æ‰§è¡Œï¼Œè¿›ç¨‹æœ‰æ ¸å¿ƒæ€&#x2F;ç”¨æˆ·æ€</p></li><li><p>è¿›ç¨‹æ˜¯æš‚æ—¶çš„ï¼Œç¨‹åºçš„æ°¸ä¹…çš„ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªçŠ¶æ€å˜åŒ–çš„è¿‡ç¨‹ï¼Œç¨‹åºå¯é•¿ä¹…ä¿å­˜</p></li><li><p>è¿›ç¨‹ä¸ç¨‹åºçš„ç»„æˆä¸åŒï¼šè¿›ç¨‹çš„ç»„æˆåŒ…æ‹¬**<u>ç¨‹åºã€æ•°æ®å’Œè¿›ç¨‹æ§åˆ¶å—</u>**ï¼ˆå³è¿›ç¨‹çŠ¶æ€ä¿¡æ¯ï¼‰</p></li></ul><h4 id="è¿›ç¨‹çš„ç‰¹ç‚¹ï¼š"><a href="#è¿›ç¨‹çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="è¿›ç¨‹çš„ç‰¹ç‚¹ï¼š"></a>è¿›ç¨‹çš„ç‰¹ç‚¹ï¼š</h4><ul><li>ï»¿åŠ¨æ€æ€§ï¼šå¯åŠ¨æ€åœ°åˆ›å»ºã€ç»“æŸè¿›ç¨‹ï¼›</li><li>ï»¿å¹¶å‘æ€§ï¼šè¿›ç¨‹å¯ä»¥è¢«ç‹¬ç«‹è°ƒåº¦å¹¶å ç”¨å¤„ç†æœºè¿è¡Œï¼›(å¹¶å‘-&gt;ä¸²ã€å¹¶è¡Œ-&gt;å¹¶)</li><li>ï»¿ç‹¬ç«‹æ€§ï¼šä¸åŒè¿›ç¨‹çš„å·¥ä½œä¸ç›¸äº’å½±å“ï¼š</li><li>ï»¿åˆ¶çº¦æ€§ï¼šå› è®¿é—®å…±äº«æ•°æ®&#x2F;èµ„æºæˆ–è¿›ç¨‹é—´åŒæ­¥è€Œäº§ç”Ÿåˆ¶çº¦ã€‚</li></ul><h4 id="è¿›ç¨‹æ§åˆ¶ç»“æ„ï¼š"><a href="#è¿›ç¨‹æ§åˆ¶ç»“æ„ï¼š" class="headerlink" title="è¿›ç¨‹æ§åˆ¶ç»“æ„ï¼š"></a>è¿›ç¨‹æ§åˆ¶ç»“æ„ï¼š</h4><p>â€‹ç¨‹åº &#x3D; ç®—æ³• + æ•°æ®ç»“æ„</p><p>â€‹æè¿°è¿›ç¨‹çš„æ•°æ®ç»“æ„ï¼š<strong>è¿›ç¨‹æ§åˆ¶å—</strong>(Process Control Block, PCB)</p><p>è¿›ç¨‹æ§åˆ¶å—ï¼šOSç®¡ç†è¿›ç¨‹è¿è¡Œæ‰€ç”¨ä¿¡æ¯çš„é›†åˆï¼ŒOSç”¨PCBæè¿°<u>è¿›ç¨‹çš„åŸºæœ¬æƒ…å†µåŠè¿è¡Œå˜åŒ–çš„è¿‡ç¨‹</u>ï¼ŒPCBæ˜¯è¿›ç¨‹å­˜åœ¨çš„<strong>å”¯ä¸€æ ‡å¿—ã€‚</strong></p><h5 id="PCBä¸­åŒ…å«çš„å†…å®¹ï¼š"><a href="#PCBä¸­åŒ…å«çš„å†…å®¹ï¼š" class="headerlink" title="PCBä¸­åŒ…å«çš„å†…å®¹ï¼š"></a>PCBä¸­åŒ…å«çš„å†…å®¹ï¼š</h5><ol><li><p><strong>è¿›ç¨‹æ ‡è¯†ä¿¡æ¯</strong>ã€‚å¦‚æœ¬è¿›ç¨‹çš„æ ‡è¯†ï¼Œæœ¬è¿›ç¨‹çš„äº§ç”Ÿè€…æ ‡è¯†(çˆ¶è¿›ç¨‹æ ‡è¯†)ï¼›ç”¨æˆ·æ ‡è¯†ã€‚</p></li><li><p><strong>å¤„ç†æœºçŠ¶æ€ä¿¡æ¯ä¿å­˜åŒº</strong>ã€‚ä¿å­˜è¿›ç¨‹çš„è¿è¡Œç°åœºä¿¡æ¯ï¼š</p><ul><li><p>ï»¿ç”¨æˆ·å¯è§å¯„å­˜å™¨ï¼Œç”¨æˆ·ç¨‹åºå¯ä»¥ä½¿ç”¨çš„æ•°æ®ï¼Œåœ°å€ç­‰å¯„å­˜å™¨ã€‚</p></li><li><p>ï»¿æ§åˆ¶å’ŒçŠ¶æ€å¯„å­˜å™¨ï¼Œå¦‚ç¨‹åºè®¡æ•°å™¨(PC)ï¼Œç¨‹åºçŠ¶æ€å­— (PSW)ã€‚</p></li><li><p>ï»¿æ ˆæŒ‡é’ˆï¼Œè¿‡ç¨‹è°ƒç”¨&#x2F;ç³»ç»Ÿè°ƒç”¨&#x2F;ä¸­æ–­å¤„ç†å’Œè¿”å›æ—¶éœ€è¦ç”¨åˆ°å®ƒã€‚</p></li></ul></li><li><p><strong>è¿›ç¨‹æ§åˆ¶ä¿¡æ¯</strong></p></li></ol><ul><li><p>è°ƒåº¦å’ŒçŠ¶æ€ä¿¡æ¯ï¼Œç”¨äºæ“ä½œç³»ç»Ÿè°ƒåº¦è¿›ç¨‹å¹¶å ç”¨å¤„ç†æœºä½¿ç”¨ã€‚</p></li><li><p>è¿›ç¨‹é—´é€šä¿¡ä¿¡æ¯ï¼Œä¸ºæ”¯æŒè¿›ç¨‹é—®çš„ä¸é€šä¿¡ç›¸å…³çš„å„ç§æ ‡è¯†ã€ä¿¡å·ã€ä¿¡ä»¶ç­‰ï¼Œè¿™äº›ä¿¡æ¯å­˜åœ¨æ¥æ”¶æ–¹çš„è¿›ç¨‹æ§åˆ¶å—ä¸­ã€‚</p></li><li><p>å­˜å‚¨ç®¡ç†ä¿¡æ¯ï¼ŒåŒ…å«æœ‰æŒ‡å‘æœ¬è¿›ç¨‹æ˜ åƒå­˜å‚¨ç©ºé—´çš„æ•°æ®ç»“æ„ã€‚</p></li><li><p>ï»¿è¿›ç¨‹æ‰€ç”¨èµ„æºï¼Œè¯´æ˜ç”±è¿›ç¨‹æ‰“å¼€ã€ä½¿ç”¨çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æ‰“å¼€çš„æ–‡ä»¶ç­‰ã€‚</p></li><li><p>ï»¿æœ‰å…³æ•°æ®ç»“æ„è¿æ¥ä¿¡æ¯ï¼Œè¿›ç¨‹å¯ä»¥è¿æ¥åˆ°ä¸€ä¸ªè¿›ç¨‹é˜Ÿåˆ—ä¸­ï¼Œæˆ–è¿æ¥åˆ°ç›¸å…³çš„å…¶ä»–è¿›ç¨‹çš„PCBã€‚</p></li></ul><h5 id="PCBçš„ç»„ç»‡æ–¹å¼"><a href="#PCBçš„ç»„ç»‡æ–¹å¼" class="headerlink" title="PCBçš„ç»„ç»‡æ–¹å¼"></a>PCBçš„ç»„ç»‡æ–¹å¼</h5><ul><li>é“¾è¡¨(å¸¸ç”¨)ï¼šåŒä¸€çŠ¶æ€çš„è¿›ç¨‹å…¶PCBæˆä¸€é“¾è¡¨ï¼Œå¤šä¸ªçŠ¶æ€å¯¹åº”å¤šä¸ªä¸åŒçš„é“¾è¡¨</li></ul><p>å„çŠ¶æ€çš„è¿›ç¨‹å½¢æˆä¸åŒçš„é“¾è¡¨ï¼šå°±ç»ªé“¾è¡¨ã€é˜»å¡é“¾è¡¨</p><ul><li>ç´¢å¼•è¡¨ï¼šåŒä¸€çŠ¶æ€çš„è¿›ç¨‹å½’å…¥ä¸€ä¸ªindexè¡¨ï¼ˆç”±indexæŒ‡å‘PCB)ï¼Œå¤šä¸ªçŠ¶æ€å¯¹åº”å¤šä¸ªä¸åŒçš„indexè¡¨</li></ul><p>å„çŠ¶æ€çš„è¿›è¡Œå½¢æˆä¸åŒçš„ç´¢å¼•è¡¨ï¼šå°±ç»ªç´¢å¼•è¡¨ã€é˜»å¡ç´¢å¼•è¡¨</p><h3 id="7-2è¿›ç¨‹çŠ¶æ€"><a href="#7-2è¿›ç¨‹çŠ¶æ€" class="headerlink" title="7.2è¿›ç¨‹çŠ¶æ€"></a>7.2è¿›ç¨‹çŠ¶æ€</h3><h4 id="è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†"><a href="#è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†" class="headerlink" title="è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†"></a>è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†</h4><h5 id="è¿›ç¨‹åˆ›å»º"><a href="#è¿›ç¨‹åˆ›å»º" class="headerlink" title="è¿›ç¨‹åˆ›å»º"></a>è¿›ç¨‹åˆ›å»º</h5><h6 id="å¼•èµ·è¿›ç¨‹åˆ›å»ºçš„ä¸‰ä¸ªä¸»è¦äº‹ä»¶ï¼š"><a href="#å¼•èµ·è¿›ç¨‹åˆ›å»ºçš„ä¸‰ä¸ªä¸»è¦äº‹ä»¶ï¼š" class="headerlink" title="å¼•èµ·è¿›ç¨‹åˆ›å»ºçš„ä¸‰ä¸ªä¸»è¦äº‹ä»¶ï¼š"></a>å¼•èµ·è¿›ç¨‹åˆ›å»ºçš„ä¸‰ä¸ªä¸»è¦äº‹ä»¶ï¼š</h6><pre><code>    1. ç³»ç»Ÿåˆå§‹åŒ–æ—¶(åˆ›å»ºinitè¿›ç¨‹)    2. **ç”¨æˆ·è¯·æ±‚**åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹    3. æ­£åœ¨è¿è¡Œçš„**è¿›ç¨‹æ‰§è¡Œ**äº†åˆ›å»ºè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨</code></pre><h5 id="è¿›ç¨‹è¿è¡Œ"><a href="#è¿›ç¨‹è¿è¡Œ" class="headerlink" title="è¿›ç¨‹è¿è¡Œ"></a>è¿›ç¨‹è¿è¡Œ</h5><h6 id="å†…æ ¸é€‰æ‹©ä¸€ä¸ªå°±ç»ªçš„è¿›ç¨‹ï¼Œè®©å®ƒå ç”¨å¤„ç†æœºå¹¶æ‰§è¡Œ"><a href="#å†…æ ¸é€‰æ‹©ä¸€ä¸ªå°±ç»ªçš„è¿›ç¨‹ï¼Œè®©å®ƒå ç”¨å¤„ç†æœºå¹¶æ‰§è¡Œ" class="headerlink" title="å†…æ ¸é€‰æ‹©ä¸€ä¸ªå°±ç»ªçš„è¿›ç¨‹ï¼Œè®©å®ƒå ç”¨å¤„ç†æœºå¹¶æ‰§è¡Œ"></a>å†…æ ¸é€‰æ‹©ä¸€ä¸ªå°±ç»ªçš„è¿›ç¨‹<strong>ï¼Œè®©å®ƒå ç”¨å¤„ç†æœº</strong>å¹¶æ‰§è¡Œ</h6><h5 id="è¿›ç¨‹ç­‰å¾…"><a href="#è¿›ç¨‹ç­‰å¾…" class="headerlink" title="è¿›ç¨‹ç­‰å¾…"></a>è¿›ç¨‹ç­‰å¾…</h5><h6 id="ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œè¿›ç¨‹ç­‰å¾…ï¼š"><a href="#ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œè¿›ç¨‹ç­‰å¾…ï¼š" class="headerlink" title="ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œè¿›ç¨‹ç­‰å¾…ï¼š"></a>ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œè¿›ç¨‹ç­‰å¾…ï¼š</h6><ol><li>ï»¿<strong>è¯·æ±‚å¹¶ç­‰å¾…ç³»ç»ŸæœåŠ¡</strong>ï¼Œæ— æ³•é©¬ä¸Šå®Œæˆ</li><li>ï»¿<strong>å¯åŠ¨æŸç§æ“ä½œ</strong>ï¼Œæ— æ³•é©¬ä¸Šå®Œæˆ</li><li>ï»¿<strong>éœ€è¦çš„æ•°æ®æ²¡æœ‰åˆ°è¾¾</strong></li></ol><p><u>è¿›ç¨‹åªèƒ½è‡ªå·±é˜»å¡è‡ªå·±ï¼Œå› ä¸ºåªæœ‰è¿›ç¨‹è‡ªèº«æ‰èƒ½çŸ¥é“ä½•æ—¶éœ€è¦ç­‰å¾…æŸç§äº‹ä»¶çš„å‘ç”Ÿã€‚</u></p><h5 id="è¿›ç¨‹å”¤é†’"><a href="#è¿›ç¨‹å”¤é†’" class="headerlink" title="è¿›ç¨‹å”¤é†’"></a>è¿›ç¨‹å”¤é†’</h5><h6 id="å”¤é†’è¿›ç¨‹çš„åŸå› ï¼š"><a href="#å”¤é†’è¿›ç¨‹çš„åŸå› ï¼š" class="headerlink" title="å”¤é†’è¿›ç¨‹çš„åŸå› ï¼š"></a>å”¤é†’è¿›ç¨‹çš„åŸå› ï¼š</h6><ol><li>ï»¿è¢«é˜»å¡è¿›ç¨‹éœ€è¦çš„èµ„æºå¯è¢«æ»¡è¶³</li><li>ï»¿è¢«é˜»å¡è¿›ç¨‹ç­‰å¾…çš„äº‹ä»¶åˆ°è¾¾</li><li>ï»¿å°†è¯¥è¿›ç¨‹çš„PCBæ’å…¥åˆ°å°±ç»ªé˜Ÿåˆ—</li></ol><p><u>è¿›ç¨‹åªèƒ½è¢«åˆ«çš„è¿›ç¨‹æˆ–æ“ä½œç³»ç»Ÿå”¤é†’ã€‚</u></p><h5 id="è¿›ç¨‹ç»“æŸ"><a href="#è¿›ç¨‹ç»“æŸ" class="headerlink" title="è¿›ç¨‹ç»“æŸ"></a>è¿›ç¨‹ç»“æŸ</h5><h6 id="åœ¨ä»¥ä¸‹å››ç§æƒ…å½¢ä¸‹ï¼Œè¿›ç¨‹ç»“æŸï¼š"><a href="#åœ¨ä»¥ä¸‹å››ç§æƒ…å½¢ä¸‹ï¼Œè¿›ç¨‹ç»“æŸï¼š" class="headerlink" title="åœ¨ä»¥ä¸‹å››ç§æƒ…å½¢ä¸‹ï¼Œè¿›ç¨‹ç»“æŸï¼š"></a>åœ¨ä»¥ä¸‹å››ç§æƒ…å½¢ä¸‹ï¼Œè¿›ç¨‹ç»“æŸï¼š</h6><ul><li><p>æ­£å¸¸é€€å‡ºï¼ˆè‡ªæ„¿çš„ï¼‰</p></li><li><p>é”™è¯¯é€€å‡ºï¼ˆè‡ªæ„¿çš„ï¼‰</p></li><li><p>è‡´å‘½é”™è¯¯ï¼ˆå¼ºåˆ¶æ€§çš„ï¼‰</p></li><li><p>è¢«å…¶ä»–è¿›ç¨‹æ‰€æ€ï¼ˆå¼ºåˆ¶æ€§çš„ï¼‰</p></li></ul><h4 id="è¿›ç¨‹çŠ¶æ€å˜åŒ–æ¨¡å‹"><a href="#è¿›ç¨‹çŠ¶æ€å˜åŒ–æ¨¡å‹" class="headerlink" title="è¿›ç¨‹çŠ¶æ€å˜åŒ–æ¨¡å‹"></a>è¿›ç¨‹çŠ¶æ€å˜åŒ–æ¨¡å‹</h4><h5 id="è¿›ç¨‹çš„ä¸‰ç§åŸºæœ¬çŠ¶æ€ï¼š"><a href="#è¿›ç¨‹çš„ä¸‰ç§åŸºæœ¬çŠ¶æ€ï¼š" class="headerlink" title="è¿›ç¨‹çš„ä¸‰ç§åŸºæœ¬çŠ¶æ€ï¼š"></a>è¿›ç¨‹çš„ä¸‰ç§<u>åŸºæœ¬</u>çŠ¶æ€ï¼š</h5><p>â€‹è¿›ç¨‹åœ¨ç”Ÿå‘½ç»“æŸå‰å¤„äºä¸”ä»…å¤„äºä¸‰ç§åŸºæœ¬çŠ¶æ€ä¹‹ä¸€</p><ul><li><p>è¿è¡ŒçŠ¶æ€(Running)ï¼šå½“ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨å¤„ç†æœºä¸Šè¿è¡Œæ—¶ã€‚</p></li><li><p>å°±ç»ªçŠ¶æ€(Ready)ï¼šä¸€ä¸ªè¿›ç¨‹è·å¾—äº†é™¤å¤„ç†æœºä¹‹å¤–çš„ä¸€åˆ‡æ‰€éœ€èµ„æºï¼Œä¸€æ—¦å¾—åˆ°å¤„ç†æœºå³å¯è¿è¡Œã€‚</p></li><li><p>ç­‰å¾…çŠ¶æ€ï¼ˆåˆç§°é˜»å¡çŠ¶æ€Blocked)ï¼šä¸€ä¸ªè¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸€äº‹ä»¶è€Œæš‚åœè¿è¡Œæ—¶ã€‚å¦‚ç­‰å¾…æŸèµ„æºï¼Œç­‰å¾…è¾“å…¥&#x2F;è¾“å‡ºå®Œæˆã€‚</p></li></ul><h5 id="è¿›ç¨‹å…¶å®ƒçš„åŸºæœ¬çŠ¶æ€ï¼š"><a href="#è¿›ç¨‹å…¶å®ƒçš„åŸºæœ¬çŠ¶æ€ï¼š" class="headerlink" title="è¿›ç¨‹å…¶å®ƒçš„åŸºæœ¬çŠ¶æ€ï¼š"></a>è¿›ç¨‹å…¶å®ƒçš„åŸºæœ¬çŠ¶æ€ï¼š</h5><ul><li><p>åˆ›å»ºçŠ¶æ€(New)ï¼šä¸€ä¸ªè¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºï¼Œè¿˜æ²¡è¢«è½¬åˆ°å°±ç»ªçŠ¶æ€ä¹‹å‰çš„çŠ¶æ€ã€‚</p></li><li><p>ç»“æŸçŠ¶æ€(Exit)ï¼šä¸€ä¸ªè¿›ç¨‹æ­£åœ¨ä»ç³»ç»Ÿä¸­æ¶ˆå¤±æ—¶çš„çŠ¶æ€ï¼Œè¿™æ˜¯å› ä¸ºè¿›ç¨‹ç»“æŸæˆ–ç”±äºå…¶ä»–åŸå› æ‰€å¯¼è‡´ã€‚</p></li></ul><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230606110651191.png" alt="image-20230606110651191" style="zoom:50%;" /><h4 id="è¿›ç¨‹æŒ‚èµ·æ¨¡å‹"><a href="#è¿›ç¨‹æŒ‚èµ·æ¨¡å‹" class="headerlink" title="è¿›ç¨‹æŒ‚èµ·æ¨¡å‹"></a>è¿›ç¨‹æŒ‚èµ·æ¨¡å‹</h4><p> è¿›ç¨‹æŒ‚èµ·ï¼šè¿›ç¨‹ä¸å ç”¨å†…å­˜ç©ºé—´ï¼Œå¤„äºæŒ‚èµ·çŠ¶æ€çš„è¿›ç¨‹æ˜ åƒåœ¨ç£ç›˜ä¸Šã€‚</p><h5 id="æŒ‚èµ·çŠ¶æ€ï¼š"><a href="#æŒ‚èµ·çŠ¶æ€ï¼š" class="headerlink" title="æŒ‚èµ·çŠ¶æ€ï¼š"></a>æŒ‚èµ·çŠ¶æ€ï¼š</h5><ul><li>ï»¿é˜»å¡æŒ‚èµ·çŠ¶æ€ (Blocked-suspendï¼‰ï¼šè¿›ç¨‹åœ¨å¤–å­˜å¹¶<strong>ç­‰å¾…æŸäº‹ä»¶çš„å‡ºç°</strong>ï¼›</li><li>ï»¿å°±ç»ªæŒ‚èµ·çŠ¶æ€ (Ready-suspendï¼‰ï¼šè¿›ç¨‹åœ¨å¤–å­˜ï¼Œä½†<strong>åªè¦è¿›å…¥å†…å­˜ï¼Œå³å¯è¿è¡Œ</strong>ï¼›</li></ul><h5 id="æŒ‚èµ·-Suspendï¼‰ï¼šæŠŠä¸€ä¸ªè¿›ç¨‹ä»å†…å­˜è½¬åˆ°å¤–å­˜ï¼›å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š"><a href="#æŒ‚èµ·-Suspendï¼‰ï¼šæŠŠä¸€ä¸ªè¿›ç¨‹ä»å†…å­˜è½¬åˆ°å¤–å­˜ï¼›å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š" class="headerlink" title="æŒ‚èµ· (Suspendï¼‰ï¼šæŠŠä¸€ä¸ªè¿›ç¨‹ä»å†…å­˜è½¬åˆ°å¤–å­˜ï¼›å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š"></a>æŒ‚èµ· (Suspendï¼‰ï¼šæŠŠä¸€ä¸ªè¿›ç¨‹ä»å†…å­˜è½¬åˆ°å¤–å­˜ï¼›å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</h5><ul><li><p>ï»¿é˜»å¡åˆ°é˜»å¡æŒ‚èµ·ï¼šæ²¡æœ‰è¿›ç¨‹å¤„äºå°±ç»ªçŠ¶æ€æˆ–å°±ç»ªè¿›ç¨‹è¦æ±‚æ›´å¤šå†…å­˜èµ„æºæ—¶ï¼Œä¼šè¿›è¡Œè¿™ç§è½¬æ¢ï¼Œä»¥æäº¤æ–°è¿›ç¨‹æˆ–è¿è¡Œå°±ç»ªè¿›ç¨‹ï¼›</p></li><li><p>ï»¿å°±ç»ªåˆ°å°±ç»ªæŒ‚èµ·ï¼šå½“æœ‰é«˜ä¼˜å…ˆçº§é˜»å¡(ç³»ç»Ÿè®¤ä¸ºä¼šå¾ˆå¿«å°±ç»ªçš„ï¼‰è¿›ç¨‹å’Œä½ä¼˜å…ˆå°±ç»ªè¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿä¼šé€‰æ‹©æŒ‚èµ·ä½ä¼˜å…ˆçº§å°±ç»ªè¿›ç¨‹ï¼›</p></li><li><p>ï»¿è¿è¡Œåˆ°å°±ç»ªæŒ‚èµ·ï¼šå¯¹æŠ¢å…ˆå¼åˆ†æ—¶ç³»ç»Ÿï¼Œå½“æœ‰é«˜ä¼˜å…ˆçº§é˜»å¡æŒ‚èµ·è¿›ç¨‹å› äº‹ä»¶å‡ºç°è€Œè¿›å…¥å°±ç»ªæŒ‚èµ·æ—¶ï¼Œç³»ç»Ÿå¯èƒ½ä¼šæŠŠè¿è¡Œè¿›ç¨‹è½¬åˆ°å°±ç»ªæŒ‚èµ·çŠ¶æ€ï¼›</p></li></ul><h5 id="åœ¨å¤–å­˜æ—¶çš„çŠ¶æ€è½¬æ¢ï¼š"><a href="#åœ¨å¤–å­˜æ—¶çš„çŠ¶æ€è½¬æ¢ï¼š" class="headerlink" title="åœ¨å¤–å­˜æ—¶çš„çŠ¶æ€è½¬æ¢ï¼š"></a>åœ¨å¤–å­˜æ—¶çš„çŠ¶æ€è½¬æ¢ï¼š</h5><ul><li>ï»¿é˜»å¡æŒ‚èµ·åˆ°å°±ç»ªæŒ‚èµ·ï¼šå½“æœ‰é˜»å¡æŒ‚èµ·è¿›ç¨‹å› ç›¸å…³äº‹ä»¶å‡ºç°æ—¶ï¼Œç³»ç»Ÿä¼šæŠŠé˜»å¡æŒ‚èµ·è¿›ç¨‹è½¬æ¢ä¸ºå°±ç»ªæŒ‚èµ·è¿›ç¨‹ã€‚</li></ul><h5 id="è§£æŒ‚-x2F-æ¿€æ´»-Activateï¼‰ï¼šæŠŠä¸€ä¸ªè¿›ç¨‹ä»å¤–å­˜è½¬åˆ°å†…å­˜ï¼›å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š"><a href="#è§£æŒ‚-x2F-æ¿€æ´»-Activateï¼‰ï¼šæŠŠä¸€ä¸ªè¿›ç¨‹ä»å¤–å­˜è½¬åˆ°å†…å­˜ï¼›å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š" class="headerlink" title="è§£æŒ‚&#x2F;æ¿€æ´» (Activateï¼‰ï¼šæŠŠä¸€ä¸ªè¿›ç¨‹ä»å¤–å­˜è½¬åˆ°å†…å­˜ï¼›å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š"></a>è§£æŒ‚&#x2F;æ¿€æ´» (Activateï¼‰ï¼šæŠŠä¸€ä¸ªè¿›ç¨‹ä»å¤–å­˜è½¬åˆ°å†…å­˜ï¼›å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</h5><ul><li>ï»¿å°±ç»ªæŒ‚èµ·åˆ°å°±ç»ªï¼šæ²¡æœ‰å°±ç»ªè¿›ç¨‹æˆ–æŒ‚èµ·å°±ç»ªè¿›ç¨‹ä¼˜å…ˆçº§é«˜äºå°±ç»ªè¿›ç¨‹æ—¶ï¼Œä¼šè¿›è¡Œè¿™ç§è½¬æ¢ï¼›</li><li>ï»¿é˜»å¡æŒ‚èµ·åˆ°é˜»å¡ï¼šå½“ä¸€ä¸ªè¿›ç¨‹é‡Šæ”¾è¶³å¤Ÿå†…å­˜æ—¶ï¼Œç³»ç»Ÿä¼šæŠŠä¸€ä¸ªé«˜ä¼˜å…ˆçº§é˜»å¡æŒ‚èµ·ï¼ˆç³»ç»Ÿè®¤ä¸ºä¼šå¾ˆå¿«å‡ºç°æ‰€ç­‰å¾…çš„äº‹ä»¶ï¼‰è¿›ç¨‹è½¬æ¢ä¸ºé˜»å¡è¿›ç¨‹ï¼›</li></ul><h5 id="OSå¦‚ä½•é€šè¿‡PCBå®Œæˆè¿›ç¨‹çš„è°ƒåº¦ï¼Ÿ"><a href="#OSå¦‚ä½•é€šè¿‡PCBå®Œæˆè¿›ç¨‹çš„è°ƒåº¦ï¼Ÿ" class="headerlink" title="OSå¦‚ä½•é€šè¿‡PCBå®Œæˆè¿›ç¨‹çš„è°ƒåº¦ï¼Ÿ"></a>OSå¦‚ä½•é€šè¿‡PCBå®Œæˆè¿›ç¨‹çš„è°ƒåº¦ï¼Ÿ</h5><h6 id="ğŸŒŸçŠ¶æ€é˜Ÿåˆ—"><a href="#ğŸŒŸçŠ¶æ€é˜Ÿåˆ—" class="headerlink" title="ğŸŒŸçŠ¶æ€é˜Ÿåˆ—"></a>ğŸŒŸçŠ¶æ€é˜Ÿåˆ—</h6><ul><li><p>ï»¿ç”±æ“ä½œç³»ç»Ÿæ¥ç»´æŠ¤ä¸€ç»„é˜Ÿåˆ—ï¼Œç”¨æ¥è¡¨ç¤ºç³»ç»Ÿå½“ä¸­æ‰€æœ‰è¿›ç¨‹çš„å½“å‰çŠ¶æ€ï¼›</p></li><li><p>ï»¿<u><strong>ä¸åŒçš„çŠ¶æ€åˆ†åˆ«ç”¨ä¸åŒçš„é˜Ÿåˆ—æ¥è¡¨ç¤º</strong></u>(å°±ç»ªé˜Ÿåˆ—ã€å„ç§ç±»å‹çš„é˜»å¡é˜Ÿåˆ—ï¼‰ï¼›</p></li><li><p>æ¯ä¸ªè¿›ç¨‹çš„PCBéƒ½æ ¹æ®å®ƒçš„çŠ¶æ€åŠ å…¥åˆ°ç›¸åº”çš„é˜Ÿåˆ—å½“ä¸­ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒçš„PCBä»ä¸€ä¸ªçŠ¶æ€é˜Ÿåˆ—ä¸­è„±ç¦»å‡ºæ¥ï¼ŒåŠ å…¥åˆ°å¦å¤–ä¸€ä¸ªé˜Ÿåˆ—ã€‚</p></li></ul><h3 id="7-3çº¿ç¨‹"><a href="#7-3çº¿ç¨‹" class="headerlink" title="7.3çº¿ç¨‹"></a>7.3çº¿ç¨‹</h3><h4 id="ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹ï¼Ÿ</h4><p>â€‹å¤„ç†å¹¶è¡Œæ“ä½œæ—¶ï¼Œå¦‚æœä½¿ç”¨<strong>å¤šè¿›ç¨‹</strong>æ–¹å¼ï¼Œä¼šå¯¼è‡´å¼€é”€å·¨å¤§(è¿›ç¨‹å ç”¨èµ„æºã€è¿›ç¨‹åˆ‡æ¢å ç”¨æ—¶é—´ã€è¿›ç¨‹å…±äº«æ•°æ®äº§ç”Ÿå¼€é”€)</p><p>â€‹å› æ­¤ï¼Œæˆ‘ä»¬äºŸéœ€æå‡ºä¸€ç§å®ä½“ï¼Œæ»¡è¶³ï¼š1ï¼‰å®ä½“ä¹‹é—´å¯ä»¥å¹¶å‘è¿è¡Œï¼›2ï¼‰å®ä½“ä¹‹é—´å…±äº«åœ°å€ç©ºé—´</p><p>â€‹äºæ˜¯ <strong>çº¿ç¨‹</strong> è¢«æå‡ºï¼</p><h4 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ</h4><p>â€‹ï¼<em>è¿›ç¨‹å½“ä¸­çš„ä¸€æ¡æ‰§è¡Œæµç¨‹ã€‚</em></p><p>ä»ä¸¤ä¸ªæ–¹é¢æ¥é‡æ–°ç†è§£è¿›ç¨‹</p><ul><li>ï»¿ä»èµ„æºç»„åˆçš„è§’åº¦ï¼š<strong>è¿›ç¨‹</strong>æŠŠä¸€ç»„ç›¸å…³çš„èµ„æºç»„åˆèµ·æ¥ï¼Œ<strong>æ„æˆäº†ä¸€ä¸ªèµ„æºå¹³å°ï¼ˆç¯å¢ƒï¼‰</strong>ï¼ŒåŒ…æ‹¬åœ°å€ç©ºé—´ï¼ˆä»£ç æ®µã€æ•°æ®æ®µï¼‰ã€æ‰“å¼€çš„æ–‡ä»¶ç­‰å„ç§èµ„æºï¼›</li><li>ï»¿ä»è¿è¡Œçš„è§’åº¦ï¼šä»£ç åœ¨è¿™ä¸ªèµ„æºå¹³å°ä¸Šçš„ä¸€æ¡æ‰§è¡Œæµç¨‹ï¼ˆçº¿ç¨‹ï¼‰ã€‚</li></ul><h5 id="çº¿ç¨‹çš„ä¼˜ç‚¹ï¼š"><a href="#çº¿ç¨‹çš„ä¼˜ç‚¹ï¼š" class="headerlink" title="çº¿ç¨‹çš„ä¼˜ç‚¹ï¼š"></a>çº¿ç¨‹çš„ä¼˜ç‚¹ï¼š</h5><ul><li>ï»¿ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒæ—¶å­˜åœ¨å¤šä¸ªçº¿ç¨‹ï¼›</li><li>ï»¿å„ä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘åœ°æ‰§è¡Œï¼›</li><li>ï»¿å„ä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«åœ°å€ç©ºé—´å’Œæ–‡ä»¶ç­‰èµ„æºã€‚</li></ul><h5 id="çº¿ç¨‹çš„ç¼ºç‚¹ï¼š"><a href="#çº¿ç¨‹çš„ç¼ºç‚¹ï¼š" class="headerlink" title="çº¿ç¨‹çš„ç¼ºç‚¹ï¼š"></a>çº¿ç¨‹çš„ç¼ºç‚¹ï¼š</h5><ul><li><strong>ä¸€ä¸ªçº¿ç¨‹å´©æºƒï¼Œä¼šå¯¼è‡´å…¶æ‰€å±è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹å´©æºƒ</strong>ã€‚(å› ä¸ºçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Œå› æ­¤ä¸€ä¸ªçº¿ç¨‹çš„æ•°æ®é”™è¯¯äº†ï¼Œå…¶ä»–çº¿ç¨‹éƒ½è¦é­æ®ƒ)</li></ul><h5 id="çº¿ç¨‹æ‰€éœ€çš„èµ„æºï¼š"><a href="#çº¿ç¨‹æ‰€éœ€çš„èµ„æºï¼š" class="headerlink" title="çº¿ç¨‹æ‰€éœ€çš„èµ„æºï¼š"></a>çº¿ç¨‹æ‰€éœ€çš„èµ„æºï¼š</h5><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230606161910704.png" alt="image-20230606161910704" style="zoom:50%;" /><h5 id="çº¿ç¨‹ä¸è¿›ç¨‹çš„æ¯”è¾ƒ"><a href="#çº¿ç¨‹ä¸è¿›ç¨‹çš„æ¯”è¾ƒ" class="headerlink" title="çº¿ç¨‹ä¸è¿›ç¨‹çš„æ¯”è¾ƒ"></a>çº¿ç¨‹ä¸è¿›ç¨‹çš„æ¯”è¾ƒ</h5><ul><li><p>ï»¿è¿›ç¨‹æ˜¯èµ„æºåˆ†é…å•ä½ï¼Œçº¿ç¨‹æ˜¯CPUè°ƒåº¦å•ä½ï¼›</p></li><li><p>ï»¿è¿›ç¨‹æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„èµ„æºå¹³å°ï¼Œè€Œçº¿ç¨‹åªç‹¬äº«å¿…ä¸å¯å°‘çš„èµ„æºï¼Œå¦‚å¯„å­˜å™¨å’Œæ ˆï¼›</p></li><li><p>ï»¿çº¿ç¨‹åŒæ ·å…·æœ‰å°±ç»ªã€é˜»å¡å’Œæ‰§è¡Œä¸‰ç§åŸºæœ¬çŠ¶æ€ï¼ŒåŒæ ·å…·æœ‰çŠ¶æ€ä¹‹é—´çš„è½¬æ¢å…³ç³»ï¼›</p></li><li><p>ï»¿çº¿ç¨‹èƒ½å‡å°‘å¹¶å‘æ‰§è¡Œçš„æ—¶é—´å’Œç©ºé—´å¼€é”€ï¼š</p><ul><li><p>çº¿ç¨‹çš„åˆ›å»ºæ—¶é—´æ¯”è¿›ç¨‹çŸ­ï¼›(çº¿ç¨‹æ— éœ€åˆ›å»ºä»£ç å—ã€æ•°æ®ã€æ–‡ä»¶çš„ç®¡ç†ä¿¡æ¯)</p></li><li><p>çº¿ç¨‹çš„ç»ˆæ­¢æ—¶é—´æ¯”è¿›ç¨‹çŸ­ï¼›(çº¿ç¨‹æ— éœ€åˆ›å»ºä»£ç å—ã€æ•°æ®ã€æ–‡ä»¶çš„ç®¡ç†ä¿¡æ¯)</p></li><li><p>åŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹åˆ‡æ¢æ—¶é—´æ¯”è¿›ç¨‹çŸ­ï¼›(åœ¨åŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹å…·æœ‰åŒä¸€ä¸ªé¡µè¡¨ï¼Œåˆ‡æ¢æ—¶æ— éœ€åˆ‡æ¢é¡µè¡¨)</p></li><li><p>ç”±äºåŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹é—´å…±äº«å†…å­˜å’Œæ–‡ä»¶èµ„æºï¼Œå¯ç›´æ¥è¿›è¡Œä¸é€šè¿‡å†…æ ¸çš„é€šä¿¡ï¼›</p></li></ul></li></ul><h4 id="çº¿ç¨‹çš„å®ç°ï¼š"><a href="#çº¿ç¨‹çš„å®ç°ï¼š" class="headerlink" title="çº¿ç¨‹çš„å®ç°ï¼š"></a>çº¿ç¨‹çš„å®ç°ï¼š</h4><p>â€‹ä¸‰ç§ä¸»è¦çš„å®ç°æ–¹å¼ï¼š</p><pre><code> 1. ç”¨æˆ·çº¿ç¨‹ï¼šåœ¨ç”¨æˆ·ç©ºé—´å®ç° 2. å†…æ ¸çº¿ç¨‹ï¼šåœ¨å†…æ ¸ä¸­å®ç° 3. è½»é‡çº§çº¿ç¨‹ï¼šåœ¨å†…æ ¸ä¸­å®ç°ï¼Œæ”¯æŒç”¨æˆ·çº¿ç¨‹</code></pre><h5 id="ğŸŒŸç”¨æˆ·çº¿ç¨‹ï¼š"><a href="#ğŸŒŸç”¨æˆ·çº¿ç¨‹ï¼š" class="headerlink" title="ğŸŒŸç”¨æˆ·çº¿ç¨‹ï¼š"></a>ğŸŒŸç”¨æˆ·çº¿ç¨‹ï¼š</h5><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230606163157885.png" alt="image-20230606163157885" style="zoom:50%;" /><p>OSçœ‹ä¸åˆ°TCBï¼Œåªèƒ½çœ‹åˆ°PCBï¼ŒåªçŸ¥é“è¿›ç¨‹ä¿¡æ¯ï¼Œè¿›ç¨‹ä¸­çš„çº¿ç¨‹ä¿¡æ¯ç”±çº¿ç¨‹åº“ç®¡ç†ã€‚</p><p>åœ¨ç”¨æˆ·ç©ºé—´å®ç°çš„çº¿ç¨‹æœºåˆ¶ï¼Œå®ƒ<strong>ä¸ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„å†…æ ¸</strong>ï¼Œ<strong>ç”±ä¸€ç»„ç”¨æˆ·çº§çš„çº¿ç¨‹åº“å‡½æ•°æ¥å®Œæˆçº¿ç¨‹çš„ç®¡ç†</strong>ï¼ŒåŒ…æ‹¬è¿›ç¨‹çš„åˆ›å»ºã€ç»ˆæ­¢ã€åŒæ­¥å’Œè°ƒåº¦ç­‰ã€‚</p><h6 id="ç”¨æˆ·çº¿ç¨‹çš„ä¼˜ç‚¹ï¼š"><a href="#ç”¨æˆ·çº¿ç¨‹çš„ä¼˜ç‚¹ï¼š" class="headerlink" title="ç”¨æˆ·çº¿ç¨‹çš„ä¼˜ç‚¹ï¼š"></a>ç”¨æˆ·çº¿ç¨‹çš„ä¼˜ç‚¹ï¼š</h6><ul><li>ï»¿ç”±äºç”¨æˆ·çº¿ç¨‹çš„ç»´æŠ¤ç”±ç›¸åº”è¿›ç¨‹æ¥å®Œæˆ ï¼ˆé€šè¿‡çº¿ç¨‹åº“å‡½æ•°ï¼‰ï¼Œä¸éœ€è¦æ“ä½œç³»ç»Ÿå†…æ ¸äº†è§£ç”¨æˆ·çº¿ç¨‹çš„å­˜åœ¨ï¼Œ<u>å¯ç”¨äºä¸æ”¯æŒçº¿ç¨‹æŠ€æœ¯çš„å¤šè¿›ç¨‹æ“ä½œç³»ç»Ÿï¼›</u></li><li>ï»¿æ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦å®ƒè‡ªå·±ç§æœ‰çš„çº¿ç¨‹æ§åˆ¶å—ï¼ˆTCBï¼‰åˆ—è¡¨ï¼Œç”¨æ¥è·Ÿè¸ªè®°å½•å®ƒçš„å„ä¸ªçº¿ç¨‹çš„çŠ¶æ€ä¿¡æ¯ (PCã€æ ˆæŒ‡é’ˆã€å¯„å­˜å™¨ï¼‰ï¼ŒTCBç”±çº¿ç¨‹åº“å‡½æ•°æ¥ç»´æŠ¤ï¼›</li><li>ï»¿ç”¨æˆ·çº¿ç¨‹çš„åˆ‡æ¢ä¹Ÿæ˜¯ç”±çº¿ç¨‹åº“å‡½æ•°æ¥å®Œæˆï¼æ— éœ€ç”¨æˆ·æ€&#x2F; æ ¸å¿ƒæ€åˆ‡æ¢ï¼Œæ‰€ä»¥é€Ÿåº¦ç‰¹åˆ«å¿«ï¼›</li><li>ï»¿å…è®¸æ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰è‡ªå®šä¹‰çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•ã€‚</li></ul><h6 id="ç”¨æˆ·çº¿ç¨‹çš„ç¼ºç‚¹ï¼š"><a href="#ç”¨æˆ·çº¿ç¨‹çš„ç¼ºç‚¹ï¼š" class="headerlink" title="ç”¨æˆ·çº¿ç¨‹çš„ç¼ºç‚¹ï¼š"></a>ç”¨æˆ·çº¿ç¨‹çš„ç¼ºç‚¹ï¼š</h6><ul><li>ï»¿é˜»å¡æ€§çš„ç³»ç»Ÿè°ƒç”¨å¦‚ä½•å®ç°ï¼Ÿå¦‚æœä¸€ä¸ªçº¿ç¨‹å‘èµ·ç³»ç»Ÿè°ƒç”¨è€Œé˜»å¡ï¼Œåˆ™æ•´ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…ï¼›(å› ä¸ºOSåœ¨å†…æ ¸æ€ä¸­åªèƒ½ç®¡ç†è¿›ç¨‹ï¼Œè€Œä¸èƒ½å•ç‹¬åœ°æŠŠè¿›ç¨‹ä¸­çš„æŸä¸ªçº¿ç¨‹é˜»å¡)</li><li>ï»¿å½“ä¸€ä¸ªçº¿ç¨‹å¼€å§‹è¿è¡Œåï¼Œé™¤éå®ƒä¸»åŠ¨åœ°äº¤å‡ºCPUçš„ä½¿ç”¨æƒï¼Œå¦åˆ™å®ƒæ‰€åœ¨çš„è¿›ç¨‹å½“ä¸­çš„å…¶ä»–çº¿ç¨‹å°†æ— æ³•è¿è¡Œï¼›(åŒæ ·ï¼Œå› ä¸ºOSåªèƒ½ç®¡ç†è¿›ç¨‹ï¼Œå› ä¸ºåªæœ‰OSæœ‰ç®¡ç†ä¸­æ–­çš„æƒåˆ©ï¼Œä½†æ˜¯OSçœ‹ä¸åˆ°çº¿ç¨‹)</li><li>ï»¿ç”±äºæ—¶é—´ç‰‡åˆ†é…ç»™è¿›ç¨‹ï¼Œæ•…ä¸å…¶å®ƒè¿›ç¨‹æ¯”ï¼Œåœ¨å¤šçº¿ç¨‹æ‰§è¡Œæ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹å¾—åˆ°çš„æ—¶é—´ç‰‡è¾ƒå°‘ï¼Œæ‰§è¡Œä¼šè¾ƒæ…¢ã€‚</li></ul><h5 id="ğŸŒŸå†…æ ¸çº¿ç¨‹ï¼š"><a href="#ğŸŒŸå†…æ ¸çº¿ç¨‹ï¼š" class="headerlink" title="ğŸŒŸå†…æ ¸çº¿ç¨‹ï¼š"></a>ğŸŒŸå†…æ ¸çº¿ç¨‹ï¼š</h5><p>â€‹<img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230606164400117.png" alt="image-20230606164400117" style="zoom:50%;" /></p><p><strong>TCBä¹Ÿæ”¾åœ¨å†…æ ¸ä¸­</strong></p><p>æ˜¯æŒ‡åœ¨æ“ä½œç³»ç»Ÿ<u>çš„å†…æ ¸å½“ä¸­å®ç°çš„ä¸€ç§çº¿ç¨‹æœºåˆ¶</u>ï¼Œç”±æ“ä½œç³»ç»Ÿçš„å†…æ ¸æ¥å®Œæˆçº¿ç¨‹çš„åˆ›å»ºã€ç»ˆæ­¢å’Œç®¡ç†ã€‚</p><ul><li>ï»¿åœ¨æ”¯æŒå†…æ ¸çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œ**<u>ç”±å†…æ ¸æ¥ç»´æŠ¤è¿›ç¨‹å’Œçº¿ç¨‹çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ ï¼ˆPCBå’ŒTCBï¼‰</u>**ï¼›</li><li>ï»¿çº¿ç¨‹çš„åˆ›å»ºã€ç»ˆæ­¢å’Œåˆ‡æ¢éƒ½æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨&#x2F;å†…æ ¸å‡½æ•°çš„æ–¹å¼æ¥è¿›è¡Œï¼Œç”±å†…æ ¸æ¥å®Œæˆï¼Œå› æ­¤ç³»ç»Ÿå¼€é”€è¾ƒå¤§ï¼›</li><li>åœ¨ä¸€ä¸ªè¿›ç¨‹å½“ä¸­ï¼Œå¦‚æœæŸä¸ªå†…æ ¸çº¿ç¨‹å‘èµ·ç³»ç»Ÿè°ƒç”¨è€Œè¢«é˜³å¡ï¼Œäº•ä¸ä¼šå½±å“å…¶ä»–å†…æ ¸çº¿ç¨‹çš„è¿è¡Œï¼š</li><li>æ—¶é—´ç‰‡åˆ†é…ç»™çº¿ç¨‹ï¼Œå¤šçº¿ç¨‹çš„è¿›ç¨‹è·å¾—æ›´å¤šCPUæ—¶é—´ï¼›</li><li>Windows NTå’Œwindows 2000&#x2F;xPæ”¯æŒå†…æ ¸çº¿ç¨‹ã€‚</li></ul><h5 id="ğŸŒŸè½»é‡çº§è¿›ç¨‹-äº†è§£"><a href="#ğŸŒŸè½»é‡çº§è¿›ç¨‹-äº†è§£" class="headerlink" title="ğŸŒŸè½»é‡çº§è¿›ç¨‹(äº†è§£)"></a>ğŸŒŸè½»é‡çº§è¿›ç¨‹(äº†è§£)</h5><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230606164824053.png" alt="image-20230606164824053" style="zoom:30%;" /><h3 id="7-4ä¸Šä¸‹æ–‡åˆ‡æ¢"><a href="#7-4ä¸Šä¸‹æ–‡åˆ‡æ¢" class="headerlink" title="7.4ä¸Šä¸‹æ–‡åˆ‡æ¢"></a>7.4ä¸Šä¸‹æ–‡åˆ‡æ¢</h3><p>â€‹åœæ­¢å½“å‰è¿è¡Œè¿›ç¨‹(ä»è¿è¡ŒçŠ¶æ€æ”¹å˜æˆå…¶ä»–çŠ¶æ€ï¼‰å¹¶ä¸”è°ƒåº¦å…¶ä»–è¿›ç¨‹ï¼ˆè½¬å˜æˆè¿è¡ŒçŠ¶æ€ï¼‰</p><ul><li>ï»¿å¿…é¡»åœ¨åˆ‡æ¢ä¹‹å‰å­˜å‚¨è®¸å¤šéƒ¨åˆ†çš„è¿›ç¨‹ä¸Šä¸‹æ–‡</li><li>ï»¿å¿…é¡»èƒ½å¤Ÿåœ¨ä¹‹åæ¢å¤ä»–ä»¬ï¼Œæ‰€ä»¥è¿›ç¨‹ä¸èƒ½æ˜¾ç¤ºå®ƒæ›¾ç»è¢«æš‚åœè¿‡</li><li>ï»¿å¿…é¡»å¿«é€Ÿï¼ˆä¸Šä¸‹æ–‡è½¬æ¢æ—¶éå¸¸é¢‘ç¹çš„ï¼‰</li></ul><p>â€‹éœ€è¦å­˜å‚¨ä»€ä¹ˆä¸Šä¸‹æ–‡ï¼Ÿ</p><ul><li><p>å¯„å­˜å™¨(PC, SPï¼Œ â€¦)ï¼ŒCPUçŠ¶æ€ï¼Œâ€¦â€¦</p></li><li><p>ä¸€äº›æ—¶å€™å¯èƒ½ä¼šè´¹æ—¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½å¯èƒ½é¿å…</p></li></ul><h3 id="7-5è¿›ç¨‹æ§åˆ¶"><a href="#7-5è¿›ç¨‹æ§åˆ¶" class="headerlink" title="7.5è¿›ç¨‹æ§åˆ¶"></a>7.5è¿›ç¨‹æ§åˆ¶</h3><h4 id="åˆ›å»ºè¿›ç¨‹"><a href="#åˆ›å»ºè¿›ç¨‹" class="headerlink" title="åˆ›å»ºè¿›ç¨‹"></a>åˆ›å»ºè¿›ç¨‹</h4><p>forkå‡½æ•°ï¼šforkå‡½æ•°ç”¨äº<u>ä»å·²ç»å­˜åœ¨çš„è¿›ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹</u>ã€‚æ–°çš„è¿›ç¨‹ç§°ä¸ºå­è¿›ç¨‹ï¼Œè€ŒåŸæ¥çš„è¿›ç¨‹æ˜¯çˆ¶è¿›ç¨‹ã€‚</p><p><strong><u><em>è¿”å›å€¼ï¼šå­è¿›ç¨‹ä¸­è¿”å›0ï¼Œçˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹idï¼Œå‡ºé”™è¿”å›-1</em></u></strong></p><p>å½“ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨forkä¹‹åï¼Œå°±æœ‰ä¸¤ä¸ªäºŒè¿›åˆ¶ä»£ç ç›¸åŒçš„è¿›ç¨‹ã€‚è€Œä¸”å®ƒä»¬éƒ½è¿è¡Œåˆ°ç›¸åŒçš„åœ°æ–¹ã€‚ä½†æ¯ä¸ªè¿›ç¨‹éƒ½å°†å¯ä»¥å¼€å§‹å®ƒä»¬è‡ªå·±çš„æ—…ç¨‹</p><p>fork()çš„ç®€å•å®ç°</p><ul><li>å¯¹å­è¿›ç¨‹åˆ†é…å†…å­˜</li><li>å¤åˆ¶çˆ¶è¿›ç¨‹çš„å†…å­˜å’ŒCPUå¯„å­˜å™¨åˆ°å­è¿›ç¨‹</li><li>å¼€é”€æ˜‚è´µ</li></ul><p>åœ¨99%çš„æƒ…å†µä¸‹,æˆ‘ä»¬åœ¨è°ƒç”¨fork()ä¹‹åè°ƒç”¨exec() â€”ä¾æ®å®é™…æƒ…å†µå¾—å‡º</p><ul><li>åœ¨fork()æ“ä½œä¸­å†…å­˜å¤åˆ¶æ˜¯æ²¡æœ‰ä½œç”¨çš„ï¼ˆå› ä¸ºä½ forkå®Œåç«‹é©¬å»æ‰§è¡Œæ–°çš„ç¨‹åºï¼Œä¼šæŠŠä½ å¤åˆ¶çš„ä¸œè¥¿éƒ½è¦†ç›–äº†</li><li>å­è¿›ç¨‹å°†å¯èƒ½å…³é—­æ‰“å¼€çš„æ–‡ä»¶å’Œè¿æ¥</li><li>å¼€é”€å› æ­¤æ˜¯æœ€é«˜çš„</li></ul><p>vfork()</p><ol><li><p>vforkç”¨äºåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹å…±äº«åœ°å€ç©ºé—´ã€‚(forkçš„å­è¿›ç¨‹æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´)</p></li><li><p>vforkä¿è¯å­è¿›ç¨‹å…ˆè¿è¡Œï¼Œåœ¨å­è¿›ç¨‹è°ƒç”¨execæˆ–exitä¹‹åçˆ¶è¿›ç¨‹æ‰å¯èƒ½è¢«è°ƒåº¦è¿è¡Œã€‚</p></li></ol><ul><li>ä¸€ä¸ªåˆ›å»ºè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨,ä¸éœ€è¦åˆ›å»ºä¸€ä¸ªåŒæ ·çš„å†…å­˜æ˜ åƒ</li><li>ä¸€äº›æ—¶å€™ç§°ä¸ºè½»é‡çº§fork()</li><li>å­è¿›ç¨‹åº”è¯¥å‡ ä¹ç«‹å³è°ƒç”¨exec()</li><li>ç°åœ¨ä¸å†ä½¿ç”¨å¦‚æœæˆ‘ä»¬ä½¿ç”¨ copy on write æŠ€æœ¯(æŒ‰éœ€å¤åˆ¶ï¼Œä¸å¤åˆ¶é‚£äº›ä¼šè¢«è¦†ç›–çš„éƒ¨åˆ†ï¼Œåªå¤åˆ¶è¿›ç¨‹åˆ›å»ºå¿…é¡»çš„éƒ¨åˆ†)</li></ul><h4 id="åŠ è½½å’Œæ‰§è¡Œè¿›ç¨‹"><a href="#åŠ è½½å’Œæ‰§è¡Œè¿›ç¨‹" class="headerlink" title="åŠ è½½å’Œæ‰§è¡Œè¿›ç¨‹"></a>åŠ è½½å’Œæ‰§è¡Œè¿›ç¨‹</h4><p>â€‹exec()å‡½æ•°ï¼šè®©å½“å‰è¿›ç¨‹æ‰§è¡Œæ–°çš„ç¨‹åº</p><p>â€‹exec()è°ƒç”¨å…è®¸ä¸€ä¸ªè¿›ç¨‹â€åŠ è½½â€ä¸€ä¸ªä¸åŒçš„ç¨‹åºå¹¶ä¸”åœ¨mainå¼€å§‹æ‰§è¡Œ(äº‹å®ä¸Š _start)</p><p>â€‹å®ƒå…è®¸ä¸€ä¸ªè¿›ç¨‹æŒ‡å®šå‚æ•°çš„æ•°é‡(argc)å’Œå®ƒå­—ç¬¦ä¸²å‚æ•°æ•°ç»„(argv)</p><h4 id="ç­‰å¾…å’Œç»ˆæ­¢è¿›ç¨‹"><a href="#ç­‰å¾…å’Œç»ˆæ­¢è¿›ç¨‹" class="headerlink" title="ç­‰å¾…å’Œç»ˆæ­¢è¿›ç¨‹"></a>ç­‰å¾…å’Œç»ˆæ­¢è¿›ç¨‹</h4><p>â€‹wait()ç³»ç»Ÿè°ƒç”¨ æ˜¯è¢«çˆ¶è¿›ç¨‹ç”¨æ¥ç­‰å¾…å­è¿›ç¨‹çš„ç»“æŸ</p><ul><li><p>ä¸€ä¸ªå­è¿›ç¨‹å‘çˆ¶è¿›ç¨‹è¿”å›ä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥çˆ¶è¿›ç¨‹å¿…é¡»æ¥å—è¿™ä¸ªå€¼å¹¶å¤„ç†</p></li><li><p>ï»¿wait()ç³»ç»Ÿè°ƒç”¨æ‹…ä»»è¿™ä¸ªè¦æ±‚</p><ul><li><p>ï»¿å®ƒä½¿çˆ¶è¿›ç¨‹å»ç¡çœ æ¥ç­‰å¾…å­è¿›ç¨‹çš„ç»“æœ</p></li><li><p>ï»¿å½“ä¸€ä¸ªå­è¿›ç¨‹è°ƒç”¨exit(çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿè§£é”çˆ¶è¿›ç¨‹ï¼Œå¹¶ä¸”å°†é€šè¿‡exit()ä¼ é€’å¾—åˆ°çš„è¿”å›å€¼ä½œä¸ºwaitè°ƒç”¨çš„ä¸€ä¸ªç»“æœ(è¿åŒå­è¿›ç¨‹çš„pidä¸€èµ·ï¼‰å¦‚æœè¿™é‡Œæ²¡æœ‰å­è¿›ç¨‹å­˜æ´»ï¼Œwait()ç«‹åˆ»è¿”å›</p></li><li><p>å½“ç„¶ï¼Œå¦‚æœè¿™é‡Œæœ‰ä¸ºçˆ¶è¿›ç¨‹çš„åƒµå°¸ç­‰å¾…ï¼Œwait(ç«‹å³è¿”å›å…¶ä¸­ä¸€ä¸ªå€¼(å¹¶ä¸”è§£é™¤åƒµå°¸çŠ¶æ€ï¼‰</p></li></ul></li><li><p>ï»¿è¿›ç¨‹ç»“æŸæ‰§è¡Œä¹‹åï¼Œå®ƒè°ƒç”¨exit()</p></li><li><p>ï»¿è¿™ä¸ªç³»ç»Ÿè°ƒç”¨ï¼š</p><ul><li><p>ï»¿å°†è¿™ç¨‹åºçš„ â€œç»“æœâ€ ä½œä¸ºä¸€ä¸ªå‚æ•°</p></li><li><p>ï»¿å…³é—­æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶ï¼Œè¿æ¥ç­‰ç­‰</p></li><li><p>ï»¿é‡Šæ”¾å†…å­˜</p></li><li><p>ï»¿é‡Šæ”¾å¤§éƒ¨åˆ†æ”¯æŒè¿›ç¨‹çš„æ“ä½œç³»ç»Ÿç»“æ„</p></li><li><p>ï»¿æ£€æŸ¥æ˜¯å¦çˆ¶è¿›ç¨‹æ˜¯å­˜æ´»ç€çš„ï¼š</p><ul><li><p>ï»¿ï»¿å¦‚æœæ˜¯çš„è¯ã€‚å®ƒä¿ç•™ç»“æœçš„å€¼ç›´åˆ°çˆ¶è¿›ç¨‹éœ€è¦å®ƒï¼šåœ¨è¿™ç§æƒ…å†µé‡Œã€‚è¿›ç¨‹æ²¡æœ‰çœŸæ­£<br> æ­»äº¡ï¼Œä½†æ˜¯å®ƒè¿›å…¥äº†åƒµå°¸ (zombie&#x2F; defunct)çŠ¶æ€</p></li><li><p>ï»¿å¦‚æœæ²¡æœ‰ï¼Œå­è¿›ç¨‹å°†è¢«initè¿›ç¨‹æ¥ç®¡ï¼Œinitä»£æ›¿å…¶çˆ¶è¿›ç¨‹ï¼Œé‡Šæ”¾å…¶æ‰€æœ‰çš„æ•°æ®ç»“æ„</p></li></ul></li><li><p>ï»¿æ¸…ç†æ‰€æœ‰ç­‰å¾…çš„åƒµå°¸è¿›ç¨‹</p></li></ul></li><li><p>ï»¿è¿›ç¨‹ç»ˆæ­¢æ˜¯æœ€ç»ˆçš„åƒåœ¾æ”¶é›†ï¼ˆèµ„æºå›æ”¶ï¼‰</p></li></ul><h4 id="è¿›ç¨‹çŠ¶æ€å›¾ï¼š"><a href="#è¿›ç¨‹çŠ¶æ€å›¾ï¼š" class="headerlink" title="è¿›ç¨‹çŠ¶æ€å›¾ï¼š"></a>è¿›ç¨‹çŠ¶æ€å›¾ï¼š</h4><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230606200728246.png" alt="image-20230606200728246" style="zoom:50%;" /><h2 id="Chapter8-CPUè°ƒåº¦"><a href="#Chapter8-CPUè°ƒåº¦" class="headerlink" title="Chapter8 CPUè°ƒåº¦"></a>Chapter8 CPUè°ƒåº¦</h2><h3 id="8-1èƒŒæ™¯"><a href="#8-1èƒŒæ™¯" class="headerlink" title="8.1èƒŒæ™¯"></a>8.1èƒŒæ™¯</h3><h4 id="CPUè°ƒåº¦"><a href="#CPUè°ƒåº¦" class="headerlink" title="CPUè°ƒåº¦"></a>CPUè°ƒåº¦</h4><ul><li>ä»å°±ç»ªé˜Ÿåˆ—ä¸­æŒ‘é€‰ä¸€ä¸ªè¿›ç¨‹&#x2F;çº¿ç¨‹ä½œä¸ºCPUå°†è¦è¿è¡Œçš„ä¸‹ä¸€ä¸ªçº¿ç¨‹&#x2F;è¿›ç¨‹</li><li>è°ƒåº¦ç¨‹åºï¼šæŒ‘é€‰è¿›ç¨‹&#x2F;çº¿ç¨‹çš„å†…æ ¸å‡½æ•°(é€šè¿‡ä¸€äº›è°ƒåº¦ç­–ç•¥)</li><li>ä»€ä¹ˆæ—¶å€™æ‰§è¡Œè°ƒåº¦ï¼Ÿâ€”â€”çº¿ç¨‹ã€è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸä¸­çŠ¶æ€çš„è½¬åŒ–æ—¶ï¼Œä¼šè¿›è¡Œè°ƒåº¦</li></ul><p></p><h4 id="CPUè°ƒåº¦æ—¶é—´"><a href="#CPUè°ƒåº¦æ—¶é—´" class="headerlink" title="CPUè°ƒåº¦æ—¶é—´"></a>CPUè°ƒåº¦æ—¶é—´</h4><p>â€‹æ»¡è¶³ä¸€æ¡å³å¯ï¼ši): ä¸€ä¸ªè¿›ç¨‹ä»è¿è¡ŒçŠ¶æ€-&gt;ç­‰å¾…çŠ¶æ€; ii):ä¸€ä¸ªè¿›ç¨‹è¢«ç»ˆç»“äº†</p><ul><li>ä¸å¯æŠ¢å ï¼š<ul><li>è°ƒåº¦ç¨‹åºå¿…é¡»ç­‰å¾…äº‹ä»¶ç»“æŸ</li></ul></li><li>å¯æŠ¢å ï¼š<ul><li>è°ƒåº¦ç¨‹åºåœ¨ä¸­æ–­è¢«å“åº”åæ‰§è¡Œ</li><li>å½“å‰çš„è¿›ç¨‹ä»è¿è¡Œåˆ‡æ¢åˆ°å°±ç»ªï¼Œæˆ–è€…ä¸€ä¸ªè¿›ç¨‹ä»ç­‰å¾…åˆ‡æ¢åˆ°å°±ç»ª</li><li>å½“å‰è¿è¡Œçš„è¿›ç¨‹å¯ä»¥è¢«æ¢å‡º</li></ul></li></ul><h3 id="8-2è°ƒåº¦å‡†åˆ™"><a href="#8-2è°ƒåº¦å‡†åˆ™" class="headerlink" title="8.2è°ƒåº¦å‡†åˆ™"></a>8.2è°ƒåº¦å‡†åˆ™</h3><h4 id="è°ƒåº¦ç­–ç•¥"><a href="#è°ƒåº¦ç­–ç•¥" class="headerlink" title="è°ƒåº¦ç­–ç•¥"></a>è°ƒåº¦ç­–ç•¥</h4><h4 id="ç¨‹åºæ‰§è¡Œæ¨¡å‹"><a href="#ç¨‹åºæ‰§è¡Œæ¨¡å‹" class="headerlink" title="ç¨‹åºæ‰§è¡Œæ¨¡å‹"></a>ç¨‹åºæ‰§è¡Œæ¨¡å‹</h4><p>â€‹ç¨‹åºåœ¨CPUçªå‘å’ŒI&#x2F;Oä¸­äº¤æ›¿</p><ul><li>æ¯ä¸ªè°ƒåº¦å†³å®šéƒ½æ˜¯å…³äºåœ¨ä¸‹ä¸€ä¸ªCPUçªå‘æ—¶å°†å“ªä¸ªå·¥ä½œäº¤ç»™CPU</li><li>åœ¨æ—¶é—´åˆ†ç‰‡æœºåˆ¶ä¸‹ï¼Œçº¿ç¨‹å¯èƒ½åœ¨ç»“æŸå½“å‰CPUçªå‘å‰è¢«è¿«æ”¾å¼ƒCPU</li></ul><h4 id="æ¯”è¾ƒè°ƒåº¦ç®—æ³•çš„å‡†åˆ™"><a href="#æ¯”è¾ƒè°ƒåº¦ç®—æ³•çš„å‡†åˆ™" class="headerlink" title="æ¯”è¾ƒè°ƒåº¦ç®—æ³•çš„å‡†åˆ™"></a>æ¯”è¾ƒè°ƒåº¦ç®—æ³•çš„å‡†åˆ™</h4><h5 id="1-CPUä½¿ç”¨ç‡"><a href="#1-CPUä½¿ç”¨ç‡" class="headerlink" title="1.CPUä½¿ç”¨ç‡"></a>1.CPUä½¿ç”¨ç‡</h5><ul><li>CPUå¤„äºå¿™çŠ¶æ€æ‰€å æ—¶é—´çš„ç™¾åˆ†æ¯”</li></ul><h5 id="2-ååé‡"><a href="#2-ååé‡" class="headerlink" title="2.ååé‡"></a>2.ååé‡</h5><ul><li>åœ¨å•ä½æ—¶é—´å†…å®Œæˆçš„è¿›ç¨‹æ•°é‡</li></ul><h5 id="3-å‘¨è½¬æ—¶é—´"><a href="#3-å‘¨è½¬æ—¶é—´" class="headerlink" title="3.å‘¨è½¬æ—¶é—´"></a>3.å‘¨è½¬æ—¶é—´</h5><ul><li><u>ä¸€ä¸ªè¿›ç¨‹ä»åˆå§‹åŒ–åˆ°ç»“æŸï¼ŒåŒ…æ‹¬æ‰€æœ‰ç­‰å¾…æ—¶é—´</u>æ‰€èŠ±è´¹çš„æ—¶é—´</li></ul><h5 id="4-ç­‰å¾…æ—¶é—´"><a href="#4-ç­‰å¾…æ—¶é—´" class="headerlink" title="4.ç­‰å¾…æ—¶é—´"></a>4.ç­‰å¾…æ—¶é—´</h5><ul><li>è¿›ç¨‹åœ¨<u>å°±ç»ªé˜Ÿåˆ—</u>ä¸­çš„æ€»æ—¶é—´</li></ul><h5 id="5-å“åº”æ—¶é—´"><a href="#5-å“åº”æ—¶é—´" class="headerlink" title="5.å“åº”æ—¶é—´"></a>5.å“åº”æ—¶é—´</h5><ul><li>ä»ä¸€ä¸ªè¯·æ±‚<u>è¢«æäº¤</u>åˆ°<u>äº§ç”Ÿç¬¬ä¸€æ¬¡å“åº”</u>æ‰€èŠ±è´¹çš„æ€»æ—¶é—´</li></ul><p>â€‹å‡å°‘å“åº”æ—¶é—´ï¼šåŠæ—¶å¤„ç†ç”¨æˆ·çš„è¾“å‡ºå¹¶ä¸”å°½å¿«å°†è¾“å‡ºæä¾›ç»™ç”¨æˆ·</p><p>â€‹å‡å°‘å¹³å‡å“åº”æ—¶é—´æ³¢åŠ¨ï¼šåœ¨äº¤äº’ç³»ç»Ÿä¸­ï¼Œå¯é¢„æµ‹æ€§æ¯”é«˜ä½å·®å¼‚å¹³å‡æ›´é‡è¦</p><p>â€‹å¢åŠ ååé‡ï¼ši): å‡å°‘å¼€é”€(æ“ä½œç³»ç»Ÿå¼€é”€ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢) ii):ç³»ç»Ÿèµ„æºçš„é«˜æ•ˆåˆ©ç”¨(CPUï¼ŒI&#x2F;Oè®¾å¤‡)ã€</p><p>â€‹å‡å°‘ç­‰å¾…æ—¶é—´</p><p>â€‹ä½å»¶è¿Ÿåˆ©äºç³»ç»Ÿä¸ç”¨æˆ·çš„äº¤äº’</p><p>â€‹å³ä½¿å­˜åœ¨è®¸å¤šäº¤äº’ä»»åŠ¡ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä¿è¯ååé‡ä¸å—å½±å“</p><p>â€‹</p><h4 id="ååé‡vså»¶è¿Ÿ"><a href="#ååé‡vså»¶è¿Ÿ" class="headerlink" title="ååé‡vså»¶è¿Ÿ"></a>ååé‡vså»¶è¿Ÿ</h4><p>ååé‡æ˜¯OSçš„è®¡ç®—å¸¦å®½ï¼Œå“åº”æ—¶é—´æ˜¯OSçš„è®¡ç®—å»¶è¿Ÿ</p><h4 id="å…¬å¹³çš„ç›®æ ‡"><a href="#å…¬å¹³çš„ç›®æ ‡" class="headerlink" title="å…¬å¹³çš„ç›®æ ‡"></a>å…¬å¹³çš„ç›®æ ‡</h4><p>â€‹ä¿è¯æ¯ä¸ªè¿›ç¨‹å ç”¨ç›¸åŒçš„CPUæ—¶é—´â€”â€”ä¼šå¢åŠ å¹³å‡å“åº”æ—¶é—´(çœŸçš„è¦è®¾è®¡æˆå…¬å¹³çš„å—ï¼Ÿ)</p><h3 id="8-3è°ƒåº¦ç®—æ³•"><a href="#8-3è°ƒåº¦ç®—æ³•" class="headerlink" title="8.3è°ƒåº¦ç®—æ³•"></a>8.3è°ƒåº¦ç®—æ³•</h3><h4 id="1-å…ˆæ¥å…ˆæœåŠ¡-FCFS"><a href="#1-å…ˆæ¥å…ˆæœåŠ¡-FCFS" class="headerlink" title="1.å…ˆæ¥å…ˆæœåŠ¡(FCFS)"></a>1.å…ˆæ¥å…ˆæœåŠ¡(FCFS)</h4><h5 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h5><ul><li>ç®€å•</li></ul><h5 id="ç¼ºç‚¹ï¼š-1"><a href="#ç¼ºç‚¹ï¼š-1" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h5><ul><li>å¹³å‡ç­‰å¾…æ—¶é—´æ³¢åŠ¨è¾ƒå¤§</li><li>èŠ±è´¹æ—¶é—´å°‘çš„ä»»åŠ¡å¯èƒ½æ’åœ¨èŠ±è´¹æ—¶é—´é•¿çš„ä»»åŠ¡åé¢</li><li>å¯èƒ½å¯¼è‡´I&#x2F;0å’ŒCPUä¹‹é—´çš„é‡å å¤„ç†<ul><li>ï»¿CPUå¯†é›†å‹è¿›ç¨‹ä¼šå¯¼è‡´I&#x2F;0è®¾å¤‡é—²ç½®æ—¶ï¼ŒI&#x2F;0å¯†é›†å‹è¿›ç¨‹ä¹Ÿåœ¨ç­‰å¾…</li></ul></li></ul><h4 id="2-çŸ­è¿›ç¨‹ä¼˜å…ˆ-x2F-çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ"><a href="#2-çŸ­è¿›ç¨‹ä¼˜å…ˆ-x2F-çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ" class="headerlink" title="2.çŸ­è¿›ç¨‹ä¼˜å…ˆ&#x2F;çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ"></a>2.çŸ­è¿›ç¨‹ä¼˜å…ˆ&#x2F;çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ</h4><p><strong>æœ‰æŠ¢å å¼</strong>ã€<strong>éæŠ¢å å¼</strong>çš„ä¸¤ç§æ–¹æ¡ˆ</p><h5 id="ä¼˜ç‚¹ï¼š-1"><a href="#ä¼˜ç‚¹ï¼š-1" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h5><ul><li>æœ€ä¼˜çš„å¹³å‡ç­‰å¾…æ—¶é—´</li></ul><h5 id="ç¼ºç‚¹ï¼š-2"><a href="#ç¼ºç‚¹ï¼š-2" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h5><ul><li>å¯èƒ½å¯¼è‡´é¥¥é¥¿<ul><li>è¿ç»­çš„çŸ­ä»»åŠ¡æµä¼š<strong>ä½¿é•¿ä»»åŠ¡é¥¥é¥¿</strong></li><li>çŸ­ä»»åŠ¡å¯ç”¨æ—¶ï¼Œä»»ä½•é•¿ä»»åŠ¡çš„CPUæ—¶é—´éƒ½ä¼šå¢åŠ å¹³å‡ç­‰å¾…æ—¶é—´</li></ul></li><li>éœ€è¦é¢„çŸ¥æœªæ¥<ul><li>æˆ‘ä»¬æ€ä¹ˆåœ¨è¿è¡Œè¿›ç¨‹ä¹‹å‰å°±æå‰çŸ¥é“è¿›ç¨‹è¦è¿è¡Œå¤šä¹…ï¼Ÿ<ul><li>æœ€ç®€å•çš„æ–¹æ³•â€”â€”è¯¢é—®ç”¨æˆ·ï¼Œå¦‚æœç”¨æˆ·æ’’è°ï¼Œå°±æ€æ­»è¿›ç¨‹</li><li>å¦‚æœç”¨äºä¸èƒ½ç»™å‡ºæ—¶é—´ï¼Œé‚£ä¹ˆOSè¿›è¡Œé¢„ä¼°(æ ¹æ®ä¹‹å‰çš„è®°å½•)</li></ul></li></ul></li></ul><h4 id="3-æœ€é«˜å“åº”æ¯”ä¼˜å…ˆ"><a href="#3-æœ€é«˜å“åº”æ¯”ä¼˜å…ˆ" class="headerlink" title="3.æœ€é«˜å“åº”æ¯”ä¼˜å…ˆ"></a>3.æœ€é«˜å“åº”æ¯”ä¼˜å…ˆ</h4><p>â€‹åœ¨2çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œè€ƒè™‘R ( R &#x3D; (w + s) &#x2F; s ) w:ç­‰å¾…æ—¶é—´ s:æ‰§è¡Œæ—¶é—´</p><h5 id="ä¼˜ç‚¹ï¼š-2"><a href="#ä¼˜ç‚¹ï¼š-2" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h5><ul><li>ä¸å¯æŠ¢å </li><li>å…³æ³¨è¿›ç¨‹ç­‰å¾…äº†å¤šé•¿æ—¶é—´</li><li>é˜²æ­¢æ— é™æœŸæ¨è¿Ÿ</li></ul><h5 id="ç¼ºç‚¹ï¼š-3"><a href="#ç¼ºç‚¹ï¼š-3" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h5><ul><li>éœ€è¦é¢„çŸ¥æœªæ¥<ul><li>æˆ‘ä»¬æ€ä¹ˆåœ¨è¿è¡Œè¿›ç¨‹ä¹‹å‰å°±æå‰çŸ¥é“è¿›ç¨‹è¦è¿è¡Œå¤šä¹…ï¼Ÿ<ul><li>æœ€ç®€å•çš„æ–¹æ³•â€”â€”è¯¢é—®ç”¨æˆ·ï¼Œå¦‚æœç”¨æˆ·æ’’è°ï¼Œå°±æ€æ­»è¿›ç¨‹</li><li>å¦‚æœç”¨äºä¸èƒ½ç»™å‡ºæ—¶é—´ï¼Œé‚£ä¹ˆOSè¿›è¡Œé¢„ä¼°(æ ¹æ®ä¹‹å‰çš„è®°å½•)</li></ul></li></ul></li></ul><h4 id="4-è½®è¯¢-RR"><a href="#4-è½®è¯¢-RR" class="headerlink" title="4.è½®è¯¢(RR)"></a>4.è½®è¯¢(RR)</h4><ul><li>ï»¿RR èŠ±é”€ï¼šé¢å¤–çš„<strong>ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>å¼€é”€</li><li>ï»¿æ—¶é—´é‡å­å¤ªå¤§<ul><li>ç­‰å¾…æ—¶é—´è¿‡é•¿</li><li>æé™æƒ…å†µé€€åŒ–æˆFCFS</li></ul></li><li>ï»¿æ—¶é—´é‡å­å¤ªå°<ul><li>ååº”è¿…é€Ÿä½†æ˜¯åˆ‡æ¢é¢‘ç¹ï¼Œå¼€é”€å¤§</li><li>ååé‡ç”±äºå¤§é‡çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å—åˆ°å½±å“</li></ul></li><li>ï»¿ç›®æ ‡ï¼š<ul><li>é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ—¶é—´é‡å­</li><li>ç»éªŒè§„åˆ™ï¼šç»´æŒä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å¤„äº1%ä»¥å†…</li></ul></li></ul><p>â€”â€”RRçš„ä¼˜åŒ–</p><ul><li>ï»¿å°±ç»ªé˜Ÿåˆ—è¢«åˆ’åˆ†æˆç‹¬ç«‹çš„é˜Ÿåˆ—ï¼š<ul><li>E.g. å‰å°ï¼ˆäº¤äº’ï¼‰, åå°ï¼ˆæ‰¹å¤„ç†ï¼‰</li></ul></li><li>ï»¿æ¯ä¸ªé˜Ÿåˆ—æ‹¥æœ‰è‡ªå·±çš„è°ƒåº¦ç­–ç•¥<ul><li>E.g. å‰å°ä¸€RRï¼Œåå°â€”FCFS</li></ul></li><li>ï»¿è°ƒåº¦å¿…é¡»åœ¨é˜Ÿåˆ—é—´è¿›è¡Œ<ul><li>å›ºå®šä¼˜å…ˆçº§</li><li>ï»¿å…ˆå¤„ç†å‰å°ï¼Œç„¶åå¤„ç†åå°</li><li>å¯èƒ½å¯¼è‡´é¥¥é¥¿</li><li>æ—¶é—´åˆ‡ç‰‡<ul><li>æ¯ä¸ªé˜Ÿåˆ—éƒ½å¾—åˆ°ä¸€ä¸ªç¡®å®šçš„èƒ½å¤Ÿè°ƒåº¦å…¶è¿›ç¨‹çš„CPUæ€»æ—¶é—´</li><li>E.g. 80%ç»™ä½¿ç”¨RRçš„å‰å°ï¼Œ20%ç»™ä½¿ç”¨FCFSçš„åå°</li></ul></li></ul></li></ul><h4 id="5-å¤šçº§åé¦ˆé˜Ÿåˆ—"><a href="#5-å¤šçº§åé¦ˆé˜Ÿåˆ—" class="headerlink" title="5.å¤šçº§åé¦ˆé˜Ÿåˆ—"></a>5.å¤šçº§åé¦ˆé˜Ÿåˆ—</h4><ul><li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åœ¨ä¸åŒé˜Ÿåˆ—ä¸­ç§»åŠ¨<ul><li>æ—¶é—´é‡å­å¤§å°éšä¼˜å…ˆçº§çº§åˆ«çš„å¢åŠ è€Œå¢åŠ </li><li>å¦‚æœä»»åŠ¡åœ¨å½“å‰çš„æ—¶é—´é‡å­ä¸­æ²¡æœ‰å®Œæˆï¼Œåˆ™é™åˆ°ä¸‹ä¸€ä¼˜å…ˆçº§</li></ul></li></ul><h5 id="ä¼˜ç‚¹ï¼š-3"><a href="#ä¼˜ç‚¹ï¼š-3" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h5><ul><li>CPUå¯†é›†å‹ä»»åŠ¡çš„ä¼˜å…ˆçº§ä¸‹é™å¾ˆå¿«</li><li>I&#x2F;Oå¯†é›†å‹ä»»åŠ¡åœç•™åœ¨é«˜ä¼˜å…ˆçº§</li></ul><h4 id="6-å…¬å¹³å…±äº«é˜Ÿåˆ—"><a href="#6-å…¬å¹³å…±äº«é˜Ÿåˆ—" class="headerlink" title="6.å…¬å¹³å…±äº«é˜Ÿåˆ—"></a>6.å…¬å¹³å…±äº«é˜Ÿåˆ—</h4><ul><li>FFSæ§åˆ¶ç”¨æˆ·å¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®<ul><li>ä¸€äº›ç”¨æˆ·ç»„æ¯”å…¶ä»–ç”¨æˆ·ç»„æ›´é‡è¦</li><li>ä¿è¯ä¸é‡è¦çš„ç»„æ— æ³•å„æ–­èµ„æº</li><li>æœªä½¿ç”¨çš„èµ„æºæŒ‰ç…§æ¯ä¸ªç»„æ‰€åˆ†é…çš„èµ„æºçš„æ¯”ä¾‹æ¥åˆ†é…</li><li>æ²¡æœ‰è¾¾åˆ°èµ„æºä½¿ç”¨ç‡ç›®æ ‡çš„ç»„è·å¾—æ›´é«˜çš„ä¼˜å…ˆçº§</li></ul></li></ul><h3 id="8-4å®æ—¶è°ƒåº¦"><a href="#8-4å®æ—¶è°ƒåº¦" class="headerlink" title="8.4å®æ—¶è°ƒåº¦"></a>8.4å®æ—¶è°ƒåº¦</h3><h4 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><p>â€‹æ­£ç¡®æ€§ä¾èµ–äºæ—¶é—´ä¸åŠŸèƒ½ä¸¤æ–¹é¢</p><p>â€‹<u>éœ€è¦ä¿è¯<strong>åŠæ—¶æ€§</strong></u>ï¼Œé€Ÿåº¦å’Œå¹³å‡æ€§èƒ½æ²¡é‚£ä¹ˆé‡è¦</p><ul><li><p>å¼ºå®æ—¶ç³»ç»Ÿ</p><ul><li>éœ€è¦åœ¨<u>ä¿è¯çš„æ—¶é—´å†…å®Œæˆé‡è¦çš„ä»»åŠ¡</u>ï¼Œå¿…é¡»å®Œæˆ</li></ul></li><li><p>å¼±å®æ—¶ç³»ç»Ÿ</p><ul><li>è¦æ±‚<u>é‡è¦çš„è¿›ç¨‹çš„ä¼˜å…ˆçº§æ›´é«˜</u>ï¼Œå°½é‡å®Œæˆï¼Œå¹¶éå¿…é¡»</li></ul></li><li><p>ç¡¬æ—¶é™</p><ul><li><p>å¦‚æœé”™è¿‡äº†æœ€åæœŸé™ï¼Œå¯èƒ½ä¼šå‘ç”Ÿç¾éš¾æ€§æˆ–éå¸¸ä¸¥é‡çš„åæœ</p></li><li><p>å¿…é¡»éªŒè¯ï¼šåœ¨æœ€åçš„æƒ…å†µä¸‹ä¹Ÿèƒ½å¤Ÿæ»¡è¶³æ—¶é™å—ï¼Ÿ</p></li><li><p>ä¿è¯ç¡®å®šæ€§</p></li></ul></li><li><p>è½¯æ—¶é™</p><ul><li><p>ç†æƒ³æƒ…å†µä¸‹ï¼Œæ—¶é™åº”è¯¥è¢«æœ€å¤§æ»¡è¶³ã€‚å¦‚æœæœ‰æ—¶é™æ²¡æœ‰è¢«æ»¡è¶³ï¼Œé‚£ä¹ˆå°±ç›¸åº”åœ°é™ä½è¦æ±‚ã€‚</p></li><li><p>å°½æœ€å¤§åŠªåŠ›å»ä¿è¯</p></li></ul></li></ul><h4 id="è°ƒåº¦å‡†åˆ™"><a href="#è°ƒåº¦å‡†åˆ™" class="headerlink" title="è°ƒåº¦å‡†åˆ™"></a>è°ƒåº¦å‡†åˆ™</h4><p>â€‹é™æ€ã€åŠ¨æ€ä¼˜å…ˆçº§è°ƒåº¦(åœ¨ç¨‹åºæ‰§è¡Œä¹‹å‰å°±ç¡®å®šè¿›ç¨‹çš„ä¼˜å…ˆçº§&#x2F;åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼˜å…ˆçº§ä¼šä¸æ–­å˜åŒ–)</p><h3 id="8-5å¤šå¤„ç†å™¨è°ƒåº¦"><a href="#8-5å¤šå¤„ç†å™¨è°ƒåº¦" class="headerlink" title="8.5å¤šå¤„ç†å™¨è°ƒåº¦"></a>8.5å¤šå¤„ç†å™¨è°ƒåº¦</h3><ul><li>ï»¿å¤šå¤„ç†å™¨çš„CPUè°ƒåº¦æ›´åŠ å¤æ‚<ul><li>å¤šä¸ªç›¸åŒçš„å•å¤„ç†å™¨ç»„æˆä¸€ä¸ªå¤šå¤„ç†å™¨</li><li>ä¼˜ç‚¹ï¼šè´Ÿè½½å…±äº«</li></ul></li><li>ï»¿å¯¹ç§°å¤šå¤„ç†å™¨(SMP)<ul><li>æ¯ä¸ªå¤„ç†å™¨è¿è¡Œè‡ªå·±çš„è°ƒåº¦ç¨‹åº</li><li>éœ€è¦åœ¨è°ƒåº¦ç¨‹åºä¸­åŒæ­¥</li></ul></li></ul><h3 id="8-6ä¼˜å…ˆçº§åè½¬"><a href="#8-6ä¼˜å…ˆçº§åè½¬" class="headerlink" title="8.6ä¼˜å…ˆçº§åè½¬"></a>8.6ä¼˜å…ˆçº§åè½¬</h3><p>â€‹ç°æœ‰ä¼˜å…ˆçº§ T1 &lt; T2 &lt; T3ï¼Œ</p><p>T3å’ŒT1éƒ½éœ€è¦ç”¨åˆ°ä¸€å—å…±äº«èµ„æºï¼ŒT3å…ˆæ‰§è¡Œï¼Œé”å®šäº†å…±äº«èµ„æºï¼ŒT1å†æ‰§è¡Œ(æŠ¢å äº†T3)ï¼Œè™½ç„¶T1ä¼˜å…ˆäºT3ï¼Œä½†æ˜¯T3æŠŠT1è¦ç”¨åˆ°çš„èµ„æºé”ä½äº†ï¼Œæ‰€ä»¥T1æ— æ³•æ‰§è¡Œå®Œæ¯•ï¼Œå› æ­¤è®©T3ç»§ç»­æ‰§è¡Œï¼Œæ­¤æ—¶è®©T2å†æ‰§è¡Œï¼Œä¼šæŠ¢å T3ï¼Œ<u>è¿™æ—¶å€™ï¼ŒT1éœ€è¦ç­‰å¾…T3ï¼ŒT3åœ¨ç­‰å¾…T2ï¼Œå°±å‡ºç°äº†ä¼˜å…ˆçº§åè½¬é—®é¢˜ï¼</u></p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>(å½“å‡ºç°èµ„æºæŠ¢å ç°è±¡æ—¶)ä½ä¼˜å…ˆçº§ä»»åŠ¡ç»§æ‰¿é«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„ä¼˜å…ˆçº§</li><li>ï»¿ä¼˜å…ˆçº§å¤©èŠ±æ¿ï¼š<ul><li>â€œèµ„æºâ€ çš„ä¼˜å…ˆçº§å’Œ â€œæ‰€æœ‰å¯ä»¥é”å®šè¯¥èµ„æºçš„ä»»åŠ¡ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„é‚£ä¸ªä»»åŠ¡â€ çš„ä¼˜å…ˆçº§ç›¸åŒ</li><li>é™¤éä¼˜å…ˆçº§é«˜äºç³»ç»Ÿä¸­æ‰€æœ‰è¢«é”å®šçš„èµ„æºçš„ä¼˜å…ˆçº§ä¸Šé™ï¼Œå¦åˆ™ä»»åŠ¡å°è¯•æ‰§è¡Œä¸´ç•ŒåŒºçš„æ—¶å€™ä¼šè¢«é˜»å¡</li><li>ï»¿æŒæœ‰æœ€é«˜ä¼˜å…ˆçº§ä¸Šé™ä¿¡å·é‡é”çš„ä»»åŠ¡ï¼Œä¼šç»§æ‰¿è¢«è¯¥é”æ‰€é˜³å¡çš„ä»»åŠ¡çš„ä¼˜å…ˆçº§</li></ul></li></ul><h2 id="Chapter9-åŒæ­¥"><a href="#Chapter9-åŒæ­¥" class="headerlink" title="Chapter9 åŒæ­¥"></a>Chapter9 åŒæ­¥</h2><h3 id="èƒŒæ™¯ï¼š"><a href="#èƒŒæ™¯ï¼š" class="headerlink" title="èƒŒæ™¯ï¼š"></a>èƒŒæ™¯ï¼š</h3><ul><li>ï»¿ç‹¬ç«‹çš„çº¿ç¨‹ï¼š<ul><li>ä¸å’Œå…¶ä»–çº¿ç¨‹å…±äº«èµ„æºæˆ–çŠ¶æ€</li><li>ç¡®å®šæ€§ï¼šä¸€è¾“å…¥çŠ¶æ€å†³å®šç»“æœ</li><li>å¯é‡ç°ï¼šä¸€ èƒ½å¤Ÿé‡ç°èµ·å§‹æ¡ä»¶ï¼ŒI&#x2F;0</li><li>è°ƒåº¦é¡ºåºä¸é‡è¦</li></ul></li><li>ï»¿åˆä½œçº¿ç¨‹ï¼š<ul><li>åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å…±äº«çŠ¶æ€</li><li>ä¸ç¡®å®šæ€§</li><li>ä¸å¯é‡ç°</li></ul></li><li>ï»¿ä¸ç¡®å®šæ€§å’Œä¸å¯é‡ç°æ„å‘³ç€bugå¯èƒ½æ˜¯é—´æ­‡æ€§å‘ç”Ÿçš„</li></ul><p>è¿›ç¨‹é—´åˆä½œå·¥ä½œçš„åŸå› ï¼š</p><ul><li>ï»¿è¿›ç¨‹&#x2F;çº¿ç¨‹ï¼Œè®¡ç®—æœº&#x2F;è®¾å¤‡éœ€è¦åˆä½œ</li><li>ï»¿ä¼˜ç‚¹1ï¼šå…±äº«èµ„æº<ul><li>ä¸€å°ç”µè„‘ï¼Œå¤šä¸ªç”¨æˆ·</li><li>ä¸€ä¸ªé“¶è¡Œå­˜æ¬¾ä½™é¢ï¼Œå¤šå°ATMæœº</li><li>åµŒå…¥å¼ç³»ç»Ÿï¼ˆæœºå™¨äººæ§åˆ¶ï¼šæ‰‹è‡‚å’Œæ‰‹çš„åè°ƒï¼‰</li></ul></li><li>ï»¿ä¼˜ç‚¹2ï¼šåŠ é€Ÿ<ul><li>I&#x2F;0æ“ä½œå’Œè®¡ç®—å¯ä»¥é‡å </li><li>å¤šå¤„ç†å™¨ ä¸€ å°†ç¨‹åºåˆ†æˆå¤šä¸ªéƒ¨åˆ†äº•è¡Œæ‰§è¡Œ</li></ul></li><li>ï»¿ä¼˜ç‚¹3ï¼šæ¨¡å—åŒ–<ul><li>å°†å¤§ç¨‹åºåˆ†è§£æˆå°ç¨‹åº</li></ul></li><li>ï»¿ä»¥ç¼–è¯‘ä¸ºä¾‹ï¼Œgccä¼šè°ƒç”¨cpp, cc1, cc2. as, ldï¼Œä½¿ç³»ç»Ÿæ˜“äºæ‰©å±•</li></ul><p>ä½†æ˜¯è¿›ç¨‹å¹¶å‘ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦å¯¹å…¶è¿›è¡Œè§£å†³</p><h3 id="ä¸€äº›æ¦‚å¿µï¼š"><a href="#ä¸€äº›æ¦‚å¿µï¼š" class="headerlink" title="ä¸€äº›æ¦‚å¿µï¼š"></a>ä¸€äº›æ¦‚å¿µï¼š</h3><h4 id="åŸå­æ“ä½œï¼š"><a href="#åŸå­æ“ä½œï¼š" class="headerlink" title="åŸå­æ“ä½œï¼š"></a>åŸå­æ“ä½œï¼š</h4><ul><li>ï»¿åŸå­æ“ä½œæ˜¯æŒ‡ä¸€æ¬¡ä¸å­˜åœ¨ä»»ä½•ä¸­æ–­æˆ–è€…å¤±è´¥çš„æ‰§è¡Œ<ul><li>è¯¥æ‰§è¡ŒæˆåŠŸç»“æŸ</li><li>æˆ–è€…æ ¹æœ¬æ²¡æœ‰æ‰§è¡Œ</li><li>å¹¶ä¸”ä¸åº”è¯¥å‘ç°ä»»ä½•<strong>éƒ¨åˆ†æ‰§è¡Œ</strong>çš„çŠ¶æ€</li></ul></li><li>ï»¿å®é™…ä¸Šæ“ä½œå¾€å¾€ä¸æ˜¯åŸå­çš„<ul><li>æœ‰äº›çœ‹ä¸Šå»æ˜¯åŸå­æ“ä½œï¼Œå®é™…ä¸Šä¸æ˜¯</li><li>è¿x++è¿™æ ·çš„ç®€å•è¯­å¥ï¼Œå®é™…ä¸Šæ˜¯ç”±3æ¡æŒ‡ä»¤æ„æˆçš„</li><li>æœ‰æ—¶å€™ç”šè‡³è¿å•æ¡æœºå™¨æŒ‡ä»¤éƒ½ä¸æ˜¯åŸå­çš„</li></ul></li></ul><h4 id="Critical-section-ï¼ˆä¸´ç•ŒåŒºï¼‰"><a href="#Critical-section-ï¼ˆä¸´ç•ŒåŒºï¼‰" class="headerlink" title="Critical section ï¼ˆä¸´ç•ŒåŒºï¼‰"></a>Critical section ï¼ˆä¸´ç•ŒåŒºï¼‰</h4><p>ä¸´ç•ŒåŒºæ˜¯æŒ‡è¿›ç¨‹ä¸­çš„ä¸€æ®µéœ€è¦è®¿é—®å…±äº«èµ„æºå¹¶ä¸”å½“å¦ä¸€ä¸ªè¿›ç¨‹å¤„äºç›¸åº”ä»£ç åŒºåŸŸæ—¶ä¾¿ä¸ä¼šè¢«æ‰§è¡Œçš„ä»£ç åŒºåŸŸ</p><h4 id="Mutual-exclusion-ï¼ˆäº’æ–¥ï¼‰"><a href="#Mutual-exclusion-ï¼ˆäº’æ–¥ï¼‰" class="headerlink" title="Mutual exclusion ï¼ˆäº’æ–¥ï¼‰"></a>Mutual exclusion ï¼ˆäº’æ–¥ï¼‰</h4><p>å½“ä¸€ä¸ªè¿›ç¨‹å¤„äºä¸´ç•ŒåŒºäº•è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œæ²¡æœ‰å…¶ä»–è¿›ç¨‹ä¼šå¤„äºä¸´ç•ŒåŒºå¹¶ä¸”è®¿é—®ä»»ä½•ç›¸åŒçš„å…±äº«èµ„æº</p><h4 id="Dead-lock-ï¼ˆæ­»é”ï¼‰"><a href="#Dead-lock-ï¼ˆæ­»é”ï¼‰" class="headerlink" title="Dead lock ï¼ˆæ­»é”ï¼‰"></a>Dead lock ï¼ˆæ­»é”ï¼‰</h4><p>ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„è¿›ç¨‹ï¼Œåœ¨ç›¸äº’ç­‰å¾…å®Œæˆç‰¹å®šä»»åŠ¡ï¼Œè€Œæœ€ç»ˆæ²¡æ³•å°†è‡ªèº«ä»»åŠ¡è¿›è¡Œä¸‹å»</p><h4 id="Starvationï¼ˆé¥¥é¥¿ï¼‰"><a href="#Starvationï¼ˆé¥¥é¥¿ï¼‰" class="headerlink" title="Starvationï¼ˆé¥¥é¥¿ï¼‰"></a>Starvationï¼ˆé¥¥é¥¿ï¼‰</h4><p>ä¸€ä¸ªå¯æ‰§è¡Œçš„è¿›ç¨‹ï¼Œè¢«è°ƒåº¦å™¨æŒç»­å¿½ç•¥ï¼Œä»¥è‡³äºè™½ç„¶å¤„äºå¯æ‰§è¡ŒçŠ¶æ€å´ä¸è¢«æ‰§è¡Œ</p><h4 id="Critical-section-ä¸´ç•ŒåŒºï¼‰"><a href="#Critical-section-ä¸´ç•ŒåŒºï¼‰" class="headerlink" title="Critical section  (ä¸´ç•ŒåŒºï¼‰"></a>Critical section  (ä¸´ç•ŒåŒºï¼‰</h4><p>ä¸´ç•ŒåŒºæ˜¯æŒ‡è¿›ç¨‹ä¸­çš„ä¸€æ®µéœ€è¦è®¿é—®å…±äº«èµ„æºäº•ä¸”å½“å¦ä¸€ä¸ªè¿›ç¨‹å¤„äºç›¸åº”ä»£ç åŒºåŸŸæ—¶ä¾¿ä¸ä¼šè¢«æ‰§è¡Œçš„ä»£ç åŒºåŸŸ</p><ul><li>ï»¿äº’æ–¥ï¼šåŒä¸€æ—¶é—´ä¸´ç•ŒåŒºä¸­æœ€å¤šå­˜åœ¨ä¸€ä¸ªçº¿ç¨‹</li><li>ï»¿Progressï¼šå¦‚æœä¸€ä¸ªçº¿ç¨‹æƒ³è¦è¿›å…¥ä¸´ç•ŒåŒºï¼Œé‚£ä¹ˆå®ƒæœ€ç»ˆä¼šæˆåŠŸ</li><li>æœ‰é™ç­‰å¾…ï¼šå¦‚æœä¸€ä¸ªçº¿ç¨‹iå¤„äºå…¥å£åŒºï¼Œé‚£ä¹ˆåœ¨içš„è¯·æ±‚è¢«æ¥å—ä¹‹å‰ï¼Œå…¶ä»–çº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºçš„æ—¶é—´æ˜¯æœ‰é™åˆ¶çš„</li><li>ï»¿æ— å¿™ç­‰å¾…ï¼ˆå¯é€‰)ï¼šå¦‚æœä¸€ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…è¿›å…¥ä¸´ç•ŒåŒºï¼Œé‚£ä¹ˆ<strong>åœ¨å®ƒå¯ä»¥è¿›å…¥ä¹‹å‰ä¼šè¢«æŒ‚èµ·</strong></li></ul><h4 id="Mutual-exclusionï¼ˆäº’æ–¥ï¼‰"><a href="#Mutual-exclusionï¼ˆäº’æ–¥ï¼‰" class="headerlink" title="Mutual exclusionï¼ˆäº’æ–¥ï¼‰"></a>Mutual exclusionï¼ˆäº’æ–¥ï¼‰</h4><p>å½“ä¸€ä¸ªè¿›ç¨‹å¤„äºä¸´ç•ŒåŒºå¹¶è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œæ²¡æœ‰å…¶ä»–è¿›ç¨‹ä¼šå¤„äºä¸´ç•ŒåŒºå¹¶ä¸”è®¿é—®ä»»ä½•ç›¸åŒçš„å…±äº«èµ„æº</p><h3 id="å®ç°å¯¹ä¸´ç•ŒåŒºä»£ç çš„ä¿æŠ¤"><a href="#å®ç°å¯¹ä¸´ç•ŒåŒºä»£ç çš„ä¿æŠ¤" class="headerlink" title="å®ç°å¯¹ä¸´ç•ŒåŒºä»£ç çš„ä¿æŠ¤"></a>å®ç°å¯¹ä¸´ç•ŒåŒºä»£ç çš„ä¿æŠ¤</h3><h4 id="æ–¹æ¡ˆ1â€”â€”ç¦ç”¨ç¡¬ä»¶ä¸­æ–­ï¼š"><a href="#æ–¹æ¡ˆ1â€”â€”ç¦ç”¨ç¡¬ä»¶ä¸­æ–­ï¼š" class="headerlink" title="æ–¹æ¡ˆ1â€”â€”ç¦ç”¨ç¡¬ä»¶ä¸­æ–­ï¼š"></a>æ–¹æ¡ˆ1â€”â€”ç¦ç”¨ç¡¬ä»¶ä¸­æ–­ï¼š</h4><ul><li>ï»¿æ²¡æœ‰ä¸­æ–­ï¼Œæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå› æ­¤æ²¡æœ‰å¹¶å‘<ul><li>ç¡¬ä»¶å°†ä¸­æ–­å¤„ç†å»¶è¿Ÿåˆ°ä¸­æ–­è¢«å¯ç”¨ä¹‹å</li><li>å¤§å¤šæ•°ç°ä»£è®¡ç®—æœºä½“ç³»ç»“æ„éƒ½æä¾›æŒ‡ä»¤æ¥å®Œæˆ</li></ul></li><li>ï»¿è¿›å…¥ä¸´ç•ŒåŒº<ul><li>ç¦ç”¨ä¸­æ–­</li></ul></li><li>ï»¿ç¦»å¼€ä¸´ç•ŒåŒº<ul><li>å¼€å¯ä¸­æ–­</li></ul></li></ul><h5 id="ç¼ºç‚¹ï¼š-4"><a href="#ç¼ºç‚¹ï¼š-4" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h5><ul><li>ï»¿ä¸€æ—¦ä¸­æ–­è¢«ç¦ç”¨ï¼Œçº¿ç¨‹å°±æ— æ³•è¢«åœæ­¢<ul><li>æ•´ä¸ªç³»ç»Ÿéƒ½ä¼šä¸ºä½ åœä¸‹æ¥</li><li>å¯èƒ½å¯¼è‡´å…¶ä»–çº¿ç¨‹å¤„äºé¥¥é¥¿çŠ¶æ€</li></ul></li><li>ï»¿è¦æ˜¯ä¸´ç•ŒåŒºå¯ä»¥ä»»æ„é•¿æ€ä¹ˆåŠ<ul><li>æ— æ³•é™åˆ¶å“åº”ä¸­æ–­æ‰€éœ€çš„æ—¶é—´(å¯èƒ½å­˜åœ¨ç¡¬ä»¶å½±å“ï¼‰</li></ul></li></ul><p>â€‹è¦å°å¿ƒä½¿ç”¨</p><ul><li>ä¸€èˆ¬åªèƒ½ç¦æ­¢å•CPUçš„ä¸­æ–­ï¼Œé‚£ä¹ˆé¢å¯¹å¤šCPUçš„æƒ…å†µå°±æ— æ³•ä½¿ ç¦ç”¨ç¡¬ä»¶ä¸­æ–­å¤±æ•ˆ</li></ul><h4 id="æ–¹æ¡ˆ2â€”â€”åŸºäºè½¯ä»¶çš„è§£å†³æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ2â€”â€”åŸºäºè½¯ä»¶çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ2â€”â€”åŸºäºè½¯ä»¶çš„è§£å†³æ–¹æ¡ˆ:"></a>æ–¹æ¡ˆ2â€”â€”åŸºäºè½¯ä»¶çš„è§£å†³æ–¹æ¡ˆ:</h4><ul><li>ï»¿ï»¿Dekkerç®—æ³• (1965ï¼‰ï¼šç¬¬ä¸€ä¸ªé’ˆå¯¹åŒçº¿ç¨‹ä¾‹å­çš„æ­£ç¡®è§£å†³æ–¹æ¡ˆ</li><li>ï»¿Bakeryç®—æ³• ( Lamport 1979ï¼‰ï¼šé’ˆå¯¹nçº¿ç¨‹çš„ä¸´ç•ŒåŒºé—®é¢˜è§£å†³æ–¹æ¡ˆ</li><li>ï»¿å¤æ‚<ul><li>éœ€è¦ä¸¤ä¸ªè¿›ç¨‹é—´çš„å…±äº«æ•°æ®é¡¹</li></ul></li><li>ï»¿éœ€è¦å¿™ç­‰å¾…<ul><li>æµªè´¹CPUæ—¶é—´</li></ul></li><li>ï»¿æ²¡æœ‰ç¡¬ä»¶ä¿è¯çš„æƒ…å†µä¸‹æ— çœŸæ­£çš„è½¯ä»¶è§£å†³æ–¹æ¡ˆ<ul><li>Petersonç®—æ³•éœ€è¦åŸå­çš„LOADå’ŒSTOREæŒ‡ä»¤</li></ul></li></ul><h4 id="æ–¹æ¡ˆ3â€”â€”æ›´é«˜çº§çš„æŠ½è±¡ï¼š"><a href="#æ–¹æ¡ˆ3â€”â€”æ›´é«˜çº§çš„æŠ½è±¡ï¼š" class="headerlink" title="æ–¹æ¡ˆ3â€”â€”æ›´é«˜çº§çš„æŠ½è±¡ï¼š"></a>æ–¹æ¡ˆ3â€”â€”æ›´é«˜çº§çš„æŠ½è±¡ï¼š</h4><ul><li>ï»¿å¤§å¤šæ•°ç°ä»£ä½“ç³»ç»“æ„éƒ½æä¾›ç‰¹æ®Šçš„åŸå­æ“ä½œæŒ‡ä»¤<ul><li>é€šè¿‡ç‰¹æ®Šçš„å†…å­˜è®¿é—®ç”µè·¯ï¼Œé’ˆå¯¹å•å¤„ç†å™¨å’Œå¤šå¤„ç†å™¨</li></ul></li><li>ï»¿ï»¿Test-and-Set æµ‹è¯•å’Œç½®ä½<ul><li>ä»å†…å­˜ä¸­è¯»å–å€¼</li><li>æµ‹è¯•è¯¥å€¼æ˜¯å¦ä¸º1ï¼ˆç„¶åè¿”å›çœŸæˆ–å‡ï¼‰</li><li>å†…å­˜å€¼è®¾ç½®ä¸º1</li></ul></li><li>ï»¿äº¤æ¢exchange<ul><li>äº¤æ¢å†…å­˜ä¸­çš„ä¸¤ä¸ªå€¼</li></ul></li></ul><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡Test-and-Set æˆ– exchange æ¥å®ç°å¹¶å‘çº¿ç¨‹çš„ç®¡ç†</p><h5 id="ä¼˜ç‚¹ï¼š-4"><a href="#ä¼˜ç‚¹ï¼š-4" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h5><ul><li>é€‚ç”¨äºå•å¤„ç†å™¨æˆ–è€…å…±äº«ä¸»å­˜çš„å¤šå¤„ç†å™¨ä¸­ä»»æ„æ•°é‡çš„è¿¸ç¨‹</li><li>ç®€å•å¹¶ä¸”å®¹æ˜“è¯æ˜</li><li>å¯ä»¥ç”¨äºæ”¯æŒå¤šä¸´ç•ŒåŒº</li></ul><h5 id="ç¼ºç‚¹ï¼š-5"><a href="#ç¼ºç‚¹ï¼š-5" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h5><ul><li>å¿™ç­‰å¾…æ¶ˆè€—å¤„ç†å™¨æ—¶é—´</li><li>å½“è¿›ç¨‹ç¦»å¼€ä¸´ç•ŒåŒºå¹¶ä¸”å¤šä¸ªè¿›ç¨‹åœ¨ç­‰å¾…çš„æ—¶å€™å¯èƒ½å¯¼è‡´<u>é¥¥é¥¿</u></li><li>æ­»é”</li><li>ï»¿å¦‚æœä¸€ä¸ªä½ä¼˜å…ˆçº§çš„è¿›ç¨‹æ‹¥æœ‰ä¸´ç•ŒåŒºå¹¶ä¸”ä¸€ä¸ªé«˜ä¼˜å…ˆçº§è¿›ç¨‹ä¹Ÿéœ€æ±‚ï¼Œé‚£ä¹ˆé«˜ä¼˜å…ˆçº§è¿›ç¨‹ä¼šè·å¾—å¤„ç†å™¨å¹¶ç­‰å¾…ä¸´ç•ŒåŒº</li></ul><h2 id="Chapter10-ä¿¡å·é‡å’Œç®¡ç¨‹"><a href="#Chapter10-ä¿¡å·é‡å’Œç®¡ç¨‹" class="headerlink" title="Chapter10 ä¿¡å·é‡å’Œç®¡ç¨‹"></a>Chapter10 ä¿¡å·é‡å’Œç®¡ç¨‹</h2><h3 id="èƒŒæ™¯ï¼š-1"><a href="#èƒŒæ™¯ï¼š-1" class="headerlink" title="èƒŒæ™¯ï¼š"></a>èƒŒæ™¯ï¼š</h3><ul><li>ï»¿å¹¶å‘é—®é¢˜ï¼šç«äº‰æ¡ä»¶ï¼ˆç«æ€æ¡ä»¶ï¼‰<ul><li>å¤šç¨‹åºå¹¶å‘å­˜åœ¨å¤§çš„é—®é¢˜</li></ul></li><li>ï»¿åŒæ­¥<ul><li>å¤šçº¿ç¨‹<strong>å…±äº«å…¬å…±æ•°æ®çš„åè°ƒæ‰§è¡Œ</strong></li><li>åŒ…æ‹¬äº’æ–¥ä¸æ¡ä»¶åŒæ­¥</li><li>äº’æ–¥ï¼šåœ¨åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œä¸´ç•ŒåŒº</li></ul></li><li>ï»¿ç¡®ä¿åŒæ­¥æ­£ç¡®å¾ˆéš¾ï¼Ÿ<ul><li>éœ€è¦é«˜å±‚æ¬¡çš„ç¼–ç¨‹æŠ½è±¡ï¼ˆå¦‚ï¼šé”ï¼‰</li><li>ä»åº•å±‚ç¡¬ä»¶æ”¯æŒç¼–è¯‘</li></ul></li></ul><h3 id="ä¿¡å·é‡ï¼š"><a href="#ä¿¡å·é‡ï¼š" class="headerlink" title="ä¿¡å·é‡ï¼š"></a>ä¿¡å·é‡ï¼š</h3><ul><li><p>æ˜¯ä¸€ä¸ªæ•´å½¢ï¼ˆsemï¼‰ï¼Œæœ‰ä¸¤ä¸ªåŸå­æ“ä½œ</p></li><li><p>P () :   sem å‡1ï¼Œå¦‚æœsem&lt;0ï¼Œ ç­‰å¾…ï¼Œå¦åˆ™ç»§ç»­</p></li><li><p>V () ï¼šsem åŠ 1ï¼Œå¦‚æœ sem&lt;&#x3D;0ï¼Œå”¤é†’ä¸€ä¸ªç­‰å¾…çš„P</p></li><li><p>ï»¿ä¿¡å·é‡æ˜¯è¢«ä¿æŠ¤çš„å˜é‡</p><ul><li>åˆå§‹åŒ–å®Œæˆåï¼Œå”¯ä¸€æ”¹å˜ä¸€ä¸ªä¿¡å·é‡çš„å€¼çš„åŠæ³•æ˜¯é€šè¿‡P0å’Œv0</li><li>æ“ä½œå¿…é¡»æ˜¯åŸå­</li></ul></li><li><p>ï»¿P () èƒ½å¤Ÿé˜»å¡ï¼ŒV () ä¸ä¼šé˜»å¡</p></li><li><p>ï»¿æˆ‘ä»¬å‡å®šä¿¡å·é‡æ˜¯   å…¬å¹³çš„</p><ul><li>æ²¡æœ‰çº¿ç¨‹è¢«é˜»å¡åœ¨P () if  V () è¢«æ— é™é¢‘ç¹è°ƒç”¨ï¼ˆå¯¹äºåŒä¸€ä¸ªä¿¡å·é‡ï¼‰</li><li>åœ¨å®è·µä¸­ï¼ŒFIFOç»å¸¸è¢«ä½¿ç”¨</li></ul></li><li><p>ï»¿ä¸¤ç§ç±»å‹ä¿¡å·é‡</p><ul><li>äºŒè¿›åˆ¶ä¿¡å·é‡ï¼šå¯ä»¥æ˜¯0æˆ–1</li><li>ä¸€èˆ¬&#x2F;è®¡æ•°ä¿¡å·é‡ï¼šå¯å–ä»»ä½•éè´Ÿå€¼</li><li>ä¸¤è€…ç›¸äº’è¡¨ç°(ç»™å®šä¸€ä¸ªå¯ä»¥å®ç°å¦ä¸€ä¸ª)</li></ul></li><li><p>ï»¿ä¿¡å·é‡å¯ä»¥ç”¨åœ¨2ä¸ªæ–¹é¢</p><ul><li>äº’æ–¥</li><li>æ¡ä»¶åŒæ­¥(è°ƒåº¦çº¦æŸä¸€ä¸€ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„äº‹æƒ…å‘ç”Ÿï¼‰</li></ul></li></ul><h3 id="ä¿¡å·é‡ç¼ºç‚¹ï¼š"><a href="#ä¿¡å·é‡ç¼ºç‚¹ï¼š" class="headerlink" title="ä¿¡å·é‡ç¼ºç‚¹ï¼š"></a>ä¿¡å·é‡ç¼ºç‚¹ï¼š</h3><ul><li>ä¿¡å·é‡çš„åŒç”¨é€”<ul><li>äº’æ–¥å’Œæ¡ä»¶åŒæ­¥</li><li>ä½†ç­‰å¾…æ¡ä»¶æ˜¯ç‹¬ç«‹çš„äº’æ–¥</li></ul></li><li>è¯»&#x2F;å¼€å‘ä»£ç æ¯”è¾ƒå›°éš¾<ul><li>ç¨‹åºå‘˜å¿…é¡»éå¸¸ç²¾é€šä¿¡å·é‡</li></ul></li><li>å®¹æ˜“å‡ºé”™<ul><li>ä½¿ç”¨çš„ä¿¡å·é‡å·±ç»è¢«å¦ä¸€ä¸ªçº¿ç¨‹å ç”¨</li><li>å¿˜è®°é‡Šæ”¾ä¿¡å·é‡</li></ul></li><li>ä¸èƒ½å¤Ÿå¤„ç†æ­»é”é—®é¢˜</li></ul><h3 id="ç®¡ç¨‹"><a href="#ç®¡ç¨‹" class="headerlink" title="ç®¡ç¨‹"></a>ç®¡ç¨‹</h3><ul><li><p>ï»¿ä»€ä¹ˆæ˜¯ç®¡ç¨‹</p><ul><li>ä¸€ä¸ªé”ï¼šæŒ‡å®šä¸´ç•ŒåŒº</li><li>0æˆ–è€…å¤šä¸ªæ¡ä»¶å˜é‡ï¼šç­‰å¾…&#x2F;é€šçŸ¥ä¿¡å·é‡ç”¨äºç®¡ç†å¹¶å‘è®¿é—®å…±äº«æ•°æ®</li></ul></li><li><p>ï»¿ä¸€èˆ¬æ–¹æ³•</p><ul><li>æ”¶é›†åœ¨å¯¹è±¡&#x2F;æ¨¡å—ä¸­çš„ç›¸å…³å…±äº«æ•°æ®</li><li>å®šä¹‰æ–¹æ³•æ¥è®¿é—®å…±äº«æ•°æ®</li></ul></li><li><p>ï»¿ï»¿Lock</p><ul><li>Lock::Acquireï¼ˆ ä¸€ ç­‰å¾…ç›´åˆ°é”å¯ç”¨ï¼Œç„¶åæŠ¢å é”</li><li>Lock::Release ï¼ˆä¸€é‡Šæ”¾é”ï¼Œå”¤é†’ç­‰å¾…è€…å¦‚æœæœ‰</li></ul></li><li><p>ï»¿ï»¿Condition Variable</p><ul><li><p>å…è®¸ç­‰å¾…çŠ¶æ€è¿›å…¥ä¸´ç•ŒåŒº</p><ul><li>ï»¿å…è®¸å¤„äºç­‰å¾…ï¼ˆç¡çœ ï¼‰çš„çº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒº</li><li>ï»¿æŸä¸ªæ—¶åˆ»åŸå­é‡Šæ”¾é”è¿›å…¥ç¡çœ </li></ul></li><li><p>Wait () operation</p><ul><li>ï»¿é‡Šæ”¾é”ï¼Œç¡çœ ï¼Œé‡æ–°è·å¾—é”è¿”å›å</li></ul></li><li><p>ï»¿ï»¿Signal () operation ( or broadcast () operation )</p><ul><li>å”¤é†’ç­‰å¾…è€…ï¼ˆæˆ–è€…æ‰€æœ‰ç­‰å¾…è€…ï¼‰ï¼Œå¦‚æœæœ‰</li></ul></li></ul></li></ul><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/IMG_C86C23D6FA1D-1.jpeg" alt="IMG_C86C23D6FA1D-1" style="zoom:50%;" /><h3 id="ç»å…¸åŒæ­¥é—®é¢˜"><a href="#ç»å…¸åŒæ­¥é—®é¢˜" class="headerlink" title="ç»å…¸åŒæ­¥é—®é¢˜"></a>ç»å…¸åŒæ­¥é—®é¢˜</h3><h4 id="è¯»è€…â€”å†™è€…é—®é¢˜ï¼š"><a href="#è¯»è€…â€”å†™è€…é—®é¢˜ï¼š" class="headerlink" title="è¯»è€…â€”å†™è€…é—®é¢˜ï¼š"></a>è¯»è€…â€”å†™è€…é—®é¢˜ï¼š</h4><ul><li><p>åŠ¨æœº</p><ul><li>å…±äº«æ•°æ®çš„è®¿é—®</li></ul></li><li><p>ä¸¤ç§ç±»å‹ä½¿ç”¨è€…</p><ul><li>è¯»è€…ï¼šä¸éœ€è¦ä¿®æ”¹æ•°æ®</li><li>å†™è€…ï¼šè¯»å–å’Œä¿®æ”¹æ•°æ®</li></ul></li><li><p>é—®é¢˜çš„çº¦æŸ</p><ul><li>å…è®¸åŒä¸€æ—¶é—´æœ‰å¤šä¸ªè¯»è€…ï¼Œä½†åœ¨ä»»ä½•æ—¶å€™åªæœ‰ä¸€ä¸ªå†™è€…</li><li>å½“æ²¡æœ‰å†™è€…æ˜¯è¯»è€…æ‰èƒ½è®¿é—®æ•°æ®</li><li>å½“æ²¡æœ‰è¯»è€…å’Œå†™è€…æ—¶å†™è€…æ‰èƒ½è®¿é—®æ•°æ®</li><li>åœ¨ä»»ä½•æ—¶å€™åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ“ä½œå…±äº«å˜é‡</li></ul></li><li><p>ï»¿å¤šä¸ªå¹¶å‘è¿›ç¨‹çš„æ•°æ®é›†å…±äº«</p><ul><li>è¯»è€…ä¸€åªè¯»æ•°æ®é›†ï¼›ä»–ä»¬ä¸æ‰§è¡Œä»»ä½•æ›´æ–°</li><li>å†™è€…-å¯ä»¥è¯»å–å’Œå†™å…¥</li></ul></li><li><p>ï»¿å…±äº«æ•°æ®</p><ul><li>æ•°æ®é›†</li><li>ä¿¡å·é‡CountMutexåˆå§‹åŒ–ä¸º1</li><li>ä¿¡å·é‡WriteMutexåˆå§‹åŒ–ä¸º1</li><li>æ•´æ•° Rcount åˆå§‹åŒ–ä¸º0</li></ul></li></ul><h5 id="è¯»è€…ä¼˜å…ˆå®ç°-ä½¿ç”¨ä¿¡å·é‡æ–¹å¼-ï¼š"><a href="#è¯»è€…ä¼˜å…ˆå®ç°-ä½¿ç”¨ä¿¡å·é‡æ–¹å¼-ï¼š" class="headerlink" title="è¯»è€…ä¼˜å…ˆå®ç°(ä½¿ç”¨ä¿¡å·é‡æ–¹å¼)ï¼š"></a>è¯»è€…ä¼˜å…ˆå®ç°(ä½¿ç”¨ä¿¡å·é‡æ–¹å¼)ï¼š</h5><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/IMG_4D5569A45E16-1.jpeg" alt="IMG_4D5569A45E16-1" style="zoom:50%;" /><h4 id="å“²å­¦å®¶å°±é¤é—®é¢˜ï¼š"><a href="#å“²å­¦å®¶å°±é¤é—®é¢˜ï¼š" class="headerlink" title="å“²å­¦å®¶å°±é¤é—®é¢˜ï¼š"></a>å“²å­¦å®¶å°±é¤é—®é¢˜ï¼š</h4><h2 id="Chapter11-æ­»é”"><a href="#Chapter11-æ­»é”" class="headerlink" title="Chapter11 æ­»é”"></a>Chapter11 æ­»é”</h2><h3 id="æ­»é”é—®é¢˜ï¼š"><a href="#æ­»é”é—®é¢˜ï¼š" class="headerlink" title="æ­»é”é—®é¢˜ï¼š"></a>æ­»é”é—®é¢˜ï¼š</h3><p>â€‹ä¸€ç»„é˜»å¡çš„è¿›ç¨‹æŒæœ‰ä¸€ç§èµ„æº ç­‰å¾…è·å– å¦ä¸€ä¸ªè¿›ç¨‹æ‰€å æœ‰çš„ä¸€ä¸ªèµ„æºã€‚</p><h3 id="ç³»ç»Ÿæ¨¡å‹ï¼š"><a href="#ç³»ç»Ÿæ¨¡å‹ï¼š" class="headerlink" title="ç³»ç»Ÿæ¨¡å‹ï¼š"></a>ç³»ç»Ÿæ¨¡å‹ï¼š</h3><h4 id="å¯é‡å¤ä½¿ç”¨çš„èµ„æº"><a href="#å¯é‡å¤ä½¿ç”¨çš„èµ„æº" class="headerlink" title="å¯é‡å¤ä½¿ç”¨çš„èµ„æº"></a>å¯é‡å¤ä½¿ç”¨çš„èµ„æº</h4><ul><li><p>ï»¿åœ¨ä¸€ä¸ªæ—¶é—´åªèƒ½ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ä¸”ä¸èƒ½è¢«åˆ é™¤</p></li><li><p>ï»¿è¿›ç¨‹è·å¾—èµ„æºï¼Œåæ¥é‡Šæ”¾ç”±å…¶ä»–è¿›ç¨‹é‡ç”¨</p></li><li><p>ï»¿å¤„ç†å™¨ï¼ŒI&#x2F;Oé€šé“ï¼Œä¸»å’Œå‰¯å­˜å‚¨å™¨ï¼Œè®¾å¤‡å’Œæ•°æ®ç»“æ„ï¼Œå¦‚æ–‡ä»¶ï¼Œæ•°æ®åº“å’Œä¿¡å·é‡</p></li><li><p>ï»¿å¦‚æœæ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰ä¸€ä¸ªèµ„æºå¹¶è¯·æ±‚å…¶å®ƒèµ„æºï¼Œæ­»é”å¯èƒ½å‘ç”Ÿ</p><h4 id="ä½¿ç”¨èµ„æº"><a href="#ä½¿ç”¨èµ„æº" class="headerlink" title="ä½¿ç”¨èµ„æº"></a>ä½¿ç”¨èµ„æº</h4></li><li><p>ï»¿ï»¿åˆ›å»ºå’Œé”€æ¯</p></li><li><p>ï»¿åœ¨I&#x2F;Oç¼“å†²åŒºçš„ä¸­æ–­ï¼Œä¿¡å·ï¼Œæ¶ˆæ¯ï¼Œä¿¡æ¯</p></li><li><p>ï»¿å¦‚æœæ¥æ”¶æ¶ˆæ¯é˜³å¡å¯èƒ½ä¼šå‘ç”Ÿæ­»é”</p></li><li><p>ï»¿å¯èƒ½å°‘è§çš„ç»„åˆäº‹ä»¶ä¼šå¼•èµ·æ­»é”</p></li></ul><h3 id="æ­»é”ç‰¹å¾ï¼š"><a href="#æ­»é”ç‰¹å¾ï¼š" class="headerlink" title="æ­»é”ç‰¹å¾ï¼š"></a>æ­»é”ç‰¹å¾ï¼š</h3><p>æ­»é”å‡ºç°çš„å¿…è¦æ¡ä»¶ï¼š</p><h4 id="1ã€-äº’æ–¥ï¼š"><a href="#1ã€-äº’æ–¥ï¼š" class="headerlink" title="1ã€ äº’æ–¥ï¼š"></a>1ã€ äº’æ–¥ï¼š</h4><p>è¿›ç¨‹è¦æ±‚å¯¹æ‰€åˆ†é…çš„èµ„æºï¼ˆå¦‚æ‰“å°æœºï¼‰è¿›è¡Œæ’ä»–æ€§æ§åˆ¶ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…æŸèµ„æºä»…ä¸ºä¸€ä¸ªè¿›ç¨‹æ‰€å æœ‰ã€‚æ­¤æ—¶è‹¥æœ‰å…¶ä»–è¿›ç¨‹è¯·æ±‚è¯¥èµ„æºï¼Œåˆ™è¯·æ±‚è¿›ç¨‹åªèƒ½ç­‰å¾…ã€‚</p><h4 id="2ã€å ç”¨å¹¶ç­‰å¾…ï¼š"><a href="#2ã€å ç”¨å¹¶ç­‰å¾…ï¼š" class="headerlink" title="2ã€å ç”¨å¹¶ç­‰å¾…ï¼š"></a>2ã€å ç”¨å¹¶ç­‰å¾…ï¼š</h4><p>è¿›ç¨‹å·²ç»ä¿æŒäº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºå·²è¢«å…¶ä»–è¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯·æ±‚è¿›ç¨‹è¢«é˜»å¡ï¼Œä½†å¯¹è‡ªå·±å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</p><h4 id="3ã€æ— æŠ¢å "><a href="#3ã€æ— æŠ¢å " class="headerlink" title="3ã€æ— æŠ¢å :"></a>3ã€æ— æŠ¢å :</h4><p>è¿›ç¨‹æ‰€è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œæ¯•ä¹‹å‰ï¼Œä¸èƒ½è¢«å…¶ä»–è¿›ç¨‹å¼ºè¡Œå¤ºèµ°ï¼Œå³åªèƒ½ç”±è·å¾—è¯¥èµ„æºçš„è¿›ç¨‹è‡ªå·±æ¥é‡Šæ”¾ï¼ˆåªèƒ½æ˜¯ä¸»åŠ¨é‡Šæ”¾)ã€‚</p><h4 id="4ã€å¾ªç¯ç­‰å¾…"><a href="#4ã€å¾ªç¯ç­‰å¾…" class="headerlink" title="4ã€å¾ªç¯ç­‰å¾…:"></a>4ã€å¾ªç¯ç­‰å¾…:</h4><p>å­˜åœ¨ä¸€ç§è¿›ç¨‹èµ„æºçš„å¾ªç¯ç­‰å¾…é“¾ï¼Œé“¾ä¸­æ¯ä¸€ä¸ªè¿›ç¨‹å·²è·å¾—çš„èµ„æºåŒæ—¶è¢« é“¾ä¸­ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€è¯·æ±‚ã€‚å³å­˜åœ¨ä¸€ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„è¿›ç¨‹é›†åˆ{Pl, P2, â€¦, pn}ï¼Œå…¶ä¸­Piç­‰ å¾…çš„èµ„æºè¢«P(i+1)å æœ‰ï¼ˆi&#x3D;0, 1, â€¦, n-1)ï¼ŒPnç­‰å¾…çš„èµ„æºè¢«P0å æœ‰ï¼›</p><h3 id="æ­»é”å¤„ç†æ–¹æ³•ï¼š"><a href="#æ­»é”å¤„ç†æ–¹æ³•ï¼š" class="headerlink" title="æ­»é”å¤„ç†æ–¹æ³•ï¼š"></a>æ­»é”å¤„ç†æ–¹æ³•ï¼š</h3><h4 id="æ­»é”é¢„é˜²ï¼š"><a href="#æ­»é”é¢„é˜²ï¼š" class="headerlink" title="æ­»é”é¢„é˜²ï¼š"></a>æ­»é”é¢„é˜²ï¼š</h4><p>ç ´åä»»æ„æ­»é”å‡ºç°çš„å¿…è¦æ¡ä»¶ï¼š</p><ul><li><p>äº’æ–¥â€”â€”å…±äº«èµ„æºä¸æ˜¯å¿…é¡»çš„ï¼Œå¿…é¡»å ç”¨éå…±äº«èµ„æºã€‚</p></li><li><p>å ç”¨å¹¶ç­‰å¾…â€”â€”å¿…é¡»ä¿è¯å½“ä¸€ä¸ªè¿›ç¨‹è¯·æ±‚çš„èµ„æºï¼Œå®ƒä¸æŒæœ‰ä»»ä½•å…¶ä»–èµ„æºã€‚</p><ul><li>éœ€è¦è¿›ç¨‹è¯·æ±‚å¹¶åˆ†é…å…¶æ‰€æœ‰èµ„æºï¼Œå®ƒå¼€å§‹æ‰§è¡Œä¹‹å‰æˆ–å…è®¸è¿›ç¨‹è¯·æ±‚èµ„æºä»…å½“è¿›ç¨‹æ²¡æœ‰èµ„æºã€‚</li><li>èµ„æºåˆ©ç”¨ç‡ä½;å¯èƒ½å‘ç”Ÿé¥¥é¥¿ã€‚</li></ul><p></p></li><li><p>æ— æŠ¢å </p><ul><li>å¦‚æœè¿›ç¨‹å æœ‰æŸäº›èµ„æºï¼Œå¹¶è¯·æ±‚å…¶å®ƒä¸èƒ½è¢«ç«‹å³åˆ†é…çš„èµ„æºï¼Œåˆ™é‡Šæ”¾å½“å‰æ­£å æœ‰çš„èµ„æº</li><li>è¢«æŠ¢å èµ„æºæ·»åŠ åˆ°èµ„æºåˆ—è¡¨ä¸­</li><li>åªæœ‰å½“å®ƒèƒ½å¤Ÿè·å¾—æ—§çš„èµ„æºä»¥åŠå®ƒè¯·æ±‚æ–°çš„èµ„æºï¼Œè¿›ç¨‹å¯ä»¥å¾—åˆ°æ‰§è¡Œ</li></ul></li><li><p>å¾ªç¯ç­‰å¾… â€”å¯¹æ‰€æœ‰èµ„æºç±»å‹è¿›è¡Œ<u><strong>æ’åº</strong></u>ï¼Œå¹¶<u><strong>è¦æ±‚æ¯ä¸ªè¿›ç¨‹æŒ‰ç…§èµ„æºçš„é¡ºåºè¿›è¡Œç”³è¯·</strong></u>ã€‚</p></li></ul><h4 id="æ­»é”é¿å…ï¼š"><a href="#æ­»é”é¿å…ï¼š" class="headerlink" title="æ­»é”é¿å…ï¼š"></a>æ­»é”é¿å…ï¼š</h4><p><u>éœ€è¦ç³»ç»Ÿå…·æœ‰ä¸€äº›é¢å¤–çš„å…ˆéªŒä¿¡æ¯æä¾›ã€‚</u></p><ul><li><p>ï»¿ï»¿æœ€ç®€å•å’Œæœ€æœ‰æ•ˆçš„æ¨¡å¼æ˜¯è¦æ±‚æ¯ä¸ªè¿›ç¨‹å£°æ˜å®ƒå¯èƒ½éœ€è¦çš„æ¯ä¸ªç±»å‹èµ„æºçš„<u>æœ€å¤§æ•°ç›®</u>ã€‚</p></li><li><p>ï»¿èµ„æºçš„åˆ†é…çŠ¶æ€æ˜¯é€šè¿‡é™å®š<u>æä¾›</u>ä¸<u>åˆ†é…</u>çš„èµ„æºæ•°é‡ï¼Œå’Œè¿›ç¨‹çš„<u>æœ€å¤§éœ€æ±‚</u>ã€‚</p></li><li><p>ï»¿æ­»é”é¿å…ç®—æ³•<u>åŠ¨æ€æ£€æŸ¥</u>çš„èµ„æºåˆ†é…çŠ¶æ€ï¼Œä»¥ç¡®ä¿æ°¸è¿œä¸ä¼šæœ‰ä¸€ä¸ªç¯å½¢ç­‰å¾…çŠ¶æ€ã€‚</p></li><li><p>ï»¿å½“ä¸€ä¸ªè¿›ç¨‹è¯·æ±‚å¯ç”¨èµ„æºï¼Œç³»ç»Ÿå¿…é¡»åˆ¤æ–­ç«‹å³åˆ†é…æ˜¯å¦èƒ½<strong>ä½¿ç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€</strong>ã€‚</p></li><li><p>ï»¿ç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€æŒ‡ï¼šé’ˆå¯¹æ‰€æœ‰è¿›ç¨‹ï¼Œå­˜åœ¨å®‰å…¨åºåˆ—ã€‚</p></li><li><p>ï»¿åºåˆ—&lt;P1ï¼Œp2,â€¦â€¦ï¼ŒPN&gt;æ˜¯å®‰å…¨çš„ï¼šé’ˆå¯¹æ¯ä¸ªPi, Piè¦æ±‚çš„èµ„æºèƒ½å¤Ÿç”±å½“å‰å¯ç”¨çš„èµ„æº+æ‰€æœ‰çš„ Pj æŒæœ‰çš„èµ„æºæ¥æ»¡è¶³ï¼Œå…¶ä¸­j&lt;iã€‚</p><ul><li>å¦‚æœ Pi èµ„æºçš„éœ€æ±‚ä¸æ˜¯ç«‹å³å¯ç”¨ï¼Œé‚£ä¹ˆ Pi å¯ä»¥ç­‰åˆ°æ‰€æœ‰ Pj å®Œæˆã€‚</li><li>å½“ Pi å®Œæˆåï¼ŒP i + 1 å¯ä»¥å¾—åˆ°æ‰€éœ€è¦çš„èµ„æºï¼Œæ‰§è¡Œï¼Œè¿”å›æ‰€åˆ†é…çš„èµ„æºï¼Œå¹¶ç»ˆæ­¢ã€‚</li><li>ï»¿ç”¨åŒæ ·çš„æ–¹æ³•ã€‚Pi+2, Pi+3ï¼Œå’Œ Pn èƒ½è·å¾—å…¶æ‰€éœ€çš„èµ„æºã€‚</li></ul></li></ul><h5 id="é“¶è¡Œå®¶ç®—æ³•-é€šè¿‡åˆç†åˆ†é…èµ„æºä½¿å¾—æ­»é”é¿å…"><a href="#é“¶è¡Œå®¶ç®—æ³•-é€šè¿‡åˆç†åˆ†é…èµ„æºä½¿å¾—æ­»é”é¿å…" class="headerlink" title="é“¶è¡Œå®¶ç®—æ³•(é€šè¿‡åˆç†åˆ†é…èµ„æºä½¿å¾—æ­»é”é¿å…)"></a>é“¶è¡Œå®¶ç®—æ³•(é€šè¿‡åˆç†åˆ†é…èµ„æºä½¿å¾—æ­»é”é¿å…)</h5><h4 id="æ­»é”æ£€æµ‹ï¼š"><a href="#æ­»é”æ£€æµ‹ï¼š" class="headerlink" title="æ­»é”æ£€æµ‹ï¼š"></a>æ­»é”æ£€æµ‹ï¼š</h4><p>â€‹å°±æ˜¯é“¶è¡Œå®¶ç®—æ³•ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½åœ¨ç°æœ‰èµ„æºä¸‹ï¼Œè®©æ‰€æœ‰è¿›ç¨‹éƒ½è·‘é€š(æ—¶é—´å¤æ‚åº¦å¤§ã€å¼€é”€å¤§)</p><h4 id="æ­»é”æ¢å¤ï¼š"><a href="#æ­»é”æ¢å¤ï¼š" class="headerlink" title="æ­»é”æ¢å¤ï¼š"></a>æ­»é”æ¢å¤ï¼š</h4><ul><li>ï»¿æ–¹æ³•1ï¼šç»ˆæ­¢æ‰€æœ‰çš„æ­»é”è¿›ç¨‹</li><li>ï»¿æ–¹æ³•2ï¼šåœ¨ä¸€ä¸ªæ—¶é—´å†…ç»ˆæ­¢ä¸€ä¸ªè¿›ç¨‹ç›´åˆ°æ­»é”æ¶ˆé™¤<ul><li>ç»ˆæ­¢è¿›ç¨‹çš„é¡ºåºåº”è¯¥æ˜¯ï¼š<ul><li>è¿›ç¨‹çš„ä¼˜å…ˆçº§</li><li>è¿›ç¨‹è¿è¡Œäº†å¤šä¹…ä»¥åŠéœ€è¦å¤šå°‘æ—¶é—´æ‰èƒ½å®Œæˆ</li><li>è¿›ç¨‹å ç”¨çš„èµ„æº</li><li>è¿›ç¨‹å®Œæˆéœ€è¦çš„èµ„æº</li><li>å¤šå°‘è¿›ç¨‹éœ€è¦è¢«ç»ˆæ­¢</li><li>è¿¸ç¨‹æ˜¯äº¤äº’è¿˜æ˜¯æ‰¹å¤„ç†</li></ul></li></ul></li></ul><h2 id="Chapter12è¿›ç¨‹é—´é€šä¿¡-IPCâ€”â€”Inter-Process-Communication"><a href="#Chapter12è¿›ç¨‹é—´é€šä¿¡-IPCâ€”â€”Inter-Process-Communication" class="headerlink" title="Chapter12è¿›ç¨‹é—´é€šä¿¡(IPCâ€”â€”Inter Process Communication)"></a>Chapter12è¿›ç¨‹é—´é€šä¿¡(IPCâ€”â€”Inter Process Communication)</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><h4 id="é€šä¿¡æ¨¡å‹"><a href="#é€šä¿¡æ¨¡å‹" class="headerlink" title="é€šä¿¡æ¨¡å‹"></a>é€šä¿¡æ¨¡å‹</h4><ul><li><p>ï»¿è¿›ç¨‹é€šä¿¡çš„æœºåˆ¶åŠåŒæ­¥</p></li><li><p>ï»¿ä¸ä½¿ç”¨å…±äº«å˜é‡çš„è¿¸ç¨‹é€šä¿¡</p></li><li><p>ï»¿ï»¿IPC facility æä¾›2ä¸ªæ“ä½œï¼š</p><ul><li>send(messageï¼‰ä¸€æ¶ˆæ¯å¤§å°å›ºå®šæˆ–è€…å¯å˜</li><li>ï»¿ï»¿receive (message)</li></ul></li><li><p>ï»¿å¦‚æœPå’ŒQæƒ³é€šä¿¡ï¼Œéœ€è¦ï¼š</p><ul><li>åœ¨å®ƒä»¬ä¹‹é—´å»ºç«‹é€šä¿¡é“¾è·¯</li><li>é€šè¿‡ send&#x2F;receiveäº¤æ¢æ¶ˆæ¯</li></ul></li><li><p>ï»¿é€šä¿¡é“¾è·¯çš„å®ç°</p><ul><li><p>ç‰©ç†ï¼ˆä¾‹å¦‚ï¼Œ<strong>å…±äº«å†…å­˜</strong>ï¼Œ<strong>ç¡¬ä»¶æ€»çº¿</strong>ï¼‰</p></li><li><p>ï»¿é€»è¾‘ï¼ˆä¾‹å¦‚ï¼Œé€»è¾‘å±æ€§ï¼‰</p></li></ul></li></ul><h4 id="ç›´æ¥ä¸é—´æ¥é€šä¿¡"><a href="#ç›´æ¥ä¸é—´æ¥é€šä¿¡" class="headerlink" title="ç›´æ¥ä¸é—´æ¥é€šä¿¡"></a>ç›´æ¥ä¸é—´æ¥é€šä¿¡</h4><h5 id="ç›´æ¥é€šä¿¡"><a href="#ç›´æ¥é€šä¿¡" class="headerlink" title="ç›´æ¥é€šä¿¡:"></a>ç›´æ¥é€šä¿¡:</h5><ul><li>è¿›ç¨‹å¿…é¡»æ­£ç¡®çš„å‘½åå¯¹æ–¹ï¼š<ul><li>send (P, message)        ä¸€ å‘é€ä¿¡æ¯åˆ°è¿›ç¨‹P</li><li>receive (Q, messaseï¼‰ ä¸€ ä»è¿›ç¨‹Qæ¥å—æ¶ˆæ¯</li></ul></li><li>é€šä¿¡é“¾è·¯çš„å±æ€§:<ul><li>è‡ªåŠ¨å»ºç«‹é“¾è·¯</li><li>ä¸€æ¡é“¾è·¯æ°å¥½å¯¹åº”ä¸€å¯¹é€šä¿¡è¿›ç¨‹</li><li>æ¯å¯¹è¿›ç¨‹ä¹‹é—´åªæœ‰ä¸€ä¸ªé“¾æ¥å­˜åœ¨</li><li>é“¾æ¥å¯ä»¥æ˜¯å•å‘çš„ï¼Œä½†é€šå¸¸ä¸ºåŒå‘çš„</li></ul></li></ul><h5 id="é—´æ¥é€šä¿¡"><a href="#é—´æ¥é€šä¿¡" class="headerlink" title="é—´æ¥é€šä¿¡:"></a>é—´æ¥é€šä¿¡:</h5><ul><li>ï»¿å®šå‘ä»æ¶ˆæ¯é˜Ÿåˆ—æ¥æ”¶æ¶ˆæ¯<ul><li>æ¯ä¸ªæ¶ˆæ¯é˜Ÿåˆ—éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ID</li><li>åªæœ‰å®ƒä»¬å…±äº«äº†ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿›ç¨‹æ‰èƒ½å¤Ÿé€šä¿¡</li></ul></li><li>ï»¿é€šä¿¡é“¾è·¯çš„å±æ€§<ul><li>åªæœ‰è¿›ç¨‹å…±äº«ä¸€ä¸ªå…±åŒçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ‰å»ºç«‹é“¾è·¯</li><li>é“¾æ¥å¯ä»¥ä¸è®¸å¤šè¿›ç¨‹ç›¸å…³è”</li><li>æ¯å¯¹è¿›ç¨‹å¯ä»¥å…±äº«å¤šä¸ªé€šä¿¡é“¾è·¯</li><li>è¿æ¥å¯ä»¥æ˜¯å•å‘æˆ–åŒå‘</li></ul></li><li>ï»¿æ“ä½œ<ul><li>åˆ›å»ºä¸€ä¸ªæ–°çš„æ¶ˆæ¯é˜Ÿåˆ—</li><li>é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å‘é€å’Œæ¥æ”¶æ¶ˆæ¯</li><li>é”€æ¯æ¶ˆæ¯é˜Ÿåˆ—</li></ul></li><li>ï»¿åŸè¯­çš„å®šä¹‰å¦‚ä¸‹ï¼š<ul><li>send ï¼ˆA, messageï¼‰ä¸€ å‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—A</li><li>receive (A,messageï¼‰ä¸€ ä»é˜Ÿåˆ— Aæ¥å—æ¶ˆæ¯</li></ul></li></ul><h4 id="é˜»å¡ä¸éé˜»å¡ï¼š"><a href="#é˜»å¡ä¸éé˜»å¡ï¼š" class="headerlink" title="é˜»å¡ä¸éé˜»å¡ï¼š"></a>é˜»å¡ä¸éé˜»å¡ï¼š</h4><p>â€‹é˜»å¡ï¼šå¼‚æ­¥</p><p>â€‹éé˜»å¡ï¼šåŒæ­¥(å‘é€æ–¹ä¸€å®šè¦ç­‰åˆ°æ¥æ”¶æ–¹æ”¶åˆ°æ¶ˆæ¯åå†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ)</p><h4 id="é€šä¿¡é“¾è·¯ç¼“å†²ï¼š"><a href="#é€šä¿¡é“¾è·¯ç¼“å†²ï¼š" class="headerlink" title="é€šä¿¡é“¾è·¯ç¼“å†²ï¼š"></a>é€šä¿¡é“¾è·¯ç¼“å†²ï¼š</h4><ul><li>é˜Ÿåˆ—çš„æ¶ˆæ¯è¢«é™„åŠ åˆ°é“¾è·¯ï¼›å¯ä»¥æ˜¯ä»¥ä¸‹3ç§æ–¹å¼ä¹‹ä¸€ï¼š</li></ul><ol><li><p>ï»¿ï»¿ï»¿0å®¹é‡<br> å‘é€æ–¹å¿…é¡»ç­‰å¾…æ¥æ”¶æ–¹ (rendezvous)</p></li><li><p>ï»¿ï»¿æœ‰é™å®¹é‡ â€”â€” n messagesçš„æœ‰é™é•¿åº¦</p><p>â€‹å¦‚æœé˜Ÿåˆ—æ»¡ï¼Œå‘é€æ–¹å¿…é¡»ç­‰å¾…</p></li><li><p>ï»¿ï»¿ï»¿æ— é™å®¹é‡â€”â€”æ— é™é•¿åº¦<br> å‘é€æ–¹ä¸éœ€è¦ç­‰å¾…</p></li></ol><h3 id="ä¿¡å·"><a href="#ä¿¡å·" class="headerlink" title="ä¿¡å·"></a>ä¿¡å·</h3><ul><li><p><u><strong>è½¯ä»¶</strong></u>ä¸­æ–­é€šçŸ¥äº‹ä»¶å¤„ç†</p></li><li><p>Examples: SIGFPE, SIGKILL, SIGUSR1, SIGSTOP, SIGCONT</p></li><li><p>ï»¿æ¥æ”¶åˆ°ä¿¡å·æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ</p><ul><li>Catch:æŒ‡å®šä¿¡å·å¤„ç†å‡½æ•°è¢«è°ƒç”¨</li><li>Ignoreï¼šä¾é æ“ä½œç³»ç»Ÿçš„é»˜è®¤æ“ä½œ</li></ul></li><li><p>ï»¿ï»¿Example: Abort, memory dump, suspend or resume process</p><ul><li>Maskï¼šé—­å¡ä¿¡å·å› æ­¤ä¸ä¼šä¼ é€<ul><li>ï»¿å¯èƒ½æ˜¯æš‚æ—¶çš„ï¼ˆå½“å¤„ç†åŒæ ·ç±»å‹çš„ä¿¡å·ï¼‰</li></ul></li></ul></li><li><p>ï»¿ä¸è¶³<br> ä¸èƒ½ä¼ è¾“è¦äº¤æ¢çš„ä»»ä½•æ•°æ®</p></li></ul><h3 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h3><p>â€‹ä¸»è¦æ˜¯ä¸ºäº† å®ç°ä½¿ä¸€ä¸ªè¿›ç¨‹çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªè¿›ç¨‹çš„è¾“å…¥(è¿™ä¸¤ä¸ªè¿›ç¨‹éƒ½æ˜¯shellè¿›ç¨‹çš„å­è¿›ç¨‹ï¼Œshellè¿›ç¨‹ä¸ºå®ƒä»¬ä¹‹é—´çš„é€šä¿¡åˆ›å»ºé€šé“)</p><h3 id="æ¶ˆæ¯é˜Ÿåˆ—"><a href="#æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—"></a>æ¶ˆæ¯é˜Ÿåˆ—</h3><p>â€‹<a href="https://tangjiayang.github.io/2023/06/02/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">https://tangjiayang.github.io/2023/06/02/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/</a></p><p>â€‹ä¸€ç§é—´æ¥é€šä¿¡æ–¹å¼</p><h3 id="å…±äº«å†…å­˜"><a href="#å…±äº«å†…å­˜" class="headerlink" title="å…±äº«å†…å­˜"></a>å…±äº«å†…å­˜</h3><ul><li><p>è¿›ç¨‹</p><ul><li>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç§æœ‰åœ°å€ç©ºé—´</li><li>åœ¨æ¯ä¸ªåœ°å€ç©ºé—´å†…ï¼Œæ˜ç¡®åœ°è®¾ç½®äº†å…±äº«å†…å­˜æ®µ</li></ul></li><li><p>ï»¿ä¼˜ç‚¹</p><ul><li>å¿«é€Ÿã€æ–¹ä¾¿åœ°å…±äº«æ•°æ®</li></ul></li><li><p>ï»¿ä¸è¶³</p><ul><li>å¿…é¡»åŒæ­¥æ•°æ®è®¿é—®</li></ul></li></ul><p></p><h2 id="Chapter13-æ–‡ä»¶ç³»ç»Ÿ"><a href="#Chapter13-æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="Chapter13 æ–‡ä»¶ç³»ç»Ÿ"></a>Chapter13 æ–‡ä»¶ç³»ç»Ÿ</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><h4 id="æ–‡ä»¶ç³»ç»Ÿå’Œæ–‡ä»¶"><a href="#æ–‡ä»¶ç³»ç»Ÿå’Œæ–‡ä»¶" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿå’Œæ–‡ä»¶"></a>æ–‡ä»¶ç³»ç»Ÿå’Œæ–‡ä»¶</h4><ul><li><p>æ–‡ä»¶ç³»ç»Ÿï¼šä¸€ç§ç”¨äºæŒä¹…æ€§å­˜å‚¨çš„ç³»ç»ŸæŠ½è±¡</p><ul><li>åœ¨å­˜å‚¨å™¨ä¸Šï¼šç»„ç»‡ã€æ§åˆ¶ã€å¯¼èˆªã€è®¿é—®å’Œæ£€ç´¢æ•°æ®</li><li>å¤§å¤šæ•°è®¡ç®—æœºç³»ç»ŸåŒ…å«æ–‡ä»¶ç³»ç»Ÿ</li><li>ä¸ªäººç”µè„‘ã€æœåŠ¡å™¨ã€ç¬”è®°æœ¬ç”µè„‘</li><li>iPod.Tivo &#x2F;æœºé¡¶ç›’ã€æ‰‹æœº&#x2F;æŒä¸Šç”µè„‘</li><li>Google å¯èƒ½æ˜¯ç”±ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿæ„æˆçš„</li></ul></li><li><p>æ–‡ä»¶ï¼šæ–‡ä»¶ç³»ç»Ÿä¸­<strong>ä¸€ä¸ªå•å…ƒçš„ç›¸å…³æ•°æ®åœ¨æ“ä½œç³»ç»Ÿä¸­çš„æŠ½è±¡</strong></p></li></ul><h5 id="æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½ï¼š"><a href="#æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½ï¼š" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½ï¼š"></a>æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½ï¼š</h5><ul><li>ï»¿åˆ†é…æ–‡ä»¶ç£ç›˜ç©ºé—´<ul><li>ç®¡ç†<strong>æ–‡ä»¶å—</strong>ï¼ˆå“ªä¸€å—å±äºå“ªä¸€ä¸ªæ–‡ä»¶ï¼‰</li><li>ç®¡ç†<strong>ç©ºé—²ç©ºé—´</strong>(å“ªä¸€å—æ˜¯ç©ºé—²çš„ï¼‰</li><li>åˆ†é…ç®—æ³•ï¼ˆç­–ç•¥ï¼‰</li></ul></li><li>ï»¿ç®¡ç†æ–‡ä»¶é›†åˆ<ul><li><strong>å®šä½</strong>æ–‡ä»¶åŠå…¶å†…å®¹</li><li><strong>å‘½å</strong>ï¼šé€šè¿‡åå­—æ‰¾åˆ°æ–‡ä»¶çš„æ¥å£</li><li>æœ€å¸¸è§ï¼šåˆ†å±‚æ–‡ä»¶ç³»ç»Ÿ</li><li>æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼ˆç»„ç»‡æ–‡ä»¶çš„ä¸åŒæ–¹å¼ï¼‰</li></ul></li><li>ï»¿æä¾›çš„ä¾¿åˆ©åŠç‰¹å¾<ul><li><strong>ä¿æŠ¤</strong>ï¼šåˆ†å±‚æ¥ä¿æŠ¤æ•°æ®å®‰å…¨</li><li><strong>å¯é æ€§&#x2F;æŒä¹…æ€§</strong>ï¼šä¿æŒæ–‡ä»¶çš„æŒä¹…å³ä½¿å‘ç”Ÿå´©æºƒã€åª’ä½“é”™è¯¯ã€æ”»å‡»ç­‰</li></ul></li></ul><h5 id="æ–‡ä»¶å’Œå—ï¼š"><a href="#æ–‡ä»¶å’Œå—ï¼š" class="headerlink" title="æ–‡ä»¶å’Œå—ï¼š"></a>æ–‡ä»¶å’Œå—ï¼š</h5><ul><li>ï»¿æ–‡ä»¶å±æ€§ï¼š<ul><li>åç§°ã€ç±»å‹ã€ä½ç½®ã€å¤§å°ï¼Œä¿æŠ¤ã€åˆ›å»ºè€…ã€åˆ›å»ºæ—¶é—´ã€æœ€è¿‘ä¿®æ”¹æ—¶é—´ã€â€¦</li></ul></li><li>ï»¿æ–‡ä»¶å¤´ï¼š<ul><li>åœ¨å­˜å‚¨å…ƒæ•°æ®ä¸­ä¿å­˜äº†æ¯ä¸ªæ–‡ä»¶çš„ä¿¡æ¯</li><li>ä¿å­˜æ–‡ä»¶çš„å±æ€§</li><li>è·Ÿè¸ªå“ªä¸€å—å­˜å‚¨å—å±äºé€»è¾‘ä¸Šæ–‡ä»¶ç»“æ„çš„å“ªä¸ªåç§»</li></ul></li></ul><h4 id="æ–‡ä»¶æè¿°ç¬¦"><a href="#æ–‡ä»¶æè¿°ç¬¦" class="headerlink" title="æ–‡ä»¶æè¿°ç¬¦"></a>æ–‡ä»¶æè¿°ç¬¦</h4><ul><li><p>éœ€è¦å…ƒæ•°æ®æ•°æ®æ¥ç®¡ç†æ‰“å¼€æ–‡ä»¶ï¼š</p><ul><li>æ–‡ä»¶æŒ‡é’ˆï¼š<u>æŒ‡å‘æœ€è¿‘çš„ä¸€æ¬¡è¯»å†™ä½ç½®</u>ï¼Œæ¯ä¸ªæ‰“å¼€äº†è¿™ä¸ªæ–‡ä»¶çš„è¿›ç¨‹éƒ½æœ‰è¿™ä¸ªæŒ‡é’ˆ</li><li>æ–‡ä»¶æ‰“å¼€è®¡æ•°ï¼šè®°å½•æ–‡ä»¶æ‰“å¼€çš„æ¬¡æ•°â€”â€”å½“æœ€åä¸€ä¸ªè¿›ç¨‹å…³é—­äº†æ–‡ä»¶æ—¶ï¼Œå…è®¸å°†å…¶ä»æ‰“å¼€æ–‡ä»¶è¡¨ä¸­ç§»é™¤</li><li>æ–‡ä»¶ç£ç›˜ä½ç½®ï¼šç¼“å­˜æ•°æ®è®¿é—®ä¿¡æ¯</li><li>è®¿é—®æƒé™ï¼šæ¯ä¸ªç¨‹åºè®¿é—®æ¨¡å¼ä¿¡æ¯</li></ul></li><li><p>ï»¿ç”¨æˆ·æ€ä¹ˆè®¿é—®æ–‡ä»¶</p><ul><li>åœ¨ç³»ç»Ÿå±‚é¢éœ€è¦çŸ¥é“ç”¨æˆ·çš„è®¿é—®æ¨¡å¼ï¼š</li><li>ï»¿é¡ºåºè®¿é—®ï¼šæŒ‰å­—èŠ‚ä¾æ¬¡è¯»å–<ul><li>å‡ ä¹æ‰€æœ‰çš„è®¿é—®éƒ½æ˜¯è¿™ç§æ–¹å¼</li></ul></li><li>ï»¿éšæœºè®¿é—®ï¼šä»ä¸­é—´è¯»å†™<ul><li>ä¸å¸¸ç”¨ï¼Œä½†æ˜¯ä»ç„¶é‡è¦ï¼ä¾‹å¦‚ï¼Œè™šæ‹Ÿå†…å­˜æ”¯æŒæ–‡ä»¶ï¼šå†…å­˜é¡µå­˜å‚¨åœ¨æ–‡ä»¶ä¸­</li><li>æ›´åŠ å¿«é€Ÿ ä¸€ ä¸å¸Œæœ›è·å–æ–‡ä»¶ä¸­é—´çš„å†…å®¹çš„æ—¶å€™ä¹Ÿå¿…é¡»å…ˆè·å–å—å†…æ‰€æœ‰å­—èŠ‚ã€‚</li></ul></li><li>åŸºäºå†…å®¹è®¿é—®ï¼šé€šè¿‡ç‰¹å¾<ul><li>è®¸å¤šç³»ç»Ÿä¸æä¾›æ­¤ç§è®¿é—®æ–¹å¼ï¼Œç›¸åï¼Œæ•°æ®åº“æ˜¯å»ºç«‹åœ¨ç´¢å¼•å†…å®¹çš„ç£ç›˜è®¿é—®ä¸Šï¼ˆéœ€è¦é«˜æ•ˆçš„éšæœºè®¿é—®)</li></ul></li></ul></li><li><p>ï»¿ï»¿å¤šç”¨æˆ·ç³»ç»Ÿä¸­çš„æ–‡ä»¶å…±äº«ï¼š</p><ul><li>ï»¿è®¿é—®æ§åˆ¶<ul><li>è°èƒ½å¤Ÿè·å¾—å“ªäº›æ–‡ä»¶çš„å“ªäº›è®¿é—®æƒé™</li><li>è®¿é—®æ¨¡å¼ï¼šè¯»ã€å†™ã€æ‰§è¡Œã€åˆ é™¤ã€åˆ—ä¸¾ç­‰</li></ul></li><li>ï»¿æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL)<ul><li>&lt;æ–‡ä»¶å®ä½“ï¼Œæƒé™&gt;</li></ul></li><li>ï»¿Unix æ¨¡å¼<ul><li>ã€ˆç”¨æˆ·|ç»„|æ‰€æœ‰äººï¼Œè¯»|å†™|å¯æ‰§è¡Œã€‰</li><li>ç”¨æˆ·IDè¯†åˆ«ç”¨æˆ·ï¼Œè¡¨æ˜æ¯ä¸ªç”¨æˆ·æ‰€å…è®¸çš„æƒé™åŠä¿æŠ¤æ¨¡å¼</li><li>ç»„IDå…è®¸ç”¨æˆ·ç»„æˆç»„ï¼Œå¹¶æŒ‡å®šäº†ç»„è®¿é—®æƒé™</li></ul></li><li>ï»¿æŒ‡å®šå¤šç”¨æˆ·&#x2F;å®¢æˆ·å¦‚ä½•åŒæ—¶è®¿é—®å…±äº«æ–‡ä»¶<ul><li>å’Œè¿‡ç¨‹åŒæ­¥ç®—æ³•ç›¸ä¼¼</li><li>å› ç£ç›˜I&#x2F;0å’Œç½‘ç»œå»¶è¿Ÿè€Œè®¾è®¡ç®€å•</li></ul></li><li>ï»¿ï»¿Unix æ–‡ä»¶ç³»ç»Ÿ(UFS) è¯­ä¹‰<ul><li>å¯¹æ‰“å¼€æ–‡ä»¶çš„å†™å…¥å†…å®¹ç«‹å³å¯¹å…¶ä»–æ‰“å¼€åŒä¸€æ–‡ä»¶çš„å…¶ä»–ç”¨æˆ·å¯è§</li><li>å…±äº«æ–‡ä»¶æŒ‡é’ˆå…è®¸å¤šç”¨æˆ·åŒæ—¶è¯»å–å’Œå†™å…¥æ–‡ä»¶</li></ul></li><li>ï»¿ä¼šè¯è¯­ä¹‰<ul><li>å†™å…¥å†…å®¹åªæœ‰å½“æ–‡ä»¶å…³é—­æ—¶å¯è§</li></ul></li><li>ï»¿é”<ul><li>ä¸€äº›æ“ä½œç³»ç»Ÿå’Œæ–‡ä»¶ç³»ç»Ÿæä¾›è¯¥åŠŸèƒ½</li></ul></li></ul></li></ul><h4 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h4><ul><li><p>æ–‡ä»¶ä»¥ç›®å½•çš„æ–¹å¼ç»„ç»‡èµ·æ¥</p></li><li><p>ç›®å½•æ˜¯ä¸€ç±»ç‰¹æ®Šçš„æ–‡ä»¶</p><ul><li>æ¯ä¸ªç›®å½•éƒ½åŒ…å«äº†ä¸€å¼ è¡¨&lt;name, pointer to file header&gt;</li></ul></li><li><p>ç›®å½•å’Œæ–‡ä»¶çš„æ ‘å‹ç»“æ„</p><ul><li>æ—©æœŸçš„æ–‡ä»¶ç³»ç»Ÿæ˜¯æ‰å¹³çš„ ï¼ˆåªæœ‰ä¸€å±‚ç›®å½•ï¼‰</li></ul></li><li><p>ï»¿å…¸å‹æ“ä½œ</p><ul><li>æœç´¢æ–‡ä»¶</li><li>åˆ›å»ºæ–‡ä»¶</li><li>åˆ é™¤æ–‡ä»¶</li><li>æšä¸¾ç›®å½•</li><li>é‡å‘½åæ–‡ä»¶</li><li>åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­éå†ä¸€ä¸ªè·¯å¾„</li></ul></li><li><p>ï»¿æ“ä½œç³»ç»Ÿåº”è¯¥åªå…è®¸å†…æ ¸æ¨¡å¼ä¿®æ”¹ç›®å½•</p><ul><li>ç¡®ä¿æ˜ å°„çš„å®Œæ•´æ€§</li><li>åº”ç”¨ç¨‹åºèƒ½å¤Ÿè¯»ç›®å½• ï¼ˆå¦‚1s)</li></ul></li><li><p>ï»¿åå­—è§£æï¼šé€»è¾‘åå­—è½¬æ¢æˆç‰©ç†èµ„æºï¼ˆå¦‚æ–‡ä»¶ï¼‰çš„è¿‡ç¨‹</p><ul><li>åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼šåˆ°å®é™…æ–‡ä»¶çš„æ–‡ä»¶åï¼ˆè·¯å¾„ï¼‰</li><li>éå†æ–‡ä»¶ç›®å½•ç›´åˆ°æ‰¾åˆ°ç›®æ ‡æ–‡ä»¶</li></ul></li><li><p>ï»¿ä¸¾ä¾‹ï¼šè§£æ â€œ&#x2F;bin&#x2F;lsâ€</p><ul><li>è¯»å–rootçš„æ–‡ä»¶å¤´ï¼ˆåœ¨ç£ç›˜å›ºå®šä½ç½®ï¼‰</li><li>è¯»å–rootçš„æ•°æ®å—ï¼šæœç´¢ â€œbinâ€ é¡¹</li><li>è¯»å–binçš„æ–‡ä»¶å¤´</li><li>è¯»å–binçš„æ•°æ®å—ï¼šæœç´¢ â€œlsâ€ é¡¹</li><li>è¯»å–lsçš„æ–‡ä»¶å¤´</li></ul></li><li><p>ï»¿å½“å‰å·¥ä½œç›®å½•</p><ul><li>æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæŒ‡å‘ä¸€ä¸ªæ–‡ä»¶ç›®å½•ç”¨äºè§£ææ–‡ä»¶å</li><li>å…è®¸ç”¨æˆ·æŒ‡å®šç›¸å¯¹è·¯å¾„æ¥ä»£æ›¿ç»å¯¹è·¯å¾„</li></ul></li></ul><h4 id="æ–‡ä»¶åˆ«å"><a href="#æ–‡ä»¶åˆ«å" class="headerlink" title="æ–‡ä»¶åˆ«å"></a>æ–‡ä»¶åˆ«å</h4><h5 id="åŸºæœ¬æ¦‚å¿µ-1"><a href="#åŸºæœ¬æ¦‚å¿µ-1" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h5><ul><li><p>ä¸¤ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶åå…³è”åŒä¸€ä¸ªæ–‡ä»¶</p></li><li><p>ï»¿ç¡¬é“¾æ¥ï¼š<strong>å¤šä¸ªæ–‡ä»¶é¡¹æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶</strong></p></li><li><p>ï»¿è½¯é“¾æ¥ï¼šä»¥â€œå¿«æ·æ–¹å¼â€æŒ‡å‘å…¶ä»–æ–‡ä»¶(**â€œ<u>å¿«æ·æ–¹å¼æ–‡ä»¶çš„å†…å®¹æ˜¯å¦ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„å</u>**â€)</p></li><li><p>ï»¿é€šè¿‡å­˜å‚¨çœŸå®æ–‡ä»¶çš„é€»è¾‘åç§°æ¥å®ç°</p></li></ul><h4 id="æ–‡ä»¶ç³»ç»Ÿç§ç±»"><a href="#æ–‡ä»¶ç³»ç»Ÿç§ç±»" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿç§ç±»"></a>æ–‡ä»¶ç³»ç»Ÿç§ç±»</h4><ul><li><p>ï»¿ç£ç›˜æ–‡ä»¶ç³»ç»Ÿ</p><ul><li>æ–‡ä»¶å­˜å‚¨åœ¨æ•°æ®å­˜å‚¨è®¾å¤‡ä¸Šï¼Œå¦‚ç£ç›˜ã€‚</li><li>ä¾‹å¦‚ï¼šFAT, NTFS, ext2&#x2F;3ï¼Œ IS09660ï¼Œç­‰</li></ul></li><li><p>ï»¿æ•°æ®åº“æ–‡ä»¶ç³»ç»Ÿ</p><ul><li>æ–‡ä»¶æ ¹æ®å…¶ç‰¹å¾æ˜¯å¯è¢«å¯»å€ï¼ˆè¾¨è¯†ï¼‰çš„</li><li>ä¾‹å¦‚ï¼šwinFS</li></ul></li><li><p>ï»¿æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿ</p><ul><li>è®°å½•æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹&#x2F;äº‹ä»¶</li><li>ä¾‹å¦‚ï¼šjournaling file system</li></ul></li><li><p>ï»¿ç½‘ç»œ&#x2F;åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</p><ul><li><p>ï»¿æ–‡ä»¶å¯ä»¥é€šè¿‡ç½‘ç»œè¢«å…±äº«</p><ul><li>æ–‡ä»¶ä½äºè¿œç¨‹æœåŠ¡å™¨</li><li>å®¢æˆ·ç«¯è¿œç¨‹æŒ‚è½½æœåŠ¡å™¨æ–‡ä»¶ç³»ç»Ÿ</li><li>æ ‡å‡†ç³»ç»Ÿæ–‡ä»¶è®¿é—®è¢«è½¬æ¢æˆè¿œç¨‹è®¿é—®</li><li>æ ‡å‡†æ–‡ä»¶å…±äº«åè®®ï¼šNFS for Unix, CIFS for windows</li></ul></li><li><p>ï»¿åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„é—®é¢˜</p><ul><li>å®¢æˆ·ç«¯å’Œå®¢æˆ·ç«¯ä¸Šçš„ç”¨æˆ·è¾¨åˆ«èµ·æ¥å¾ˆå¤æ‚</li><li>ä¾‹å¦‚ï¼ŒNFSæ˜¯ä¸å®‰å…¨çš„</li><li><strong>ä¸€è‡´æ€§é—®é¢˜</strong></li><li>é”™è¯¯å¤„ç†æ¨¡å¼</li></ul></li><li><p>ä¾‹å¦‚ï¼šNFS, SMB, AFS, GFS</p></li></ul></li><li><p>ï»¿ç‰¹æ®Š&#x2F;è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</p></li></ul><h3 id="è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ"><a href="#è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ"></a>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</h3><ul><li><p>åˆ†å±‚ç»“æ„</p><ul><li>ä¸Šå±‚ï¼šè™šæ‹Ÿ(é€»è¾‘)æ–‡ä»¶ç³»ç»Ÿ</li><li>åº•å±‚ï¼šç‰¹å®šæ–‡ä»¶ç³»ç»Ÿæ¨¡å—</li></ul></li><li><p>ï»¿ç›®çš„</p><ul><li>å¯¹æ‰€æœ‰ä¸åŒæ–‡ä»¶ç³»ç»Ÿçš„æŠ½è±¡(è®©ä¸Šå±‚ä½¿ç”¨ç»Ÿä¸€çš„æ¥å£å¯¹ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œç»Ÿä¸€ç®¡ç†)</li></ul></li><li><p>ï»¿åŠŸèƒ½</p><ul><li>æä¾›ç›¸åŒçš„æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿæ¥å£</li><li>ç®¡ç†æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿå…³è”çš„æ•°æ®ç»“æ„</li><li>é«˜æ•ˆæŸ¥è¯¢ä¾‹ç¨‹ï¼Œéå†æ–‡ä»¶ç³»ç»Ÿ</li><li>ä¸ç‰¹å®šæ–‡ä»¶ç³»ç»Ÿæ¨¡å—çš„äº¤äº’</li></ul></li><li><p>å®ç°</p><ul><li>ï»¿å·æ§åˆ¶å— (Unix: â€œsuperblockâ€ï¼‰<ul><li>æ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸€ä¸ª</li><li>æ–‡ä»¶ç³»ç»Ÿè¯¦ç»†ä¿¡æ¯</li><li>å—ã€å—å¤§å°ï¼Œç©ºä½™å—ã€è®¡æ•°&#x2F;æŒ‡é’ˆç­‰</li></ul></li><li>ï»¿æ–‡ä»¶æ§åˆ¶å— (Unixï¼š â€vnodeâ€ or â€œinodeâ€ï¼‰<ul><li>æ¯ä¸ªæ–‡ä»¶ä¸€ä¸ª</li><li>æ–‡ä»¶è¯¦ç»†ä¿¡æ¯</li><li>è®¸å¯ã€æ‹¥æœ‰è€…ã€å¤§å°ã€æ•°æ®åº“ä½ç½®ç­‰</li></ul></li><li>ï»¿ç›®å½•èŠ‚ç‚¹ (Linux: â€dentryâ€ï¼‰<ul><li>æ¯ä¸ªç›®å½•é¡¹ä¸€ä¸ªï¼ˆç›®å½•å’Œæ–‡ä»¶ï¼‰</li><li>å°†ç›®å½•é¡¹æ•°æ®ç»“æ„åŠæ ‘å‹å¸ƒå±€ç¼–ç æˆæ ‘å‹æ•°æ®ç»“æ„</li><li>æŒ‡å‘æ–‡ä»¶æ§åˆ¶å—ã€çˆ¶èŠ‚ç‚¹ã€é¡¹ç›®åˆ—è¡¨ç­‰</li></ul></li></ul></li><li><p>æ–‡ä»¶ç³»ç»Ÿæ•°æ®ç»“æ„</p><ul><li>å·æ§åˆ¶å—ï¼ˆæ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸€ä¸ªï¼‰</li><li>æ–‡ä»¶æ§åˆ¶å—ï¼ˆæ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªï¼‰</li><li>ç›®å½•èŠ‚ç‚¹(æ¯ä¸ªç›®å½•é¡¹ä¸€ä¸ª)</li></ul></li><li><p>ï»¿æŒç»­å­˜å‚¨åœ¨äºŒçº§å­˜å‚¨ä¸­</p><ul><li>åˆ†é…åœ¨å­˜å‚¨è®¾å¤‡ä¸­çš„æ•°æ®å—ä¸­</li></ul></li><li><p>ï»¿å½“éœ€è¦æ—¶åŠ è½½è¿›å†…å­˜</p><ul><li>å·æ§åˆ¶æ¨¡å— ï¼šå½“æ–‡ä»¶ç³»ç»ŸæŒ‚è½½æ—¶è¿›å…¥å†…å­˜</li><li>æ–‡ä»¶æ§åˆ¶å—ï¼šå½“æ–‡ä»¶è¢«è®¿é—®æ—¶è¿›å…¥å†…å­˜</li><li>ç›®å½•èŠ‚ç‚¹ï¼šåœ¨éå†ä¸€ä¸ªæ–‡ä»¶è·¯å¾„æ—¶è¿›å…¥å†…å­˜</li></ul></li></ul><h3 id="æ•°æ®å—ç¼“å­˜"><a href="#æ•°æ®å—ç¼“å­˜" class="headerlink" title="æ•°æ®å—ç¼“å­˜"></a>æ•°æ®å—ç¼“å­˜</h3><ul><li>ï»¿æ•°æ®å—æŒ‰éœ€è¯»å…¥å†…å­˜<ul><li>æä¾› read() æ“ä½œ</li><li>é¢„è¯»ï¼šé¢„é€‰è¯»å–åé¢çš„æ•°æ®å—</li></ul></li><li>ï»¿æ•°æ®å—ä½¿ç”¨åè¢«ç¼“å­˜<ul><li>å‡è®¾æ•°æ®å°†ä¼šå†æ¬¡è¢«ä½¿ç”¨</li><li>å†™æ“ä½œå¯èƒ½è¢«ç¼“å­˜å’Œå»¶è¿Ÿå†™å…¥</li></ul></li><li>ï»¿ä¸¤ç§æ•°æ®å—ç¼“å­˜æ–¹å¼<ul><li>æ™®é€šç¼“å†²åŒºç¼“å­˜</li><li>é¡µç¼“å­˜ï¼šç»Ÿä¸€ç¼“å­˜æ•°æ®å—å’Œå†…å­˜é¡µ<ul><li>ï»¿åˆ†é¡µè¦æ±‚<ul><li>å½“éœ€è¦ä¸€ä¸ªé¡µæ—¶æ‰æ ¼å…¶è½½å…¥å†…å­˜</li></ul></li><li>ï»¿æ”¯æŒå­˜å‚¨<ul><li>ä¸€ä¸ªé¡µï¼ˆåœ¨è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ï¼‰å¯ä»¥è¢«æ˜ å°„åˆ°ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ä¸­ï¼ˆåœ¨äºŒçº§å­˜å‚¨ä¸­ï¼‰</li></ul></li><li>æ–‡ä»¶æ•°æ®å—çš„é¡µç¼“å­˜<ul><li>åœ¨è™šæ‹Ÿå†…å­˜ä¸­æ–‡ä»¶æ•°æ®å—è¢«æ˜ å°„æˆé¡µ</li><li>æ–‡ä»¶çš„è¯»&#x2F;å†™æ“ä½œè¢«è½¬æ¢æˆå¯¹å†…å­˜çš„è®¿é—®</li><li>å¯èƒ½å¯¼è‡´ç¼ºé¡µå’Œ&#x2F;æˆ–è®¾ç½®ä¸ºè„é¡µ</li></ul></li></ul></li></ul></li></ul><h3 id="æ‰“å¼€æ–‡ä»¶çš„æ•°æ®ç»“æ„"><a href="#æ‰“å¼€æ–‡ä»¶çš„æ•°æ®ç»“æ„" class="headerlink" title="æ‰“å¼€æ–‡ä»¶çš„æ•°æ®ç»“æ„"></a>æ‰“å¼€æ–‡ä»¶çš„æ•°æ®ç»“æ„</h3><ul><li>ï»¿æ‰“å¼€æ–‡ä»¶æè¿°<ul><li>æ–‡ä»¶çŠ¶æ€ä¿¡æ¯</li><li>ç›®å½•é¡¹ã€å½“å‰æ–‡ä»¶æŒ‡é’ˆã€æ–‡ä»¶æ“ä½œè®¾ç½®ç­‰</li></ul></li><li>ï»¿æ‰“å¼€æ–‡ä»¶è¡¨<ul><li>ä¸€ä¸ªè¿›ç¨‹ä¸€ä¸ª</li><li>ç³»ç»Ÿçº§</li><li>æ¯ä¸ªå·æ§åˆ¶å—ä¹Ÿä¼šä¿å­˜ä¸€ä¸ªåˆ—è¡¨</li><li>æ‰€ä»¥å¦‚æœæœ‰æ–‡ä»¶è¢«æ‰“å¼€å°†ä¸èƒ½è¢«å¸è½½</li></ul></li></ul><h3 id="æ–‡ä»¶åˆ†é…"><a href="#æ–‡ä»¶åˆ†é…" class="headerlink" title="æ–‡ä»¶åˆ†é…"></a>æ–‡ä»¶åˆ†é…</h3><ul><li><p>ï»¿å¤§å¤šæ•°æ–‡ä»¶éƒ½å¾ˆå°</p><ul><li>éœ€è¦å¯¹å°æ–‡ä»¶æä¾›å¼ºåŠ›çš„æ”¯æŒ</li><li>å—ç©ºé—´ä¸èƒ½å¤ªå¤§</li></ul></li><li><p>ï»¿ï»¿ä¸€äº›æ–‡ä»¶éå¸¸å¤§</p><ul><li>å¿…é¡»æ”¯æŒå¤§æ–‡ä»¶ ï¼ˆ64-bit æ–‡ä»¶åç§»ï¼‰</li><li>å¤§æ–‡ä»¶è®¿é—®éœ€è¦ç›¸å½“é«˜æ•ˆ</li></ul></li><li><p>ï»¿å¦‚ä½•ä¸ºä¸€ä¸ªæ–‡ä»¶åˆ†é…æ•°æ®å—</p><ul><li>ï»¿åˆ†é…æ–¹å¼<ul><li>è¿ç»­åˆ†é…<ul><li>ä¼˜ç‚¹ï¼š<ul><li>æ–‡ä»¶è¯»å–è¡¨ç°å¥½</li><li>é«˜æ•ˆçš„é¡ºåºå’Œéšæœºè®¿é—®</li></ul></li><li>ç¼ºç‚¹ï¼š<ul><li>ç¢ç‰‡</li><li>å¦‚æ–‡ä»¶å¢å¤§ï¼Œåˆ™ä¸å¥½å¤„ç†</li></ul></li></ul></li><li>é“¾å¼åˆ†é…<ul><li>æ–‡ä»¶ä»¥æ•°æ®å—é“¾è¡¨çš„æ–¹å¼å­˜å‚¨</li><li>æ–‡ä»¶å¤´åŒ…å«äº†ä»ç¬¬ä¸€å—åˆ°æœ€åä¸€å—çš„æŒ‡é’ˆ</li><li>ä¼˜ç‚¹ï¼š<ul><li>åˆ›å»ºã€å¢å¤§ã€ç¼©å°å®¹æ˜“</li><li>æ²¡æœ‰ç¢ç‰‡</li></ul></li><li>ç¼ºç‚¹ï¼š<ul><li>ä¸å¯èƒ½è¿›è¡ŒçœŸæ­£çš„éšæœºè®¿é—®(é“¾è¡¨ï¼Œæ‰€ä»¥åªèƒ½ä¸²å‹è®¿é—®)</li><li>å¯é æ€§(ä¸­é€”æ–­ç”µï¼Œå¯¼è‡´é“¾è¡¨è¢«ç ´å)</li></ul></li></ul></li><li>ç´¢å¼•åˆ†é…<ul><li>ï»¿ä¸ºæ¯ä¸ªæ–‡ä»¶åˆ›å»ºä¸€ä¸ªåä¸ºç´¢å¼•æ•°æ®å—çš„éæ•°æ®æ•°æ®å—<ul><li>åˆ°æ–‡ä»¶æ•°æ®å—çš„æŒ‡é’ˆåˆ—è¡¨</li></ul></li><li>ï»¿æ–‡ä»¶å¤´åŒ…å«äº†ç´¢å¼•æ•°æ®å—</li><li>ï»¿ä¼˜ç‚¹ï¼š<ul><li>åˆ›å»ºã€å¢å¤§ã€ç¼©å°å¾ˆå®¹æ˜“</li><li>æ²¡æœ‰ç¢ç‰‡</li><li>æ”¯æŒç›´æ¥è®¿é—®</li></ul></li><li>ç¼ºç‚¹ï¼š<ul><li>å½“æ–‡ä»¶å¾ˆå°æ—¶ï¼Œå­˜å‚¨ç´¢å¼•çš„å¼€é”€</li><li>å¦‚ä½•å¤„ç†å¤§æ–‡ä»¶ï¼Ÿ</li></ul></li></ul></li></ul></li><li>ï»¿æŒ‡æ ‡<ul><li>é«˜æ•ˆï¼šå¦‚å­˜å‚¨åˆ©ç”¨ ï¼ˆå¤–éƒ¨ç¢ç‰‡ï¼‰</li><li>è¡¨ç°ï¼šå¦‚è®¿é—®é€Ÿåº¦</li></ul></li></ul></li></ul><h3 id="ç©ºé—²ç©ºé—´åˆ—è¡¨"><a href="#ç©ºé—²ç©ºé—´åˆ—è¡¨" class="headerlink" title="ç©ºé—²ç©ºé—´åˆ—è¡¨"></a>ç©ºé—²ç©ºé—´åˆ—è¡¨</h3><p>â€¦â€¦</p><h3 id="å¤šç£ç›˜ç®¡ç†-RAID"><a href="#å¤šç£ç›˜ç®¡ç†-RAID" class="headerlink" title="å¤šç£ç›˜ç®¡ç† -RAID"></a>å¤šç£ç›˜ç®¡ç† -RAID</h3><p>ç£ç›˜é˜µåˆ—ï¼ˆRedundant Arrays of Independent Disksï¼ŒRAIDï¼‰ï¼Œâ€æ•°å—ç‹¬ç«‹ç£ç›˜æ„æˆå…·æœ‰å†—ä½™èƒ½åŠ›çš„é˜µåˆ—â€</p><p>ç£ç›˜é˜µåˆ—æ˜¯<strong>ç”±å¾ˆå¤šå—ç‹¬ç«‹çš„ç£ç›˜ï¼Œç»„åˆæˆä¸€ä¸ªå®¹é‡å·¨å¤§çš„ç£ç›˜ç»„</strong>ï¼Œ<u>åˆ©ç”¨ä¸ªåˆ«ç£ç›˜æä¾›æ•°æ®æ‰€äº§ç”ŸåŠ æˆæ•ˆæœæå‡æ•´ä¸ªç£ç›˜ç³»ç»Ÿæ•ˆèƒ½</u>ã€‚åˆ©ç”¨è¿™é¡¹æŠ€æœ¯ï¼Œ<strong>å°†æ•°æ®åˆ‡å‰²æˆè®¸å¤šåŒºæ®µï¼Œåˆ†åˆ«å­˜æ”¾åœ¨å„ä¸ªç¡¬ç›˜ä¸Š</strong>ã€‚</p><ul><li><p>ï»¿åˆ†åŒºï¼šç¡¬ä»¶ç£ç›˜çš„ä¸€ç§é€‚åˆæ“ä½œç³»ç»ŸæŒ‡å®šæ ¼å¼çš„åˆ’åˆ†</p></li><li><p>ï»¿å·ï¼šä¸€ä¸ªæ‹¥æœ‰ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿå®ä¾‹çš„å¯è®¿é—®çš„å­˜å‚¨ç©ºé—´</p><ul><li>é€šå¸¸å¸¸é©»åœ¨ç£ç›˜çš„å•ä¸ªåˆ†åŒºä¸Š</li></ul></li><li><p>ï»¿ä½¿ç”¨å¤šä¸ªå¹¶è¡Œç£ç›˜æ¥å¢åŠ </p><ul><li>ååé‡ï¼ˆé€šè¿‡å¹¶è¡Œ)</li><li>å¯é æ€§å’Œå¯ç”¨æ€§ï¼ˆé€šè¿‡å†—ä½™ï¼Œå¤šå­˜å‡ ä»½ï¼Œé˜²å¤‡æ„å¤–ï¼‰</li></ul></li><li><p>ï»¿RAID ä¸€ å†—ä½™ç£ç›˜é˜µåˆ—</p><ul><li>å„ç§ç£ç›˜ç®¡ç†æŠ€æœ¯</li><li>RAID levelsï¼šä¸åŒRAID åˆ†ç±»ï¼ˆå¦‚ï¼ŒRATD-0ï¼Œ RAID-1, RATD-5)</li></ul></li><li><p>ï»¿å®ç°</p><ul><li>åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸ï¼šå­˜å‚¨&#x2F;å·ç®¡ç†</li><li>RAIDç¡¬ä»¶æ§åˆ¶å™¨ (I&#x2F;0)</li></ul></li></ul><h3 id="ç£ç›˜è°ƒåº¦"><a href="#ç£ç›˜è°ƒåº¦" class="headerlink" title="ç£ç›˜è°ƒåº¦"></a>ç£ç›˜è°ƒåº¦</h3><ul><li>ï»¿è¯»å–æˆ–å†™å…¥æ—¶ï¼Œç£å¤´å¿…é¡»è¢«å®šä½åœ¨æœŸæœ›çš„ç£é“ï¼Œå¹¶ä»æ‰€æœŸæœ›çš„æ‰‡åŒºçš„å¼€å§‹</li><li>ï»¿å¯»é“æ—¶é—´<ul><li>å®šä½åˆ°æœŸæœ›çš„ç£é“æ‰€èŠ±è´¹çš„æ—¶é—´</li></ul></li><li>ï»¿æ—‹è½¬å»¶è¿Ÿ<ul><li>ä»æ‰‡åŒºçš„å¼€å§‹å¤„åˆ°åˆ°è¾¾ç›®çš„å¤„èŠ±è´¹çš„æ—¶é—´</li></ul></li></ul><h4 id="SCAN"><a href="#SCAN" class="headerlink" title="SCAN"></a>SCAN</h4><p>å¯¹äºæ‰«æç®—æ³•ï¼Œç£è‡‚ä»ç£ç›˜çš„ä¸€ç«¯å¼€å§‹ï¼Œå‘å¦ä¸€ç«¯ç§»åŠ¨ï¼›åœ¨ç§»è¿‡æ¯ä¸ªæŸ±é¢æ—¶ï¼Œå¤„ç†è¯·æ±‚ã€‚å½“åˆ°è¾¾ç£ç›˜çš„å¦ä¸€ç«¯æ—¶ï¼Œç£å¤´ç§»åŠ¨æ–¹å‘åè½¬ï¼Œå¹¶ç»§ç»­å¤„ç†ã€‚ç£å¤´è¿ç»­æ¥å›æ‰«æç£ç›˜ã€‚SCAN ç®—æ³•æœ‰æ—¶ç§°ä¸ºç”µæ¢¯ç®—æ³•ï¼Œå› ä¸ºç£å¤´çš„è¡Œä¸ºå°±åƒå¤§æ¥¼é‡Œé¢çš„ç”µæ¢¯ï¼Œå…ˆå¤„ç†æ‰€æœ‰å‘ä¸Šçš„è¯·æ±‚ï¼Œç„¶åå†å¤„ç†ç›¸åæ–¹å‘çš„è¯·æ±‚ã€‚</p><h4 id="C-LOOK"><a href="#C-LOOK" class="headerlink" title="C-LOOK"></a>C-LOOK</h4><p>åŸºäºSCANç®—æ³•ï¼ŒC-LOOKç§»åŠ¨ç£å¤´ä»ç£ç›˜ä¸€ç«¯åˆ°ç£ç›˜å¦ä¸€ç«¯ï¼ˆç£è‡‚åªéœ€ç§»åˆ°ä¸€ä¸ªæ–¹å‘çš„æœ€è¿œè¯·æ±‚ä¸ºæ­¢ï¼‰ï¼Œå¹¶ä¸”å¤„ç†è¡Œç¨‹ä¸Šçš„è¯·æ±‚ï¼Œç„¶è€Œï¼Œå½“ç£å¤´åˆ°è¾¾å¦ä¸€ç«¯æ—¶ï¼Œå®ƒç«‹å³è¿”å›åˆ°ç£ç›˜<strong>å¦ä¸€ç«¯</strong>æœ€è¿œçš„è¯·æ±‚ï¼Œè€Œå¹¶ä¸å¤„ç†ä»»ä½•å›ç¨‹ä¸Šçš„è¯·æ±‚ï¼Œç„¶åä»è¯¥æœ€è¿œçš„è¯·æ±‚å¼€å§‹ï¼Œç»§ç»­å¾€åŒä¸€æ–¹å‘ç§»åŠ¨ç£ç›˜å¤„ç†è¯·æ±‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis</title>
      <link href="/2023/06/02/Redis/"/>
      <url>/2023/06/02/Redis/</url>
      
        <content type="html"><![CDATA[<h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a><strong>Redis</strong></h1><h2 id="åŸºç¡€ç¯‡"><a href="#åŸºç¡€ç¯‡" class="headerlink" title="åŸºç¡€ç¯‡"></a>åŸºç¡€ç¯‡</h2><h3 id="1-Rediså…¥é—¨"><a href="#1-Rediså…¥é—¨" class="headerlink" title="1.Rediså…¥é—¨"></a>1.Rediså…¥é—¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨redis</span><br><span class="line">brew services start redis</span><br></pre></td></tr></table></figure><h4 id="1-1-è®¤è¯†Nosql"><a href="#1-1-è®¤è¯†Nosql" class="headerlink" title="1.1.è®¤è¯†Nosql"></a>1.1.è®¤è¯†Nosql</h4><h5 id="SQL-å…³ç³»å‹æ•°æ®åº“-ğŸ†š-NoSQL-éå…³ç³»å‹æ•°æ®åº“"><a href="#SQL-å…³ç³»å‹æ•°æ®åº“-ğŸ†š-NoSQL-éå…³ç³»å‹æ•°æ®åº“" class="headerlink" title="SQL(å…³ç³»å‹æ•°æ®åº“) ğŸ†š NoSQL(éå…³ç³»å‹æ•°æ®åº“)"></a>SQL(å…³ç³»å‹æ•°æ®åº“) ğŸ†š NoSQL(éå…³ç³»å‹æ•°æ®åº“)</h5><table><thead><tr><th></th><th>SQL</th><th>NoSQL</th></tr></thead><tbody><tr><td>æ•°æ®ç»“æ„</td><td>ç»“æ„åŒ–(å»ºäº†è¡¨å°±ä¸æ–¹ä¾¿å†æ”¹å˜)</td><td>éç»“æ„åŒ–</td></tr><tr><td>æ•°æ®å…³è”</td><td>å…³è”çš„</td><td>æ— å…³è”çš„</td></tr><tr><td>æŸ¥è¯¢æ–¹å¼</td><td>SQLè¯­å¥æŸ¥è¯¢</td><td>éSQLè¯­å¥</td></tr><tr><td>äº‹åŠ¡ç‰¹æ€§</td><td>ACID</td><td>BASE</td></tr><tr><td>å­˜å‚¨æ–¹å¼</td><td>ç£ç›˜</td><td>å†…å­˜</td></tr><tr><td>æ‰©å±•æ€§</td><td>å‚ç›´</td><td>æ°´å¹³</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>1ï¼‰æ•°æ®ç»“æ„å›ºå®š<br />2ï¼‰ç›¸å…³ä¸šåŠ¡å¯¹æ•°æ®å®‰å…¨æ€§ã€ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜</td><td>1ï¼‰æ•°æ®ç»“æ„ä¸ç¨³å®š<br />2ï¼‰å¯¹ä¸€è‡´æ€§ã€å®‰å…¨æ€§è¦æ±‚ä¸é«˜<br />3ï¼‰å¯¹æ€§èƒ½è¦æ±‚é«˜</td></tr></tbody></table><h4 id="1-2-è®¤è¯†Redis"><a href="#1-2-è®¤è¯†Redis" class="headerlink" title="1.2.è®¤è¯†Redis"></a>1.2.è®¤è¯†Redis</h4><h5 id="å…³äºæœ¬æœºçš„redisä¿¡æ¯ï¼š"><a href="#å…³äºæœ¬æœºçš„redisä¿¡æ¯ï¼š" class="headerlink" title="å…³äºæœ¬æœºçš„redisä¿¡æ¯ï¼š"></a>å…³äºæœ¬æœºçš„redisä¿¡æ¯ï¼š</h5><ul><li><p>redis.conf åœ°å€ï¼š&#x2F;opt&#x2F;homebrew&#x2F;etc&#x2F;redis.conf</p></li><li><p>redis-serveråœ°å€ï¼š &#x2F;opt&#x2F;homebrew&#x2F;opt&#x2F;redis&#x2F;bin&#x2F;redis-server</p></li></ul><p>â€‹è¿è¡Œredisï¼šredis-server    æˆ–    &#x2F;opt&#x2F;homebrew&#x2F;opt&#x2F;redis&#x2F;bin&#x2F;redis-server</p><p>â€‹åœæ­¢redisï¼šredis-cli shutdown</p><p>â€‹å¯†ç è®¾ç½®æˆäº† root æƒ³è¦çŸ¥é“æ”¹äº†ä»€ä¹ˆé…ç½®æ–‡ä»¶ï¼Œè¯·åˆ°&#x2F;opt&#x2F;homebrew&#x2F;etc&#x2F;redis.confå¯»æ‰¾#donn changed 20230411æ³¨é‡Š</p><h5 id="åŸºäºé…ç½®æ–‡ä»¶è¿è¡Œredisï¼š"><a href="#åŸºäºé…ç½®æ–‡ä»¶è¿è¡Œredisï¼š" class="headerlink" title="åŸºäºé…ç½®æ–‡ä»¶è¿è¡Œredisï¼š"></a>åŸºäºé…ç½®æ–‡ä»¶è¿è¡Œredisï¼š</h5><p>â€‹redis-server &#x2F;opt&#x2F;homebrew&#x2F;etc&#x2F;redis.conf</p><h5 id="æŸ¥æ‰¾rediså¯ç”¨çš„è¿›ç¨‹ï¼š-ps-axu-grep-redis-å¯ä»¥é€šè¿‡æ€æ­»è¿›ç¨‹æ¥å…³é—­redisæœåŠ¡"><a href="#æŸ¥æ‰¾rediså¯ç”¨çš„è¿›ç¨‹ï¼š-ps-axu-grep-redis-å¯ä»¥é€šè¿‡æ€æ­»è¿›ç¨‹æ¥å…³é—­redisæœåŠ¡" class="headerlink" title="æŸ¥æ‰¾rediså¯ç”¨çš„è¿›ç¨‹ï¼š       ps axu | grep redis           å¯ä»¥é€šè¿‡æ€æ­»è¿›ç¨‹æ¥å…³é—­redisæœåŠ¡"></a>æŸ¥æ‰¾rediså¯ç”¨çš„è¿›ç¨‹ï¼š       ps axu | grep redis           å¯ä»¥é€šè¿‡æ€æ­»è¿›ç¨‹æ¥å…³é—­redisæœåŠ¡</h5><h5 id="redis-cli-ä½¿ç”¨ï¼š"><a href="#redis-cli-ä½¿ç”¨ï¼š" class="headerlink" title="redis-cli ä½¿ç”¨ï¼š"></a>redis-cli ä½¿ç”¨ï¼š</h5><p>â€‹redis-cli -h 127.0.0.1 -p 6379 -a root</p><p>â€‹-h æŒ‡å®šè¦è¿æ¥redisç»“ç‚¹çš„ipåœ°å€ï¼Œé»˜è®¤ä¸º 127.0.0.1</p><p>â€‹-p æŒ‡å®šè¦è¿æ¥çš„redisèŠ‚ç‚¹çš„ç«¯å£ï¼Œé»˜è®¤ä¸º 6379</p><p>â€‹-a æŒ‡å®šredisçš„è®¿é—®å¯†ç (ä¸å»ºè®®åœ¨è¿æ¥å‰å°±è¾“å…¥å¯†ç ã€Œä¸å®‰å…¨ã€) </p><p>â€‹â€”-&gt; å»ºè®®å…ˆä¸è¾“å…¥å¯†ç ï¼Œå»ºç«‹è¿æ¥åè¾“å…¥ AUTH  ç”¨æˆ·å(æœ¬æœºæœªè®¾ç½®)  å¯†ç </p><p>â€‹<img src="/Users/donn/Library/Application Support/typora-user-images/redis-cli.png" style="zoom:55%;" /></p><h5 id="macè®¾ç½®rediså¼€æœºè‡ªå¯åŠ¨ï¼š"><a href="#macè®¾ç½®rediså¼€æœºè‡ªå¯åŠ¨ï¼š" class="headerlink" title="macè®¾ç½®rediså¼€æœºè‡ªå¯åŠ¨ï¼š"></a>macè®¾ç½®rediså¼€æœºè‡ªå¯åŠ¨ï¼š</h5><p>â€‹1.sudo vim &#x2F;Library&#x2F;LaunchDaemons&#x2F;redis-server.plist     åˆ›å»ºplistæ–‡æ¡£ï¼Œç”¨äºè®°å½•rediså¯åŠ¨çš„é…ç½®çš„è·¯å¾„(æ€ä¹ˆå¡«å»ç½‘ä¸Šæ‰¾æ‰¾å°±è¡Œ)</p><p>â€‹2.è¿è¡Œä»¥ä¸‹å‘½ä»¤å®ç°å¼€æœºè‡ªå¯åŠ¨ï¼š</p><p>â€‹sudo launchctl load &#x2F;Library&#x2F;LaunchDaemons&#x2F;redis-server.plist </p><p>â€‹(è²Œä¼¼æ˜¯æ‰§è¡Œâ¬†ï¸è¿™æ¡è¯­å¥åï¼Œmacå¼€æœºå°±ä¼šè‡ªåŠ¨æ‰§è¡Œredis-server.plistï¼Œå³è‡ªåŠ¨å¼€å¯redis)</p><p>â€‹3.è¿è¡ŒæŒ‡ä»¤ï¼Œè‹¥rediså¯åŠ¨äº†å³é…ç½®æˆåŠŸ</p><p>â€‹sudo launchctl start redis-server (æ¨¡æ‹Ÿé‡å¯) </p><h4 id="1-3-å›¾å½¢åŒ–å®¢æˆ·ç«¯æ¼”ç¤º"><a href="#1-3-å›¾å½¢åŒ–å®¢æˆ·ç«¯æ¼”ç¤º" class="headerlink" title="1.3.å›¾å½¢åŒ–å®¢æˆ·ç«¯æ¼”ç¤º"></a>1.3.å›¾å½¢åŒ–å®¢æˆ·ç«¯æ¼”ç¤º</h4><p>â€‹åœ¨ç½‘ç«™ä¸‹è½½Macç‰ˆï¼š<a href="https://redis.com/thank-you/redisinsight-the-best-redis-gui-35/">https://redis.com/thank-you/redisinsight-the-best-redis-gui-35/</a>      ğŸŒŸç®€å•å¥½ç”¨</p><h3 id="2-Rediså¸¸è§å‘½ä»¤"><a href="#2-Rediså¸¸è§å‘½ä»¤" class="headerlink" title="2.Rediså¸¸è§å‘½ä»¤"></a><strong>2.Rediså¸¸è§å‘½ä»¤</strong></h3><ul><li>å­¦ä¹ rediså‘½ä»¤â€”â€”å®˜æ–¹æ–‡æ¡£ï¼š <a href="https://redis.io/commands/">https://redis.io/commands/</a></li></ul><h4 id="2-1-Redisæ•°æ®ç»“æ„ä»‹ç»"><a href="#2-1-Redisæ•°æ®ç»“æ„ä»‹ç»" class="headerlink" title="2.1.Redisæ•°æ®ç»“æ„ä»‹ç»"></a>2.1.Redisæ•°æ®ç»“æ„ä»‹ç»</h4><p>redis æ˜¯ é”®å€¼æ•°æ®åº“ï¼š    keyä¸€èˆ¬æ˜¯Stringç±»å‹ï¼Œè€Œvalueçš„ç±»å‹å¤šç§å¤šæ ·</p><h5 id="redisä¸­valueæ•°æ®ç±»å‹ï¼š"><a href="#redisä¸­valueæ•°æ®ç±»å‹ï¼š" class="headerlink" title="redisä¸­valueæ•°æ®ç±»å‹ï¼š"></a>redisä¸­valueæ•°æ®ç±»å‹ï¼š</h5><p>â€‹äº”å¤§åŸºæœ¬ç±»å‹ï¼š</p><ul><li><em>String</em> </li><li><em>Hash</em></li><li><em>List</em></li><li><em>Set</em></li><li><em>SortedSet</em></li></ul><p> </p><h4 id="2-2-é€šç”¨å‘½ä»¤"><a href="#2-2-é€šç”¨å‘½ä»¤" class="headerlink" title="2.2.é€šç”¨å‘½ä»¤"></a>2.2.é€šç”¨å‘½ä»¤</h4><ul><li>help å‘½ä»¤åç§°      â€”â€”&gt;        ä¼šè¿”å›è¯¥å‘½ä»¤çš„ç”¨æ³•æè¿°</li></ul><table><thead><tr><th align="center">KEYS</th><th align="center">æŸ¥çœ‹æ‰€æœ‰ç¬¦åˆæ¨¡æ¿çš„key(æ•ˆç‡ä½ï¼Œå› æ­¤ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒè®¾å¤‡ä¸Šä½¿ç”¨)</th></tr></thead><tbody><tr><td align="center"><strong>DEL</strong></td><td align="center"><strong>åˆ é™¤æŒ‡å®šçš„key   å¯ä»¥ä¸€æ¬¡åˆ é™¤å¤šä¸ªkey(ç”¨ç©ºæ ¼éš”å¼€å³å¯)</strong></td></tr><tr><td align="center"><strong>EXISTS</strong></td><td align="center"><strong>åˆ¤æ–­KEYæ˜¯å¦å­˜åœ¨</strong></td></tr><tr><td align="center"><strong>EXPIRE</strong></td><td align="center"><strong>Set a keyâ€™s time to live in seconds</strong>â€”â€“<strong>ç»™ä¸€ä¸ªkeyè®¾ç½®æœ‰æ•ˆæœŸï¼Œæœ‰æ•ˆæœŸåˆ°æœŸä¼šè‡ªåŠ¨åˆ é™¤key</strong></td></tr><tr><td align="center"><strong>TTL</strong></td><td align="center"><strong>Get the time to live for a key in seconds</strong> (ä¸€ä¸ªkeyçš„TTL &#x3D; -1è¡¨ç¤ºæ°¸ä¹…æœ‰æ•ˆï¼Œ-2è¡¨ç¤ºå·²è¿‡æœŸ)</td></tr></tbody></table><h4 id="2-3-Stringç±»å‹"><a href="#2-3-Stringç±»å‹" class="headerlink" title="2.3.Stringç±»å‹"></a><strong>2.3.Stringç±»å‹</strong></h4><p>å­—ç¬¦ä¸²ç±»å‹ï¼Œæ˜¯Redisä¸­æœ€ç®€å•çš„å­˜å‚¨ç±»å‹(<u>æœ€å¤§ç©ºé—´ä¸å¯è¶…è¿‡512MB</u>)</p><p>â€‹Stringåˆå¯ä»¥ç»†åˆ†ä¸ºï¼š   stringæ™®é€šå­—ç¬¦ä¸²</p><p>â€‹  int æ•´æ•°ç±»å‹ï¼Œå¯ä»¥è‡ªå¢ã€è‡ªå‡</p><p>â€‹  float  æµ®ç‚¹ç±»å‹ï¼Œå¯ä»¥è‡ªå¢ã€è‡ªå‡</p><p><u>åº•å±‚éƒ½æ˜¯ç”±å­—èŠ‚æ•°ç»„å­˜å‚¨ï¼ŒåŒºåˆ«åœ¨äºç¼–ç æ–¹å¼ä¸åŒ</u></p><ul><li><h5 id="Stringå¸¸è§å‘½ä»¤ï¼š"><a href="#Stringå¸¸è§å‘½ä»¤ï¼š" class="headerlink" title="Stringå¸¸è§å‘½ä»¤ï¼š"></a>Stringå¸¸è§å‘½ä»¤ï¼š</h5><table><thead><tr><th align="left">SET</th><th align="center">SET key value</th></tr></thead><tbody><tr><td align="left"><strong>GET</strong></td><td align="center"><strong>GET</strong> key</td></tr><tr><td align="left"><strong>MSET</strong>(æ‰¹é‡æ·»åŠ é”®å€¼å¯¹)</td><td align="center"><strong>MSET</strong> key1 value1 key2 value2 â€¦</td></tr><tr><td align="left"><strong>MGET</strong>(æ‰¹é‡æŸ¥è¯¢values)</td><td align="center"><strong>MGET</strong> key1 key2 key3 â€¦</td></tr><tr><td align="left"><strong>INCR</strong>(è‹¥valueä¸ºintï¼Œvalue++)</td><td align="center"><strong>INCR</strong> key</td></tr><tr><td align="left"><strong>INCRBY</strong>(è‹¥valueä¸ºintï¼Œvalue+&#x3D; step)</td><td align="center"><strong>INCRBY</strong> key stepï¼ˆstepå¯ä¸ºä»»æ„é0æ•´æ•°</td></tr><tr><td align="left"><strong>INCRBYFLOAT</strong>(è‹¥valueä¸ºfloatï¼Œvalue +&#x3D; step)</td><td align="center"><strong>INCRBYFLOAT</strong> key step ( floatç±»å‹ )</td></tr><tr><td align="left"><strong>SETNX</strong> (Set the value of a key, only if the key does not exist)</td><td align="center"><strong>SETNX</strong> key value</td></tr></tbody></table><h5 id="æ€è€ƒï¼šRedisä¸­æ²¡æœ‰tableçš„æ¦‚å¿µï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•åŒºåˆ«ä¸åŒç±»å‹çš„keyå‘¢ï¼Ÿ-æ¯”å¦‚ä¸€ä¸ªå­¦ç”Ÿçš„id-x3D-1ï¼Œä¸€é—¨è¯¾ç¨‹çš„idä¹Ÿä¸º1"><a href="#æ€è€ƒï¼šRedisä¸­æ²¡æœ‰tableçš„æ¦‚å¿µï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•åŒºåˆ«ä¸åŒç±»å‹çš„keyå‘¢ï¼Ÿ-æ¯”å¦‚ä¸€ä¸ªå­¦ç”Ÿçš„id-x3D-1ï¼Œä¸€é—¨è¯¾ç¨‹çš„idä¹Ÿä¸º1" class="headerlink" title="æ€è€ƒï¼šRedisä¸­æ²¡æœ‰tableçš„æ¦‚å¿µï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•åŒºåˆ«ä¸åŒç±»å‹çš„keyå‘¢ï¼Ÿ(æ¯”å¦‚ä¸€ä¸ªå­¦ç”Ÿçš„id &#x3D; 1ï¼Œä¸€é—¨è¯¾ç¨‹çš„idä¹Ÿä¸º1)"></a>æ€è€ƒï¼šRedisä¸­æ²¡æœ‰tableçš„æ¦‚å¿µï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•åŒºåˆ«ä¸åŒç±»å‹çš„keyå‘¢ï¼Ÿ(æ¯”å¦‚ä¸€ä¸ªå­¦ç”Ÿçš„id &#x3D; 1ï¼Œä¸€é—¨è¯¾ç¨‹çš„idä¹Ÿä¸º1)</h5><p>â€‹Redisä¸­ key å…è®¸æœ‰å¤šä¸ªå•è¯(ç”¨äºå¹³æ›¿è¡¨çš„æ¦‚å¿µ)å½¢æˆå±‚çº§ç»“æ„ï¼Œå¤šä¸ªå•è¯é—´ç”¨ ï¼šéš”å¼€</p><p>â€‹æ ¼å¼ä¸¾ä¾‹â€”&gt;     é¡¹ç›®å ï¼šä¸šåŠ¡å ï¼šç±»å‹ ï¼šä½ ç»™keyèµ·çš„åç§°</p></li></ul><h4 id="2-4-Hashç±»å‹-ç±»ä¼¼java-ä¸­çš„Map"><a href="#2-4-Hashç±»å‹-ç±»ä¼¼java-ä¸­çš„Map" class="headerlink" title="2.4.Hashç±»å‹(ç±»ä¼¼java ä¸­çš„Map)"></a><strong>2.4.Hashç±»å‹</strong>(ç±»ä¼¼java ä¸­çš„Map)</h4><p>â€‹â€”â€”æ— åºå­—å…¸ï¼Œå¯ä»¥å¯¹å¯¹è±¡ä¸­çš„æ¯ä¸ªå­—æ®µç‹¬ç«‹å­˜å‚¨ï¼Œå¯ä»¥é’ˆå¯¹å•ä¸ªå­—æ®µCRUD</p><p>â€‹ä¸€æ¡hashç±»å‹çš„è®°å½•æœ‰ï¼š ä¸€ä¸ª <strong>key</strong> å’Œä¸€äº› <strong>field value</strong> å¯¹</p><ul><li><h5 id="Hashç±»å‹å¸¸è§å‘½ä»¤ï¼š"><a href="#Hashç±»å‹å¸¸è§å‘½ä»¤ï¼š" class="headerlink" title="Hashç±»å‹å¸¸è§å‘½ä»¤ï¼š"></a>Hashç±»å‹å¸¸è§å‘½ä»¤ï¼š</h5><table><thead><tr><th><strong>HSET key field value</strong></th><th><strong>æ·»åŠ æˆ–è€…ä¿®æ”¹hashç±»å‹keyçš„<u>ä¸€ä¸ª</u>fieldçš„å€¼</strong></th></tr></thead><tbody><tr><td><strong>HGET key field</strong></td><td><strong>è·å–<u>ä¸€ä¸ª</u>hashç±»å‹keyçš„fieldçš„å€¼</strong></td></tr><tr><td><strong>HMSET key field1 value1 field2 value2 â€¦</strong></td><td><strong>æ‰¹é‡æ·»åŠ ã€ä¿®æ”¹hashç±»å‹keyçš„å¤šä¸ªfieldä¸value</strong></td></tr><tr><td><strong>HMGET key field1 field2 â€¦</strong></td><td><strong>æ‰¹é‡è·å–hashç±»å‹keyçš„å¤šä¸ªfieldçš„å€¼</strong></td></tr><tr><td><strong>HGETALL key</strong></td><td><strong>è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„fieldå’Œvalue</strong></td></tr><tr><td><strong>HKEYS key</strong></td><td><strong>è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„ field</strong></td></tr><tr><td><strong>HVALS key</strong></td><td><strong>è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„ value</strong></td></tr><tr><td><strong>HINCRBY key field</strong></td><td><strong>è®©ä¸€ä¸ªhashç±»å‹keyçš„å­—æ®µå€¼è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿</strong></td></tr><tr><td><strong>HSETNX key field value</strong></td><td><strong>æ·»åŠ ä¸€ä¸ªhashç±»å‹çš„keyçš„fieldå€¼ï¼Œå‰ææ˜¯è¿™ä¸ªfieldä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ‰§è¡Œ</strong></td></tr></tbody></table></li></ul><h4 id="2-5-Listç±»å‹-ç±»ä¼¼java-ä¸­çš„LinkedList"><a href="#2-5-Listç±»å‹-ç±»ä¼¼java-ä¸­çš„LinkedList" class="headerlink" title="2.5.Listç±»å‹(ç±»ä¼¼java ä¸­çš„LinkedList)"></a>2.5.Listç±»å‹(ç±»ä¼¼java ä¸­çš„LinkedList)</h4><p>â€”â€”å¯ä»¥çœ‹ä½œåŒå‘é“¾è¡¨ç»“æ„(æ”¯æŒæ­£å‘ã€åå‘æ£€ç´¢)</p><p>â€‹<u>æœ‰åºã€å…ƒç´ å¯é‡å¤ã€å¢åˆ æ“ä½œå¿«ã€æŸ¥æ‰¾é€Ÿåº¦ä¸€èˆ¬</u></p><p>â€‹ç”¨äº(å¦‚ä½ å‘äº†æœ‹å‹åœˆï¼Œè®°å½•ä¸ºæ‚¨ç‚¹èµçš„ç”¨æˆ·åŠå…¶ç‚¹èµé¡ºåº)</p><ul><li><p><strong>Listç±»å‹å¸¸è§å‘½ä»¤ï¼š</strong></p><table><thead><tr><th align="left"><strong>LPUSH key element â€¦</strong></th><th><strong>å‘åˆ—è¡¨<u>å·¦ä¾§</u>æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ (ä¸€ä¸ªä¸€ä¸ªpushï¼Œç¬¬ä¸€ä¸ªåœ¨æœ€åè¾¹)</strong></th></tr></thead><tbody><tr><td align="left"><strong>LPOP key</strong></td><td><strong>ç§»é™¤å¹¶è¿”å›åˆ—è¡¨å·¦ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰åˆ™è¿”å›nil</strong></td></tr><tr><td align="left"><strong>RPUSH key element â€¦</strong></td><td><strong>å‘åˆ—è¡¨<u>å³ä¾§</u>æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </strong></td></tr><tr><td align="left"><strong>RPOP key</strong></td><td><strong>ç§»é™¤å¹¶è¿”å›åˆ—è¡¨å³ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰åˆ™è¿”å›nil</strong></td></tr><tr><td align="left"><strong>LRANGE key start end</strong></td><td><strong>è¿”å›ä¸€æ®µè§’æ ‡èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ </strong></td></tr><tr><td align="left"><strong>BLPOP&#x2F;BRPOP key time</strong></td><td><strong>ä¸LPOPå’ŒRPOPç±»ä¼¼ï¼Œ<u>åªä¸è¿‡åœ¨æ²¡æœ‰å…ƒç´ æ—¶ç­‰å¾…æŒ‡å®šæ—¶é—´</u>ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›nil</strong><br /><strong>é˜»å¡ä¸€æ®µæ—¶é—´ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´å†…è¿˜æ²¡èƒ½æœç´¢åˆ°Listä¸­å¯¹åº”çš„æ•°æ®ï¼Œæ‰ç®—æ˜¯æ‰¾ä¸åˆ°</strong></td></tr></tbody></table></li></ul><h4 id="2-6-Setç±»å‹-ç±»ä¼¼java-ä¸­çš„HashSet"><a href="#2-6-Setç±»å‹-ç±»ä¼¼java-ä¸­çš„HashSet" class="headerlink" title="2.6.Setç±»å‹(ç±»ä¼¼java ä¸­çš„HashSet)"></a>2.6.Setç±»å‹(ç±»ä¼¼java ä¸­çš„HashSet)</h4><p>â€‹â€”â€”<u>æ— åºã€å…ƒç´ ä¸å¯é‡å¤ã€æŸ¥æ‰¾å¿«ã€æ”¯æŒäº¤å¹¶ç­‰é›†åˆæ“ä½œ</u></p><p>â€‹å°±æ˜¯ç”¨å“ˆå¸Œè¡¨å­˜å‚¨ç­‰é›†åˆå‘—</p><ul><li><p><strong>Setç±»å‹çš„å¸¸è§å‘½ä»¤ï¼š</strong></p><table><thead><tr><th><strong>SADD key member â€¦</strong></th><th><strong>å‘setä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ (ä¸€ä¸ªkeyï¼Œä»»æ„å¤šä¸ªå…ƒç´ )</strong></th></tr></thead><tbody><tr><td><strong>SREM key member â€¦</strong></td><td><strong>ç§»é™¤setä¸­çš„æŒ‡å®šå…ƒç´ </strong></td></tr><tr><td><strong>SCARD key</strong></td><td><strong>è¿”å›setä¸­å…ƒç´ çš„ä¸ªæ•°</strong></td></tr><tr><td><strong>SISMEMBER key member</strong></td><td><strong>åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºsetä¸­</strong></td></tr><tr><td><strong>SMEMBERS key</strong></td><td><strong>è·å–setä¸­çš„æ‰€æœ‰å…ƒç´ </strong></td></tr><tr><td><strong>SINTER key1 key2 â€¦</strong> <br /><strong>SDIFFã€SUNIONâ€¦</strong></td><td><strong>æ±‚key1ä¸key2çš„äº¤é›†</strong><br /><strong>å·®é›†ã€å¹¶é›†â€¦</strong></td></tr></tbody></table></li></ul><h4 id="2-7-SortedSetç±»å‹-åŠŸèƒ½ç±»ä¼¼java-ä¸­çš„TreeSet"><a href="#2-7-SortedSetç±»å‹-åŠŸèƒ½ç±»ä¼¼java-ä¸­çš„TreeSet" class="headerlink" title="2.7.SortedSetç±»å‹(åŠŸèƒ½ç±»ä¼¼java ä¸­çš„TreeSet)"></a>2.7.SortedSetç±»å‹(åŠŸèƒ½ç±»ä¼¼java ä¸­çš„TreeSet)</h4><p>â€‹â€”â€”<u>å¯æ’åºã€å…ƒç´ ä¸é‡å¤ã€æŸ¥è¯¢é€Ÿåº¦å¿«</u></p><p>â€‹å¸¸ç”¨äºå®ç°<u>æ’è¡Œæ¦œ</u>è¿™æ ·çš„åŠŸèƒ½</p><ul><li><p><strong>SortedSetç±»å‹çš„å¸¸ç”¨å‘½ä»¤ï¼š</strong></p><table><thead><tr><th><strong>ZADD key score member</strong></th><th><strong>æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åˆ°sorted set ï¼Œå¦‚æœå·²ç»å­˜åœ¨åˆ™æ›´æ–°å…¶scoreå€¼</strong></th></tr></thead><tbody><tr><td><strong>ZREM key member</strong></td><td><strong>åˆ é™¤sorted setä¸­çš„ä¸€ä¸ªæŒ‡å®šå…ƒç´ </strong></td></tr><tr><td><strong>ZSCORE key member</strong></td><td><strong>è·å–sorted setä¸­çš„æŒ‡å®šå…ƒç´ çš„scoreå€¼</strong></td></tr><tr><td><strong>Z(REV)RANK key member</strong></td><td><strong>è·å–sorted set ä¸­çš„æŒ‡å®šå…ƒç´ çš„æ’å</strong>(ä»0å¼€å§‹ï¼Œé»˜è®¤å‡åº)</td></tr><tr><td><strong>ZCARD key</strong></td><td><strong>è·å–sorted setä¸­çš„å…ƒç´ ä¸ªæ•°</strong></td></tr><tr><td><strong>ZCOUNT key min max</strong></td><td><strong>ç»Ÿè®¡scoreå€¼åœ¨ç»™å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ çš„ä¸ªæ•°</strong></td></tr><tr><td><strong>ZINCRBY key increment member</strong></td><td><strong>è®©sorted setä¸­çš„æŒ‡å®šå…ƒç´ è‡ªå¢ï¼Œæ­¥é•¿ä¸ºæŒ‡å®šçš„incrementå€¼</strong></td></tr><tr><td><strong>Z(REV)RANGE key min max</strong></td><td><strong>æŒ‰ç…§scoreæ’åºåï¼Œè·å–æŒ‡å®šæ’åèŒƒå›´å†…çš„å…ƒç´ [min,max]</strong></td></tr><tr><td><strong>ZRANGEBYSCORE key min max</strong></td><td><strong>æŒ‰ç…§scoreæ’åºåï¼Œè·å–æŒ‡å®šscoreèŒƒå›´å†…çš„å…ƒç´ [min,max]</strong></td></tr><tr><td><strong>ZDIFFã€ZINTERã€ZUNION</strong></td><td><strong>æ±‚å·®é›†ã€äº¤é›†ã€å¹¶é›†</strong></td></tr></tbody></table><ul><li>æ³¨æ„ï¼šæ‰€æœ‰çš„æ’åé»˜è®¤éƒ½æ˜¯å‡åºï¼Œå¦‚æœè¦é™åºåˆ™åœ¨å‘½ä»¤çš„Zåé¢æ·»åŠ REVå³å¯</li></ul></li></ul><h3 id="3-Rediså®¢æˆ·ç«¯"><a href="#3-Rediså®¢æˆ·ç«¯" class="headerlink" title="3.Rediså®¢æˆ·ç«¯"></a>3.Rediså®¢æˆ·ç«¯</h3><h4 id="3-1-Jediså¿«é€Ÿå…¥é—¨"><a href="#3-1-Jediså¿«é€Ÿå…¥é—¨" class="headerlink" title="3.1.Jediså¿«é€Ÿå…¥é—¨"></a>3.1.Jediså¿«é€Ÿå…¥é—¨</h4><p>â€‹<strong>(ä»¥rediså‘½åä½œä¸ºæ–¹æ³•åç§°ï¼Œå­¦ä¹ æˆæœ¬ä½ï¼Œä½†æ˜¯çº¿ç¨‹ä¸å®‰å…¨ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦åŸºäºè¿æ¥æ± æ¥ä½¿ç”¨)</strong></p><h5 id="step1-å¼•å…¥ä¾èµ–"><a href="#step1-å¼•å…¥ä¾èµ–" class="headerlink" title="step1:  å¼•å…¥ä¾èµ–"></a>step1:  å¼•å…¥ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="step2ï¼šå»ºç«‹è¿æ¥"><a href="#step2ï¼šå»ºç«‹è¿æ¥" class="headerlink" title="step2ï¼šå»ºç«‹è¿æ¥"></a>step2ï¼šå»ºç«‹è¿æ¥</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Jedis jedis;</span><br><span class="line"><span class="meta">@BeforeEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.å»ºç«‹è¿æ¥</span></span><br><span class="line">        jedis = <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;172.30.10.68&quot;</span>,<span class="number">6379</span>);</span><br><span class="line">        <span class="comment">//2.è®¾ç½®å¯†ç </span></span><br><span class="line">        jedis.auth(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="comment">//3.é€‰æ‹©æ•°æ®åº“</span></span><br><span class="line">        jedis.select(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="step3ï¼šä½¿ç”¨Redis"><a href="#step3ï¼šä½¿ç”¨Redis" class="headerlink" title="step3ï¼šä½¿ç”¨Redis"></a>step3ï¼šä½¿ç”¨Redis</h5><p> (Jedisä¸­çš„APIå’Œredisä¸­çš„å‘½ä»¤ä¸€æ¨¡ä¸€æ ·ï¼)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testString</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jedis.set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;å°æ˜&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;result = &quot;</span> + result);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> jedis.get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="step4ï¼šé‡Šæ”¾èµ„æº"><a href="#step4ï¼šé‡Šæ”¾èµ„æº" class="headerlink" title="step4ï¼šé‡Šæ”¾èµ„æº"></a>step4ï¼šé‡Šæ”¾èµ„æº</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AfterEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (jedis != <span class="literal">null</span>)&#123;</span><br><span class="line">            jedis.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="3-2-Jedisè¿æ¥æ± "><a href="#3-2-Jedisè¿æ¥æ± " class="headerlink" title="3.2.Jedisè¿æ¥æ± "></a>3.2.Jedisè¿æ¥æ± </h4><h5 id="â€”â€”ä¸ºäº†è§£å†³Jedisçš„çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜"><a href="#â€”â€”ä¸ºäº†è§£å†³Jedisçš„çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜" class="headerlink" title="â€”â€”ä¸ºäº†è§£å†³Jedisçš„çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜"></a>â€”â€”ä¸ºäº†è§£å†³Jedisçš„çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜</h5><p>Jediså®˜æ–¹æä¾›JedisPoolç±»ï¼Œæˆ‘ä»¬é€šè¿‡å®ƒåˆ›å»ºè¿æ¥æ± ï¼Œä»è¿æ¥æ± ä¸­è·å–jediså¯¹è±¡ï¼Œå®ç°å¹¶å‘</p><p>æˆ‘ä»¬å†™ä¸€ä¸ªå·¥å…·ç±»ï¼Œç”¨äºç”ŸæˆJedisçš„è¿æ¥æ± ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.jedis.util;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸpoo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisConnectionFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> JedisPool jedisPool;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//é…ç½®è¿æ¥æ± </span></span><br><span class="line">        <span class="type">JedisPoolConfig</span> <span class="variable">poolConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>();</span><br><span class="line">        poolConfig.setMaxTotal(<span class="number">8</span>);</span><br><span class="line">        poolConfig.setMaxIdle(<span class="number">8</span>);</span><br><span class="line">        poolConfig.setMaxIdle(<span class="number">0</span>);</span><br><span class="line">        poolConfig.setMaxWaitMillis(<span class="number">1000</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¿æ¥æ± å¯¹è±¡</span></span><br><span class="line">      <span class="comment">//172.30.10.68ä¸ºä½ çš„IPåœ°å€ 1000(æ¯«ç§’)ä¸ºè¿æ¥å­˜æ´»æ—¶é—´  â€œrootâ€ä¸ºå¯†ç </span></span><br><span class="line">        jedisPool = <span class="keyword">new</span> <span class="title class_">JedisPool</span>(poolConfig,<span class="string">&quot;172.30.10.68&quot;</span>,<span class="number">6379</span>, <span class="number">1000</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title function_">getJedis</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å› æ­¤å»ºç«‹Jerisè¿æ¥çš„æ–¹å¼ä¸ºï¼š</span></span><br><span class="line"><span class="meta">@BeforeEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="comment">//é€šè¿‡è¿æ¥æ± å»ºç«‹è¿æ¥</span></span><br><span class="line">        jedis = JedisConnectionFactory.getJedis();</span><br><span class="line">        <span class="comment">//é€‰æ‹©æ•°æ®åº“</span></span><br><span class="line">        jedis.select(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="3-3-SpringDataRediså¿«é€Ÿå…¥é—¨"><a href="#3-3-SpringDataRediså¿«é€Ÿå…¥é—¨" class="headerlink" title="3.3.SpringDataRediså¿«é€Ÿå…¥é—¨"></a>3.3.SpringDataRediså¿«é€Ÿå…¥é—¨</h4><ul><li><strong>æä¾›äº†å¯¹ä¸åŒRediså®¢æˆ·ç«¯çš„æ•´åˆ</strong></li><li><strong>æä¾›äº† <u>RedisTemplate</u> ç»Ÿä¸€APIæ¥æ“ä½œRedis</strong></li><li>æ”¯æŒRedisçš„å‘å¸ƒè®¢é˜…æ¨¡å‹</li><li>æ”¯æŒRediså“¨å…µå’ŒRedisé›†ç¾¤</li><li>æ”¯æŒåŸºäºLettuceçš„å“åº”å¼ç¼–ç¨‹</li><li>æ”¯æŒåŸºäºJDKã€JSONã€å­—ç¬¦ä¸²ã€Springå¯¹è±¡çš„æ•°æ®åºåˆ—åŒ–åŠååºåˆ—åŒ–</li><li>æ”¯æŒåŸºäºRedisçš„JDKCollectionå®ç°</li></ul><h5 id="RedisTemplateå·¥å…·ç±»çš„ä½¿ç”¨ï¼š"><a href="#RedisTemplateå·¥å…·ç±»çš„ä½¿ç”¨ï¼š" class="headerlink" title="RedisTemplateå·¥å…·ç±»çš„ä½¿ç”¨ï¼š"></a>RedisTemplateå·¥å…·ç±»çš„ä½¿ç”¨ï¼š</h5><table><thead><tr><th align="center"><strong>API</strong></th><th align="center"><strong>è¿”å›å€¼ç±»å‹</strong></th><th align="center"><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td align="center"><strong>redisTemplate</strong>.opsForValue()</td><td align="center">ValueOperations</td><td align="center">æ“ä½œStringç±»å‹æ•°æ®</td></tr><tr><td align="center"><strong>redisTemplate</strong>.opsForHash()</td><td align="center">HashOperations</td><td align="center">æ“ä½œHashç±»å‹æ•°æ®</td></tr><tr><td align="center"><strong>redisTemplate</strong>.opsForList()</td><td align="center">ListOperations</td><td align="center">æ“ä½œListç±»å‹æ•°æ®</td></tr><tr><td align="center"><strong>redisTemplate</strong>.opsForSet()</td><td align="center">SetOperations</td><td align="center">æ“ä½œSetç±»å‹æ•°æ®</td></tr><tr><td align="center"><strong>redisTemplate</strong>.opsForZSet()</td><td align="center">ZSetOperations</td><td align="center">æ“ä½œSortedSetç±»å‹æ•°æ®</td></tr><tr><td align="center"><strong>redisTemplate</strong></td><td align="center"></td><td align="center">é€šç”¨çš„å‘½ä»¤</td></tr></tbody></table><h5 id="SpringDataRedisçš„ç¯å¢ƒé…ç½®ï¼š"><a href="#SpringDataRedisçš„ç¯å¢ƒé…ç½®ï¼š" class="headerlink" title="SpringDataRedisçš„ç¯å¢ƒé…ç½®ï¼š"></a>SpringDataRedisçš„ç¯å¢ƒé…ç½®ï¼š</h5><h6 id="Step1-å¼•å…¥ä¾èµ–"><a href="#Step1-å¼•å…¥ä¾èµ–" class="headerlink" title="Step1: å¼•å…¥ä¾èµ–"></a>Step1: å¼•å…¥ä¾èµ–</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h6 id="Step2-é…ç½®æ–‡ä»¶-åœ¨application-yamlä¸­æ·»åŠ redisçš„é…ç½®-ä½¿ç”¨äº†lettuceæä¾›çš„API"><a href="#Step2-é…ç½®æ–‡ä»¶-åœ¨application-yamlä¸­æ·»åŠ redisçš„é…ç½®-ä½¿ç”¨äº†lettuceæä¾›çš„API" class="headerlink" title="Step2: é…ç½®æ–‡ä»¶(åœ¨application.yamlä¸­æ·»åŠ redisçš„é…ç½® ä½¿ç”¨äº†lettuceæä¾›çš„API )"></a>Step2: é…ç½®æ–‡ä»¶(åœ¨application.yamlä¸­æ·»åŠ redisçš„é…ç½® ä½¿ç”¨äº†lettuceæä¾›çš„API )</h6><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">172.30</span><span class="number">.10</span><span class="number">.68</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">lettuce:</span></span><br><span class="line">      <span class="attr">pool:</span></span><br><span class="line">        <span class="attr">max-active:</span> <span class="number">8</span></span><br><span class="line">        <span class="attr">max-idle:</span> <span class="number">8</span></span><br><span class="line">        <span class="attr">min-idle:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">max-wait:</span> <span class="string">100ms</span></span><br></pre></td></tr></table></figure><h6 id="Step3-æ³¨å…¥RedisTemplate"><a href="#Step3-æ³¨å…¥RedisTemplate" class="headerlink" title="Step3: æ³¨å…¥RedisTemplate"></a>Step3: æ³¨å…¥RedisTemplate</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br></pre></td></tr></table></figure><h6 id="Step4-å¼€å§‹ä½¿ç”¨"><a href="#Step4-å¼€å§‹ä½¿ç”¨" class="headerlink" title="Step4:å¼€å§‹ä½¿ç”¨"></a>Step4:å¼€å§‹ä½¿ç”¨</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testString</span><span class="params">()</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;hobby&quot;</span>,<span class="string">&quot;åƒ&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">hobby</span> <span class="operator">=</span> redisTemplate.opsForValue().get(<span class="string">&quot;hobby&quot;</span>);</span><br><span class="line">        System.out.println(hobby);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>RedisTemplateå¯ä»¥æ¥æ”¶ä»»æ„Objectä½œä¸ºå€¼å†™å…¥Redisï¼Œåªä¸è¿‡å†™å…¥å‰ä¼šæŠŠObjectåºåˆ—åŒ–ä¸ºå­—èŠ‚å½¢å¼ï¼Œé»˜è®¤æ˜¯é‡‡ç”¨JDKåºåˆ—åŒ–,åºåˆ—åŒ–åï¼Œä¼šä»¥å­—èŠ‚çš„å½¢å¼å­˜å‚¨åœ¨redisæ•°æ®åº“ä¸­</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230414091141449.png" alt="image-20230414091141449" style="zoom: 60%;" /><ul><li><p>å¯è¯»æ€§å·®</p></li><li><p>å†…å­˜å ç”¨è¾ƒå¤§</p></li></ul><h4 id="3-4-RedisSerializeré…ç½®"><a href="#3-4-RedisSerializeré…ç½®" class="headerlink" title="3.4.RedisSerializeré…ç½®"></a>3.4.RedisSerializeré…ç½®</h4><p>â€‹æ–¹æ¡ˆä¸€ï¼šé…ç½®RedisTemplateçš„åºåˆ—åŒ–æ–¹å¼ï¼š(ç™½å­¦ï¼Œæ–¹æ¡ˆæœ‰ç¼ºé™·)</p><p>â€‹1.è‡ªå®šä¹‰RedisTemplate</p><p>â€‹2.ä¿®æ”¹RedisTemplateçš„åºåˆ—åŒ–å™¨ä¸ºGenericJackson2JsonRedisSerializer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºRedisTemplateå¯¹è±¡</span></span><br><span class="line">        RedisTemplate&lt;String, Object&gt; redisTemplate = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// è®¾ç½®è¿æ¥å·¥å‚   </span></span><br><span class="line">        redisTemplate.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="comment">// è®¾ç½®åºåˆ—åŒ–å·¥å…·   </span></span><br><span class="line">        <span class="type">GenericJackson2JsonRedisSerializer</span> <span class="variable">jsonRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>();</span><br><span class="line">        <span class="comment">// keyå’Œ hashKeyé‡‡ç”¨ stringåºåˆ—åŒ–  </span></span><br><span class="line">        redisTemplate.setKeySerializer(RedisSerializer.string()); </span><br><span class="line">        redisTemplate.setHashKeySerializer(RedisSerializer.string());</span><br><span class="line">        <span class="comment">// valueå’Œ hashValueé‡‡ç”¨ JSONåºåˆ—åŒ–</span></span><br><span class="line">        redisTemplate.setValueSerializer(jsonRedisSerializer);</span><br><span class="line">        redisTemplate.setHashValueSerializer(jsonRedisSerializer);</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!--##################å¼•å…¥jacksonä¾èµ–ï¼š###############--&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>ã€Œç¼ºé™·ã€</strong>:ä¸ºäº†åœ¨ååºåˆ—åŒ–æ—¶çŸ¥é“å¯¹è±¡çš„ç±»å‹ï¼ŒJSONåºåˆ—åŒ–å™¨ä¼šå°†ç±»çš„classç±»å‹å†™å…¥jsonç»“æœä¸­ï¼Œå­˜å…¥Redisï¼Œä¼š<strong>å¸¦æ¥é¢å¤–çš„å†…å­˜å¼€é”€</strong>ã€‚</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230414093507462.png" alt="image-20230414093507462" style="zoom: 50%;" /><h4 id="3-5-StringRedisTemplate"><a href="#3-5-StringRedisTemplate" class="headerlink" title="3.5.StringRedisTemplate"></a>3.5.StringRedisTemplate</h4><p>æ–¹æ¡ˆäºŒ(ç¼ºç‚¹æ˜¯å­˜å–å¯¹è±¡æ—¶éƒ½éœ€è¦è‡ªè¡Œæ‰‹åŠ¨åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–)ï¼š</p><p>â€‹1.ä½¿ç”¨StringRedisTemplate</p><p>â€‹2.å†™å…¥Redisæ—¶ï¼Œæ‰‹åŠ¨æŠŠå¯¹è±¡åºåˆ—åŒ–ä¸ºJSON</p><p>â€‹3.è¯»å–Redisæ—¶ï¼Œæ‰‹åŠ¨æŠŠè¯»å–åˆ°çš„JSONååºåˆ—åŒ–ä¸ºå¯¹è±¡</p><p>Springé»˜è®¤æä¾›äº†ä¸€ä¸ª<strong>StringRedisTemplate</strong>ç±»ï¼Œå®ƒçš„<strong>keyå’Œvalueçš„åºåˆ—åŒ–æ–¹å¼é»˜è®¤å°±æ˜¯Stringæ–¹å¼</strong>ã€‚çœå»äº†æˆ‘ä»¬è‡ªå®šä¹‰RedisTemplateçš„è¿‡ç¨‹ï¼š</p><h5 id="StringRedisTemplateç±»çš„ä½¿ç”¨ï¼š"><a href="#StringRedisTemplateç±»çš„ä½¿ç”¨ï¼š" class="headerlink" title="StringRedisTemplateç±»çš„ä½¿ç”¨ï¼š"></a>StringRedisTemplateç±»çš„ä½¿ç”¨ï¼š</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"><span class="comment">// JSONå·¥å…·</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testStringTemplate</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">  <span class="comment">// å‡†å¤‡å¯¹è±¡</span></span><br><span class="line">  <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;è™å“¥&quot;</span>, <span class="number">18</span>);</span><br><span class="line">  <span class="comment">// æ‰‹åŠ¨åºåˆ—åŒ–</span></span><br><span class="line">  <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line">  <span class="comment">// å†™å…¥ä¸€æ¡æ•°æ®åˆ°redis</span></span><br><span class="line">  stringRedisTemplate.opsForValue().set(<span class="string">&quot;user:200&quot;</span>, json); </span><br><span class="line">  <span class="comment">// è¯»å–æ•°æ®</span></span><br><span class="line">  <span class="type">String</span> <span class="variable">val</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(<span class="string">&quot;user:200&quot;</span>);</span><br><span class="line">  <span class="comment">// ååºåˆ—åŒ–</span></span><br><span class="line">  <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> mapper.readValue(val, User.class);</span><br><span class="line">  System.out.println(<span class="string">&quot;user1 = &quot;</span> + user1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œåœ¨redisä¸­å­˜æ”¾çš„jsonæ•°æ®å°†ä¸å«ç±»è·¯å¾„ä¿¡æ¯ï¼š{â€œnameâ€:â€è™å“¥â€,â€ageâ€:18} </p><h2 id="å®æˆ˜ç¯‡"><a href="#å®æˆ˜ç¯‡" class="headerlink" title="å®æˆ˜ç¯‡"></a>å®æˆ˜ç¯‡</h2><h3 id="1-çŸ­ä¿¡éªŒè¯ç çš„ç™»å½•æ³¨å†ŒåŠŸèƒ½"><a href="#1-çŸ­ä¿¡éªŒè¯ç çš„ç™»å½•æ³¨å†ŒåŠŸèƒ½" class="headerlink" title="1.çŸ­ä¿¡éªŒè¯ç çš„ç™»å½•æ³¨å†ŒåŠŸèƒ½"></a>1.çŸ­ä¿¡éªŒè¯ç çš„ç™»å½•æ³¨å†ŒåŠŸèƒ½</h3><h4 id="æ­å»ºé»‘é©¬ç‚¹è¯„é¡¹ç›®"><a href="#æ­å»ºé»‘é©¬ç‚¹è¯„é¡¹ç›®" class="headerlink" title="æ­å»ºé»‘é©¬ç‚¹è¯„é¡¹ç›®"></a>æ­å»ºé»‘é©¬ç‚¹è¯„é¡¹ç›®</h4><ul><li><h5 id="å‰ç«¯éƒ¨ç½²åœ¨nginxæœåŠ¡å™¨ï¼Œåç«¯éƒ¨ç½²åœ¨tomcatæœåŠ¡å™¨"><a href="#å‰ç«¯éƒ¨ç½²åœ¨nginxæœåŠ¡å™¨ï¼Œåç«¯éƒ¨ç½²åœ¨tomcatæœåŠ¡å™¨" class="headerlink" title="å‰ç«¯éƒ¨ç½²åœ¨nginxæœåŠ¡å™¨ï¼Œåç«¯éƒ¨ç½²åœ¨tomcatæœåŠ¡å™¨"></a>å‰ç«¯éƒ¨ç½²åœ¨nginxæœåŠ¡å™¨ï¼Œåç«¯éƒ¨ç½²åœ¨tomcatæœåŠ¡å™¨</h5></li><li><p>æŸ¥çœ‹nginxçš„å®‰è£…ä¿¡æ¯ï¼šbrew info nginx</p><p>mac ä¸­ nginxçš„å¸¸ç”¨å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx å¯åŠ¨æœåŠ¡</span><br><span class="line">sudo nginx -s reload  é‡æ–°åŠ è½½</span><br><span class="line">sudo nginx -s reopen é‡æ–°å¯åŠ¨</span><br><span class="line">sudo nginx -s quit é€€å‡ºï¼ˆå¤„ç†å®Œäº‹æƒ…èµ°ï¼‰</span><br><span class="line">open /opt/homebrew/etc/nginx/ æŸ¥çœ‹nginxå®‰è£…ç›®å½•</span><br><span class="line">nginx -V æŸ¥çœ‹nginxç‰ˆæœ¬åŠå®‰è£…çš„æœ¬åœ°ä½ç½®</span><br><span class="line">ngxin -v æŸ¥çœ‹nginxç‰ˆæœ¬ï¼ˆæ­¤æ–¹æ³•ä¾ç„¶å¯ä»¥æ£€æµ‹æ˜¯å¦å®‰è£…æŸä¸€è½¯ä»¶ï¼Œå¦‚git,hgç­‰ï¼‰</span><br></pre></td></tr></table></figure></li></ul><h4 id="åŸºäºsessionçš„çŸ­ä¿¡ç™»å½•"><a href="#åŸºäºsessionçš„çŸ­ä¿¡ç™»å½•" class="headerlink" title="åŸºäºsessionçš„çŸ­ä¿¡ç™»å½•"></a>åŸºäºsessionçš„çŸ­ä¿¡ç™»å½•</h4><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230415105822095.png" alt="image-20230415105822095"></p><h5 id="åŠŸèƒ½1-è¾“å…¥æ‰‹æœºå·ç‚¹å‡»å‘é€éªŒè¯ç "><a href="#åŠŸèƒ½1-è¾“å…¥æ‰‹æœºå·ç‚¹å‡»å‘é€éªŒè¯ç " class="headerlink" title="åŠŸèƒ½1:è¾“å…¥æ‰‹æœºå·ç‚¹å‡»å‘é€éªŒè¯ç "></a>åŠŸèƒ½1:è¾“å…¥æ‰‹æœºå·ç‚¹å‡»å‘é€éªŒè¯ç </h5><p>â€‹æŸ¥çœ‹å¾—ï¼šè¯·æ±‚ç½‘å€ä¸º <a href="http://localhost:8080/api/user/code?phone=13612345678%EF%BC%8C%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F%E4%B8%BAPOST">http://localhost:8080/api/user/code?phone=13612345678ï¼Œè¯·æ±‚æ–¹å¼ä¸ºPOST</a></p><table><thead><tr><th>æœ‰æ•ˆä¿¡æ¯è¡¨ï¼š</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>è¯·æ±‚æ–¹å¼</td><td>POST</td></tr><tr><td>è¯·æ±‚è·¯å¾„</td><td>&#x2F;user&#x2F;code</td></tr><tr><td>è¯·æ±‚å‚æ•°</td><td>phone,ç”µè¯å·ç </td></tr><tr><td>è¿”å›å€¼</td><td>æ— </td></tr></tbody></table><p>å¯¹åº”åœ¨controllerä¸­ç¼–å†™å“åº”å‡½æ•°å³å¯:</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230415110937034.png" alt="image-20230415110937034"></p><p>è™½ç„¶è¿˜æ²¡å†™å‘é€éªŒè¯ç çš„é€»è¾‘ï¼Œæ€»ä¹‹åŠŸèƒ½äº¤ç»™serviceå±‚å°±è¡Œå•¦</p><h5 id="åŠŸèƒ½2-é€šè¿‡æ‰‹æœºå·å’ŒçŸ­ä¿¡éªŒè¯ç ç™»å½•"><a href="#åŠŸèƒ½2-é€šè¿‡æ‰‹æœºå·å’ŒçŸ­ä¿¡éªŒè¯ç ç™»å½•" class="headerlink" title="åŠŸèƒ½2:é€šè¿‡æ‰‹æœºå·å’ŒçŸ­ä¿¡éªŒè¯ç ç™»å½•"></a>åŠŸèƒ½2:é€šè¿‡æ‰‹æœºå·å’ŒçŸ­ä¿¡éªŒè¯ç ç™»å½•</h5><p>è¯·æ±‚ç½‘å€: <a href="http://localhost:8080/api/user/login">http://localhost:8080/api/user/login</a></p><table><thead><tr><th>æœ‰æ•ˆä¿¡æ¯è¡¨ï¼š</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>è¯·æ±‚æ–¹å¼</td><td>POST</td></tr><tr><td>è¯·æ±‚è·¯å¾„</td><td>&#x2F;user&#x2F;login</td></tr><tr><td>è¯·æ±‚å‚æ•°</td><td>jsonå½¢å¼ phone : ç”µè¯å·ç  ; code : éªŒè¯ç </td></tr><tr><td>è¿”å›å€¼</td><td>æ— </td></tr></tbody></table><p>ç”±äºæ•°æ®ä»¥jsonå½¢å¼æ”¾åœ¨payloadä¸­ï¼Œå› æ­¤éœ€è¦@RequestBodyæ³¨è§£è·å–</p><h4 id="é›†ç¾¤ä¸‹çš„sessionå…±äº«é—®é¢˜"><a href="#é›†ç¾¤ä¸‹çš„sessionå…±äº«é—®é¢˜" class="headerlink" title="é›†ç¾¤ä¸‹çš„sessionå…±äº«é—®é¢˜"></a>é›†ç¾¤ä¸‹çš„sessionå…±äº«é—®é¢˜</h4><p><strong>å¤šå°Tomcatå¹¶ä¸å…±äº«sessionå­˜å‚¨ç©ºé—´ï¼Œå½“è¯·æ±‚åˆ‡æ¢(è´Ÿè½½å‡è¡¡)åˆ°ä¸åŒtomcatæœåŠ¡æ—¶å¯¼è‡´æ•°æ®ä¸¢å¤±çš„é—®é¢˜</strong></p><p>â€‹å¦‚ä½•è®©tomcatå®ç°sessionå…±äº«ï¼Ÿ</p><p>â€”â€”ä½¿ç”¨redisé›†ç¾¤ï¼</p><h5 id="Rediså®ç°å…±äº«sessionç™»å½•"><a href="#Rediså®ç°å…±äº«sessionç™»å½•" class="headerlink" title="Rediså®ç°å…±äº«sessionç™»å½•"></a>Rediså®ç°å…±äº«sessionç™»å½•</h5><p>è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®ä¿å­˜åœ¨redisä¸­</p><p>redisè®¾è®¡ï¼š<br>    ç”±äºä¸€ä¸ªè®¾å¤‡å¯èƒ½ç™»å½•å¤šä¸ªè´¦å·ï¼Œå¦‚æœä»…ä»…å°†â€codeâ€ä½œä¸ºkeyï¼Œå°†ä¼šé€ æˆéªŒè¯ç çš„è¦†ç›–<br>    å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†â€”â€”æ‰‹æœºå·ä½œä¸ºéªŒè¯ç è®°å½•çš„keyï¼</p><p>â€‹  <strong>ã€Œkeyçš„è®¾è®¡ï¼šå”¯ä¸€æ€§(é˜²æ­¢æ•°æ®è¦†ç›–)ï¼›ç”¨æˆ·åœ¨è¯·æ±‚æ—¶ä¼šæºå¸¦çš„ä¿¡æ¯ã€</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230415152700699.png" alt="image-20230415152700699"></p><h4 id="Rediså®ç°sessionçš„åˆ·æ–°é—®é¢˜"><a href="#Rediså®ç°sessionçš„åˆ·æ–°é—®é¢˜" class="headerlink" title="Rediså®ç°sessionçš„åˆ·æ–°é—®é¢˜"></a>Rediså®ç°sessionçš„åˆ·æ–°é—®é¢˜</h4><p>â€‹ä½¿ç”¨æ‹¦æˆªå™¨ï¼Œå¯¹æ‰€æœ‰é¡µé¢çš„è¯·æ±‚è¿›è¡Œæ‹¦æˆªï¼Œè‹¥æœ‰è¯·æ±‚ï¼Œåˆ™å°†tokençš„æœ‰æ•ˆæœŸåˆ·æ–°ï¼</p><h3 id="ç¼“å­˜å­¦ä¹ ï¼š"><a href="#ç¼“å­˜å­¦ä¹ ï¼š" class="headerlink" title="ç¼“å­˜å­¦ä¹ ï¼š"></a>ç¼“å­˜å­¦ä¹ ï¼š</h3><h4 id="ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ</h4><h5 id="â€”â€”æ•°æ®äº¤æ¢çš„ç¼“å†²åŒº"><a href="#â€”â€”æ•°æ®äº¤æ¢çš„ç¼“å†²åŒº" class="headerlink" title="â€”â€”æ•°æ®äº¤æ¢çš„ç¼“å†²åŒº"></a>â€”â€”æ•°æ®äº¤æ¢çš„ç¼“å†²åŒº</h5><table><thead><tr><th>ç¼“å­˜çš„ä¼˜ç‚¹</th><th>ç¼“å­˜çš„æˆæœ¬</th></tr></thead><tbody><tr><td>é™ä½åç«¯è´Ÿè½½</td><td>æ•°æ®ä¸€è‡´æ€§æˆæœ¬</td></tr><tr><td>æé«˜è¯»å†™æ•ˆç‡ï¼Œé™ä½å“åº”æ—¶é—´</td><td>ä»£ç ç»´æŠ¤æˆæœ¬</td></tr><tr><td></td><td>è¿ç»´æˆæœ¬</td></tr></tbody></table><h4 id="æ·»åŠ Redisç¼“å­˜"><a href="#æ·»åŠ Redisç¼“å­˜" class="headerlink" title="æ·»åŠ Redisç¼“å­˜"></a>æ·»åŠ Redisç¼“å­˜</h4><h5 id="åº”ç”¨åœºæ™¯ï¼šæŸ¥è¯¢å•†é“ºä¿¡æ¯"><a href="#åº”ç”¨åœºæ™¯ï¼šæŸ¥è¯¢å•†é“ºä¿¡æ¯" class="headerlink" title="åº”ç”¨åœºæ™¯ï¼šæŸ¥è¯¢å•†é“ºä¿¡æ¯"></a>åº”ç”¨åœºæ™¯ï¼šæŸ¥è¯¢å•†é“ºä¿¡æ¯</h5><p>â€‹                     </p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230416110937099.png" alt="image-20230416110937099" style="zoom:50%;" /><p>â€‹è‡ªå·±å®ç°å…¶ä¸­çš„é€»è¾‘</p><h4 id="ç¼“å­˜æ›´æ–°ç­–ç•¥"><a href="#ç¼“å­˜æ›´æ–°ç­–ç•¥" class="headerlink" title="ç¼“å­˜æ›´æ–°ç­–ç•¥"></a>ç¼“å­˜æ›´æ–°ç­–ç•¥</h4><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230416113050539.png" alt="image-20230416113050539" style="zoom: 33%;" /><p>â€‹æ•°æ®æ›´æ–°-&gt;ç¼“å­˜ä¸­çš„å¯¹åº”è®°å½•ä¼šè¢«åˆ é™¤</p><h4 id="ç¼“å­˜ç©¿é€"><a href="#ç¼“å­˜ç©¿é€" class="headerlink" title="ç¼“å­˜ç©¿é€"></a>ç¼“å­˜ç©¿é€</h4><p>â€‹â€”-&gt;æ˜¯æŒ‡å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®åœ¨ç¼“å­˜ä¸­å’Œæ•°æ®åº“ä¸­éƒ½ä¸å­˜åœ¨ï¼Œè¿™æ ·ç¼“å­˜æ°¸è¿œä¸ä¼šç”Ÿæ•ˆï¼Œè¿™äº›è¯·æ±‚éƒ½ä¼šæ‰“åˆ°æ•°æ®åº“ã€‚</p><h5 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h5><h6 id="ç¼“å­˜ç©ºå¯¹è±¡"><a href="#ç¼“å­˜ç©ºå¯¹è±¡" class="headerlink" title="ç¼“å­˜ç©ºå¯¹è±¡"></a>ç¼“å­˜ç©ºå¯¹è±¡</h6><p>â€‹ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œç»´æŠ¤æ–¹ä¾¿</p><p>â€‹ç¼ºç‚¹ï¼šé¢å¤–çš„å†…å­˜æ¶ˆè€—ã€       å¯èƒ½é€ æˆçŸ­æœŸçš„ä¸ä¸€è‡´</p><h6 id="å¸ƒéš†è¿‡æ»¤"><a href="#å¸ƒéš†è¿‡æ»¤" class="headerlink" title="å¸ƒéš†è¿‡æ»¤"></a>å¸ƒéš†è¿‡æ»¤</h6><p>â€‹ä¼˜ç‚¹ï¼šå†…å­˜å ç”¨è¾ƒå°‘ï¼Œæ²¡æœ‰å¤šä½™key</p><p>â€‹ç¼ºç‚¹ï¼šå®ç°å¤æ‚ã€                  å­˜åœ¨è¯¯åˆ¤å¯èƒ½(hashå†²çª)</p><p>â€‹         <strong>ä½¿ç”¨ç¼“å­˜ç©ºå¯¹è±¡æ–¹å¼è§£å†³ï¼š</strong></p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230416215655097.png" alt="image-20230416215655097" style="zoom:50%;" /><p>ç¼“å­˜ç©¿é€çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ</p><p>â€‹â€¢ç¼“å­˜nullå€¼</p><p>â€‹â€¢å¸ƒéš†è¿‡æ»¤</p><p>â€‹â€¢å¢å¼ºidçš„å¤æ‚åº¦ï¼Œé¿å…è¢«çŒœæµ‹idè§„å¾‹</p><p>â€‹â€¢åšå¥½æ•°æ®çš„åŸºç¡€æ ¼å¼æ ¡éªŒ</p><p>â€‹â€¢åŠ å¼ºç”¨æˆ·æƒé™æ ¡éªŒ</p><p>â€‹â€¢åšå¥½çƒ­ç‚¹å‚æ•°çš„é™æµ</p><h4 id="ç¼“å­˜é›ªå´©"><a href="#ç¼“å­˜é›ªå´©" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h4><h4 id="ç¼“å­˜å‡»ç©¿"><a href="#ç¼“å­˜å‡»ç©¿" class="headerlink" title="ç¼“å­˜å‡»ç©¿"></a>ç¼“å­˜å‡»ç©¿</h4><h4 id="ç¼“å­˜å·¥å…·ç±»å°è£…"><a href="#ç¼“å­˜å·¥å…·ç±»å°è£…" class="headerlink" title="ç¼“å­˜å·¥å…·ç±»å°è£…"></a>ç¼“å­˜å·¥å…·ç±»å°è£…</h4>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ç»„ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯å¼€å‘ç»„ä»¶ </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¶ˆæ¯é˜Ÿåˆ—</title>
      <link href="/2023/06/02/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
      <url>/2023/06/02/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¶ˆæ¯é˜Ÿåˆ—"><a href="#æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—"></a>æ¶ˆæ¯é˜Ÿåˆ—</h1><h2 id="1-MQçš„ç›¸å…³æ¦‚å¿µ-message-queue"><a href="#1-MQçš„ç›¸å…³æ¦‚å¿µ-message-queue" class="headerlink" title="1.MQçš„ç›¸å…³æ¦‚å¿µ(message queue)"></a>1.MQçš„ç›¸å…³æ¦‚å¿µ(message queue)</h2><h3 id="1-1ä»€ä¹ˆæ˜¯MQï¼š"><a href="#1-1ä»€ä¹ˆæ˜¯MQï¼š" class="headerlink" title="1.1ä»€ä¹ˆæ˜¯MQï¼š"></a>1.1ä»€ä¹ˆæ˜¯MQï¼š</h3><ul><li><p>â€‹æœ¬è´¨æ˜¯ä¸ªé˜Ÿåˆ—ï¼Œåªä¸è¿‡é˜Ÿåˆ—ä¸­çš„å†…å®¹æ˜¯messageè€Œå·²ï¼</p></li><li><p>â€‹ç”¨äºä¸Šä¸‹æ¸¸ä¼ é€’æ¶ˆæ¯</p></li></ul><h3 id="1-2ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MQ"><a href="#1-2ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MQ" class="headerlink" title="1.2ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MQ"></a>1.2ä¸ºä»€ä¹ˆè¦ä½¿ç”¨MQ</h3><h4 id="1-æµé‡æ¶ˆå³°ï¼š"><a href="#1-æµé‡æ¶ˆå³°ï¼š" class="headerlink" title="1.æµé‡æ¶ˆå³°ï¼š"></a>1.æµé‡æ¶ˆå³°ï¼š</h4><p>â€‹åœ¨ç”¨æˆ·è®¿é—®ç³»ç»Ÿå‰æ·»åŠ MQï¼Œå¯¹è®¿é—®çš„æ¶ˆæ¯è¿›è¡Œæ’é˜Ÿï¼Œè™½ç„¶æ’é˜Ÿä¼šæ¶ˆè€—æ—¶é—´ä½†ä¸ä¼šå‡ºç°æµé‡è¿‡å¤§å¯¼è‡´æœåŠ¡å™¨å®•æœºçš„æƒ…å†µã€‚</p><h4 id="2-åº”ç”¨è§£è€¦ï¼š"><a href="#2-åº”ç”¨è§£è€¦ï¼š" class="headerlink" title="2.åº”ç”¨è§£è€¦ï¼š"></a>2.åº”ç”¨è§£è€¦ï¼š</h4><p>â€‹å¦‚æœæ²¡æœ‰MQï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨è®¢å•ç³»ç»Ÿä¸‹å•åï¼Œè®¢å•ç³»ç»Ÿä¼šç«‹å³è°ƒç”¨ç‰©æµç³»ç»Ÿï¼Œå¦‚æœç‰©æµç³»ç»Ÿæš‚æ—¶å‡ºæ•…éšœäº†ï¼Œé‚£ä¹ˆä¸‹å•æ“ä½œå°±ä¼šå¼‚å¸¸ã€‚</p><p>â€‹å¦‚æœä½¿ç”¨äº†MQï¼Œç”¨æˆ·åœ¨è®¢å•ç³»ç»Ÿä¸‹å•åï¼Œå¦‚æœç‰©æµç³»ç»Ÿæš‚æ—¶å‡ºæ•…éšœäº†ï¼Œç‰©æµç³»ç»Ÿéœ€è¦å¤„ç†çš„æ¶ˆæ¯ä¼šè¢«ç¼“å­˜åœ¨MQä¸­ï¼Œç­‰åˆ°ç‰©æµç³»ç»Ÿæ•…éšœä¿®å¤å®Œæˆï¼Œå°±å¯ä»¥ä»MQä¸­å–å‡ºå¾…å¤„ç†çš„ä¿¡æ¯ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·ä¸ä¼šæ„Ÿå—åˆ°ç‰©æµç³»ç»Ÿçš„æ•…éšœï¼Œå› æ­¤æå‡äº†ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</p><h4 id="3-å¼‚æ­¥å¤„ç†ï¼š"><a href="#3-å¼‚æ­¥å¤„ç†ï¼š" class="headerlink" title="3.å¼‚æ­¥å¤„ç†ï¼š"></a>3.å¼‚æ­¥å¤„ç†ï¼š</h4><p>æœ‰äº›æœåŠ¡é—´è°ƒç”¨æ˜¯å¼‚æ­¥çš„ï¼Œä¾‹å¦‚ A è°ƒç”¨ Bï¼ŒB éœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´æ‰§è¡Œï¼Œä½†æ˜¯ A éœ€è¦çŸ¥é“ B ä»€ä¹ˆæ—¶å€™å¯ä»¥æ‰§è¡Œå®Œã€‚</p><p>ä»¥å‰ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼ŒA è¿‡ä¸€æ®µæ—¶é—´å»è°ƒç”¨ B çš„æŸ¥è¯¢ api æŸ¥è¯¢ã€‚æˆ–è€… A æä¾›ä¸€ä¸ª callback apiï¼ŒB æ‰§è¡Œå®Œä¹‹åè°ƒç”¨ api é€šçŸ¥ A æœåŠ¡ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½ä¸æ˜¯å¾ˆä¼˜é›…ã€‚</p><p>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å¾ˆæ–¹ä¾¿è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ A è°ƒç”¨ B æœåŠ¡åï¼Œåªéœ€è¦ç›‘å¬ B å¤„ç†å®Œæˆçš„æ¶ˆæ¯ï¼Œå½“ B å¤„ç†å®Œæˆåï¼Œä¼šå‘é€ä¸€æ¡æ¶ˆæ¯ç»™ MQï¼ŒMQ ä¼šå°†æ­¤æ¶ˆæ¯è½¬å‘ç»™ A æœåŠ¡ã€‚è¿™æ · A æœåŠ¡æ—¢ä¸ç”¨å¾ªç¯è°ƒç”¨ B çš„æŸ¥è¯¢ apiï¼Œä¹Ÿä¸ç”¨æä¾› callback apiã€‚åŒæ · B æœåŠ¡ä¹Ÿä¸ç”¨åšè¿™äº›æ“ä½œï¼ŒA æœåŠ¡è¿˜èƒ½åŠæ—¶çš„å¾—åˆ°å¼‚æ­¥å¤„ç†æˆåŠŸçš„æ¶ˆæ¯ã€‚</p><h2 id="2-RabbitMQ"><a href="#2-RabbitMQ" class="headerlink" title="2.RabbitMQ"></a>2.RabbitMQ</h2><h3 id="2-1-RabbitMQæ¦‚å¿µï¼š"><a href="#2-1-RabbitMQæ¦‚å¿µï¼š" class="headerlink" title="2.1 RabbitMQæ¦‚å¿µï¼š"></a>2.1 RabbitMQæ¦‚å¿µï¼š</h3><p>â€‹RabbitMQæ˜¯ä¸€ä¸ªæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œèƒ½å¤Ÿæ¥æ”¶ã€å­˜å‚¨å¹¶è½¬å‘æ¶ˆæ¯</p><h3 id="2-2-å››å¤§æ ¸å¿ƒæ¦‚å¿µï¼š"><a href="#2-2-å››å¤§æ ¸å¿ƒæ¦‚å¿µï¼š" class="headerlink" title="2.2 å››å¤§æ ¸å¿ƒæ¦‚å¿µï¼š"></a>2.2 å››å¤§æ ¸å¿ƒæ¦‚å¿µï¼š</h3><h4 id="ç”Ÿäº§è€…ï¼š"><a href="#ç”Ÿäº§è€…ï¼š" class="headerlink" title="ç”Ÿäº§è€…ï¼š"></a>ç”Ÿäº§è€…ï¼š</h4><p>â€‹äº§ç”Ÿæ•°æ®ï¼Œå‘é€æ¶ˆæ¯çš„ç¨‹åºæˆä¸ºç”Ÿäº§è€…</p><h4 id="äº¤æ¢æœºï¼š"><a href="#äº¤æ¢æœºï¼š" class="headerlink" title="äº¤æ¢æœºï¼š"></a>äº¤æ¢æœºï¼š</h4><p>â€‹æ¥æ”¶æ¥è‡ªç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œå¹¶å°†æ¶ˆæ¯æ¨é€åˆ°é˜Ÿåˆ—ä¸­</p><p>â€‹ä¸€ä¸ªäº¤æ¢æœºå¯ä»¥ä¸å¤šä¸ªç‹¬ç«‹äº§ç”Ÿç»‘å®šå…³ç³»binding(äº¤æ¢æœºéœ€è¦çŸ¥é“å°†æ¶ˆæ¯æ¨é€ç»™ç‰¹å®šé˜Ÿåˆ—ã€å¤šä¸ªé˜Ÿåˆ—æˆ–æ˜¯ä¸¢å¼ƒâ€”ç”±äº¤æ¢æœºç±»å‹å†³å®š)</p><h4 id="é˜Ÿåˆ—ï¼š"><a href="#é˜Ÿåˆ—ï¼š" class="headerlink" title="é˜Ÿåˆ—ï¼š"></a>é˜Ÿåˆ—ï¼š</h4><p>â€‹é˜Ÿåˆ—  â€”â€“&gt;  ä¸€ä¸ªå¤§çš„æ¶ˆæ¯ç¼“å†²åŒº</p><p>â€‹å¤šä¸ªç”Ÿäº§è€…å¯ä»¥å°†æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè®¸å¤šæ¶ˆè´¹è€…å¯ä»¥å°è¯•ä»ä¸€ä¸ªé˜Ÿåˆ—æ¥æ”¶æ•°æ®</p><h4 id="æ¶ˆè´¹è€…ï¼š"><a href="#æ¶ˆè´¹è€…ï¼š" class="headerlink" title="æ¶ˆè´¹è€…ï¼š"></a>æ¶ˆè´¹è€…ï¼š</h4><p>â€‹ç­‰å¾…æ¥æ”¶æ¶ˆæ¯çš„ç¨‹åº</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230426204426849.png" alt="image-20230426204426849"></p><h3 id="rebbitmqæœåŠ¡çš„ä½¿ç”¨ï¼š"><a href="#rebbitmqæœåŠ¡çš„ä½¿ç”¨ï¼š" class="headerlink" title="rebbitmqæœåŠ¡çš„ä½¿ç”¨ï¼š"></a>rebbitmqæœåŠ¡çš„ä½¿ç”¨ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">brew services start rabbitmq<span class="comment">//å¼€å¯æœåŠ¡</span></span><br><span class="line">brew services restart rabbitmq<span class="comment">//é‡å¯æœåŠ¡</span></span><br><span class="line">rabbitmqctl list_users<span class="comment">//æŸ¥çœ‹ç”¨æˆ·</span></span><br><span class="line">rabbitmqctl add_user admin <span class="number">123</span><span class="comment">//æ·»åŠ ç”¨æˆ·ç”¨æˆ·å:admin å¯†ç :123</span></span><br><span class="line">rabbitmqctl set_user_tags admin administrator<span class="comment">//å°† admin ç”¨æˆ· è®¾ç½®ä¸º administrator --&gt; è¶…çº§ç®¡ç†å‘˜</span></span><br><span class="line">rabbitmqctl set_permissions -p <span class="string">&quot;/&quot;</span> admin <span class="string">&quot;.*&quot;</span> <span class="string">&quot;.*&quot;</span> <span class="string">&quot;.*&quot;</span><span class="comment">//ä¸ºadminç”¨æˆ·è®¾ç½®æƒé™</span></span><br><span class="line"></span><br><span class="line">rabbitMQå¯è§†åŒ–ç®¡ç†ç•Œé¢ï¼Œå³åå°ç®¡ç†ç•Œé¢åœ°å€ï¼šlocalhost:<span class="number">15672</span>        ip:<span class="number">15672</span></span><br></pre></td></tr></table></figure><h1 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h1><h2 id="å¼•å…¥ä¾èµ–ï¼š"><a href="#å¼•å…¥ä¾èµ–ï¼š" class="headerlink" title="å¼•å…¥ä¾èµ–ï¼š"></a>å¼•å…¥ä¾èµ–ï¼š</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.rabbitmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>amqp-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¶ˆæ¯ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯</p><h1 id="Work-Queues"><a href="#Work-Queues" class="headerlink" title="Work Queues"></a>Work Queues</h1><p>ä½¿ç”¨åœºæ™¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230427223442104.png" alt="image-20230427223442104"></p><p>â€‹</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ç»„ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯å¼€å‘ç»„ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼</title>
      <link href="/2023/06/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/06/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="å°šç¡…è°·è§†é¢‘çœ‹åˆ°P43"><a href="#å°šç¡…è°·è§†é¢‘çœ‹åˆ°P43" class="headerlink" title="å°šç¡…è°·è§†é¢‘çœ‹åˆ°P43"></a>å°šç¡…è°·è§†é¢‘çœ‹åˆ°P43</h1><h1 id="è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™ï¼š"><a href="#è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™ï¼š" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™ï¼š"></a>è®¾è®¡æ¨¡å¼ä¸ƒå¤§åŸåˆ™ï¼š</h1><h3 id="ç›®çš„ï¼š"><a href="#ç›®çš„ï¼š" class="headerlink" title="ç›®çš„ï¼š"></a>ç›®çš„ï¼š</h3><p>1ï¼‰ ä»£ç é‡ç”¨æ€§ï¼ˆå³ï¼šç›¸åŒåŠŸèƒ½çš„ä»£ç ï¼Œä¸ç”¨å¤šæ¬¡ç¼–å†™ï¼‰</p><p>2ï¼‰å¯è¯»æ€§ï¼ˆå³ï¼šç¼–ç¨‹è§„åˆ’æ€§ï¼Œä¾¿äºå…¶ä»–ç¨‹åºå‘˜çš„é˜…è¯»å’Œç†è§£ï¼‰</p><p>3ï¼‰å¯æ‰©å±•æ€§ï¼ˆå³ï¼šå½“éœ€è¦å¢åŠ æ–°çš„åŠŸèƒ½æ—¶ï¼Œéå¸¸çš„æ–¹ä¾¿ï¼Œç§°ä¸ºå¯ç»´æŠ¤)</p><p>4ï¼‰ å¯é æ€§ï¼ˆå³ï¼šå½“æˆ‘ä»¬å¢åŠ æ–°çš„åŠŸèƒ½åï¼Œå¯¹åŸæ¥çš„åŠŸèƒ½æ²¡æœ‰å½±å“ï¼‰</p><p>5ï¼‰ ä½¿ç¨‹åºå‘ˆç°é«˜å†…èšï¼Œä½è€¦åˆçš„ç‰¹æ€§</p><h3 id="å•ä¸€èŒè´£åŸåˆ™"><a href="#å•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™"></a>å•ä¸€èŒè´£åŸåˆ™</h3><p>â€‹ã€Œä¸€ä¸ªç±»åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€</p><p>å•ä¸€èŒè´£åŸåˆ™æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ï¼š</p><p>â€‹1. é™ä½ç±»çš„å¤æ‚åº¦ï¼Œä¸€ä¸ªç±»åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚</p><p>â€‹2.æé«˜ç±»çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ã€‚</p><p>â€‹3.é™ä½å˜æ›´å¼•èµ·çš„é£é™©ã€‚</p><p>â€‹4.é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥éµå®ˆå•ä¸€èŒè´£åŸåˆ™ã€‚</p><p>â€‹ â€”â€”åªæœ‰<strong>é€»è¾‘è¶³å¤Ÿç®€å•</strong>æ—¶ï¼Œæ‰å¯ä»¥åœ¨<strong>ä»£ç çº§</strong>è¿åå•ä¸€èŒè´£åŸåˆ™ï¼›</p><p>â€‹ â€”â€”åªæœ‰ç±»å‹çš„<strong>æ–¹æ³•æ•°é‡è¶³å¤Ÿå°‘</strong>æ—¶ï¼Œæ‰å¯ä»¥æ‰<strong>æ–¹æ³•çº§åˆ«</strong>ä¿æŒå•ä¸€èŒè´£åŸåˆ™ã€‚</p><h3 id="æ¥å£éš”ç¦»åŸåˆ™"><a href="#æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™"></a>æ¥å£éš”ç¦»åŸåˆ™</h3><p>å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ï¼Œ<strong>ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Š</strong>ã€‚</p><p>â€‹å› ä¸ºå¦‚æœä¸æ˜¯å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šï¼Œé‚£ä¹ˆå°±è¯´æ˜æœ‰å‡ ä¸ªæ¥å£ç™½ç™½è¢«å®ç°äº†(å®ç°ä½†æ˜¯æ²¡æœ‰è¢«ç”¨)ï¼Œè¿èƒŒäº†æ¥å£éš”ç¦»åŸåˆ™ï¼</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230523160645384.png" alt="image-20230523160645384" style="zoom:50%;" /><p>æ”¹è¿›åï¼šâ¬‡ï¸</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230523160702347.png" alt="image-20230523160702347" style="zoom:50%;" /><h3 id="ä¾èµ–å€’è½¬åŸåˆ™"><a href="#ä¾èµ–å€’è½¬åŸåˆ™" class="headerlink" title="ä¾èµ–å€’è½¬åŸåˆ™"></a>ä¾èµ–å€’è½¬åŸåˆ™</h3><ol><li><p>é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥<strong>ä¾èµ–å…¶æŠ½è±¡</strong></p></li><li><p>æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡</p></li><li><p>ä¾èµ–å€’è½¬(å€’ç½®)çš„ä¸­å¿ƒæ€æƒ³æ˜¯<strong>ã€Œé¢å‘æ¥å£ç¼–ç¨‹ã€</strong></p></li><li><p>ä¾èµ–å€’è½¬åŸåˆ™æ˜¯åŸºäºè¿™æ ·çš„è®¾è®¡ç†å¿µï¼š<u>ç›¸å¯¹äºç»†èŠ‚çš„å¤šå˜æ€§ï¼ŒæŠ½è±¡çš„ä¸œè¥¿è¦ç¨³å®šçš„å¤šã€‚ä»¥æŠ½è±¡ä¸ºåŸºç¡€æ­å»ºçš„æ¶æ„æ¯”ä»¥ç»†èŠ‚ä¸ºåŸºç¡€çš„æ¶æ„è¦ç¨³å®šçš„å¤š</u>ã€‚åœ¨java ä¸­ï¼ŒæŠ½è±¡æŒ‡çš„æ˜¯æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œç»†èŠ‚å°±æ˜¯å…·ä½“çš„å®ç°ç±»</p></li><li><p>ä½¿ç”¨æ¥å£æˆ–æŠ½è±¡ç±»çš„ç›®çš„æ˜¯åˆ¶å®šå¥½è§„èŒƒï¼Œè€Œä¸æ¶‰åŠä»»ä½•å…·ä½“çš„æ“ä½œï¼ŒæŠŠå±•ç°ç»†èŠ‚çš„ä»»åŠ¡äº¤ç»™ä»–ä»¬çš„å®ç°ç±»å»å®Œæˆ</p></li></ol><p>ä¾èµ–å…³ç³»ä¼ é€’çš„ä¸‰ç§æ–¹å¼ï¼šä½ é€šè¿‡ä»€ä¹ˆæ–¹å¼æŠŠæ¥å£çš„å®ç°ç±»ä¼ ç»™ä½ è¦ä½¿ç”¨çš„ç±»</p><ul><li>æ¥å£ä¼ é€’(ç›´æ¥å°†å¯¹è±¡ä½œä¸ºæ–¹æ³•çš„å½¢å‚)</li><li>æ„é€ æ–¹æ³•ä¼ é€’(å°†å¯¹è±¡åœ¨æ„é€ æ—¶å­˜å…¥å¾…ä½¿ç”¨çš„ç±»)</li><li>setterä¼ é€’(setè¿›å»)</li></ul><p>æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>ä½å±‚æ¨¡å—å°½é‡éƒ½è¦æœ‰æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œæˆ–è€…ä¸¤è€…éƒ½æœ‰ï¼Œç¨‹åºç¨³å®šæ€§æ›´å¥½.</li><li>å˜é‡çš„å£°æ˜ç±»å‹å°½é‡æ˜¯æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œè¿™æ ·æˆ‘ä»¬çš„å˜é‡å¼•ç”¨å’Œå®é™…å¯¹è±¡é—´ï¼Œå°±å­˜åœ¨ä¸€ä¸ªç¼“å†²å±‚ï¼Œåˆ©äºç¨‹åºæ‰©å±•å’Œä¼˜åŒ–</li><li>ç»§æ‰¿æ—¶éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™</li></ol><h3 id="é‡Œæ°æ›¿æ¢åŸåˆ™"><a href="#é‡Œæ°æ›¿æ¢åŸåˆ™" class="headerlink" title="é‡Œæ°æ›¿æ¢åŸåˆ™"></a>é‡Œæ°æ›¿æ¢åŸåˆ™</h3><ol><li>ç»§æ‰¿åŒ…å«è¿™æ ·ä¸€å±‚å«ä¹‰ï¼šçˆ¶ç±»ä¸­å‡¡æ˜¯å·²ç»å®ç°å¥½çš„æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯åœ¨è®¾å®šè§„èŒƒå’Œå¥‘çº¦ï¼Œè™½ç„¶å®ƒä¸å¼ºåˆ¶è¦æ±‚æ‰€æœ‰çš„å­ç±»å¿…é¡»éµå¾ªè¿™äº›å¥‘çº¦ï¼Œ<strong>ä½†æ˜¯å¦‚æœå­ç±»å¯¹è¿™äº›å·²ç»å®ç°çš„æ–¹æ³•ä»»æ„ä¿®æ”¹ï¼Œå°±ä¼šå¯¹æ•´ä¸ªç»§æ‰¿ä½“ç³»é€ æˆç ´å</strong>ã€‚</li></ol><ol start="2"><li><strong>ç»§æ‰¿</strong>åœ¨ç»™ç¨‹åºè®¾è®¡å¸¦æ¥ä¾¿åˆ©çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†å¼Šç«¯ã€‚æ¯”å¦‚ä½¿ç”¨ç»§æ‰¿ä¼šç»™ç¨‹åºå¸¦æ¥ä¾µå…¥æ€§ï¼Œç¨‹åºçš„å¯ç§»æ¤æ€§é™ä½ï¼Œ<strong>å¢åŠ å¯¹è±¡é—´çš„è€¦åˆæ€§</strong>ï¼Œå¦‚æœä¸€ä¸ªç±»è¢«å…¶ä»–çš„ç±»æ‰€ç»§æ‰¿ï¼Œåˆ™å½“è¿™ä¸ªç±»éœ€è¦ä¿®æ”¹æ—¶ï¼Œå¿…é¡»è€ƒè™‘åˆ°æ‰€æœ‰çš„å­ç±»ï¼Œå¹¶ä¸”çˆ¶ç±»ä¿®æ”¹åï¼Œæ‰€æœ‰æ¶‰åŠåˆ°å­ç±»çš„åŠŸèƒ½éƒ½æœ‰å¯èƒ½äº§ç”Ÿæ•…éšœ</li><li>é—®é¢˜æå‡ºï¼šåœ¨ç¼–ç¨‹ä¸­ï¼Œå¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨ç»§æ‰¿ï¼Ÿ&#x3D;ï¼é‡Œæ°æ›¿æ¢åŸåˆ™</li></ol><p>é‡Œæ°æ›¿æ¢åŸåˆ™çš„å«ä¹‰ï¼šæ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹éƒ½èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»</p><p>â€‹â€”â€”å­ç±»å°½é‡ä¸é‡å†™çˆ¶ç±»çš„æ–¹æ³•(é‡å†™åæ— æ³•æ»¡è¶³é‡Œæ°æ›¿æ¢åŸåˆ™)</p><p>â€‹â€”â€”å¦‚æœä½ ç»§æ‰¿äº†ç„¶åè¿˜é‡å†™ï¼Œé‚£ä½ ä½•å¿…ç»§æ‰¿å‘¢ï¼Ÿï¼ˆé™¤éè¿«ä¸å¾—å·²ï¼Œä¸è¦é‡å†™çˆ¶ç±»æ–¹æ³•ï¼‰</p><p>åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šé€šè¿‡é‡å†™çˆ¶ç±»çš„æ–¹æ³•å®Œæˆæ–°çš„åŠŸèƒ½ï¼Œè¿™æ ·å†™èµ·æ¥è™½ç„¶ç®€å•ï¼Œä½†æ•´ä¸ªç»§æ‰¿ä½“ç³»çš„å¤ç”¨æ€§æ¯”è¾ƒå·®ã€‚ç‰¹åˆ«æ˜¯è¿è¡Œå¤šæ€æ¯”è¾ƒé¢‘ç¹çš„æ—¶å€™ã€‚</p><p>é€šç”¨çš„åšæ³•æ˜¯ï¼š<strong>åŸæ¥çš„çˆ¶ç±»å’Œå­ç±»éƒ½ç»§æ‰¿ä¸€ä¸ªæ›´é€šä¿—çš„åŸºç±»ï¼ŒåŸæœ‰çš„ç»§æ‰¿å…³ç³»å»æ‰</strong>ï¼Œé‡‡ç”¨ä¾èµ–ï¼Œèšåˆï¼Œç»„åˆç­‰</p><p>å…³ç³»ä»£æ›¿.</p><h3 id="å¼€é—­åŸåˆ™"><a href="#å¼€é—­åŸåˆ™" class="headerlink" title="å¼€é—­åŸåˆ™"></a>å¼€é—­åŸåˆ™</h3><ul><li><p>æ˜¯ç¼–ç¨‹ä¸­æœ€åŸºç¡€ã€æœ€é‡è¦çš„è®¾è®¡åŸåˆ™</p></li><li><p>ä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ï¼Œæ¨¡å—å’Œå‡½æ•°åº”è¯¥<u><strong>å¯¹æ‰©å±•å¼€æ”¾(å¯¹æä¾›æ–¹)<strong>ï¼Œ</strong>å¯¹ä¿®æ”¹å…³é—­(å¯¹ä½¿ç”¨æ–¹)</strong></u>ã€‚ç”¨æŠ½è±¡æ„å»ºæ¡†æ¶ï¼Œç”¨å®ç°æ‰©å±•ç»†èŠ‚ã€‚</p></li><li><p>å½“è½¯ä»¶éœ€è¦å˜åŒ–æ—¶ï¼Œå°½é‡é€šè¿‡<u><em><strong>æ‰©å±•</strong></em></u>è½¯ä»¶å®ä½“çš„è¡Œä¸ºæ¥å®ç°å˜åŒ–ï¼Œè€Œ<strong>ä¸æ˜¯</strong>é€šè¿‡<strong>ä¿®æ”¹</strong>å·²æœ‰çš„ä»£ç æ¥å®ç°å˜åŒ–ã€‚</p></li><li><p><u>ç¼–ç¨‹ä¸­éµå¾ªå…¶å®ƒåŸåˆ™ï¼Œä»¥åŠä½¿ç”¨è®¾è®¡æ¨¡å¼çš„ç›®çš„å°±æ˜¯éµå¾ªå¼€é—­åŸåˆ™ã€‚</u></p></li></ul><h3 id="è¿ªç±³ç‰¹æ³•åˆ™"><a href="#è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™"></a>è¿ªç±³ç‰¹æ³•åˆ™</h3><p>â€‹åŸºæœ¬ä»‹ç»</p><ol><li><p>ä¸€ä¸ªå¯¹è±¡åº”è¯¥<strong>å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£</strong></p></li><li><p>ç±»ä¸ç±»å…³ç³»è¶Šå¯†åˆ‡ï¼Œè€¦åˆåº¦è¶Šå¤§</p></li><li><p>è¿ªç±³ç‰¹æ³•åˆ™(Demeter Principle)åˆå«æœ€å°‘çŸ¥é“åŸåˆ™ï¼Œå³ä¸€ä¸ªç±»å¯¹è‡ªå·±ä¾èµ–çš„ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºè¢«ä¾èµ–çš„ç±»ä¸ç®¡å¤šä¹ˆå¤æ‚ï¼Œéƒ½å°½é‡å°†é€»è¾‘å°è£…åœ¨ç±»çš„å†…éƒ¨ã€‚å¯¹å¤–é™¤äº†æä¾›çš„ public æ–¹æ³•ï¼Œä¸å¯¹å¤–æ³„éœ²ä»»ä½•ä¿¡æ¯</p></li><li><p>è¿ªç±³ç‰¹æ³•åˆ™è¿˜æœ‰ä¸ªæ›´ç®€å•çš„å®šä¹‰ï¼šåªä¸ç›´æ¥çš„æœ‹å‹é€šä¿¡</p></li><li><p>ç›´æ¥çš„æœ‹å‹ï¼šæ¯ä¸ªå¯¹è±¡éƒ½ä¼šä¸å…¶ä»–å¯¹è±¡æœ‰è€¦åˆå…³ç³»ï¼Œåªè¦ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æœ‰è€¦åˆå…³ç³»ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´</p></li></ol><p>æ˜¯æœ‹å‹å…³ç³»ã€‚è€¦åˆçš„æ–¹å¼å¾ˆå¤šï¼Œä¾èµ–ï¼Œå…³è”ï¼Œç»„åˆï¼Œèšåˆç­‰ã€‚å…¶ä¸­ï¼Œæˆ‘ä»¬ç§°å‡ºç°<strong>æˆå‘˜å˜é‡ï¼Œæ–¹æ³•å‚æ•°ï¼Œæ–¹æ³•è¿”</strong></p><p><strong>å›å€¼</strong>ä¸­çš„ç±»ä¸º<u>ç›´æ¥çš„æœ‹å‹</u>ï¼Œè€Œå‡ºç°åœ¨<strong>å±€éƒ¨å˜é‡ä¸­çš„ç±»</strong>ä¸æ˜¯ç›´æ¥çš„æœ‹å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ**<u>ã€Œé™Œç”Ÿçš„ç±»æœ€å¥½ä¸è¦ä»¥å±€éƒ¨å˜</u>**</p><p>**<u>é‡çš„å½¢å¼å‡ºç°åœ¨ç±»çš„å†…éƒ¨ã€</u>**ã€‚</p><h3 id="åˆæˆå¤ç”¨åŸåˆ™"><a href="#åˆæˆå¤ç”¨åŸåˆ™" class="headerlink" title="åˆæˆå¤ç”¨åŸåˆ™"></a>åˆæˆå¤ç”¨åŸåˆ™</h3><p>â€‹<strong>åŸåˆ™æ˜¯å°½é‡ä½¿ç”¨åˆæˆ&#x2F;èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿</strong>(å› ä¸ºç»§æ‰¿ä¼šå¢åŠ è€¦åˆæ€§)</p><p>åœºæ™¯ï¼šæƒ³è®©Bä½¿ç”¨Aä¸­çš„æ–¹æ³•ï¼š</p><p>â€‹æˆ‘ä»¬å½“ç„¶å¯ä»¥è®©Bç»§æ‰¿Aï¼Œä½†æ˜¯è¿™æ ·ä¼šè®©Aä¸Bçš„è€¦åˆæ€§å¢å¼º</p><p>â€‹æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p><ul><li>ä¾èµ–ï¼šåœ¨Bä¸­æ·»åŠ ä»¥Aä¸ºå½¢å‚çš„æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ä½¿ç”¨A</li><li>èšåˆï¼šå°†Aä½œä¸ºBç±»ä¸­çš„ä¸€ä¸ªæˆå‘˜å˜é‡(æ„é€ å‡½æ•°&#x2F;setæ–¹æ³•)ï¼Œåœ¨Bçš„ä»»æ„æ–¹æ³•ä¸­ä½¿ç”¨A</li><li>ç»„åˆï¼šå°†Aä½œä¸ºBç±»ä¸­çš„ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œåœ¨åˆ›å»ºBçš„æ—¶å€™ç›´æ¥new A(), newä¸€ä¸ª</li></ul><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><p>â€‹è®¾è®¡åŸåˆ™çš„æ ¸å¿ƒæ€æƒ³ï¼š</p><ul><li>æ‰¾å‡ºåº”ç”¨ä¸­çš„<strong>å¯èƒ½éœ€è¦å˜åŒ–ä¹‹å¤„</strong>ï¼ŒæŠŠä»–ä»¬<strong>ç‹¬ç«‹</strong>å‡ºæ¥ï¼Œä¸è¦å’Œé‚£äº›ä¸éœ€è¦å˜åŒ–çš„ä»£ç æ··åœ¨ä¸€èµ·</li><li><strong>é’ˆå¯¹æ¥å£ç¼–ç¨‹</strong>ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å®ç°ç¼–ç¨‹</li><li>ä¸ºäº†äº¤äº’å¯¹è±¡ä¹‹é—´çš„<strong>æ¾è€¦åˆè®¾è®¡</strong>è€ŒåŠªåŠ›</li></ul><p></p><p>â€‹</p><h1 id="UMLå›¾ï¼š"><a href="#UMLå›¾ï¼š" class="headerlink" title="UMLå›¾ï¼š"></a>UMLå›¾ï¼š</h1><ul><li><p>UMLâ€”Unified modeling language UML(ç»Ÿä¸€å»ºæ¨¡è¯­è¨€)ï¼Œæ˜¯ä¸€ç§<strong>ç”¨äºè½¯ä»¶ç³»ç»Ÿåˆ†æå’Œè®¾è®¡çš„è¯­è¨€å·¥å…·</strong>ï¼Œå®ƒç”¨äºå¸®åŠ©è½¯ä»¶å¼€å‘äººå‘˜è¿›è¡Œæ€è€ƒå’Œè®°å½•æ€è·¯çš„ç»“æœ</p></li><li><p>UML æœ¬èº«æ˜¯ä¸€å¥—ç¬¦å·çš„è§„å®šï¼Œå°±åƒæ•°å­¦ç¬¦å·å’ŒåŒ–å­¦ç¬¦å·ä¸€æ ·ï¼Œè¿™äº›ç¬¦å·ç”¨äºæè¿°è½¯ä»¶æ¨¡å‹ä¸­çš„å„ä¸ªå…ƒç´ å’Œä»–ä»¬ä¹‹é—´çš„å…³ç³»ï¼Œæ¯”å¦‚<strong>ç±»ã€æ¥å£ã€å®ç°ã€æ³›åŒ–ã€ä¾èµ–ã€ç»„åˆã€èšåˆ</strong>ç­‰</p></li></ul><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230524002012376.png" alt="image-20230524002012376" style="zoom:50%;" /><ol><li>ç”¨ä¾‹å›¾(use case)</li><li>é™æ€ç»“æ„å›¾ï¼š<strong>ç±»å›¾</strong>ã€å¯¹è±¡å›¾ã€åŒ…å›¾ã€ç»„ä»¶å›¾ã€éƒ¨ç½²å›¾</li><li>åŠ¨æ€è¡Œä¸ºå›¾ï¼šäº¤äº’å›¾(æ—¶åºå›¾ä¸åä½œå›¾ï¼‰ã€çŠ¶æ€å›¾ã€æ´»åŠ¨å›¾</li></ol><p>ç±»å›¾ç”¨äºæè¿°ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯UMLå›¾ä¸­çš„æ ¸å¿ƒ</p><h2 id="UMLç±»å›¾"><a href="#UMLç±»å›¾" class="headerlink" title="UMLç±»å›¾"></a>UMLç±»å›¾</h2><p>1ï¼‰ ç”¨äºæè¿°ç³»ç»Ÿä¸­çš„<strong>ç±»(å¯¹è±¡)æœ¬èº«çš„ç»„æˆ</strong>å’Œ<strong>ç±»(å¯¹è±¡)ä¹‹é—´çš„å„ç§é™æ€å…³ç³»</strong>ã€‚</p><p>2ï¼‰ ç±»ä¹‹é—´çš„å…³ç³»ï¼šä¾èµ–ã€æ³›åŒ–(ç»§æ‰¿)ã€å®ç°ã€å…³è”ã€èšåˆä¸ç»„åˆã€‚</p><h3 id="ä¾èµ–å…³ç³»ï¼š"><a href="#ä¾èµ–å…³ç³»ï¼š" class="headerlink" title="ä¾èµ–å…³ç³»ï¼š"></a>ä¾èµ–å…³ç³»ï¼š</h3><p>â€‹å¦‚æœAç±»ç”¨åˆ°äº†Bï¼Œåˆ™Aä¸Bå­˜åœ¨ä¾èµ–å…³ç³»ï¼ˆå¦‚æœæ²¡æœ‰å¯¹æ–¹ï¼Œå°±æ— æ³•ç¼–è¯‘é€šè¿‡ï¼‰</p><ul><li>ä½œä¸ºAçš„æˆå‘˜å±æ€§</li><li>æ˜¯Aä¸­æ–¹æ³•çš„è¿”å›ç±»å‹</li><li>æ˜¯Aä¸­æ–¹æ³•çš„æ¥æ”¶ç±»å‹(å½¢å‚ç±»å‹)</li><li>åœ¨Açš„æ–¹æ³•ä¸­ä½¿ç”¨åˆ°(ä½œä¸ºå±€éƒ¨å˜é‡)</li></ul><p>â€‹<u>ç”¨<strong>è™šçº¿ç®­å¤´</strong>æè¿°å…³ç³»</u></p><h3 id="æ³›åŒ–å…³ç³»ï¼š"><a href="#æ³›åŒ–å…³ç³»ï¼š" class="headerlink" title="æ³›åŒ–å…³ç³»ï¼š"></a>æ³›åŒ–å…³ç³»ï¼š</h3><p>â€‹å³ç»§æ‰¿å…³ç³»ï¼Œæ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹</p><p><u>ç”¨<strong>å®çº¿+ç©ºå¿ƒä¸‰è§’å½¢</strong>æè¿°</u></p><h3 id="å®ç°å…³ç³»ï¼š"><a href="#å®ç°å…³ç³»ï¼š" class="headerlink" title="å®ç°å…³ç³»ï¼š"></a>å®ç°å…³ç³»ï¼š</h3><p>â€‹å³æ¥å£çš„å®ç°å…³ç³»ï¼Œä¹Ÿæ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹<br><u>ç”¨<strong>è™šçº¿+ç©ºå¿ƒä¸‰è§’å½¢</strong>æè¿°</u></p><h3 id="å…³è”å…³ç³»ï¼š"><a href="#å…³è”å…³ç³»ï¼š" class="headerlink" title="å…³è”å…³ç³»ï¼š"></a>å…³è”å…³ç³»ï¼š</h3><p>â€‹æŒ‡ç±»ä¸ç±»ä¹‹é—´çš„è”ç³»ï¼Œæ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹</p><p>ç”¨äºæè¿°ä¸¤ä¸ªç±»ä¹‹é—´çš„å…³ç³»æ˜¯<strong>å•å‘</strong>è¿˜æ˜¯<strong>åŒå‘</strong>çš„</p><h3 id="èšåˆå…³ç³»ï¼š"><a href="#èšåˆå…³ç³»ï¼š" class="headerlink" title="èšåˆå…³ç³»ï¼š"></a>èšåˆå…³ç³»ï¼š</h3><p>â€‹è¡¨ç¤ºæ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ï¼Œ***<u>æ•´ä½“å’Œéƒ¨åˆ†å¯ä»¥åˆ†å¼€</u><em><strong>ï¼Œæ˜¯</strong>å…³è”å…³ç³»çš„ç‰¹ä¾‹</em>*</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span>&#123;<span class="comment">//Computerä¸­çš„Mouseå¯ä»¥ä¸ºnull</span></span><br><span class="line">Mouse mouse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><u>ç”¨<strong>å®çº¿+ç©ºå¿ƒè±å½¢</strong>æè¿°</u></p><h3 id="ç»„åˆå…³ç³»ï¼š"><a href="#ç»„åˆå…³ç³»ï¼š" class="headerlink" title="ç»„åˆå…³ç³»ï¼š"></a>ç»„åˆå…³ç³»ï¼š</h3><p>â€‹è¡¨ç¤ºæ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ï¼Œ***<u>æ•´ä½“å’Œéƒ¨åˆ†ä¸å¯ä»¥åˆ†å¼€</u>***ï¼Œåˆ™æ˜¯ç»„åˆå…³ç³»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span>&#123;<span class="comment">//Computerä¸Mouse å…±åˆ›å»ºã€å…±é”€æ¯</span></span><br><span class="line"><span class="type">Mouse</span> <span class="variable">mouse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Mouse</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨å®çº¿+é»‘è±å½¢æè¿°</p><h1 id="è®¾è®¡æ¨¡å¼æ¦‚è¿°ï¼š"><a href="#è®¾è®¡æ¨¡å¼æ¦‚è¿°ï¼š" class="headerlink" title="è®¾è®¡æ¨¡å¼æ¦‚è¿°ï¼š"></a>è®¾è®¡æ¨¡å¼æ¦‚è¿°ï¼š</h1><h2 id="æŒæ¡è®¾è®¡æ¨¡å¼çš„å±‚æ¬¡ï¼š"><a href="#æŒæ¡è®¾è®¡æ¨¡å¼çš„å±‚æ¬¡ï¼š" class="headerlink" title="æŒæ¡è®¾è®¡æ¨¡å¼çš„å±‚æ¬¡ï¼š"></a>æŒæ¡è®¾è®¡æ¨¡å¼çš„å±‚æ¬¡ï¼š</h2><ul><li>ç¬¬1å±‚ï¼šåˆšå¼€å§‹å­¦ç¼–ç¨‹ä¸ä¹…ï¼Œå¬è¯´è¿‡ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼</li><li>ç¬¬2å±‚ï¼šæœ‰å¾ˆé•¿æ—¶é—´çš„ç¼–ç¨‹ç»éªŒï¼Œè‡ªå·±å†™äº†å¾ˆå¤šä»£ç ï¼Œå…¶ä¸­ç”¨åˆ°äº†è®¾è®¡æ¨¡å¼ï¼Œä½†æ˜¯è‡ªå·±å´ä¸çŸ¥é“</li><li>ç¬¬3å±‚ï¼šå­¦ä¹ è¿‡äº†è®¾è®¡æ¨¡å¼ï¼Œå‘ç°è‡ªå·±å·±ç»åœ¨ä½¿ç”¨äº†ï¼Œå¹¶ä¸”å‘ç°äº†ä¸€äº›æ–°çš„æ¨¡å¼æŒºå¥½ç”¨çš„</li><li>ç¬¬4å±‚ï¼šé˜…è¯»äº†å¾ˆå¤šåˆ«äººå†™çš„æºç å’Œæ¡†æ¶ï¼Œåœ¨å…¶ä¸­çœ‹åˆ°åˆ«äººè®¾è®¡æ¨¡å¼ï¼Œå¹¶ä¸”èƒ½å¤Ÿé¢†ä¼šè®¾è®¡æ¨¡å¼çš„ç²¾å¦™å’Œå¸¦æ¥çš„å¥½å¤„ã€‚</li><li>ç¬¬5å±‚ï¼šä»£ç å†™ç€å†™ç€ï¼Œè‡ªå·±éƒ½æ²¡æœ‰æ„è¯†åˆ°ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ï¼Œå¹¶ä¸”ç†Ÿç»ƒçš„å†™äº†å‡ºæ¥ã€‚</li></ul><h2 id="è®¾è®¡æ¨¡å¼ä»‹ç»ï¼š"><a href="#è®¾è®¡æ¨¡å¼ä»‹ç»ï¼š" class="headerlink" title="è®¾è®¡æ¨¡å¼ä»‹ç»ï¼š"></a>è®¾è®¡æ¨¡å¼ä»‹ç»ï¼š</h2><ul><li>è®¾è®¡æ¨¡å¼æ˜¯ç¨‹åºå‘˜åœ¨é¢å¯¹åŒç±»è½¯ä»¶å·¥ç¨‹è®¾è®¡é—®é¢˜æ‰€æ€»ç»“å‡ºæ¥çš„æœ‰ç”¨çš„ç»éªŒï¼Œæ¨¡å¼ä¸æ˜¯ä»£ç ï¼Œè€Œæ˜¯æŸç±»é—®é¢˜çš„é€šç”¨è§£æ±ºæ–¹æ¡ˆï¼Œè®¾è®¡æ¨¡å¼ (Design patternï¼‰ä»£è¡¨äº†æœ€ä½³çš„å®è·µã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚</li><li>è®¾è®¡æ¨¡å¼çš„æœ¬è´¨æé«˜ è½¯ä»¶çš„ç»´æŠ¤æ€§ï¼Œé€šç”¨æ€§å’Œæ‰©å±•æ€§ï¼Œå¹¶é™ä½è½¯ä»¶çš„å¤æ‚åº¦ã€‚</li><li>ï¼œ&lt;è®¾è®¡æ¨¡å¼&gt;ï¼æ˜¯ç»å…¸çš„ä¹¦ï¼Œä½œè€…æ˜¯ Erich Gammaã€ Richard Helmnã€ Ralph Johnson å’Œ John Vlissides Design ï¼ˆä¿—ç§°â€œå››äººç»„ GOFâ€)</li><li>è®¾è®¡æ¨¡å¼å¹¶ä¸å±€é™äºæŸç§è¯­è¨€ï¼Œjavaï¼Œphpï¼Œc++ éƒ½æœ‰è®¾è®¡æ¨¡å¼.</li></ul><h1 id="è®¾è®¡æ¨¡å¼è¯¦è§£ï¼š"><a href="#è®¾è®¡æ¨¡å¼è¯¦è§£ï¼š" class="headerlink" title="è®¾è®¡æ¨¡å¼è¯¦è§£ï¼š"></a>è®¾è®¡æ¨¡å¼è¯¦è§£ï¼š</h1><h2 id="åˆ›å»ºå‹æ¨¡å¼ï¼š"><a href="#åˆ›å»ºå‹æ¨¡å¼ï¼š" class="headerlink" title="åˆ›å»ºå‹æ¨¡å¼ï¼š"></a>åˆ›å»ºå‹æ¨¡å¼ï¼š</h2><p><strong>åˆ›å»ºå‹ï¼š åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘ï¼Œä¸ä½¿â½¤ new ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œç¨‹åºåœ¨åˆ¤æ–­éœ€è¦åˆ›å»ºå“ªäº›å¯¹è±¡æ—¶æ›´çµæ´»ã€‚åŒ…æ‹¬â¼¯â¼š&#x2F;æŠ½è±¡â¼¯â¼š&#x2F;å•ä¾‹&#x2F;å»ºé€ è€…&#x2F;åŸå‹æ¨¡å¼ã€‚</strong></p><h3 id="å•ä¾‹æ¨¡å¼ï¼š"><a href="#å•ä¾‹æ¨¡å¼ï¼š" class="headerlink" title="å•ä¾‹æ¨¡å¼ï¼š"></a>å•ä¾‹æ¨¡å¼ï¼š</h3><ol><li><p><strong>é¥¿æ±‰å¼(é™æ€å¸¸é‡)</strong></p><ul><li><p>æ„é€ å™¨ç§æœ‰åŒ–ä¿è¯å¤–éƒ¨ä¸èƒ½new</p></li><li><p>ç±»çš„å†…éƒ¨åˆ›å»º<strong>é™æ€å¯¹è±¡</strong>        åœ¨ç±»çš„å†…éƒ¨åˆ›å»ºè¯¥ç±»çš„é™æ€å¯¹è±¡ï¼Œåœ¨ç±»åŠ è½½æ—¶è‡ªåŠ¨ç”Ÿæˆ</p></li><li><p>å‘å¤–æš´éœ²ä¸€ä¸ªé™æ€çš„å…¬å…±æ–¹æ³•â€”â€”getInstance</p><p>ä¼˜ç‚¹ï¼šè¿™ç§å†™æ³•æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯åœ¨ç±»è£…è½½çš„æ—¶å€™å°±å®Œæˆå®ä¾‹åŒ–ã€‚é¿å…äº†çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚</p><p>ç¼ºç‚¹ï¼šåœ¨<strong>ç±»è£…è½½çš„æ—¶å€™å°±å®Œæˆå®ä¾‹åŒ–</strong>ï¼Œæ²¡æœ‰è¾¾åˆ°Lazy Loading çš„æ•ˆæœã€‚<u>å¦‚æœä»å§‹è‡³ç»ˆä»æœªä½¿ç”¨è¿‡è¿™ä¸ªå®ä¾‹ï¼Œåˆ™ä¼šé€ æˆå†…å­˜çš„æµªè´¹</u>ï¼›æ­£å› ä¸ºæ˜¯åœ¨ç±»åŠ è½½æ—¶å°±ä¼šåˆ›å»ºå¯¹è±¡ï¼Œæˆ‘ä»¬å¯èƒ½åœ¨åˆ«çš„åœ°æ–¹æ— æ„å¯¼è‡´è¯¥ç±»åŠ è½½è€Œä¸å»ä½¿ç”¨ï¼Œé€ æˆå†…å­˜æµªè´¹ã€‚</p></li></ul></li><li><p><strong>é¥¿æ±‰å¼(é™æ€ä»£ç å—)</strong></p><ul><li><p>åœ¨ç±»ä¸­å®šä¹‰è¯¥ç±»çš„é™æ€å˜é‡</p></li><li><p>åœ¨é™æ€ä»£ç å—ä¸­å®Œæˆè¯¥ç±»çš„é™æ€å˜é‡çš„åˆå§‹åŒ–</p><p>ä¼˜ç¼ºç‚¹åˆ†æï¼š</p><p>â€‹è¿™ç§æ–¹å¼å’Œä¸Šé¢çš„æ–¹å¼å…¶å®ç±»ä¼¼ï¼Œåªä¸è¿‡å°†ç±»å®ä¾‹åŒ–çš„è¿‡ç¨‹æ”¾åœ¨äº†é™æ€ä»£ç å—ä¸­ï¼Œä¹Ÿæ˜¯åœ¨ç±»è£…è½½çš„æ—¶å€™ï¼Œå°±æ‰§è¡Œé™æ€ä»£ç å—ä¸­çš„ä»£ç ï¼Œåˆå§‹åŒ–ç±»çš„å®ä¾‹ã€‚ä¼˜ç¼ºç‚¹ä¸ä¸Šé¢æ–¹æ³•ä¸€æ ·</p><p>ç»“è®ºï¼šè¿™ç§å•ä¾‹æ¨¡å¼å¯ç”¨ï¼Œä½†æ˜¯å¯èƒ½é€ æˆå†…å­˜æµªè´¹</p></li></ul></li><li><p>æ‡’æ±‰å¼(çº¿ç¨‹ä¸å®‰å…¨)</p><ul><li><p>æ„é€ å™¨ç§æœ‰åŒ– ä¿è¯å¤–éƒ¨ä¸èƒ½new</p></li><li><p>ç±»çš„å†…éƒ¨å®šä¹‰<strong>é™æ€å¯¹è±¡</strong>          åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯ä¸åˆ›å»º(ä¸ new)</p></li><li><p>å‘å¤–æš´éœ²ä¸€ä¸ªé™æ€çš„å…¬å…±æ–¹æ³•â€”â€”getInstance  åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œæ‰å¯¹è¯¥ç±»çš„é™æ€å¯¹è±¡è¿›è¡Œåˆ›å»º</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230524105503814.png" alt="image-20230524105503814" style="zoom:45%;" /><p>ä¼˜ç¼ºç‚¹åˆ†æï¼š</p><p>â€‹èµ·åˆ°äº† Lazy Loading çš„æ•ˆæœï¼Œä½†æ˜¯åªèƒ½åœ¨å•çº¿ç¨‹ä¸‹ä½¿ç”¨ã€‚</p><p>â€‹å¦‚æœåœ¨å¤šçº¿ç¨‹ä¸‹ï¼Œä¸€ä¸ªçº¿ç¨‹è¿›å…¥äº†**if(singleton&#x3D;&#x3D; null)**åˆ¤æ–­è¯­å¥å—ï¼Œè¿˜æœªæ¥å¾—åŠå¾€ä¸‹æ‰§è¡Œï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¹Ÿé€šè¿‡äº†è¿™ä¸ªåˆ¤æ–­è¯­å¥ï¼Œè¿™æ—¶ä¾¿ä¼šäº§ç”Ÿå¤šä¸ªå®ä¾‹ã€‚æ‰€ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¸å¯ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p><p><strong>ç»“è®º</strong>ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼.</p></li></ul></li><li><p>æ‡’æ±‰å¼(çº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥æ–¹æ³•)</p><p>ç»™ getInstance æ·»åŠ  synchronize ä¿®é¥°ï¼Œä¿è¯åŒæ­¥</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230524112254631.png" alt="image-20230524112254631" style="zoom:40%;" /><p>ä¼˜ç¼ºç‚¹åˆ†æï¼š</p><p>â€‹è§£å†³äº†çº¿ç¨‹å®‰å…¨é—®é¢˜</p><p>â€‹<strong>æ•ˆç‡å¤ªä½äº†</strong>ï¼Œ<u>æ¯ä¸ªçº¿ç¨‹åœ¨æƒ³è·å¾—ç±»çš„å®ä¾‹æ—¶å€™ï¼Œæ‰§è¡Œ getinstance()æ–¹æ³•éƒ½è¦è¿›è¡ŒåŒæ­¥</u>ã€‚è€Œå…¶å®è¿™ä¸ªæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡å®ä¾‹åŒ–ä»£ç å°±å¤Ÿäº†ï¼Œåé¢çš„æƒ³è·å¾—è¯¥ç±»å®ä¾‹ï¼Œç›´æ¥ return å°±è¡Œäº†ã€‚æ–¹æ³•è¿›è¡ŒåŒæ­¥æ•ˆç‡å¤ªä½</p><p><strong>ç»“è®º</strong>ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œ<strong>ä¸æ¨è</strong>ä½¿ç”¨è¿™ç§æ–¹å¼</p></li><li><p>æ‡’æ±‰å¼(çº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥ä»£ç å—)</p><p>ä¸å¯ä½¿ç”¨ï¼Œå› ä¸ºä¸èƒ½ä¿è¯å•ä¾‹</p></li><li><p><strong>åŒé‡æ£€æŸ¥</strong></p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230524114249721.png" alt="image-20230524114249721" style="zoom:50%;" /><p>â€‹Double-Check æ¦‚å¿µæ˜¯å¤šçº¿ç¨‹å¼€å‘ä¸­å¸¸ä½¿ç”¨åˆ°çš„ï¼Œå¦‚ä»£ç ä¸­æ‰€ç¤ºï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸¤æ¬¡if(singleton&#x3D;&#x3D; null)æ£€æŸ¥ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚</p><p>â€‹è¿™æ ·ï¼Œå®ä¾‹åŒ–ä»£ç åªç”¨æ‰§è¡Œä¸€æ¬¡ï¼Œåé¢å†æ¬¡è®¿é—®æ—¶ï¼Œåˆ¤æ–­if(singleton&#x3D;&#x3D;null)ï¼Œç›´æ¥ return å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¹Ÿé¿å…çš„åå¤è¿›è¡Œæ–¹æ³•åŒæ­¥.</p><p>â€‹çº¿ç¨‹å®‰å…¨ï¼›å»¶è¿ŸåŠ è½½ï¼›æ•ˆç‡è¾ƒé«˜</p><p>ç»“è®ºï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œ<strong>æ¨èä½¿ç”¨è¿™ç§å•ä¾‹è®¾è®¡æ¨¡å¼</strong></p><h4 id="ğŸŒŸè¿™â¾¥ä¸ºä»€ä¹ˆè¦ä½¿â½¤-volatile-ï¼Ÿ"><a href="#ğŸŒŸè¿™â¾¥ä¸ºä»€ä¹ˆè¦ä½¿â½¤-volatile-ï¼Ÿ" class="headerlink" title="ğŸŒŸè¿™â¾¥ä¸ºä»€ä¹ˆè¦ä½¿â½¤ volatile ï¼Ÿ"></a>ğŸŒŸè¿™â¾¥ä¸ºä»€ä¹ˆè¦ä½¿â½¤ volatile ï¼Ÿ</h4><p>è¿™æ˜¯å› ä¸º new å…³é”®å­—åˆ›å»ºå¯¹è±¡ä¸æ˜¯åŸâ¼¦æ“ä½œï¼Œåˆ›å»ºâ¼€ä¸ªå¯¹è±¡ä¼šç»å†ä¸‹â¾¯<br>çš„æ­¥éª¤ï¼š</p><ol><li>åœ¨å †å†…å­˜å¼€è¾Ÿå†…å­˜ç©ºé—´</li><li>è°ƒâ½¤æ„é€ â½…æ³•ï¼Œåˆå§‹åŒ–å¯¹è±¡</li><li>å¼•â½¤å˜é‡æŒ‡å‘å †å†…å­˜ç©ºé—´<br>ä¸ºäº†æâ¾¼æ€§èƒ½ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¸¸å¸¸ä¼šå¯¹æ—¢å®šçš„ä»£ç æ‰§â¾é¡ºåºè¿›â¾æŒ‡ä»¤é‡æ’åºï¼Œä»æºç åˆ°æœ€ç»ˆæ‰§â¾æŒ‡ä»¤ä¼šç»å†å¦‚ä¸‹æµç¨‹ï¼š<br>æºç ç¼–è¯‘å™¨ä¼˜åŒ–é‡æ’åºæŒ‡ä»¤çº§å¹¶â¾é‡æ’åºå†…å­˜ç³»ç»Ÿé‡æ’åºæœ€ç»ˆæ‰§â¾æŒ‡ä»¤åºåˆ—æ‰€ä»¥ç»è¿‡æŒ‡ä»¤é‡æ’åºä¹‹åï¼Œåˆ›å»ºå¯¹è±¡çš„æ‰§â¾é¡ºåºå¯èƒ½ä¸º 1 2 3 æˆ–è€… 1 3 2 ï¼Œå› æ­¤å½“æŸä¸ªçº¿ç¨‹åœ¨ä¹±åºè¿â¾ 1 3 2 æŒ‡ä»¤çš„æ—¶å€™ï¼Œå¼•â½¤å˜é‡æŒ‡å‘å †å†…å­˜ç©ºé—´ï¼Œè¿™ä¸ªå¯¹è±¡ä¸ä¸º nullï¼Œä½†æ˜¯æ²¡æœ‰åˆå§‹åŒ–ï¼Œå…¶ä»–çº¿ç¨‹æœ‰å¯èƒ½è¿™ä¸ªæ—¶å€™è¿›â¼Šäº† getInstance çš„ç¬¬â¼€ä¸ª if(instance &#x3D;&#x3D; null) åˆ¤æ–­ä¸ä¸º nulll ï¼Œå¯¼è‡´<strong>é”™è¯¯ä½¿â½¤äº†æ²¡æœ‰åˆå§‹åŒ–çš„â¾® null å®ä¾‹</strong>ï¼Œè¿™æ ·çš„è¯å°±ä¼šå‡ºç°å¼‚å¸¸ï¼Œè¿™ä¸ªå°±æ˜¯è‘—åçš„<br>DCL å¤±æ•ˆé—®é¢˜ã€‚<br>å½“æˆ‘ä»¬åœ¨å¼•â½¤å˜é‡ä¸Šâ¾¯æ·»åŠ  volatile å…³é”®å­—ä»¥åï¼Œä¼šé€šè¿‡åœ¨åˆ›å»ºå¯¹è±¡æŒ‡ä»¤çš„å‰åæ·»åŠ å†…å­˜å±éšœæ¥ç¦â½ŒæŒ‡ä»¤é‡æ’åºï¼Œå°±å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œâ½½ä¸”å¯¹volatile ä¿®é¥°çš„å˜é‡çš„ä¿®æ”¹å¯¹å…¶ä»–ä»»ä½•çº¿ç¨‹éƒ½æ˜¯å¯â»…çš„ã€‚</li></ol></li><li><p><strong>é™æ€å†…éƒ¨ç±»</strong></p><ul><li><p>æ„é€ å™¨ç§æœ‰åŒ– ä¿è¯å¤–éƒ¨ä¸èƒ½new</p></li><li><p>æ„å»ºä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œå†…éƒ¨ç±»ä¸­æœ‰ä¸€ä¸ªé™æ€å±æ€§ï¼Œå¦‚æœåŠ è½½äº†é™æ€ç±»ï¼Œè¯¥å±æ€§ä¹Ÿä¼šåˆ›å»ºå¯¹è±¡</p></li><li><p>å‘å¤–æš´éœ²ä¸€ä¸ªé™æ€çš„å…¬å…±æ–¹æ³•â€”â€”getInstance  åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå¯¹é™æ€å†…éƒ¨ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿”å›é™æ€å†…éƒ¨ç±»å±æ€§</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230524115554993.png" alt="image-20230524115554993" style="zoom:50%;" /></li></ul><p>ä¼˜ç¼ºç‚¹åˆ†æï¼š</p><ul><li><p>è¿™ç§æ–¹å¼é‡‡ç”¨äº†ç±»è£…è½½çš„æœºåˆ¶æ¥ä¿è¯åˆå§‹åŒ–å®ä¾‹æ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚</p></li><li><p>é™æ€å†…éƒ¨ç±»æ–¹å¼åœ¨ Singleton ç±»è¢«è£…è½½æ—¶å¹¶ä¸ä¼šç«‹å³å®ä¾‹åŒ–ï¼Œè€Œæ˜¯åœ¨éœ€è¦å®ä¾‹åŒ–æ—¶ï¼Œè°ƒç”¨getinstance æ–¹æ³•ï¼Œæ‰ä¼šè£…è½½ Singletoninstance ç±»ï¼Œä»è€Œå®Œæˆ Singleton çš„å®ä¾‹åŒ–ã€‚</p></li><li><p>ç±»çš„é™æ€å±æ€§åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½ç±»çš„æ—¶å€™åˆå§‹åŒ–ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œï¼ŒJVM å¸®åŠ©æˆ‘ä»¬ä¿è¯äº†çº¿ç¨‹çš„å®‰å…¨æ€§ï¼Œåœ¨ç±»è¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œåˆ«çš„çº¿ç¨‹æ˜¯æ— æ³•è¿›å…¥çš„ã€‚</p></li><li><p>ä¼˜ç‚¹ï¼šé¿å…äº†çº¿ç¨‹ä¸å®‰å…¨ï¼Œåˆ©ç”¨é™æ€å†…éƒ¨ç±»ç‰¹ç‚¹å®ç°å»¶è¿ŸåŠ è½½ï¼Œæ•ˆç‡é«˜</p></li><li><p>ç¼ºç‚¹ï¼šgetInstance è¿˜æ˜¯è¢«synchronizedä¿®é¥°äº†</p></li></ul><p><strong>ç»“è®º</strong>ï¼šæ¨èä½¿ç”¨ï¼</p></li><li><p><strong>æšä¸¾</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡ Singleton.INSTANCE æ¥è·å–å•ä¾‹ï¼Œè·å–çš„å¯¹è±¡å¯ä»¥ä½¿ç”¨Singletonä¸­çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Singleton</span>&#123;</span><br><span class="line">  INSTANCE;<span class="comment">//å±æ€§</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">func</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;qwe&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>è¿™å€ŸåŠ© JDK1.5ä¸­æ·»åŠ çš„æšä¸¾æ¥å®ç°å•ä¾‹æ¨¡å¼ã€‚ä¸ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥ é—®é¢˜ï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»º</p></li><li><p>æ–°çš„å¯¹è±¡ã€‚</p></li><li><p>è¿™ç§æ–¹å¼æ˜¯ Effective Java ä½œè€… Josh Bloch æå€¡çš„æ–¹å¼</p></li><li><p><strong>ç»“è®º</strong>ï¼šæ¨èä½¿ç”¨</p></li></ul><h4 id="å•ä¾‹æ¨¡å¼æ³¨æ„äº‹é¡¹ï¼š"><a href="#å•ä¾‹æ¨¡å¼æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="å•ä¾‹æ¨¡å¼æ³¨æ„äº‹é¡¹ï¼š"></a>å•ä¾‹æ¨¡å¼æ³¨æ„äº‹é¡¹ï¼š</h4><ul><li><p>å•ä¾‹æ¨¡å¼ä¿è¯äº† ç³»ç»Ÿå†…å­˜ä¸­è¯¥ç±»åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œ<u>èŠ‚çœäº†ç³»ç»Ÿèµ„æº</u>ï¼Œ<strong>å¯¹äºä¸€äº›éœ€è¦é¢‘ç¹åˆ›å»ºé”€æ¯çš„å¯¹è±¡ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼å¯ä»¥æé«˜ç³»ç»Ÿæ€§èƒ½</strong></p></li><li><p>å½“æƒ³å®ä¾‹åŒ–ä¸€ä¸ªå•ä¾‹ç±»çš„æ—¶å€™ï¼Œå¿…é¡»è¦è®°ä½ä½¿ç”¨ç›¸åº”çš„è·å–å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ new</p></li><li><p>å•ä¾‹æ¨¡å¼ä½¿ç”¨çš„åœºæ™¯ï¼š**<u><em>éœ€è¦é¢‘ç¹çš„è¿›è¡Œåˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡ã€åˆ›å»ºå¯¹è±¡æ—¶è€—æ—¶è¿‡å¤šæˆ–è€—è´¹èµ„æºè¿‡å¤šï¼ˆå³ï¼šé‡é‡çº§å¯¹è±¡ï¼‰ï¼Œä½†åˆç»å¸¸ç”¨åˆ°çš„å¯¹è±¡ã€å·¥å…·ç±»å¯¹è±¡ã€é¢‘ç¹è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶çš„å¯¹è±¡(æ¯”å¦‚æ•°æ®æºã€session å·¥å‚ç­‰ï¼‰</em></u>**</p></li></ul></li></ol><h3 id="å·¥å‚æ¨¡å¼ï¼š"><a href="#å·¥å‚æ¨¡å¼ï¼š" class="headerlink" title="å·¥å‚æ¨¡å¼ï¼š"></a>å·¥å‚æ¨¡å¼ï¼š</h3><h4 id="ç®€å•å·¥å‚æ¨¡å¼ï¼š"><a href="#ç®€å•å·¥å‚æ¨¡å¼ï¼š" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼ï¼š"></a>ç®€å•å·¥å‚æ¨¡å¼ï¼š</h4><p>ã€Œé’ˆå¯¹æ¯ç§äº§å“ã€</p><p><u>ç®€å•â¼¯â¼šæ¨¡å¼æŒ‡ç”±â¼€ä¸ªâ¼¯â¼šå¯¹è±¡æ¥åˆ›å»ºå®ä¾‹ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å…³æ³¨åˆ›å»ºé€»è¾‘ï¼Œåªéœ€æä¾›ä¼ â¼Šâ¼¯â¼šçš„å‚æ•°ã€‚</u></p><ul><li><p>ç®€å•å·¥å‚æ¨¡å¼æ˜¯å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œæ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ç§ã€‚ç®€å•å·¥å‚æ¨¡å¼æ˜¯ç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§äº§å“ç±»çš„å®ä¾‹ã€‚ç®€å•å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ¨¡å¼å®¶æ—ä¸­æœ€ç®€å•å®ç”¨çš„æ¨¡å¼</p></li><li><p>ç®€å•å·¥å‚æ¨¡å¼ï¼šå®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„ç±»ï¼Œç”±è¿™ä¸ªç±»æ¥å°è£…å®ä¾‹åŒ–å¯¹è±¡çš„è¡Œä¸º</p></li><li><p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œå½“æˆ‘ä»¬<strong>ç”¨åˆ°å¤§é‡çš„åˆ›å»ºæŸç§ã€æŸç±»æˆ–è€…æŸæ‰¹å¯¹è±¡</strong>æ—¶ï¼Œå°±ä¼šä½¿ç”¨åˆ°å·¥å‚æ¨¡å¼.</p></li></ul><h4 id="å·¥å‚æ–¹æ³•æ¨¡å¼ï¼š"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼ï¼š" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼ï¼š"></a>å·¥å‚æ–¹æ³•æ¨¡å¼ï¼š</h4><p>ã€Œé’ˆå¯¹ä¸€ç±»äº§å“ã€</p><p>å’Œç®€å•â¼¯â¼šæ¨¡å¼ä¸­â¼¯â¼šè´Ÿè´£â½£äº§æ‰€æœ‰äº§å“ç›¸â½ï¼Œâ¼¯â¼šâ½…æ³•æ¨¡å¼å°†â½£æˆå…·ä½“äº§å“çš„ä»»åŠ¡åˆ†å‘ç»™å…·ä½“çš„äº§å“â¼¯â¼šã€‚</p><p>å…¶å®å°±æ˜¯åœ¨å·¥å‚è¿™è¾¹å†åˆ†å±‚ é€»è¾‘ä¸ºï¼šæ€»å·¥å‚&lt;â€“&gt;å­å·¥å‚1&#x2F;2&#x2F;3â€¦</p><p>â€‹å…¶ä¸­ï¼Œæ€»å·¥å‚å®šä¹‰äº†äº§å“çš„ç”Ÿäº§æ¥å£ï¼Œè€Œç”Ÿäº§æ¥å£ç”±ä¸åŒçš„å­å·¥å‚è¿›è¡Œå®ç°ã€‚ä»è€Œå¯¹å·¥å‚è¿›è¡Œäº†è¿›ä¸€æ­¥åˆ’åˆ†ã€‚</p><h4 id="æŠ½è±¡å·¥å‚æ¨¡å¼ï¼š"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼ï¼š" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼ï¼š"></a>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼š</h4><p>ã€Œé’ˆå¯¹å¤šç±»äº§å“ï¼Œæ¯ä¸ªç±»ä¸­è¿˜æœ‰å¤šç§äº§å“ï¼ã€</p><p>æ€»å·¥å‚ã€å­å·¥å‚éƒ½æ˜¯æŠ½è±¡çš„ã€‚è¦ç”Ÿäº§æŸç§äº§å“ï¼Œæˆ‘ä»¬é¦–å…ˆæ‰¾åˆ°æ¨¡ç‰ˆç±»ä¼¼çš„å­ç±»ï¼Œå†å¯¹å­ç±»è¿›è¡Œå®ç°ï¼Œä»è€Œè¿›è¡Œåˆ›å»ºã€‚</p><h2 id="ç»“æ„å‹æ¨¡å¼ï¼š"><a href="#ç»“æ„å‹æ¨¡å¼ï¼š" class="headerlink" title="ç»“æ„å‹æ¨¡å¼ï¼š"></a>ç»“æ„å‹æ¨¡å¼ï¼š</h2><h3 id="é€‚é…å™¨æ¨¡å¼ï¼š"><a href="#é€‚é…å™¨æ¨¡å¼ï¼š" class="headerlink" title="é€‚é…å™¨æ¨¡å¼ï¼š"></a>é€‚é…å™¨æ¨¡å¼ï¼š</h3><p>æ¦‚è¿°ï¼šåœ¨æˆ‘ä»¬çš„åº”â½¤ç¨‹åºä¸­æˆ‘ä»¬å¯èƒ½éœ€è¦å°†ä¸¤ä¸ªä¸åŒæ¥â¼çš„ç±»æ¥è¿›â¾é€šä¿¡ï¼Œåœ¨ä¸ä¿®æ”¹è¿™ä¸¤ä¸ªçš„å‰æä¸‹æˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦æŸä¸ªä¸­é—´ä»¶æ¥å®Œæˆè¿™ä¸ªè¡”æ¥çš„è¿‡ç¨‹ã€‚è¿™ä¸ªä¸­é—´ä»¶å°±æ˜¯é€‚é…å™¨ã€‚æ‰€è°“é€‚é…å™¨æ¨¡å¼å°±æ˜¯<strong>å°†â¼€ä¸ªç±»çš„æ¥â¼ï¼Œè½¬æ¢æˆå®¢æˆ·æœŸæœ›çš„å¦â¼€ä¸ªæ¥â¼</strong>ã€‚å®ƒ<u>å¯ä»¥è®©åŸæœ¬ä¸¤ä¸ªä¸å…¼å®¹çš„æ¥â¼èƒ½å¤Ÿâ½†ç¼å®Œæˆå¯¹æ¥</u>ã€‚</p><p>ä½œä¸ºä¸­é—´ä»¶çš„é€‚é…å™¨å°†â½¬æ ‡ç±»å’Œé€‚é…è€…è§£è€¦ï¼Œå¢åŠ äº†ç±»çš„é€æ˜æ€§å’Œå¯å¤â½¤æ€§ã€‚</p><p>â½¬æ ‡ç±»å’Œé€‚é…è€…ä¸å¿…æœ‰å¾ˆå¤§å…³è”ï¼Œå¯ä»¥é€šè¿‡é€‚é…å™¨å»ºç«‹è”ç³»ï¼Œä»è€Œå®ç°è§£è€¦ã€‚</p><h5 id="ç±»é€‚é…å™¨ï¼š"><a href="#ç±»é€‚é…å™¨ï¼š" class="headerlink" title="ç±»é€‚é…å™¨ï¼š"></a>ç±»é€‚é…å™¨ï¼š</h5><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230524201128653.png" alt="image-20230524201128653" style="zoom:50%;" /><p><strong>å¯¹è±¡é€‚é…å™¨ï¼š</strong></p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230524201140631.png" alt="image-20230524201140631" style="zoom:50%;" /><ul><li><p>Target: å®šä¹‰ Client çœŸæ­£éœ€è¦ä½¿â½¤çš„æ¥â¼ã€‚</p></li><li><p>Adaptee: å…¶ä¸­å®šä¹‰äº†â¼€ä¸ªå·²ç»å­˜åœ¨çš„æ¥â¼ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦è¿›â¾é€‚é…çš„æ¥â¼ã€‚</p></li><li><p>Adapter: å¯¹ Adaptee å’Œ Target çš„æ¥â¼è¿›â¾é€‚é…ï¼Œä¿è¯å¯¹ target ä¸­æ¥â¼çš„è°ƒâ½¤å¯ä»¥é—´æ¥è½¬æ¢ä¸ºå¯¹ Adaptee ä¸­æ¥â¼è¿›â¾è°ƒâ½¤ã€‚</p><ul><li>ä¼˜ç‚¹ï¼š</li></ul><ol><li>æâ¾¼äº†ç±»çš„å¤â½¤ï¼›</li><li>ç»„åˆè‹¥â¼²å…³è”å¯¹è±¡å½¢æˆå¯¹å¤–æä¾›ç»Ÿâ¼€æœåŠ¡çš„æ¥â¼ï¼›</li><li>æ‰©å±•æ€§ã€çµæ´»æ€§å¥½ã€‚</li></ol><ul><li>ç¼ºç‚¹ï¼š</li></ul><ol><li>è¿‡å¤šä½¿â½¤é€‚é…æ¨¡å¼å®¹æ˜“é€ æˆä»£ç åŠŸèƒ½å’Œé€»è¾‘æ„ä¹‰çš„æ··æ·†ã€‚</li><li>éƒ¨åˆ†è¯­â¾”å¯¹ç»§æ‰¿çš„é™åˆ¶ï¼Œå¯èƒ½â¾„å¤šåªèƒ½é€‚é…â¼€ä¸ªé€‚é…è€…ç±»ï¼Œâ½½ä¸”â½¬æ ‡ç±»å¿…é¡»æ˜¯æŠ½è±¡ç±»ã€‚</li></ol></li></ul><h3 id="è£…é¥°æ¨¡å¼ï¼š"><a href="#è£…é¥°æ¨¡å¼ï¼š" class="headerlink" title="è£…é¥°æ¨¡å¼ï¼š"></a>è£…é¥°æ¨¡å¼ï¼š</h3><p>è£…é¥°å™¨æ¨¡å¼ä¸»è¦å¯¹ç°æœ‰çš„ç±»å¯¹è±¡è¿›â¾åŒ…è£¹å’Œå°è£…ï¼Œä»¥æœŸæœ›åœ¨ä¸æ”¹å˜ç±»å¯¹è±¡åŠå…¶ç±»å®šä¹‰çš„æƒ…å†µä¸‹ï¼Œä¸ºå¯¹è±¡æ·»åŠ é¢å¤–åŠŸèƒ½ã€‚æ˜¯â¼€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒâ½¤è¢«åŒ…è£¹ä¹‹åçš„å¯¹è±¡å®ŒæˆåŠŸèƒ½æ·»åŠ çš„ï¼Œâ½½ä¸æ˜¯ç›´æ¥ä¿®æ”¹ç°æœ‰å¯¹è±¡çš„â¾ä¸ºï¼Œç›¸å½“äºå¢åŠ äº†ä¸­é—´å±‚ã€‚(AOP???)</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230524204945734.png" alt="image-20230524204945734" style="zoom:50%;" /><p><strong>Component</strong>: å¯¹è±¡çš„æ¥â¼ç±»ï¼Œå®šä¹‰è£…é¥°å¯¹è±¡å’Œè¢«è£…é¥°å¯¹è±¡çš„å…±åŒæ¥â¼ï¼›<br><strong>ConcreteComponent</strong>: è¢«è£…é¥°å¯¹è±¡çš„ç±»å®šä¹‰ï¼›<br><strong>Decorator</strong>: è£…é¥°å¯¹è±¡çš„æŠ½è±¡ç±»ï¼Œ<u><strong>æŒæœ‰â¼€ä¸ªå…·ä½“çš„è¢«ä¿®é¥°å¯¹è±¡</strong></u>ï¼Œå¹¶å®ç°æ¥â¼ç±»ç»§æ‰¿çš„å…¬å…±æ¥â¼ï¼›<br><strong>ConcreteDecorator</strong>:å…·ä½“çš„è£…é¥°å™¨ï¼Œè´Ÿè´£å¾€è¢«è£…é¥°å¯¹è±¡æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼›</p><h4 id="è®²è®²è£…é¥°å™¨æ¨¡å¼çš„åº”â½¤åœºæ™¯"><a href="#è®²è®²è£…é¥°å™¨æ¨¡å¼çš„åº”â½¤åœºæ™¯" class="headerlink" title="è®²è®²è£…é¥°å™¨æ¨¡å¼çš„åº”â½¤åœºæ™¯"></a>è®²è®²è£…é¥°å™¨æ¨¡å¼çš„åº”â½¤åœºæ™¯</h4><p>å¦‚æœä½ å¸Œæœ›åœ¨<u>â½†éœ€ä¿®æ”¹ä»£ç çš„</u>æƒ…å†µä¸‹å³å¯ä½¿â½¤å¯¹è±¡ï¼Œ ä¸”å¸Œæœ›åœ¨è¿â¾æ—¶<u>ä¸ºå¯¹è±¡æ–°å¢é¢å¤–çš„â¾ä¸º</u>ï¼Œ å¯ä»¥ä½¿â½¤è£…é¥°æ¨¡å¼ã€‚è£…é¥°èƒ½å°†ä¸šåŠ¡é€»è¾‘ç»„ç»‡ä¸ºå±‚æ¬¡ç»“æ„ï¼Œ ä½ å¯ä¸ºå„å±‚åˆ›å»ºâ¼€ä¸ªè£…é¥°ï¼Œ åœ¨è¿â¾æ—¶<br>å°†å„ç§ä¸åŒé€»è¾‘ç»„åˆæˆå¯¹è±¡ã€‚ ç”±äºè¿™äº›å¯¹è±¡éƒ½éµå¾ªé€šâ½¤æ¥â¼ï¼Œ å®¢æˆ·ç«¯ä»£ç èƒ½ä»¥ç›¸åŒçš„â½…å¼ä½¿â½¤è¿™äº›å¯¹è±¡ã€‚å¦‚æœâ½¤ç»§æ‰¿æ¥æ‰©å±•å¯¹è±¡â¾ä¸ºçš„â½…æ¡ˆéš¾ä»¥å®ç°æˆ–è€…æ ¹æœ¬ä¸å¯â¾ï¼Œ ä½ å¯ä»¥ä½¿â½¤è¯¥æ¨¡å¼ã€‚è®¸å¤šç¼–ç¨‹è¯­â¾”ä½¿â½¤ final æœ€ç»ˆå…³é”®å­—æ¥é™åˆ¶å¯¹æŸä¸ªç±»çš„è¿›â¼€æ­¥æ‰©å±•ã€‚ å¤â½¤æœ€ç»ˆç±»å·²æœ‰â¾ä¸ºçš„å”¯â¼€â½…æ³•æ˜¯ä½¿â½¤è£…é¥°æ¨¡å¼ï¼š â½¤å°è£…å™¨å¯¹å…¶è¿›â¾å°è£…ã€‚</p><h3 id="ä»£ç†æ¨¡å¼ï¼š"><a href="#ä»£ç†æ¨¡å¼ï¼š" class="headerlink" title="ä»£ç†æ¨¡å¼ï¼š"></a>ä»£ç†æ¨¡å¼ï¼š</h3><p>ä»£ç†æ¨¡å¼çš„æœ¬è´¨æ˜¯â¼€ä¸ªä¸­é—´ä»¶ï¼Œä¸»è¦â½¬çš„æ˜¯è§£è€¦åˆæœåŠ¡æä¾›è€…å’Œä½¿â½¤è€…ã€‚<strong>ä½¿â½¤è€…é€šè¿‡ä»£ç†é—´æ¥åœ°è®¿é—®æœåŠ¡æä¾›è€…</strong>ï¼Œ<u>ä¾¿äºåè€…çš„å°è£…å’Œæ§åˆ¶</u>ã€‚æ˜¯â¼€ç§ç»“æ„æ€§æ¨¡å¼ã€‚</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230524202229926.png" alt="image-20230524202229926" style="zoom:60%;" /><p>Subject: å®šä¹‰ RealSubject å¯¹å¤–çš„æ¥â¼ï¼Œä¸”è¿™äº›æ¥â¼å¿…é¡»è¢« Proxy å®ç°ï¼Œè¿™æ ·å¤–éƒ¨è°ƒâ½¤ proxy çš„æ¥â¼æœ€ç»ˆéƒ½è¢«è½¬åŒ–ä¸ºå¯¹ realsubject çš„è°ƒâ½¤ã€‚<br>RealSubject: çœŸæ­£çš„â½¬æ ‡å¯¹è±¡ã€‚<br>Proxy: â½¬æ ‡å¯¹è±¡çš„ä»£ç†ï¼Œè´Ÿè´£æ§åˆ¶å’Œç®¡ç†â½¬æ ‡å¯¹è±¡ï¼Œå¹¶é—´æ¥åœ°ä¼ é€’å¤–éƒ¨å¯¹â½¬æ ‡å¯¹è±¡çš„è®¿é—®ã€‚</p><p>Remote Proxy: å¯¹æœ¬åœ°çš„è¯·æ±‚ä»¥åŠå‚æ•°è¿›â¾åºåˆ—åŒ–ï¼Œå‘è¿œç¨‹å¯¹è±¡å‘é€è¯·æ±‚ï¼Œå¹¶å¯¹å“åº”ç»“æœè¿›â¾ååºåˆ—åŒ–ï¼Œå°†æœ€ç»ˆç»“æœåé¦ˆç»™è°ƒâ½¤è€…ï¼›<br>Virtual Proxy: å½“â½¬æ ‡å¯¹è±¡çš„åˆ›å»ºå¼€é”€â½è¾ƒâ¼¤çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿â½¤å»¶è¿Ÿæˆ–è€…å¼‚æ­¥çš„â½…å¼åˆ›å»ºâ½¬æ ‡å¯¹è±¡ï¼›<br>Protection Proxy: ç»†åŒ–å¯¹â½¬æ ‡å¯¹è±¡è®¿é—®æƒé™çš„æ§åˆ¶ï¼›</p><h4 id="é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†çš„åŒºåˆ«"><a href="#é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†çš„åŒºåˆ«" class="headerlink" title="é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†çš„åŒºåˆ«:"></a>é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†çš„åŒºåˆ«:</h4><ol><li>çµæ´»æ€§ ï¼šåŠ¨æ€ä»£ç†æ›´åŠ çµæ´»ï¼Œä¸éœ€è¦å¿…é¡»å®ç°æ¥â¼ï¼Œå¯ä»¥ç›´æ¥ä»£ç†å®ç°ç±»ï¼Œå¹¶ä¸”å¯ä»¥ä¸éœ€è¦é’ˆå¯¹æ¯ä¸ªâ½¬æ ‡ç±»éƒ½åˆ›å»ºâ¼€ä¸ªä»£ç†ç±»ã€‚å¦å¤–ï¼Œé™æ€ä»£ç†ä¸­ï¼Œæ¥â¼â¼€æ—¦æ–°å¢åŠ â½…æ³•ï¼Œâ½¬æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡éƒ½è¦è¿›â¾ä¿®æ”¹ï¼Œè¿™æ˜¯â¾®å¸¸éº»çƒ¦çš„ï¼</li><li>JVM å±‚â¾¯ ï¼š<u>é™æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å°±å°†æ¥â¼ã€å®ç°ç±»ã€ä»£ç†ç±»è¿™äº›éƒ½å˜æˆäº†â¼€ä¸ªä¸ªå®é™…çš„ class â½‚ä»¶</u>ã€‚â½½åŠ¨æ€ä»£ç†æ˜¯åœ¨è¿â¾æ—¶åŠ¨æ€â½£æˆç±»å­—èŠ‚ç ï¼Œå¹¶åŠ è½½åˆ° JVM ä¸­çš„ã€‚</li></ol><h2 id="è¡Œä¸ºå‹æ¨¡å¼ï¼š"><a href="#è¡Œä¸ºå‹æ¨¡å¼ï¼š" class="headerlink" title="è¡Œä¸ºå‹æ¨¡å¼ï¼š"></a>è¡Œä¸ºå‹æ¨¡å¼ï¼š</h2><h3 id="è§‚å¯Ÿè€…æ¨¡å¼ï¼š"><a href="#è§‚å¯Ÿè€…æ¨¡å¼ï¼š" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼ï¼š"></a>è§‚å¯Ÿè€…æ¨¡å¼ï¼š</h3><p>è§‚å¯Ÿè€…æ¨¡å¼ä¸»è¦â½¤äº<u>å¤„ç†å¯¹è±¡é—´çš„â¼€å¯¹å¤šçš„å…³ç³»</u>ï¼Œæ˜¯â¼€ç§å¯¹è±¡â¾ä¸ºæ¨¡å¼ã€‚</p><p>è¯¥æ¨¡å¼çš„å®é™…åº”â½¤åœºæ™¯â½è¾ƒå®¹æ˜“ç¡®è®¤ï¼Œå½“â¼€ä¸ªå¯¹è±¡çŠ¶æ€å‘â½£å˜åŒ–æ—¶ï¼Œæ‰€æœ‰è¯¥å¯¹è±¡çš„å…³æ³¨è€…å‡èƒ½æ”¶åˆ°çŠ¶æ€å˜åŒ–é€šçŸ¥ï¼Œä»¥è¿›â¾ç›¸åº”çš„å¤„ç†ã€‚(æ€ä¹ˆè¿™ä¹ˆåƒwebsocketå•Š)</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230524203754928.png" alt="image-20230524203754928" style="zoom:50%;" /><p><strong>Subject</strong>: æŠ½è±¡è¢«è§‚å¯Ÿè€…ï¼Œä»…æä¾›æ³¨å†Œå’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡çš„æ¥â¼å£°æ˜ã€‚<br><strong>ConcreteSubject</strong>: å…·ä½“è¢«è§‚å¯Ÿè€…å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­æ”¶é›†äº†æ‰€æœ‰éœ€è¦è¢«é€šçŸ¥çš„è§‚å¯Ÿè€…ï¼Œå¹¶å¯ä»¥åŠ¨æ€çš„å¢åˆ é›†åˆä¸­çš„è§‚å¯Ÿè€…ã€‚å½“å…¶çŠ¶æ€å‘â½£å˜åŒ–æ—¶ä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ã€‚<br><strong>Observer</strong>: æŠ½è±¡è§‚å¯Ÿè€…ï¼Œä¸ºæ‰€æœ‰è§‚å¯Ÿè€…å®šä¹‰è·å¾—é€šçŸ¥çš„ç»Ÿâ¼€æ¥â¼ï¼›<br><strong>ConcreteObserver</strong>: è§‚å¯Ÿè€…å¯¹è±¡ï¼Œå…¶å…³æ³¨å¯¹è±¡ä¸º Subjectï¼Œèƒ½æ¥å— Subjectå˜åŒ–æ—¶å‘å‡ºçš„é€šçŸ¥å¹¶æ›´æ–°â¾ƒèº«çŠ¶æ€ã€‚</p><ul><li>ä¼˜ç‚¹ï¼š</li></ul><ol><li>è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆçš„ï¼›</li><li>è€¦åˆåº¦è¾ƒä½ï¼Œä¸¤è€…ä¹‹é—´çš„å…³è”ä»…ä»…åœ¨äºæ¶ˆæ¯çš„é€šçŸ¥ï¼›</li><li>è¢«è§‚å¯Ÿè€…â½†éœ€å…³â¼¼ä»–çš„è§‚å¯Ÿè€…ï¼›</li><li>â½€æŒâ¼´æ’­é€šä¿¡ï¼›</li></ol><ul><li>ç¼ºç‚¹ï¼š</li></ul><ol><li>è§‚å¯Ÿè€…åªçŸ¥é“è¢«è§‚å¯Ÿå¯¹è±¡å‘â½£äº†å˜åŒ–ï¼Œä½†<strong>ä¸çŸ¥å˜åŒ–çš„è¿‡ç¨‹å’Œç¼˜ç”±</strong>ï¼›</li><li><strong>è§‚å¯Ÿè€…åŒæ—¶ä¹Ÿå¯èƒ½æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œæ¶ˆæ¯ä¼ é€’çš„é“¾è·¯å¯èƒ½ä¼šè¿‡â»“ï¼Œå®Œæˆæ‰€æœ‰</strong><br><strong>é€šçŸ¥èŠ±è´¹æ—¶é—´è¾ƒå¤š</strong></li><li>å¦‚æœè§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´äº§â½£å¾ªç¯ä¾èµ–ï¼Œæˆ–è€…æ¶ˆæ¯ä¼ é€’é“¾è·¯å½¢æˆé—­<br>ç¯ï¼Œä¼š<u>å¯¼è‡´â½†é™å¾ªç¯</u>ï¼›</li></ol><h4 id="ä½ çš„é¡¹â½¬æ˜¯æ€ä¹ˆâ½¤çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ"><a href="#ä½ çš„é¡¹â½¬æ˜¯æ€ä¹ˆâ½¤çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä½ çš„é¡¹â½¬æ˜¯æ€ä¹ˆâ½¤çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ"></a>ä½ çš„é¡¹â½¬æ˜¯æ€ä¹ˆâ½¤çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ</h4><p>åœ¨â½€ä»˜åœºæ™¯ä¸‹ï¼Œâ½¤æˆ·è´­ä¹°â¼€ä»¶å•†å“ï¼Œå½“â½€ä»˜æˆåŠŸä¹‹åä¸‰â½…ä¼šå›è°ƒâ¾ƒèº«ï¼Œåœ¨è¿™ä¸ªæ—¶å€™ç³»ç»Ÿå¯èƒ½ä¼šæœ‰å¾ˆå¤šéœ€è¦æ‰§â¾çš„é€»è¾‘ï¼ˆå¦‚ï¼šæ›´æ–°è®¢å•çŠ¶æ€ï¼Œå‘é€é‚®ä»¶é€šçŸ¥ï¼Œèµ é€ç¤¼å“â€¦ï¼‰ï¼Œè¿™äº›é€»è¾‘ä¹‹é—´å¹¶æ²¡æœ‰å¼ºè€¦åˆï¼Œå› æ­¤å¤©ç„¶é€‚åˆä½¿â½¤è§‚å¯Ÿè€…æ¨¡å¼å»å®ç°è¿™äº›åŠŸèƒ½ï¼Œå½“æœ‰æ›´å¤šçš„æ“ä½œæ—¶ï¼Œåªéœ€è¦æ·»åŠ æ–°çš„è§‚å¯Ÿè€…å°±èƒ½å®ç°ï¼Œå®Œç¾å®ç°äº†å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾çš„å¼€é—­åŸåˆ™ã€‚</p><h3 id="è´£ä»»é“¾æ¨¡å¼ï¼š"><a href="#è´£ä»»é“¾æ¨¡å¼ï¼š" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼ï¼š"></a>è´£ä»»é“¾æ¨¡å¼ï¼š</h3><p>â¼€ä¸ªè¯·æ±‚æ²¿ç€â¼€æ¡â€œé“¾â€ä¼ é€’ï¼Œç›´åˆ°è¯¥â€œé“¾â€ä¸Šçš„æŸä¸ªå¤„ç†è€…å¤„ç†å®ƒä¸ºâ½Œã€‚</p><h4 id="è®²è®²è´£ä»»é“¾æ¨¡å¼çš„åº”â½¤åœºæ™¯"><a href="#è®²è®²è´£ä»»é“¾æ¨¡å¼çš„åº”â½¤åœºæ™¯" class="headerlink" title="è®²è®²è´£ä»»é“¾æ¨¡å¼çš„åº”â½¤åœºæ™¯"></a>è®²è®²è´£ä»»é“¾æ¨¡å¼çš„åº”â½¤åœºæ™¯</h4><ul><li><p>å½“ç¨‹åºéœ€è¦ä½¿â½¤ä¸åŒâ½…å¼å¤„ç†ä¸åŒç§ç±»è¯·æ±‚ï¼Œ â½½ä¸”è¯·æ±‚ç±»å‹å’Œé¡ºåºé¢„å…ˆæœªçŸ¥æ—¶ï¼Œ å¯ä»¥ä½¿â½¤è´£ä»»é“¾æ¨¡å¼ã€‚è¯¥æ¨¡å¼èƒ½å°†å¤šä¸ªå¤„ç†è€…è¿æ¥æˆâ¼€æ¡é“¾ã€‚ æ¥æ”¶åˆ°è¯·æ±‚åï¼Œ å®ƒä¼š â€œè¯¢é—®â€ æ¯ä¸ªå¤„ç†è€…æ˜¯å¦èƒ½å¤Ÿå¯¹å…¶è¿›â¾å¤„ç†ã€‚è¿™æ ·æ‰€æœ‰å¤„ç†è€…éƒ½æœ‰æœºä¼šæ¥å¤„ç†è¯·æ±‚ã€‚</p></li><li><p>å½“å¿…é¡»æŒ‰é¡ºåºæ‰§â¾å¤šä¸ªå¤„ç†è€…æ—¶ï¼Œ å¯ä»¥ä½¿â½¤è¯¥æ¨¡å¼ã€‚ â½†è®ºä½ ä»¥ä½•ç§é¡ºåºå°†å¤„ç†è€…è¿æ¥æˆâ¼€æ¡é“¾ï¼Œ æ‰€æœ‰è¯·æ±‚éƒ½ä¼šä¸¥æ ¼æŒ‰ç…§é¡ºåºé€šè¿‡é“¾ä¸Šçš„å¤„ç†è€…ã€‚</p></li></ul><h3 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h3><h4 id="ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼ï¼Ÿ</h4><p>ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰å±äºå¯¹è±¡çš„â¾ä¸ºæ¨¡å¼ã€‚å…¶â½¤æ„æ˜¯é’ˆå¯¹â¼€ç»„ç®—æ³•ï¼Œå°†æ¯â¼€ä¸ªç®—æ³•å°è£…åˆ°å…·æœ‰å…±åŒæ¥â¼çš„ç‹¬â½´çš„ç±»ä¸­ï¼Œä»â½½ä½¿å¾—å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥åœ¨ä¸å½±å“åˆ°å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹å‘â½£å˜åŒ–ã€‚å…¶ä¸»è¦â½¬çš„æ˜¯é€šè¿‡å®šä¹‰ç›¸ä¼¼çš„ç®—æ³•ï¼Œæ›¿æ¢ if else è¯­å¥å†™æ³•ï¼Œå¹¶ä¸”å¯ä»¥éšæ—¶ç›¸äº’æ›¿æ¢ã€‚</p><h4 id="ç­–ç•¥æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"><a href="#ç­–ç•¥æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ" class="headerlink" title="ç­–ç•¥æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"></a>ç­–ç•¥æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</h4><p>å®šä¹‰äº†â¼€ç³»åˆ—å°è£…äº†ç®—æ³•ã€â¾ä¸ºçš„å¯¹è±¡ï¼Œä»–ä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ä¸¾ä¾‹ï¼š Java.util.List å°±æ˜¯å®šä¹‰äº†â¼€ä¸ªå¢ï¼ˆ add ï¼‰ã€åˆ ï¼ˆ remove ï¼‰ã€æ”¹ï¼ˆ set ï¼‰ã€æŸ¥ï¼ˆ indexOf ï¼‰ç­–ç•¥ï¼Œâ¾„äºå®ç°è¿™ä¸ªç­–ç•¥çš„ArrayList ã€ LinkedList ç­‰ç±»ï¼Œåªæ˜¯åœ¨å…·ä½“å®ç°æ—¶é‡‡â½¤äº†ä¸åŒçš„ç®—æ³•ã€‚ä½†å› ä¸ºå®ƒä»¬ç­–ç•¥â¼€æ ·ï¼Œä¸è€ƒè™‘é€Ÿåº¦çš„æƒ…å†µä¸‹ï¼Œä½¿â½¤æ—¶å®Œå…¨å¯ä»¥äº’ç›¸æ›¿æ¢ä½¿â½¤ã€‚</p><h1 id="è®¾è®¡æ¨¡å¼å®ä¾‹ï¼š"><a href="#è®¾è®¡æ¨¡å¼å®ä¾‹ï¼š" class="headerlink" title="è®¾è®¡æ¨¡å¼å®ä¾‹ï¼š"></a>è®¾è®¡æ¨¡å¼å®ä¾‹ï¼š</h1><h2 id="Spring-ä½¿â½¤äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#Spring-ä½¿â½¤äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="Spring ä½¿â½¤äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>Spring ä½¿â½¤äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h2><ul><li>â¼¯â¼šè®¾è®¡æ¨¡å¼ : Spring ä½¿â½¤â¼¯â¼šæ¨¡å¼é€šè¿‡BeanFactory ã€ ApplicationContext åˆ›å»º bean å¯¹è±¡ã€‚</li><li>ä»£ç†è®¾è®¡æ¨¡å¼ : Spring AOP åŠŸèƒ½çš„å®ç°(<strong>åŠ¨æ€ä»£ç†</strong>)ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å¼€å‘åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot</title>
      <link href="/2023/06/02/SpringBoot/"/>
      <url>/2023/06/02/SpringBoot/</url>
      
        <content type="html"><![CDATA[<p>æœ¬åšå®¢æ˜¯æ ¹æ®éŸ©é¡ºå¹³è€å¸ˆçš„SpingBootè¯¾ç¨‹è¿›è¡Œçš„çŸ¥è¯†æ€»ç»“ï¼</p><h3 id="SpringBootå¿«é€Ÿå…¥é—¨"><a href="#SpringBootå¿«é€Ÿå…¥é—¨" class="headerlink" title="SpringBootå¿«é€Ÿå…¥é—¨"></a>SpringBootå¿«é€Ÿå…¥é—¨</h3><ul><li>ç®€åŒ–äº†ä¼ ç»Ÿçš„SSMå¼€å‘ï¼Œç®€åŒ–æ•´åˆæ­¥éª¤ï¼Œæé«˜å¼€å‘æ•ˆç‡</li><li>ç®€åŒ–äº†Mavené¡¹ç›®çš„pom.xmlä¾èµ–å¯¼å…¥ï¼Œå¯ä»¥è¯´æ˜¯ä¸€é”®å¯¼å…¥</li></ul><p>@SpringBootApplication:ç”¨äºè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªspringbootåº”ç”¨&#x2F;é¡¹ç›®</p><h3 id="ä¾èµ–ç®¡ç†"><a href="#ä¾èµ–ç®¡ç†" class="headerlink" title="ä¾èµ–ç®¡ç†"></a>ä¾èµ–ç®¡ç†</h3><p>â€‹pom.xmlä¸­</p><p>â€‹å¯¼å…¥äº†çˆ¶å·¥ç¨‹</p><p>â€‹1.spring-boot-starter-parentä¸­è¿˜æœ‰çˆ¶é¡¹ç›®ï¼Œå£°æ˜äº†å¼€å‘ä¸­å¸¸ç”¨çš„ä¾èµ–çš„ç‰ˆæœ¬å·</p><p>â€‹2.ä¼šè‡ªè¡Œè¿›è¡Œç‰ˆæœ¬ä»²è£(ç¨‹åºå‘˜æ²¡æœ‰æŒ‡å®šæŸä¸ªjarä¾èµ–çš„ç‰ˆæœ¬ï¼Œåˆ™ä»¥çˆ¶é¡¹ç›®æŒ‡å®šçš„ç‰ˆæœ¬ä¸ºå‡†)</p><p>â€‹æƒ³è¦ä¿®æ”¹è‡ªåŠ¨ä»²è£çš„ç‰ˆæœ¬ï¼šï¼ˆä¾èµ–å°±è¿‘ä¼˜å…ˆåŸåˆ™ï¼‰</p><p>â€‹æ–¹å¼1ï¼šåœ¨pom.xmlè‡ªè¡Œæ˜¾å¼å¼•å…¥ä¾èµ–<dependency></p><p>â€‹æ–¹å¼2ï¼šåœ¨pom.xmlæ–‡ä»¶ä¸­çš„<properties>æ ‡ç­¾ä¸­æ‰§è¡Œç‰ˆæœ¬å·</p><h4 id="åœºæ™¯å¯åŠ¨å™¨"><a href="#åœºæ™¯å¯åŠ¨å™¨" class="headerlink" title="åœºæ™¯å¯åŠ¨å™¨"></a>åœºæ™¯å¯åŠ¨å™¨</h4><p>â€‹<strong>å®˜æ–¹</strong>ç»™çš„starterå½¢å¼ä¸ºï¼šspring-boot-starter-xxx</p><p>â€‹åœºæ™¯å¯åŠ¨å™¨èƒ½å¤Ÿå¸®ä½ æŠŠä½¿ç”¨xxxæ—¶æ‰€éœ€è¦çš„é…ç½®å…¨éƒ½é…å¥½ï¼Œæ¯”å¦‚webã€redisã€jdbcç­‰</p><p>â€‹<strong>ç¬¬ä¸‰æ–¹</strong>çš„starterå½¢å¼ä¸ºï¼šxxx-spring-boot-starter</p><h3 id="è‡ªåŠ¨é…ç½®"><a href="#è‡ªåŠ¨é…ç½®" class="headerlink" title="è‡ªåŠ¨é…ç½®"></a>è‡ªåŠ¨é…ç½®</h3><h4 id="è‡ªåŠ¨é…ç½®äº†ä»€ä¹ˆï¼Ÿ"><a href="#è‡ªåŠ¨é…ç½®äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="è‡ªåŠ¨é…ç½®äº†ä»€ä¹ˆï¼Ÿ"></a>è‡ªåŠ¨é…ç½®äº†ä»€ä¹ˆï¼Ÿ</h4><p>â€‹â€“Tomcat</p><p>â€‹â€“SpringMVC</p><p>â€‹â€“è‡ªåŠ¨é…ç½®äº†Webå¸¸ç”¨åŠŸèƒ½å¦‚å­—ç¬¦è¿‡æ»¤å™¨ï¼Œå¹¶æ³¨å…¥åˆ°å®¹å™¨ä¸­</p><p>â€‹â€“ğŸŒŸè‡ªåŠ¨é…ç½®äº†é»˜è®¤æ‰«æåŒ…ç»“æ„ï¼šé»˜è®¤æ‰«æ <strong>springbootä¸»ç¨‹åºç›®å½•ä¸‹åŠå…¶å­ç›®å½•ä¸­</strong>çš„åŒ…åŒ…(å¯ä»¥è‡ªè¡Œé…ç½®)</p><h4 id="å¦‚ä½•ä¿®æ”¹é»˜è®¤é…ç½®ï¼Ÿ"><a href="#å¦‚ä½•ä¿®æ”¹é»˜è®¤é…ç½®ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¿®æ”¹é»˜è®¤é…ç½®ï¼Ÿ"></a>å¦‚ä½•ä¿®æ”¹é»˜è®¤é…ç½®ï¼Ÿ</h4><h5 id="ä¿®æ”¹é»˜è®¤æ‰«æåŒ…ç»“æ„-å¯ä»¥ä¼ å…¥ä¸€ä¸ªStringæ•°ç»„ï¼Œè¡¨ç¤ºéœ€è¦æ‰«æå¤šä¸ªä¸åŒçš„åŒ…"><a href="#ä¿®æ”¹é»˜è®¤æ‰«æåŒ…ç»“æ„-å¯ä»¥ä¼ å…¥ä¸€ä¸ªStringæ•°ç»„ï¼Œè¡¨ç¤ºéœ€è¦æ‰«æå¤šä¸ªä¸åŒçš„åŒ…" class="headerlink" title="ä¿®æ”¹é»˜è®¤æ‰«æåŒ…ç»“æ„(å¯ä»¥ä¼ å…¥ä¸€ä¸ªStringæ•°ç»„ï¼Œè¡¨ç¤ºéœ€è¦æ‰«æå¤šä¸ªä¸åŒçš„åŒ…)"></a>ä¿®æ”¹é»˜è®¤æ‰«æåŒ…ç»“æ„(å¯ä»¥ä¼ å…¥ä¸€ä¸ªStringæ•°ç»„ï¼Œè¡¨ç¤ºéœ€è¦æ‰«æå¤šä¸ªä¸åŒçš„åŒ…)</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//scanBasePackages = &#123;&quot;com.study&quot;&#125;æŒ‡å®šspringbootè¦æ‰«æçš„åŒ…åŠå…¶å­åŒ…</span></span><br><span class="line"><span class="meta">@SpringBootApplication(scanBasePackages = &#123;&quot;com.study&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApp</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><h5 id="ä¹Ÿå¯ä»¥åœ¨resources-x2F-application-propertiesæ–‡ä»¶ä¸­å®šä¹‰æ›´å¤šçš„-è‡ªå®šä¹‰é…ç½®"><a href="#ä¹Ÿå¯ä»¥åœ¨resources-x2F-application-propertiesæ–‡ä»¶ä¸­å®šä¹‰æ›´å¤šçš„-è‡ªå®šä¹‰é…ç½®" class="headerlink" title="ä¹Ÿå¯ä»¥åœ¨resources&#x2F;application.propertiesæ–‡ä»¶ä¸­å®šä¹‰æ›´å¤šçš„  è‡ªå®šä¹‰é…ç½®"></a>ä¹Ÿå¯ä»¥åœ¨resources&#x2F;application.propertiesæ–‡ä»¶ä¸­å®šä¹‰æ›´å¤šçš„  <u>è‡ªå®šä¹‰é…ç½®</u></h5><pre><code> âš ï¸æˆ‘ä»¬åœ¨resources/application.propertiesä¸­è‡ªå®šä¹‰äº†é…ç½®ï¼Œé‚£ä¹ˆspringbootåœ¨å“ªè¯»å–è¿™äº›é…ç½®çš„å‘¢ï¼Ÿ</code></pre><p>â€‹æˆ‘ä»¬åœ¨application.propertiesä¸­é…ç½®çš„ä¿¡æ¯ä¼šæ˜ å°„åˆ°è¯¥å±æ€§å¯¹åº”çš„æŸä¸ªç±»ä¸­(é»˜è®¤é…ç½®æœ€ç»ˆéƒ½ä¼šæ˜ å°„åˆ°å¯¹åº”çš„ç±»ä¸­)ï¼Œè¿™ä¸ªç±»ä¼šè¢«æ³¨å†Œè¿›IOCå®¹å™¨ä¸­ï¼Œå› æ­¤é…ç½®æ‰ä¼šç”Ÿæ•ˆï¼</p><p>â€‹è¿˜å¯ä»¥è‡ªå®šä¹‰é…ç½®ï¼Œç±»ä¼¼äºå®šä¹‰ä¸€ä¸ªå¸¸é‡</p><p>é…ç½®çš„å…³ç³»ï¼šapplication.properties  xxxProperties  xxxAutoConfiguration</p><p>xxxAutoConfigurationç±»ä¸­å«æœ‰ä¸€ä¸ªxxxPropertieså¯¹è±¡ï¼ŒxxxPropertieså¯¹è±¡ä¸­ä¿å­˜äº†é»˜è®¤é…ç½®çš„å€¼ï¼Œå¦‚æœç¨‹åºå‘˜åœ¨application.propertiesä¸­è¿›è¡Œäº†è‡ªå®šä¹‰çš„é…ç½®ï¼Œä¼šè¢«åæ˜ åˆ°xxxPropertiesä¸­ï¼Œè¦†ç›–å…¶ä¸­çš„é»˜è®¤å€¼ã€‚äºæ˜¯xxxAutoConfigurationä¸­æºå¸¦çš„é…ç½®å°±æ˜¯application.propertiesä¸xxxPropertiesä¸­çš„ä¿¡æ¯äº†ï¼ŒxxxAutoConfigurationå†è¢«æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ï¼Œäºæ˜¯é…ç½®å®Œæˆï¼</p><h3 id="SpringBootå®¹å™¨åŠŸèƒ½"><a href="#SpringBootå®¹å™¨åŠŸèƒ½" class="headerlink" title="SpringBootå®¹å™¨åŠŸèƒ½"></a>SpringBootå®¹å™¨åŠŸèƒ½</h3><h4 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h4><p>â€‹åœ¨SpringBootä¸­ä½¿ç”¨@Configurationæ·»åŠ &#x2F;æ³¨å…¥ç»„ä»¶</p><p>â€‹é…ç½®ç±»(è¢«@Configurationä¿®é¥°çš„ç±») é…ç½®ç±»ä¹Ÿä¼šæ³¨å…¥åˆ°å®¹å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>      <span class="comment">//è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="comment">//åœ¨@Configurationæ³¨è§£çš„ç±»ä¸­ï¼Œç¨‹åºå‘˜å¯ä»¥é€šè¿‡@Beanæ³¨è§£æ¥æ³¨å…¥beanå¯¹è±¡åˆ°å®¹å™¨</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span><span class="comment">//é»˜è®¤ä¸ºå•ä¾‹ï¼Œå¯ä»¥åœ¨scopeæ³¨è§£ä¸­è®¾ç½®ä¸ºå¤šä¾‹</span></span><br></pre></td></tr></table></figure><h5 id="proxyBeanMethods-ä»£ç†beançš„æ–¹æ³•"><a href="#proxyBeanMethods-ä»£ç†beançš„æ–¹æ³•" class="headerlink" title="proxyBeanMethods:ä»£ç†beançš„æ–¹æ³•"></a>proxyBeanMethods:ä»£ç†beançš„æ–¹æ³•</h5><p>â€‹@Configuration(proxyBeanMethods &#x3D; false)&#x2F;&#x2F;è¡¨ç¤ºæ¯ä¸ª@Beanæ–¹æ³•è¢«è°ƒç”¨è¿”å›çš„ç»„ä»¶<strong>éƒ½æ˜¯æ–°åˆ›å»ºçš„</strong>ï¼Œå¤šä¾‹ï¼Œä»£ç†æ–¹å¼ Liteæ¨¡å¼</p><p>â€‹@Configuration(proxyBeanMethods &#x3D; true) &#x2F;&#x2F;è¡¨ç¤ºæ¯ä¸ª@Beanæ–¹æ³•è¢«è°ƒç”¨è¿”å›çš„ç»„ä»¶<strong>éƒ½æ˜¯å•å®ä¾‹çš„</strong>ï¼Œå•ä¾‹ï¼Œéä»£ç†æ–¹å¼ Fullæ¨¡å¼</p><p>â€‹â¬†ï¸ä»¥ä¸Šé…ç½®è¦ç”Ÿæ•ˆï¼Œéœ€è¦å…ˆè·å–BeanConfigç»„ä»¶ï¼Œå†è°ƒç”¨æ–¹æ³•</p><p>â€‹å¦‚æœç›´æ¥é€šè¿‡å®¹å™¨è·å–ï¼Œåˆ™ä»¥ä¸Šè®¾ç½®æ— æ•ˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›´æ¥é€šè¿‡å®¹å™¨è·å–ï¼š        </span></span><br><span class="line"><span class="type">Monster</span> <span class="variable">monster01</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;monster01&quot;</span>, Monster.class);</span><br><span class="line">        <span class="type">Monster</span> <span class="variable">monster02</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;monster01&quot;</span>, Monster.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;01---&quot;</span> + monster01 + <span class="string">&quot; &quot;</span> + monster01.hashCode());</span><br><span class="line">        System.out.println(<span class="string">&quot;02---&quot;</span> + monster02 + <span class="string">&quot; &quot;</span> + monster02.hashCode());</span><br><span class="line"><span class="comment">//è·å–BeanConfigç»„ä»¶ï¼Œå†è°ƒç”¨æ–¹æ³•ï¼š</span></span><br><span class="line">        <span class="type">BeanConfig</span> <span class="variable">beanConfig</span> <span class="operator">=</span> ioc.getBean(BeanConfig.class);</span><br><span class="line">        <span class="type">Monster</span> <span class="variable">monster01</span> <span class="operator">=</span> beanConfig.monster01();</span><br><span class="line">        <span class="type">Monster</span> <span class="variable">monster02</span> <span class="operator">=</span> beanConfig.monster01();</span><br><span class="line">        System.out.println(<span class="string">&quot;01---&quot;</span> + monster01 + <span class="string">&quot; &quot;</span> + monster01.hashCode());</span><br><span class="line">        System.out.println(<span class="string">&quot;02---&quot;</span> + monster02 + <span class="string">&quot; &quot;</span> + monster02.hashCode());</span><br></pre></td></tr></table></figure><h5 id="é…ç½®ç±»â€”â€”configæ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ª"><a href="#é…ç½®ç±»â€”â€”configæ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ª" class="headerlink" title="é…ç½®ç±»â€”â€”configæ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ª"></a>é…ç½®ç±»â€”â€”configæ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ª</h5><p>â€‹æ¯ä¸ªç±»å¯ä»¥æœ‰å¤šç§Beanï¼Œç»™@Beanä¿®é¥°çš„æ–¹æ³•èµ·ä¸åŒçš„åå­—( id )å³å¯</p><p>&#x2F;&#x2F;monster02ä¸ºä½ ä¸ºè¯¥beanè®¾ç½®çš„idï¼Œå¦‚æœä½ æ²¡æœ‰ä¸ºå…¶åœ¨@beançš„nameå±æ€§ä¸­è®¾ç½®åç§°ï¼Œé‚£ä¹ˆé»˜è®¤ä¸ºä½ ä¿®é¥°çš„æ„é€ <strong>æ–¹æ³•å</strong><br>é€šè¿‡æ­¤æ­¥éª¤ï¼šioc.getBean(â€œmonster02â€, Monster.class);</p><h4 id="Import"><a href="#Import" class="headerlink" title="@Import"></a>@Import</h4><p>ä¿®é¥°é…ç½®ç±»ï¼Œå¯ä»¥é€šè¿‡ .classçš„æ•°ç»„ï¼Œæ¥æ³¨å…¥æŒ‡å®šç±»å‹çš„Bean</p><p>â€‹å¯ä»¥ç”¨äºæ³¨å…¥ç»„ä»¶ï¼Œä¾‹ï¼š@Import( {Dog.class, Cat.class} ) &#x2F;&#x2F;<strong><u><em>é»˜è®¤beançš„IDä¸ºè¯¥ç±»çš„å…¨ç±»å</em></u></strong></p><h4 id="Conditional"><a href="#Conditional" class="headerlink" title="@Conditional"></a>@Conditional</h4><p>â€‹æ¡ä»¶è£…é…ï¼šæ»¡è¶³ConditionalæŒ‡å®šçš„æ¡ä»¶ï¼Œåˆ™è¿›è¡Œç»„ä»¶æ³¨å…¥</p><p>ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å½“å®¹å™¨ä¸­æœ‰ä¸€ä¸ªbeanï¼Œå®ƒçš„åå­—æ˜¯ monster_nmw ,å°±æ³¨å…¥è¿™ä¸ªbeanï¼›æ²¡æœ‰åˆ™ä¸æ³¨å…¥//åªè¦åå­—okå°±è¡Œï¼Œå¯¹ç±»å‹ä¸åšè¦æ±‚</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnBean(name = &quot;monster_nmw&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Dog <span class="title function_">dog01</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœ@Conditionalä¿®é¥°ç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªé…ç½®ç±»ä¸­çš„æ‰€æœ‰ç»„ä»¶<strong>éƒ½</strong>éœ€è¦æ»¡è¶³è¯¥æ¡ä»¶</p><h4 id="ImportResource"><a href="#ImportResource" class="headerlink" title="@ImportResource"></a>@ImportResource</h4><p><strong>ç”¨äºé…ç½®ä¼ ç»Ÿæ–¹å¼(xmlæ–‡ä»¶)çš„bean</strong></p><p>â€‹ä¿®é¥°æŸä¸ªé…ç½®ç±»ï¼Œå°† .xml æ–‡ä»¶ä¸­çš„é…ç½®å¯¼å…¥åˆ°é…ç½®ç±»ä¸­ï¼Œå¹¶æµ‹è¯•æ˜¯å¦å¯ä»¥è·å¾— .xml æ–‡ä»¶ä¸­çš„ç»„ä»¶</p><p>resourcesç›®å½•ä¸‹çš„xmlæ–‡ä»¶ç”¨ @ImportResource( locations &#x3D; â€œclasspath:xxx.xmlâ€ )</p><h4 id="é…ç½®ç»‘å®šï¼š"><a href="#é…ç½®ç»‘å®šï¼š" class="headerlink" title="é…ç½®ç»‘å®šï¼š"></a>é…ç½®ç»‘å®šï¼š</h4><p>â€‹å°†application.propertiesä¸­æŒ‡å®šçš„k-vå€¼ ä¸ JavaBeanè¿›è¡Œç»‘å®šï¼</p><p>â€‹åŠŸèƒ½ï¼šè·å–JavaBeanæ—¶ï¼Œä¸€äº›æ•°æ®è‡ªåŠ¨ä»application.propertiesè·å–</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®Furnçš„å±æ€§ k-v</span></span><br><span class="line"><span class="comment">#å…¶ä¸­ furn01 ç”¨äºæŒ‡å®š/åŒºåˆ†ä¸åŒçš„ç»‘å®šå¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥åœ¨ç»‘å®šä¸åŒçš„Furn beanå±æ€§å€¼æ—¶</span></span><br><span class="line"><span class="comment">#é€šè¿‡furn01å‰ç¼€è¿›è¡ŒåŒºåˆ†</span></span><br><span class="line"><span class="comment">#furn01.idä¸­çš„idæ˜¯Furn beançš„å±æ€§å</span></span><br><span class="line"><span class="attr">furn01.id</span>=<span class="string">100</span></span><br><span class="line"><span class="attr">furn01.name</span>=<span class="string">TV</span></span><br><span class="line"><span class="attr">furn01.price</span>=<span class="string">1000.9</span></span><br></pre></td></tr></table></figure><p>åœ¨å¯¹åº”çš„<strong>bean</strong>ä¸­æ·»åŠ æ³¨è§£ï¼š@ConfigurationProperties(prefix &#x3D; â€œfurn01â€)</p><h4 id="Component"><a href="#Component" class="headerlink" title="@Component"></a>@Component</h4><p>â€‹ä¿®é¥°beanï¼Œç›´æ¥å°†beanæ³¨å†Œå…¥å®¹å™¨</p><h3 id="SpringBootåº•å±‚æœºåˆ¶åˆ†æ"><a href="#SpringBootåº•å±‚æœºåˆ¶åˆ†æ" class="headerlink" title="SpringBootåº•å±‚æœºåˆ¶åˆ†æ"></a>SpringBootåº•å±‚æœºåˆ¶åˆ†æ</h3><h3 id="P32å¼€å§‹"><a href="#P32å¼€å§‹" class="headerlink" title="P32å¼€å§‹"></a>P32å¼€å§‹</h3><h3 id="è·³åˆ°äº†P47"><a href="#è·³åˆ°äº†P47" class="headerlink" title="è·³åˆ°äº†P47"></a>è·³åˆ°äº†P47</h3><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h3 id="Lombok"><a href="#Lombok" class="headerlink" title="Lombok"></a>Lombok</h3><p>ç®€åŒ–Javabeançš„å¼€å‘ï¼Œjavabeanä¸­çš„getterã€setterã€tostringå‡å¯é€šè¿‡Lombokå®ç°</p><p>@Data æ³¨è§£åœ¨ç±»ä¸Šï¼Œæä¾›æ‰€æœ‰å±æ€§çš„getterã€setteræ–¹æ³•</p><p>@Getter</p><p>@Setter</p><p>@ToString</p><p>@NoargsConstructor</p><p>@AllargsConstructor</p><h3 id="Spring-Initializr"><a href="#Spring-Initializr" class="headerlink" title="Spring Initializr"></a>Spring Initializr</h3><p>ç¨‹åºå‘˜ä½¿ç”¨Maven Archetype æ¥ç”ŸæˆMavené¡¹ç›®ï¼Œé¡¹ç›®åŸå‹ç›¸å¯¹ç®€é™‹ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡Spring Initialzræ¥æ„å»ºMavené¡¹ç›®</p><h3 id="53-60è·³äº†ï¼"><a href="#53-60è·³äº†ï¼" class="headerlink" title="53-60è·³äº†ï¼"></a>53-60è·³äº†ï¼</h3><h3 id="yamlï¼š"><a href="#yamlï¼š" class="headerlink" title="yamlï¼š"></a>yamlï¼š</h3><h4 id="åŸºæœ¬è§„åˆ™ï¼š"><a href="#åŸºæœ¬è§„åˆ™ï¼š" class="headerlink" title="åŸºæœ¬è§„åˆ™ï¼š"></a>åŸºæœ¬è§„åˆ™ï¼š</h4><h5 id="æ ¼å¼ï¼š"><a href="#æ ¼å¼ï¼š" class="headerlink" title="æ ¼å¼ï¼š"></a>æ ¼å¼ï¼š</h5><p>â€‹        keyï¼š value        (key + : + ä¸€ä¸ªç©ºæ ¼ + value)<br>â€‹å¤§å°å†™æ•æ„Ÿ<br>â€‹ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»<br>â€‹    ç¼©è¿›ä¸å…è®¸ä½¿ç”¨Tabï¼Œåªèƒ½ä½¿ç”¨ç©ºæ ¼<br>â€‹    ç¼©è¿›çš„æ ¼æ•°ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½å³å¯<br>â€‹    â€˜#â€™ è¡¨ç¤ºæ³¨é‡Š<br>â€‹å­—ç¬¦ä¸²æ— éœ€åŠ å¼•å·ï¼š<br>â€‹å•å¼•å·ä¼šå°† \n ä½œä¸ºå­—ç¬¦ä¸²è¾“å‡º<br>â€‹åŒå¼•å·ä¼šå°† \n ä½œä¸ºæ¢è¡Œè¾“å‡º</p><h5 id="è¡¨ç¤ºå¯¹è±¡ï¼š"><a href="#è¡¨ç¤ºå¯¹è±¡ï¼š" class="headerlink" title="è¡¨ç¤ºå¯¹è±¡ï¼š"></a>è¡¨ç¤ºå¯¹è±¡ï¼š</h5><p>â€‹    k: {k1: v1,k2: v2,â€¦.}<br>æˆ–<br>â€‹    k:<br>â€‹      k1: v1<br>â€‹      k2:v2<br>â€‹      k3:v3<br>â€‹      â€¦</p><h5 id="è¡¨ç¤ºæ•°ç»„ï¼š"><a href="#è¡¨ç¤ºæ•°ç»„ï¼š" class="headerlink" title="è¡¨ç¤ºæ•°ç»„ï¼š"></a>è¡¨ç¤ºæ•°ç»„ï¼š</h5><p>â€‹    k: [v1,v2,v3,â€¦]<br>æˆ–<br>â€‹    k:<br>â€‹&#x2F;- v1<br>â€‹&#x2F;-v2<br>â€‹&#x2F;-v3<br>â€‹â€¦â€¦</p><!--    åœ¨ymlæ–‡ä»¶ä¸­ï¼Œè¾“å…¥è‡ªå®šjavabeanæ—¶éœ€è¦æç¤ºï¼Œåªéœ€å¼•å…¥å¦‚ä¸‹ä¾èµ–    --><dependency>    <groupId>org.springframework.boot</groupId>    <artifactId>spring-boot-configuration-processor</artifactId>    <optional>true</optional></dependency><p>propertiesæ–‡ä»¶ä¸yamlæ–‡ä»¶ä¼šè¢«**é€ä¸ªè§£æ(æŒ‰æ–‡ä»¶é¡ºåº)**ï¼Œè‹¥å®šä¹‰äº†åŒæ ·çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆè°å…ˆå®šä¹‰å°±æŒ‰è°çš„æ¥</p><h3 id="WEBå¼€å‘-é™æ€èµ„æºè®¿é—®"><a href="#WEBå¼€å‘-é™æ€èµ„æºè®¿é—®" class="headerlink" title="WEBå¼€å‘-é™æ€èµ„æºè®¿é—®"></a>WEBå¼€å‘-é™æ€èµ„æºè®¿é—®</h3><h4 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><h5 id="é»˜è®¤é™æ€èµ„æºç›®å½•ï¼š"><a href="#é»˜è®¤é™æ€èµ„æºç›®å½•ï¼š" class="headerlink" title="é»˜è®¤é™æ€èµ„æºç›®å½•ï¼š"></a>é»˜è®¤é™æ€èµ„æºç›®å½•ï¼š</h5><p>â€‹æ”¾åœ¨resourceç›®å½•ä¸‹çš„å››ç§ç›®å½•ä¸­ï¼Œä¼šè¢«è®¤ä¸ºæ˜¯é™æ€èµ„æºï¼š<br>â€‹    1.&#x2F;static<br>â€‹    2.&#x2F;public<br>â€‹    3.&#x2F;resources<br>â€‹    4.&#x2F;META-INF&#x2F;resources</p><p>â€‹å¯è‡ªè¡Œæ›´æ”¹æˆåˆ«çš„åŒ…ï¼Œä½†æ²¡å¿…è¦</p><p>ğŸŒŸä¸ºä»€ä¹ˆæ˜¯è¿™å‡ ä¸ªåŒ…å‘¢ï¼Ÿå› ä¸ºåœ¨Springå®¹å™¨ä¸­ï¼ŒWebProperties.javaåœ¨IOCå®¹å™¨ä¸­è¢«åŠ è½½ï¼Œè€Œåœ¨å…¶ä¸­å®šä¹‰äº†é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„ï¼</p><h5 id="å¸¸è§é™æ€èµ„æºï¼š"><a href="#å¸¸è§é™æ€èµ„æºï¼š" class="headerlink" title="å¸¸è§é™æ€èµ„æºï¼š"></a>å¸¸è§é™æ€èµ„æºï¼š</h5><p>â€‹.js .css å›¾ç‰‡ å­—ä½“æ–‡ä»¶ç­‰ç­‰</p><h5 id="è®¿é—®æ–¹å¼ï¼š"><a href="#è®¿é—®æ–¹å¼ï¼š" class="headerlink" title="è®¿é—®æ–¹å¼ï¼š"></a>è®¿é—®æ–¹å¼ï¼š</h5><p>â€‹é¡¹ç›®æ ¹è·¯å¾„&#x2F; + é™æ€èµ„æºå (æ— éœ€ä¸­é—´çš„è·¯å¾„ï¼Œç›´æ¥èµ„æºåå³å¯)</p><p>â€‹åŸå› ï¼šåœ¨ WebProperties.java ä¸­ï¼Œå¸®ä½ åšäº†æ˜ å°„ã€‚å½“ç„¶ï¼Œä¸æ»¡æ„çš„è¯ä¹Ÿå¯ä»¥è‡ªå®šé…ç½®å®šä¹‰ã€‚</p><h5 id="æ³¨æ„äº‹é¡¹ï¼š"><a href="#æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h5><h6 id="é™æ€èµ„æºè®¿é—®åŸç†ï¼š"><a href="#é™æ€èµ„æºè®¿é—®åŸç†ï¼š" class="headerlink" title="é™æ€èµ„æºè®¿é—®åŸç†ï¼š"></a>é™æ€èµ„æºè®¿é—®åŸç†ï¼š</h6><p>â€‹é™æ€æ˜ å°„æ˜¯ &#x2F;**  ä¹Ÿå°±æ˜¯å¯¹æ‰€æœ‰è¯·æ±‚æ‹¦æˆªï¼Œå½“æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œ<strong>å…ˆçœ‹Controllerèƒ½ä¸èƒ½å¤„ç†</strong>ï¼Œè‹¥ä¸èƒ½ï¼Œå†å°†è¯·æ±‚äº¤ç»™<strong>é™æ€èµ„æºå¤„ç†å™¨</strong>ï¼Œå¦‚æœé™æ€èµ„æºä¸­ä¹Ÿæ— æ³•åŒ¹é…ï¼Œåˆ™è¿”å›404é”™è¯¯   </p><p>â€‹ï¼ˆå³ï¼š<u>å…ˆçœ‹Controllerä¸­æœ‰æ— åŒ¹é…ï¼Œæ²¡æœ‰å†çœ‹é™æ€èµ„æºä¸­æœ‰æ²¡æœ‰</u>ï¼‰</p><p><strong>âš ï¸å› æ­¤Controllerä¸­çš„è¯·æ±‚å¯èƒ½å’Œé™æ€èµ„æºé‡åï¼Œå¯¼è‡´æ„å¤–çš„é”™è¯¯ï¼Œå› æ­¤æˆ‘ä»¬æœ‰æ—¶éœ€è¦å°†é™æ€èµ„æºçš„é»˜è®¤è®¿é—®å‰ç¼€è¿›è¡Œä¿®æ”¹ï¼Œä»è€Œé¿å…å†²çª</strong></p><h6 id="ä¿®æ”¹é™æ€èµ„æºè®¿é—®å‰ç¼€ï¼š"><a href="#ä¿®æ”¹é™æ€èµ„æºè®¿é—®å‰ç¼€ï¼š" class="headerlink" title="ä¿®æ”¹é™æ€èµ„æºè®¿é—®å‰ç¼€ï¼š"></a>ä¿®æ”¹é™æ€èµ„æºè®¿é—®å‰ç¼€ï¼š</h6><p>â€‹åœ¨ application.yaml ä¸­é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹é™æ€èµ„æºè®¿é—®çš„è·¯å¾„/ å‰ç¼€</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/study/**</span></span><br></pre></td></tr></table></figure><h6 id="å¢åŠ ä¸€ä¸ªé™æ€èµ„æºç›®å½•ï¼š"><a href="#å¢åŠ ä¸€ä¸ªé™æ€èµ„æºç›®å½•ï¼š" class="headerlink" title="å¢åŠ ä¸€ä¸ªé™æ€èµ„æºç›®å½•ï¼š"></a>å¢åŠ ä¸€ä¸ªé™æ€èµ„æºç›®å½•ï¼š</h6><p>â€‹â€¦</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span> </span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="attr">static-locations:</span> [<span class="string">æ–°çš„è·¯å¾„</span>]<span class="comment"># å¦‚æœåŸæ¥çš„è¿˜æƒ³ç”¨ï¼Œé‚£ä¹ˆè¦æŠŠåŸæ¥çš„ä¹Ÿå¡«è¿›æ–°çš„è·¯å¾„ä¸­</span></span><br></pre></td></tr></table></figure><h3 id="Resté£æ ¼è¯·æ±‚å¤„ç†"><a href="#Resté£æ ¼è¯·æ±‚å¤„ç†" class="headerlink" title="Resté£æ ¼è¯·æ±‚å¤„ç†"></a>Resté£æ ¼è¯·æ±‚å¤„ç†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MonsterController</span> &#123;</span><br><span class="line"><span class="comment">//    @RequestMapping(value = &quot;/monster&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/monster&quot;)</span><span class="comment">//ä¸¤ç§å†™æ³•ä½œç”¨ç›¸åŒï¼</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMonster</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;GET-æŸ¥è¯¢&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/monster&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">saveMonster</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;POST-ä¿å­˜&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/monster&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">putMonster</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;PUT-ä¿®æ”¹&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/monster&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteMonster</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;DELETE-åˆ é™¤&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯æ˜¯ PostMan å¯ä»¥ç›´æ¥å‘é€Putã€Delete è¯·æ±‚ï¼Œå¯ä»¥ä¸è®¾ç½®Filter</p><p>å¦‚æœè¦springbootæ”¯æŒ<strong>é¡µé¢è¡¨å•</strong>çš„ReståŠŸèƒ½ï¼Œéœ€è¦æ³¨æ„ï¼š</p><ul><li>Resté£æ ¼è¯·æ±‚ æ ¸å¿ƒFilterâ€”â€”HiddenHttpMethodFilterï¼Œè¡¨å•è¯·æ±‚ä¼šè¢«å…¶æ‹¦æˆªï¼Œè·å–è¡¨å•çš„ _methodå€¼ï¼Œå†åˆ¤æ–­æ˜¯PUT&#x2F;DELETE&#x2F;PATCH</li><li>éœ€è¦åœ¨application.ymlä¸­å¯åŠ¨filteråŠŸèƒ½</li><li>ä¿®æ”¹application.ymlï¼Œå¯ç”¨filteråŠŸèƒ½</li></ul><p>@RestController ä¸ @Controllerï¼š</p><p>â€‹@Controllerï¼šä¼šå°†æ–¹æ³•è¿”å›çš„Stringäº¤ç»™è§†å›¾è§£æå™¨ï¼Œå†è·³è½¬åˆ°é¡µé¢</p><p>â€‹1.å¦‚æœæ²¡æœ‰é…ç½®è§†å›¾è§£æå™¨ï¼Œçœ‹æœ‰æ²¡æœ‰å¯¹åº”è¿”å›Stringçš„å…¶ä»–Controllerï¼Œæœ‰ï¼Œè¿›å…¥å…¶ä»–controller</p><p>â€‹2.å¦‚æœé…ç½®äº†è§†å›¾è§£æå™¨ï¼Œåˆ™ç›´æ¥å¯»æ‰¾æœ‰æ— å¯¹åº”è§†å›¾è§£æå™¨ï¼Œæœ‰åˆ™ä½¿ç”¨è§†å›¾è§£æå™¨</p><p>â€‹3.æ‰¾ä¸åˆ°åˆ™è¿”å›404</p><p>â€‹@RestControllerï¼šä¼šç›´æ¥è¿”å›Stringï¼Œä¸ä¼šå¯»æ‰¾è§†å›¾è§£æå™¨è¿›è¡Œè·³è½¬</p><h2 id="å‚æ•°æ¥æ”¶ç›¸å…³æ³¨è§£"><a href="#å‚æ•°æ¥æ”¶ç›¸å…³æ³¨è§£" class="headerlink" title="å‚æ•°æ¥æ”¶ç›¸å…³æ³¨è§£"></a>å‚æ•°æ¥æ”¶ç›¸å…³æ³¨è§£</h2><h3 id="Springbootæ¥æ”¶å‚æ•°æ³¨è§£ä»‹ç»ï¼š"><a href="#Springbootæ¥æ”¶å‚æ•°æ³¨è§£ä»‹ç»ï¼š" class="headerlink" title="Springbootæ¥æ”¶å‚æ•°æ³¨è§£ä»‹ç»ï¼š"></a>Springbootæ¥æ”¶å‚æ•°æ³¨è§£ä»‹ç»ï¼š</h3><h4 id="PathVariable"><a href="#PathVariable" class="headerlink" title="@PathVariable"></a>@PathVariable</h4><p>â€‹æ¥æ”¶urlè·¯å¾„ä¸­çš„å˜é‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ParameterController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/monster/&#123;id&#125;/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pathVariable</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span><br><span class="line"><span class="params">                               <span class="meta">@PathVariable(&quot;name&quot;)</span>String name,</span></span><br><span class="line"><span class="params">                               <span class="meta">@PathVariable</span> Map&lt;String, String&gt; map)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id:&quot;</span> + id);</span><br><span class="line">        System.out.println(<span class="string">&quot;name:&quot;</span> + name);</span><br><span class="line">        System.out.println(<span class="string">&quot;map:&quot;</span> + map);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="RequestHeader"><a href="#RequestHeader" class="headerlink" title="@RequestHeader"></a>@RequestHeader</h4><p>â€‹è·å–httpè¯·æ±‚å¤´ä¸­çš„å…¨éƒ¨æˆ–éƒ¨åˆ†ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–httpè¯·æ±‚å¤´ä¸­çš„hostä¿¡æ¯</span></span><br><span class="line"><span class="comment">//è·å–httpè¯·æ±‚å¤´ä¸­çš„æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@GetMapping</span> (<span class="string">&quot;/requestHeader&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">requestHeader</span><span class="params">(<span class="meta">@RequestHeader(&quot;Host&quot;)</span>String host,</span></span><br><span class="line"><span class="params">                            <span class="meta">@RequestHeader</span> Map&lt;String, String&gt;header)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;host-&quot;</span> + host);</span><br><span class="line">    System.out.println(<span class="string">&quot;header-&quot;</span> + header);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ModelAttribute"><a href="#ModelAttribute" class="headerlink" title="@ModelAttribute"></a>@ModelAttribute</h4><h5 id="RequestAttribute"><a href="#RequestAttribute" class="headerlink" title="@RequestAttribute"></a>@RequestAttribute</h5><p>â€‹è·å–requeståŸŸå±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/ok&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">ok</span><span class="params">(<span class="meta">@RequestAttribute(value = &quot;user&quot;,required = false)</span>String user)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user:&quot;</span> + user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="SessionAttribute"><a href="#SessionAttribute" class="headerlink" title="@SessionAttribute"></a>@SessionAttribute</h5><p>â€‹è·å–sessionåŸŸå±æ€§ï¼Œä½¿ç”¨æ–¹æ³•ä¸@RequestAttributeç›¸åŒ</p><h4 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a>@RequestParam</h4><p>â€‹è·å–è¯·æ±‚å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯·æ±‚ä¿¡æ¯ï¼š</span></span><br><span class="line">&lt;a href=<span class="string">&quot;/hi?name=xiaowoniu&amp;fruit=pear&amp;fruit=apple&quot;</span>&gt;<span class="meta">@RequestParam</span>-è·å–è¯·æ±‚å‚æ•°&lt;/a&gt;</span><br><span class="line">  </span><br><span class="line"><span class="meta">@GetMapping(&quot;/hi&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hi</span><span class="params">(<span class="meta">@RequestParam(value=&quot;name&quot;)</span>String username,</span></span><br><span class="line"><span class="params">                 <span class="meta">@RequestParam(value = &quot;fruit&quot;)</span>List&lt;String&gt; fruits)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username-&quot;</span> + username);</span><br><span class="line">    System.out.println(<span class="string">&quot;fruits-&quot;</span> + fruits);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CookieValue"><a href="#CookieValue" class="headerlink" title="@CookieValue"></a>@CookieValue</h4><p>â€‹è·å–cookieä¸­çš„ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/cookie&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">cookie</span><span class="params">(<span class="meta">@CookieValue(value = &quot;cookie_key&quot;,required = false)</span>String cookie_value,        <span class="meta">@CookieValue(value = &quot;username&quot;,required = false)</span> Cookie cookie)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;cookie_value:&quot;</span> + cookie_value);</span><br><span class="line">    <span class="keyword">if</span> (cookie != <span class="literal">null</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;username:&quot;</span> + cookie.getName() + <span class="string">&quot; - &quot;</span> + cookie.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="RequestBody"><a href="#RequestBody" class="headerlink" title="@RequestBody"></a>@RequestBody</h4><p>â€‹è·å–  <strong>POSTè¯·æ±‚ä½“</strong>  ï¼Œå¯ä»¥ç›´æ¥å°è£…åˆ°javabeanä¸­(<strong>åœ¨è‡ªå®šä¹‰å‚æ•°å¯¹è±¡ç« èŠ‚ä¸­teach</strong>)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/save&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">postMethod</span><span class="params">(<span class="meta">@RequestBody</span> String content)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;content:&quot;</span> + content);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤æ‚å‚æ•°"><a href="#å¤æ‚å‚æ•°" class="headerlink" title="å¤æ‚å‚æ•°"></a>å¤æ‚å‚æ•°</h3><h4 id="åŸºæœ¬ä»‹ç»-1"><a href="#åŸºæœ¬ä»‹ç»-1" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><p>controllerä¸­ï¼Œå¦‚æœæœ‰mapã€modelå½¢å‚ï¼Œå¦‚æœåœ¨æ–¹æ³•è¿‡ç¨‹ä¸­å‘å…¶ä¸­æ”¾å…¥äº†æ•°æ®ï¼Œé‚£ä¹ˆrequeståŸŸä¸­ä¼šä¿å­˜mapã€modelä¸­çš„æ‰€æœ‰æ•°æ®</p><h4 id="å¤æ‚å‚æ•°åº”ç”¨å®ä¾‹"><a href="#å¤æ‚å‚æ•°åº”ç”¨å®ä¾‹" class="headerlink" title="å¤æ‚å‚æ•°åº”ç”¨å®ä¾‹"></a>å¤æ‚å‚æ•°åº”ç”¨å®ä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å“åº”ä¸€ä¸ªå¤æ‚è¯·æ±‚ï¼ˆæ³¨å†Œè¯·æ±‚</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/register&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">register</span><span class="params">(Map&lt;String, String&gt; map,</span></span><br><span class="line"><span class="params">                       Model model,</span></span><br><span class="line"><span class="params">                       HttpServletResponse response)</span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœä¸€ä¸ªæ³¨å†Œè¯·æ±‚æ¥äº†ï¼Œæˆ‘ä»¬ä¼šå°†æ³¨å†Œçš„æ•°æ®å°è£…åˆ°mapæˆ–è€…modelä¸­</span></span><br><span class="line">    <span class="comment">//mapä¸modelä¸­çš„æ•°æ®ä¼šè¢«æ”¾å…¥requestä¸­</span></span><br><span class="line">    map.put(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;tjy&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;job&quot;</span>, <span class="string">&quot;java engineer&quot;</span>);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;sal&quot;</span>, <span class="number">80000</span>);</span><br><span class="line">    <span class="comment">//ä¸€ä¼šå†æµ‹è¯•responseçš„ä½¿ç”¨</span></span><br><span class="line">    <span class="comment">//æ¼”ç¤ºåˆ›å»º cookieï¼Œå¹¶é€šè¿‡responseæ·»åŠ åˆ°æµè§ˆå™¨</span></span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;123@qq.com&quot;</span>);</span><br><span class="line">    response.addCookie(cookie);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;forward:/registerOk&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/registerOk&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">registerOk</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;user:&quot;</span> + request.getAttribute(<span class="string">&quot;user&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;job:&quot;</span> + request.getAttribute(<span class="string">&quot;job&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;sal:&quot;</span> + request.getAttribute(<span class="string">&quot;sal&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰å¯¹è±¡å‚æ•°-è‡ªåŠ¨å°è£…"><a href="#è‡ªå®šä¹‰å¯¹è±¡å‚æ•°-è‡ªåŠ¨å°è£…" class="headerlink" title="è‡ªå®šä¹‰å¯¹è±¡å‚æ•°-è‡ªåŠ¨å°è£…"></a>è‡ªå®šä¹‰å¯¹è±¡å‚æ•°-è‡ªåŠ¨å°è£…</h3><p>â€‹SpringBootåœ¨å“åº”è¯·æ±‚æ—¶ï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰å¯¹è±¡å‚æ•°</p><p>â€‹å®Œæˆè‡ªåŠ¨ç±»å‹è½¬æ¢ä¸æ ¼å¼åŒ–</p><p>â€‹æ”¯æŒçº§è”å°è£…</p><p>â€‹</p><h2 id="è‡ªå®šä¹‰è½¬æ¢å™¨"><a href="#è‡ªå®šä¹‰è½¬æ¢å™¨" class="headerlink" title="è‡ªå®šä¹‰è½¬æ¢å™¨"></a>è‡ªå®šä¹‰è½¬æ¢å™¨</h2><p>Convert</p><p>â€‹SpringBootåœ¨å“åº”å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œ<strong>å°†æäº¤çš„æ•°æ®å°è£…æˆå¯¹è±¡</strong>æ—¶ï¼Œä½¿ç”¨äº†<strong>å†…ç½®çš„è½¬åŒ–å™¨</strong></p><p>â€‹ä¹Ÿæ”¯æŒè‡ªå®šä¹‰è½¬æ¢å™¨</p><p>(ç”¨äºå°†æ¥æ”¶åˆ°çš„æ•°æ®å°è£…åˆ°javabeanä¸­æ—¶ï¼Œè‡ªå®šä¹‰çš„ç±»å‹è½¬æ¢â€”â€”å¦‚ï¼šæ¥æ”¶åˆ°äº†tom,123å¯ä»¥è½¬æ¢ä¸ºEmployeeå¯¹è±¡ï¼Œtom -&gt; Employee.name; 123 -&gt; Employee.salary)  </p><p>SpringBootåœ¨æ¥å—æ•°æ®æ—¶ ä¼šå¯¹<strong>æ¥æ”¶åˆ°çš„æ•°æ®ç±»å‹</strong>ä»¥åŠ<strong>å°†è¦è½¬æ¢çš„æ•°æ®ç±»å‹</strong>å¯»æ‰¾å¯¹åº”çš„è½¬æ¢å™¨ï¼Œæ‰€ä»¥å¦‚æœæ²¡æœ‰è‡ªå®šä¹‰è½¬æ¢å™¨ï¼Œæˆ‘ä»¬ä¸èƒ½å°†ç›®æ ‡æ•°æ®ç±»å‹è®¾ä¸ºè‡ªå®šä¹‰ç±»å‹ï¼Œé™¤éä½ å†™äº†å¯¹åº”çš„è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</p><p>â€‹<strong>å†™åœ¨ConfigåŒ…ä¸­</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springboot.config;</span><br><span class="line"><span class="keyword">import</span> com.study.springboot.bean.Car;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.converter.Converter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.format.FormatterRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.ObjectUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/5/16</span></span><br><span class="line"><span class="comment"> * 11:05</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰é…ç½®ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨ç¤ºWebConfigæ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå¯ç”¨äº†Liteæ¨¡å¼</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”¨äºæ³¨å…¥bean WebMvcConfigurer</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> WebMvcConfigurer <span class="title function_">webMvcConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFormatters</span><span class="params">(FormatterRegistry registry)</span> &#123;</span><br><span class="line">                <span class="comment">//1. åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„è½¬æ¢å™¨</span></span><br><span class="line">                <span class="comment">//2. String â€”â€”&gt; Car</span></span><br><span class="line">                <span class="comment">//3. å¢åŠ çš„è‡ªå®šä¹‰è½¬æ¢å™¨ä¼šæ³¨å†Œåˆ°Converterså®¹å™¨ä¸­</span></span><br><span class="line">                <span class="comment">//4. converter åº•å±‚ç»“æ„æ˜¯ ConcurrentHashMap å†…ç½®é»˜è®¤æœ‰124ä¸ªè½¬æ¢å™¨</span></span><br><span class="line">                registry.addConverter(<span class="keyword">new</span> <span class="title class_">Converter</span>&lt;String, Car&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> Car <span class="title function_">convert</span><span class="params">(String source)</span> &#123;</span><br><span class="line">                        <span class="comment">//åœ¨æ­¤åŠ å…¥è‡ªå®šä¹‰çš„è½¬æ¢ä¸šåŠ¡ä»£ç </span></span><br><span class="line">                        <span class="keyword">if</span>(!ObjectUtils.isEmpty(source))&#123;</span><br><span class="line">                            <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">                            String[] split = source.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                            car.setName(split[<span class="number">0</span>]);</span><br><span class="line">                            car.setPrice(Double.parseDouble(split[<span class="number">1</span>]));</span><br><span class="line">                            <span class="keyword">return</span> car;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Springbootä½¿ç”¨HashMapå­˜å‚¨æ‰€æœ‰è½¬æ¢å™¨ï¼Œå…¶ä¸­ keyç”±<strong>convertçš„åŸæ•°æ®ç±»å‹ä¸ç›®çš„æ•°æ®ç±»å‹ç»„æˆ</strong>ï¼Œé—®é¢˜æ¥äº†ï¼Œå¦‚æœå¯¹äºä¸€ç»„æ•°æ®ç±»å‹ï¼Œæ³¨å†Œäº†å¤šä¸ªè½¬æ¢å™¨ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿâ€”â€”â€”â€”â€”â€”åæ¥å†™çš„ä¼šæŠŠå‰é¢å†™çš„<u><strong>è¦†ç›–</strong></u>ï¼</p><p>@Controller</p><p>å¯¹äºreturnçš„Stringï¼Œåœ¨é™æ€èµ„æºä¸­å¯»æ‰¾å“åº”çš„é¡µé¢</p><p>@ResponseBody</p><p>å¯ä»¥ä»¥jsonæ ¼å¼è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰å¯¹è±¡</p><p>ä¹Ÿå¯ä»¥ç›´æ¥åœ¨é¡µé¢ä¸Šè¿”å›Stringï¼Œè€Œä¸ä¼šè¿›è¡Œè§†å›¾è§£æ(å¯ä»¥ä¿®é¥°ç±»ï¼Œä¹Ÿå¯ä»¥ä¿®é¥°æ–¹æ³•)</p><p>@RestController &#x3D; @Controller + @ResponseBody</p><h2 id="å¤„ç†JSONæ ¼å¼æ•°æ®"><a href="#å¤„ç†JSONæ ¼å¼æ•°æ®" class="headerlink" title="å¤„ç†JSONæ ¼å¼æ•°æ®"></a>å¤„ç†JSONæ ¼å¼æ•°æ®</h2><h2 id="å†…å®¹åå•†"><a href="#å†…å®¹åå•†" class="headerlink" title="å†…å®¹åå•†"></a>å†…å®¹åå•†</h2><p>â€‹å®¢æˆ·ç«¯å‘é€å™¨è¯·æ±‚ï¼Œè¯·æ±‚ä¸­ä¼šæºå¸¦ä¸€ä¸ªACCEPTå­—æ®µï¼Œå‘Šè¯‰æœåŠ¡ç«¯åº”è¯¥è¿”å›ä»€ä¹ˆç±»å‹çš„æ•°æ®</p><p>â€‹åœ¨AbstractJackson2HttpMessageConverter.java ä¸­ï¼Œ contentTypeå­—æ®µä¼šè·å–è¯·æ±‚ä¸­çš„ä¿¡æ¯ï¼Œä»è€ŒçŸ¥é“åº”å½“è¿”å›ä»€ä¹ˆç±»å‹çš„æ•°æ®</p><p>ğŸŒŸæˆ‘ä»¬è¿˜å¯ä»¥å¯¹è¯·æ±‚Headerä¸­çš„ACCEPTå­—æ®µæ·»åŠ å¤šç§å¯ä»¥æ¥å—çš„æ•°æ®ç±»å‹ï¼Œå¹¶èµ‹äºˆæƒé‡ï¼Œè¿™æ ·å°±æ›´åŠ ä½“ç°äº†å†…å®¹åå•†çš„æ€æƒ³ï¼</p><p>â¬†ï¸é—®é¢˜ï¼špostmanä¸­å¯ä»¥éšæ„æ”¹å˜acceptä¸­çš„ä¿¡æ¯ï¼Œé‚£æµè§ˆå™¨ä¸­ä¸èƒ½ä¿®æ”¹ï¼Œåˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>â€”â€”å¼€å¯ <strong>åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½</strong>â¬‡ï¸</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">contentnegotiation:</span></span><br><span class="line">      <span class="attr">favor-parameter:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="Thymeleaf"><a href="#Thymeleaf" class="headerlink" title="Thymeleaf"></a>Thymeleaf</h2><p>â€‹ä¸€ç§æœåŠ¡å™¨æ¸²æŸ“æŠ€æœ¯</p><p>thymeleafé¡µé¢æ— éœ€æœåŠ¡å™¨æ¸²æŸ“ä¹Ÿå¯ä»¥è¢«æµè§ˆå™¨è¿è¡Œï¼Œé¡µé¢ç®€æ´</p><p>ç¼ºç‚¹ï¼šå¹¶ä¸æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å¼•æ“ï¼Œé€‚ç”¨äºå•ä½“åº”ç”¨</p>]]></content>
      
      
      <categories>
          
          <category> Springå¼€å‘æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloud</title>
      <link href="/2023/06/02/SpringCloud/"/>
      <url>/2023/06/02/SpringCloud/</url>
      
        <content type="html"><![CDATA[<p> æœ¬åšå®¢å‚ç…§äº†éŸ©é¡ºå¹³è€å¸ˆçš„ Sping Cloud è¯¾ç¨‹è®²ä¹‰ï¼</p><h1 id="1-Spring-Cloud-åŸºæœ¬ä»‹ç»"><a href="#1-Spring-Cloud-åŸºæœ¬ä»‹ç»" class="headerlink" title="1 Spring Cloud åŸºæœ¬ä»‹ç»"></a><strong>1 Spring Cloud</strong> åŸºæœ¬ä»‹ç»</h1><h2 id="1-1-å®˜æ–¹æ–‡æ¡£"><a href="#1-1-å®˜æ–¹æ–‡æ¡£" class="headerlink" title="1.1 å®˜æ–¹æ–‡æ¡£"></a>1.1 å®˜æ–¹æ–‡æ¡£</h2><h3 id="1-1-1"><a href="#1-1-1" class="headerlink" title="1.1.1"></a>1.1.1</h3><h3 id="åœ°å€-https-spring-io-projects-spring-cloud"><a href="#åœ°å€-https-spring-io-projects-spring-cloud" class="headerlink" title="åœ°å€**: https://spring.io/projects/spring-cloud**"></a>åœ°å€**: <a href="https://spring.io/projects/spring-cloud">https://spring.io/projects/spring-cloud</a>**</h3><h2 id="1-2-å¾®æœåŠ¡å¼•å‡º"><a href="#1-2-å¾®æœåŠ¡å¼•å‡º" class="headerlink" title="1.2 å¾®æœåŠ¡å¼•å‡º"></a>1.2 å¾®æœåŠ¡å¼•å‡º</h2><h3 id="1-æ²¡æœ‰å¾®æœåŠ¡æŠ€æœ¯-æ˜¯ä¸æ˜¯ç¨‹åºå‘˜å°±ä¸èƒ½å¼€å‘å¤§å‹é¡¹ç›®"><a href="#1-æ²¡æœ‰å¾®æœåŠ¡æŠ€æœ¯-æ˜¯ä¸æ˜¯ç¨‹åºå‘˜å°±ä¸èƒ½å¼€å‘å¤§å‹é¡¹ç›®" class="headerlink" title="1.æ²¡æœ‰å¾®æœåŠ¡æŠ€æœ¯**,æ˜¯ä¸æ˜¯ç¨‹åºå‘˜å°±ä¸èƒ½å¼€å‘å¤§å‹é¡¹ç›®?**"></a>1.æ²¡æœ‰å¾®æœåŠ¡æŠ€æœ¯**,<strong>æ˜¯ä¸æ˜¯ç¨‹åºå‘˜å°±ä¸èƒ½å¼€å‘å¤§å‹é¡¹ç›®</strong>?**</h3><p>â€‹<strong>æ˜¯å¯ä»¥çš„, å¯¹å¤§å‹é¡¹ç›®è¿›è¡Œæ¨¡å—åˆ’åˆ†,å¯¹å„ä¸ªæ¨¡å—è¿›è¡Œå®ç°, æ¨¡å—ä¹‹é—´æ›´å¤šçš„æ˜¯ä»¥APIè°ƒç”¨å®Œæˆ,è€¦åˆåº¦è¾ƒé«˜, ä¸åˆ©äºæ‰©å±•å’Œç»´æŠ¤ã€‚</strong></p><h3 id="2-æ ‡å‡†çš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆ-springcloud-å’Œcloud-alibaba-å‡ºç°åŸå› å’Œä»·å€¼æ˜¯ä»€ä¹ˆ"><a href="#2-æ ‡å‡†çš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆ-springcloud-å’Œcloud-alibaba-å‡ºç°åŸå› å’Œä»·å€¼æ˜¯ä»€ä¹ˆ" class="headerlink" title="2.æ ‡å‡†çš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆ(springcloud å’Œcloud alibaba)å‡ºç°åŸå› å’Œä»·å€¼æ˜¯ä»€ä¹ˆ?"></a>2.æ ‡å‡†çš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆ(springcloud å’Œcloud alibaba)å‡ºç°åŸå› å’Œä»·å€¼æ˜¯ä»€ä¹ˆ?</h3><p>â€‹<strong>(1)</strong> **å¾®æœåŠ¡å¯ä»¥æ ¹æ®ä¸šåŠ¡ä¸åŒï¼Œå°†ä¸€ä¸ªå¤§é¡¹ç›® , åˆ†è§£æˆä¸åŒçš„æœåŠ¡(å¾®æœåŠ¡ï¼Œæ¯”å¦‚æœ ç´¢æœåŠ¡&#x2F;ç½‘å…³æœåŠ¡&#x2F;é…ç½®æœåŠ¡&#x2F;å­˜å‚¨æœåŠ¡&#x2F;å‘ç°æœåŠ¡ç­‰ç­‰) **</p><p>â€‹<strong>(2)å„ä¸ªæœåŠ¡é€šè¿‡åˆ†å¸ƒå¼æ–¹å¼è¿›è¡Œå·¥ ä½œï¼Œä»è€Œå¯ä»¥é«˜æ•ˆï¼Œå¿«é€Ÿï¼Œç¨³å®šçš„å®Œæˆå¤æ‚çš„åŠŸèƒ½</strong></p><p>â€‹<strong>(3) å¦‚æœå°ä¼™ä¼´è¿˜ä¸ç†è§£, ä½ ä¹Ÿå¯ä»¥ç†è§£æˆå°± å°†åŸæ¥å¤§é¡¹ç›®çš„æŸäº›æ¨¡å—-&gt;æŠ½å‡ºå½¢æˆå¾®æœåŠ¡-&gt;é…åˆåˆ†å¸ƒå¼å·¥ä½œæ–¹å¼-&gt;ä»è€Œé«˜æ•ˆï¼Œå¿«é€Ÿï¼Œç¨³å®šçš„å®Œæˆå¤æ‚ä¸šåŠ¡åŠŸèƒ½ã€‚</strong></p><h3 id="3-ä¸€å›¾èƒœåƒè¨€"><a href="#3-ä¸€å›¾èƒœåƒè¨€" class="headerlink" title="3. ä¸€å›¾èƒœåƒè¨€"></a>3. ä¸€å›¾èƒœåƒè¨€</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519160836110.png" alt="image-20230519160836110"></p><h2 id="1-3-ç³»ç»Ÿæ¶æ„çš„æ¼”å˜è¿‡ç¨‹"><a href="#1-3-ç³»ç»Ÿæ¶æ„çš„æ¼”å˜è¿‡ç¨‹" class="headerlink" title="1.3 ç³»ç»Ÿæ¶æ„çš„æ¼”å˜è¿‡ç¨‹"></a>1.3 ç³»ç»Ÿæ¶æ„çš„æ¼”å˜è¿‡ç¨‹</h2><h3 id="1-3-1å•ä½“æ¶æ„ï¼š"><a href="#1-3-1å•ä½“æ¶æ„ï¼š" class="headerlink" title="1.3.1å•ä½“æ¶æ„ï¼š"></a>1.3.1å•ä½“æ¶æ„ï¼š</h3><p>â€‹<img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519161225897.png" alt="image-20230519161225897"></p><p>ä»…é€‚åˆå°‘é‡ç”¨æˆ·çš„æƒ…å†µ</p><p>å¦‚æœç”¨æˆ·é‡å¤§ï¼Œserveræ— æ³•å“åº”å¤§é‡è¯·æ±‚ï¼›å¤§é‡æ“ä½œæ•°æ®åº“çš„è¯­å¥å†²å®DB</p><h3 id="1-3-2åŠ¨é™åˆ†ç¦»æ¶æ„ï¼š"><a href="#1-3-2åŠ¨é™åˆ†ç¦»æ¶æ„ï¼š" class="headerlink" title="1.3.2åŠ¨é™åˆ†ç¦»æ¶æ„ï¼š"></a>1.3.2åŠ¨é™åˆ†ç¦»æ¶æ„ï¼š</h3><p>â€‹<u>é™æ€ç¼“å­˜+æ–‡ä»¶å­˜å‚¨</u></p><p>åŠ¨é™åˆ†ç¦»ï¼š</p><p>1.å¯¹é™æ€èµ„æºã€åŠ¨æ€èµ„æºçš„è¯·æ±‚è¿›è¡Œåˆ†ç¦»è¿‡æ»¤ï¼Œå¯¹äºé™æ€èµ„æºçš„è¯·æ±‚ï¼Œç›´æ¥æ‰¾èµ„æºæœåŠ¡å™¨å“åº”ï¼›å¯¹äºåŠ¨æ€æœåŠ¡å™¨çš„è¯·æ±‚æ‰æ‰¾åˆ°åº”ç”¨æœåŠ¡å™¨è¿›è¡Œå“åº”ã€‚</p><p>2.å¯¹è¯·æ±‚çš„æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œä½¿ç”¨redisç­‰ï¼Œé™ä½æ•°æ®åº“ç­‰è´Ÿè·ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519162426761.png" alt="image-20230519162426761"></p><h3 id="1-3-3åˆ†å¸ƒå¼æ¶æ„ï¼š"><a href="#1-3-3åˆ†å¸ƒå¼æ¶æ„ï¼š" class="headerlink" title="1.3.3åˆ†å¸ƒå¼æ¶æ„ï¼š"></a>1.3.3åˆ†å¸ƒå¼æ¶æ„ï¼š</h3><p>â€‹<u>ä¸šåŠ¡æ‹†åˆ†+è´Ÿè½½å‡è¡¡</u></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519163644982.png" alt="image-20230519163644982"></p><h3 id="1-3-4å¾®æœåŠ¡æ¶æ„ï¼š"><a href="#1-3-4å¾®æœåŠ¡æ¶æ„ï¼š" class="headerlink" title="1.3.4å¾®æœåŠ¡æ¶æ„ï¼š"></a>1.3.4å¾®æœåŠ¡æ¶æ„ï¼š</h3><p>â€‹<u>ä½¿ç”¨Spring Cloud</u></p><p><img src="https://mp.processon.com/chart_image/id/5c77d08ae4b0628e8208c507.png" alt="ç‚¹å‡»æŸ¥çœ‹å›¾ç‰‡æ¥æº"></p><ul><li><p><strong>â€œå¾®æœåŠ¡â€ ä¸€è¯æºäº Martin Fowler çš„åä¸ºMicroservices çš„åšæ–‡ï¼Œç®€å•åœ°è¯´ï¼Œ å¾®æœ åŠ¡æ˜¯ç³»ç»Ÿæ¶æ„ä¸Šçš„ä¸€ç§è®¾è®¡é£æ ¼ï¼Œå®ƒçš„ä¸»æ—¨æ˜¯<u>å°†ä¸€ä¸ªåŸæœ¬ç‹¬ç«‹çš„ç³»ç»Ÿæ‹†åˆ†æˆå¤šä¸ªå°å‹æœåŠ¡ï¼Œè¿™äº›å°å‹æœåŠ¡éƒ½åœ¨å„è‡ªç‹¬ç«‹çš„è¿›ç¨‹ä¸­è¿è¡Œ</u>ï¼ŒæœåŠ¡ä¹‹é—´é€šè¿‡åŸºäºHTTP çš„ RESTful API è¿›è¡Œé€šä¿¡åä½œã€‚</strong></p></li><li><p><strong>è¢«æ‹†åˆ†æˆçš„æ¯ä¸€ä¸ªå°å‹æœåŠ¡éƒ½å›½ç»•ç€ç³»ç»Ÿä¸­çš„æŸä¸€é¡¹æˆ–ä¸€äº›è€¦åˆåº¦è¾ƒé«˜çš„ä¸šåŠ¡åŠŸèƒ½è¿›è¡Œæ„å»ºï¼Œ å¹¶ä¸”æ¯ä¸ªæœåŠ¡éƒ½ç»´æŠ¤ç€è‡ªèº«çš„æ•°æ®å­˜å‚¨ã€ä¸šåŠ¡å¼€å‘ã€è‡ªåŠ¨åŒ–æµ‹è¯•æ¡ˆä¾‹ä»¥åŠç‹¬ç«‹éƒ¨ç½²æœºåˆ¶ã€‚ ç”±äºæœ‰è½»é‡çº§çš„é€šä¿¡åä½œåŸºç¡€ï¼Œæ‰€ä»¥è¿™äº›å¾®æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€æ¥ç¼–å†™ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ javaã€‚</strong></p></li></ul><h2 id="1-4-Spring-Coludå…¨é¢è¯´æ˜"><a href="#1-4-Spring-Coludå…¨é¢è¯´æ˜" class="headerlink" title="1.4 Spring Coludå…¨é¢è¯´æ˜"></a>1.4 Spring Coludå…¨é¢è¯´æ˜</h2><h4 id="1-Springcloud-æ¥æºäº-Springï¼Œæ˜¯æ›´é«˜å±‚æ¬¡çš„ã€-æ¶æ„è§†è§’çš„ç»¼åˆæ€§å¤§å‹é¡¹ç›®ï¼Œ-ç›®æ ‡æ—¨åœ¨æ„å»ºä¸€å¥—æ ‡å‡†åŒ–çš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼Œè®©æ¶æ„å¸ˆåœ¨ä½¿ç”¨å¾®æœåŠ¡ç†å¿µæ„å»ºç³»ç»Ÿçš„æ—¶ï¼Œ-é¢å¯¹å„ç¯èŠ‚çš„é—®é¢˜éƒ½å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„ç»„ä»¶æ¥å¤„ç†"><a href="#1-Springcloud-æ¥æºäº-Springï¼Œæ˜¯æ›´é«˜å±‚æ¬¡çš„ã€-æ¶æ„è§†è§’çš„ç»¼åˆæ€§å¤§å‹é¡¹ç›®ï¼Œ-ç›®æ ‡æ—¨åœ¨æ„å»ºä¸€å¥—æ ‡å‡†åŒ–çš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼Œè®©æ¶æ„å¸ˆåœ¨ä½¿ç”¨å¾®æœåŠ¡ç†å¿µæ„å»ºç³»ç»Ÿçš„æ—¶ï¼Œ-é¢å¯¹å„ç¯èŠ‚çš„é—®é¢˜éƒ½å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„ç»„ä»¶æ¥å¤„ç†" class="headerlink" title="1.Springcloud æ¥æºäº Springï¼Œæ˜¯æ›´é«˜å±‚æ¬¡çš„ã€ æ¶æ„è§†è§’çš„ç»¼åˆæ€§å¤§å‹é¡¹ç›®ï¼Œ ç›®æ ‡æ—¨åœ¨æ„å»ºä¸€å¥—æ ‡å‡†åŒ–çš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼Œè®©æ¶æ„å¸ˆåœ¨ä½¿ç”¨å¾®æœåŠ¡ç†å¿µæ„å»ºç³»ç»Ÿçš„æ—¶ï¼Œ é¢å¯¹å„ç¯èŠ‚çš„é—®é¢˜éƒ½å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„ç»„ä»¶æ¥å¤„ç†"></a>1.Springcloud æ¥æºäº Springï¼Œæ˜¯æ›´é«˜å±‚æ¬¡çš„ã€ æ¶æ„è§†è§’çš„ç»¼åˆæ€§å¤§å‹é¡¹ç›®ï¼Œ ç›®æ ‡æ—¨åœ¨æ„å»ºä¸€å¥—æ ‡å‡†åŒ–çš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼Œè®©æ¶æ„å¸ˆåœ¨ä½¿ç”¨å¾®æœåŠ¡ç†å¿µæ„å»ºç³»ç»Ÿçš„æ—¶ï¼Œ é¢å¯¹å„ç¯èŠ‚çš„é—®é¢˜éƒ½å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„ç»„ä»¶æ¥å¤„ç†</h4><h4 id="2-Spring-Cloud-æ˜¯Spring-ç¤¾åŒºä¸ºå¾®æœåŠ¡æ¶æ„æä¾›çš„ä¸€ä¸ª-â€œå…¨å®¶æ¡¶â€-å¥—é¤ã€‚å¥—é¤ä¸­å„ä¸ªç»„ä»¶ä¹‹é—´çš„é…åˆï¼Œå¯ä»¥å‡å°‘åœ¨ç»„ä»¶çš„é€‰å‹å’Œæ•´åˆä¸ŠèŠ±è´¹çš„ç²¾åŠ›ï¼Œå¯ä»¥å¿«é€Ÿæ„å»ºèµ·åŸºç¡€çš„å¾®æœåŠ¡æ¶æ„ç³»ç»Ÿï¼Œæ˜¯å¾®æœåŠ¡æ¶æ„çš„æœ€ä½³è½åœ°æ–¹æ¡ˆ"><a href="#2-Spring-Cloud-æ˜¯Spring-ç¤¾åŒºä¸ºå¾®æœåŠ¡æ¶æ„æä¾›çš„ä¸€ä¸ª-â€œå…¨å®¶æ¡¶â€-å¥—é¤ã€‚å¥—é¤ä¸­å„ä¸ªç»„ä»¶ä¹‹é—´çš„é…åˆï¼Œå¯ä»¥å‡å°‘åœ¨ç»„ä»¶çš„é€‰å‹å’Œæ•´åˆä¸ŠèŠ±è´¹çš„ç²¾åŠ›ï¼Œå¯ä»¥å¿«é€Ÿæ„å»ºèµ·åŸºç¡€çš„å¾®æœåŠ¡æ¶æ„ç³»ç»Ÿï¼Œæ˜¯å¾®æœåŠ¡æ¶æ„çš„æœ€ä½³è½åœ°æ–¹æ¡ˆ" class="headerlink" title="2.Spring Cloud æ˜¯Spring ç¤¾åŒºä¸ºå¾®æœåŠ¡æ¶æ„æä¾›çš„ä¸€ä¸ª â€œå…¨å®¶æ¡¶â€ å¥—é¤ã€‚å¥—é¤ä¸­å„ä¸ªç»„ä»¶ä¹‹é—´çš„é…åˆï¼Œå¯ä»¥å‡å°‘åœ¨ç»„ä»¶çš„é€‰å‹å’Œæ•´åˆä¸ŠèŠ±è´¹çš„ç²¾åŠ›ï¼Œå¯ä»¥å¿«é€Ÿæ„å»ºèµ·åŸºç¡€çš„å¾®æœåŠ¡æ¶æ„ç³»ç»Ÿï¼Œæ˜¯å¾®æœåŠ¡æ¶æ„çš„æœ€ä½³è½åœ°æ–¹æ¡ˆ"></a>2.Spring Cloud æ˜¯Spring ç¤¾åŒºä¸ºå¾®æœåŠ¡æ¶æ„æä¾›çš„ä¸€ä¸ª â€œå…¨å®¶æ¡¶â€ å¥—é¤ã€‚å¥—é¤ä¸­å„ä¸ªç»„ä»¶ä¹‹é—´çš„é…åˆï¼Œå¯ä»¥å‡å°‘åœ¨ç»„ä»¶çš„é€‰å‹å’Œæ•´åˆä¸ŠèŠ±è´¹çš„ç²¾åŠ›ï¼Œå¯ä»¥å¿«é€Ÿæ„å»ºèµ·åŸºç¡€çš„å¾®æœåŠ¡æ¶æ„ç³»ç»Ÿï¼Œæ˜¯å¾®æœåŠ¡æ¶æ„çš„æœ€ä½³è½åœ°æ–¹æ¡ˆ</h4><h4 id="3-Spirng-Cloud-å¤©ç„¶æ”¯æŒ-spring-Boot-æœ‰ç‰ˆæœ¬å¯¹åº”è¦æ±‚-ï¼Œä½¿ç”¨é—¨æ§›è¾ƒä½"><a href="#3-Spirng-Cloud-å¤©ç„¶æ”¯æŒ-spring-Boot-æœ‰ç‰ˆæœ¬å¯¹åº”è¦æ±‚-ï¼Œä½¿ç”¨é—¨æ§›è¾ƒä½" class="headerlink" title="3.Spirng Cloud å¤©ç„¶æ”¯æŒ spring Boot(æœ‰ç‰ˆæœ¬å¯¹åº”è¦æ±‚)ï¼Œä½¿ç”¨é—¨æ§›è¾ƒä½"></a>3.Spirng Cloud å¤©ç„¶æ”¯æŒ spring Boot(æœ‰ç‰ˆæœ¬å¯¹åº”è¦æ±‚)ï¼Œä½¿ç”¨é—¨æ§›è¾ƒä½</h4><h4 id="4-è§£å†³ä¸åˆ†å¸ƒå¼ç³»ç»Ÿç›¸å…³çš„å¤æ‚æ€§-ä¸€ç½‘ç»œé—®é¢˜ï¼Œå»¶è¿Ÿå¼€é”€ï¼Œå¸¦å®½å‘é¢˜ï¼Œå®‰å…¨é—®é¢˜"><a href="#4-è§£å†³ä¸åˆ†å¸ƒå¼ç³»ç»Ÿç›¸å…³çš„å¤æ‚æ€§-ä¸€ç½‘ç»œé—®é¢˜ï¼Œå»¶è¿Ÿå¼€é”€ï¼Œå¸¦å®½å‘é¢˜ï¼Œå®‰å…¨é—®é¢˜" class="headerlink" title="4.è§£å†³ä¸åˆ†å¸ƒå¼ç³»ç»Ÿç›¸å…³çš„å¤æ‚æ€§ ä¸€ç½‘ç»œé—®é¢˜ï¼Œå»¶è¿Ÿå¼€é”€ï¼Œå¸¦å®½å‘é¢˜ï¼Œå®‰å…¨é—®é¢˜"></a>4.è§£å†³ä¸åˆ†å¸ƒå¼ç³»ç»Ÿç›¸å…³çš„å¤æ‚æ€§ ä¸€ç½‘ç»œé—®é¢˜ï¼Œå»¶è¿Ÿå¼€é”€ï¼Œå¸¦å®½å‘é¢˜ï¼Œå®‰å…¨é—®é¢˜</h4><h4 id="5-å¤„ç†æœåŠ¡å‘ç°çš„èƒ½åŠ›-ä¸€-æœåŠ¡å‘ç°å…è®¸é›†ç¾¤ä¸­çš„è¿›ç¨‹å’ŒæœåŠ¡æ‰¾åˆ°å½¼æ­¤å¹¶è¿›è¡Œé€šä¿¡"><a href="#5-å¤„ç†æœåŠ¡å‘ç°çš„èƒ½åŠ›-ä¸€-æœåŠ¡å‘ç°å…è®¸é›†ç¾¤ä¸­çš„è¿›ç¨‹å’ŒæœåŠ¡æ‰¾åˆ°å½¼æ­¤å¹¶è¿›è¡Œé€šä¿¡" class="headerlink" title="5.å¤„ç†æœåŠ¡å‘ç°çš„èƒ½åŠ› ä¸€ æœåŠ¡å‘ç°å…è®¸é›†ç¾¤ä¸­çš„è¿›ç¨‹å’ŒæœåŠ¡æ‰¾åˆ°å½¼æ­¤å¹¶è¿›è¡Œé€šä¿¡"></a>5.å¤„ç†æœåŠ¡å‘ç°çš„èƒ½åŠ› ä¸€ æœåŠ¡å‘ç°å…è®¸é›†ç¾¤ä¸­çš„è¿›ç¨‹å’ŒæœåŠ¡æ‰¾åˆ°å½¼æ­¤å¹¶è¿›è¡Œé€šä¿¡</h4><h4 id="6-è§£æ±ºå†—ä½™é—®é¢˜-ä¸€-å…ƒä½™é—®é¢˜ç»å¸¸å‘ç”Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­"><a href="#6-è§£æ±ºå†—ä½™é—®é¢˜-ä¸€-å…ƒä½™é—®é¢˜ç»å¸¸å‘ç”Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­" class="headerlink" title="6.è§£æ±ºå†—ä½™é—®é¢˜ ä¸€ å…ƒä½™é—®é¢˜ç»å¸¸å‘ç”Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­"></a>6.è§£æ±ºå†—ä½™é—®é¢˜ ä¸€ å…ƒä½™é—®é¢˜ç»å¸¸å‘ç”Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­</h4><h4 id="7-è§£å†³è´Ÿè½½å‡è¡¡-ä¸€-æ”¹è¿›è·¨å¤šä¸ªè®¡ç®—èµ„æºï¼ˆä¾‹å¦‚è®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾æ¥ï¼Œä¸­å¤®å¤„ç†å•å…ƒï¼‰çš„å·¥ä½œè´Ÿè½½åˆ†å¸ƒ"><a href="#7-è§£å†³è´Ÿè½½å‡è¡¡-ä¸€-æ”¹è¿›è·¨å¤šä¸ªè®¡ç®—èµ„æºï¼ˆä¾‹å¦‚è®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾æ¥ï¼Œä¸­å¤®å¤„ç†å•å…ƒï¼‰çš„å·¥ä½œè´Ÿè½½åˆ†å¸ƒ" class="headerlink" title="7.è§£å†³è´Ÿè½½å‡è¡¡ ä¸€ æ”¹è¿›è·¨å¤šä¸ªè®¡ç®—èµ„æºï¼ˆä¾‹å¦‚è®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾æ¥ï¼Œä¸­å¤®å¤„ç†å•å…ƒï¼‰çš„å·¥ä½œè´Ÿè½½åˆ†å¸ƒ"></a>7.è§£å†³è´Ÿè½½å‡è¡¡ ä¸€ æ”¹è¿›è·¨å¤šä¸ªè®¡ç®—èµ„æºï¼ˆä¾‹å¦‚è®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾æ¥ï¼Œä¸­å¤®å¤„ç†å•å…ƒï¼‰çš„å·¥ä½œè´Ÿè½½åˆ†å¸ƒ</h4><h2 id="1-5-Spring-Cloud-æ ¸å¿ƒç»„ä»¶å›¾"><a href="#1-5-Spring-Cloud-æ ¸å¿ƒç»„ä»¶å›¾" class="headerlink" title="1.5 Spring Cloud æ ¸å¿ƒç»„ä»¶å›¾"></a>1.5 Spring Cloud æ ¸å¿ƒç»„ä»¶å›¾</h2><h3 id="1-5-1-æ–‡æ¡£-https-spring-io-projects-spring-cloud"><a href="#1-5-1-æ–‡æ¡£-https-spring-io-projects-spring-cloud" class="headerlink" title="1.5.1 æ–‡æ¡£ : https://spring.io/projects/spring-cloud"></a><strong>1.5.1</strong> æ–‡æ¡£ <strong>: <a href="https://spring.io/projects/spring-cloud">https://spring.io/projects/spring-cloud</a></strong></h3><h3 id="1-5-2ä¸€å›¾èƒœåƒè¨€"><a href="#1-5-2ä¸€å›¾èƒœåƒè¨€" class="headerlink" title="1.5.2ä¸€å›¾èƒœåƒè¨€"></a>1.5.2ä¸€å›¾èƒœåƒè¨€</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519184405128.png" alt="image-20230519184405128"></p><h2 id="1-6-Spring-Cloud-åˆ†å¸ƒå¼ç¤ºæ„å›¾"><a href="#1-6-Spring-Cloud-åˆ†å¸ƒå¼ç¤ºæ„å›¾" class="headerlink" title="1.6 Spring Cloud åˆ†å¸ƒå¼ç¤ºæ„å›¾"></a>1.6 Spring Cloud åˆ†å¸ƒå¼ç¤ºæ„å›¾</h2><h3 id="1-6-1-æ–‡æ¡£-https-spring-io-microservices"><a href="#1-6-1-æ–‡æ¡£-https-spring-io-microservices" class="headerlink" title="1.6.1 æ–‡æ¡£ : https://spring.io/microservices"></a><strong>1.6.1</strong> æ–‡æ¡£ <strong>: <a href="https://spring.io/microservices">https://spring.io/microservices</a></strong></h3><h3 id="1-6-2-ä¸€å›¾èƒœåƒè¨€"><a href="#1-6-2-ä¸€å›¾èƒœåƒè¨€" class="headerlink" title="1.6.2 ä¸€å›¾èƒœåƒè¨€"></a><strong>1.6.2</strong> ä¸€å›¾èƒœåƒè¨€</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519185237018.png" alt="image-20230519185237018"></p><ol><li><p>Spring cloud æ˜¯å¾®æœåŠ¡çš„è½åœ°</p></li><li><p>Spring cloud ä½“ç°äº†å¾®æœåŠ¡çš„å¼¹æ€§è®¾è®¡</p></li><li><p>å¾®æœåŠ¡çš„å·¥ä½œæ–¹å¼ä¸€èˆ¬æ˜¯åŸºäºåˆ†å¸ƒå¼çš„ã€‚</p></li><li><p>Spring Cloud ä»ç„¶æ˜¯ Spring å®¶æ—ä¸€å‘˜ï¼Œå¯ä»¥è§£å†³å¾®æœåŠ¡çš„åˆ†å¸ƒå¼å·¥ä½œæ–¹å¼å¸¦æ¥çš„å„ç§é—®é¢˜</p></li><li><p>Spring Cloud æä¾›å¾ˆå¤šç»„ä»¶ï¼Œæ¯”å¦‚ æœåŠ¡å‘ç°ï¼Œè´Ÿè½½å‡è¡—ï¼Œé“¾è·¯ä¸­æ–­ï¼Œåˆ†å¸ƒå¼è¿½è¸ªå’Œç›‘æ§ï¼Œç”šè‡³æä¾› API gateway åŠŸèƒ½.</p></li></ol><h3 id="1-6-3-SpringCloudå’ŒSpringBootç‰ˆæœ¬å¯¹åº”å…³ç³»"><a href="#1-6-3-SpringCloudå’ŒSpringBootç‰ˆæœ¬å¯¹åº”å…³ç³»" class="headerlink" title="1.6.3 SpringCloudå’ŒSpringBootç‰ˆæœ¬å¯¹åº”å…³ç³»"></a><strong>1.6.3 SpringCloud</strong>å’Œ<strong>SpringBoot</strong>ç‰ˆæœ¬å¯¹åº”å…³ç³»</h3><p>![image-20230519190708371](&#x2F;Users&#x2F;donn&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230519190708371.png)</p><h2 id="1-7-Spring-Cloud-ç»„ä»¶é€‰å‹"><a href="#1-7-Spring-Cloud-ç»„ä»¶é€‰å‹" class="headerlink" title="1.7 Spring Cloud ç»„ä»¶é€‰å‹"></a>1.7 Spring Cloud ç»„ä»¶é€‰å‹</h2><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519190901580.png" alt="image-20230519190901580"></p><h1 id="2-Spring-Cloud-Alibaba-åŸºæœ¬ä»‹ç»"><a href="#2-Spring-Cloud-Alibaba-åŸºæœ¬ä»‹ç»" class="headerlink" title="2 Spring Cloud Alibaba åŸºæœ¬ä»‹ç»"></a><strong>2 Spring Cloud Alibaba</strong> åŸºæœ¬ä»‹ç»</h1><h2 id="2-1-å®˜æ–¹æ–‡æ¡£"><a href="#2-1-å®˜æ–¹æ–‡æ¡£" class="headerlink" title="2.1 å®˜æ–¹æ–‡æ¡£"></a>2.1 å®˜æ–¹æ–‡æ¡£</h2><h3 id="2-1-1-è‹±æ–‡åœ°å€-https-github-com-alibaba-spring-cloud-alibaba"><a href="#2-1-1-è‹±æ–‡åœ°å€-https-github-com-alibaba-spring-cloud-alibaba" class="headerlink" title="2.1.1 è‹±æ–‡åœ°å€**: https://github.com/alibaba/spring-cloud-alibaba**"></a><strong>2.1.1</strong> è‹±æ–‡åœ°å€**: <a href="https://github.com/alibaba/spring-cloud-alibaba">https://github.com/alibaba/spring-cloud-alibaba</a>**</h3><h3 id="2-1-2è‹±-æ–‡-åœ°-å€-ä¸­-æ–‡-æ–‡-æ¡£-https-github-com-alibaba-spring-cloud-alibaba-blob-master-README-zh-md"><a href="#2-1-2è‹±-æ–‡-åœ°-å€-ä¸­-æ–‡-æ–‡-æ¡£-https-github-com-alibaba-spring-cloud-alibaba-blob-master-README-zh-md" class="headerlink" title="2.1.2è‹± æ–‡ åœ° å€ : ä¸­ æ–‡ æ–‡ æ¡£ : https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md"></a><strong>2.1.2</strong>è‹± æ–‡ åœ° å€ <strong>:</strong> ä¸­ æ–‡ æ–‡ æ¡£ <strong>: <a href="https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md">https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md</a></strong></h3><h2 id="2-2-SpringCloudAlibabaæ˜¯ä»€ä¹ˆ"><a href="#2-2-SpringCloudAlibabaæ˜¯ä»€ä¹ˆ" class="headerlink" title="2.2 SpringCloudAlibabaæ˜¯ä»€ä¹ˆ"></a>2.2 SpringCloudAlibabaæ˜¯ä»€ä¹ˆ</h2><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519192136898.png" alt="image-20230519192136898"></p><h2 id="2-3-ä¸»è¦åŠŸèƒ½ä¸€è§ˆ"><a href="#2-3-ä¸»è¦åŠŸèƒ½ä¸€è§ˆ" class="headerlink" title="2.3 ä¸»è¦åŠŸèƒ½ä¸€è§ˆ"></a>2.3 ä¸»è¦åŠŸèƒ½ä¸€è§ˆ</h2><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519192150299.png" alt="image-20230519192150299"></p><h2 id="2-4-Spring-Cloud-Alibaba-æ ¸å¿ƒç»„ä»¶"><a href="#2-4-Spring-Cloud-Alibaba-æ ¸å¿ƒç»„ä»¶" class="headerlink" title="2.4 Spring Cloud Alibaba æ ¸å¿ƒç»„ä»¶"></a>2.4 Spring Cloud Alibaba æ ¸å¿ƒç»„ä»¶</h2><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519192202912.png" alt="image-20230519192202912"></p><h2 id="2-5-åˆ†å¸ƒå¼å¾®æœåŠ¡æŠ€æœ¯é€‰å‹"><a href="#2-5-åˆ†å¸ƒå¼å¾®æœåŠ¡æŠ€æœ¯é€‰å‹" class="headerlink" title="2.5: åˆ†å¸ƒå¼å¾®æœåŠ¡æŠ€æœ¯é€‰å‹"></a>2.5: åˆ†å¸ƒå¼å¾®æœåŠ¡æŠ€æœ¯é€‰å‹</h2><h3 id="â€¢Spring-Cloud-åŸç”Ÿç»„ä»¶çš„å‡ å¤§ç—›ç‚¹"><a href="#â€¢Spring-Cloud-åŸç”Ÿç»„ä»¶çš„å‡ å¤§ç—›ç‚¹" class="headerlink" title="â€¢Spring Cloud åŸç”Ÿç»„ä»¶çš„å‡ å¤§ç—›ç‚¹"></a>â€¢Spring Cloud åŸç”Ÿç»„ä»¶çš„å‡ å¤§ç—›ç‚¹</h3><p>1.Spring Cloud éƒ¨åˆ†ç»„ä»¶åœæ­¢ç»´æŠ¤å’Œæ›´æ–°ï¼Œç»™å¼€å‘å¸¦æ¥ä¸ä¾¿</p><p>2.Spring cioud éƒ¨åˆ†ç¯å¢ƒæ­å»ºå¤æ‚ï¼Œæ²¡æœ‰å®Œå–„çš„å¯è§†åŒ–ç•Œé¢ï¼Œæˆ‘ä»¬éœ€è¦å¤§é‡çš„äºŒæ¬¡å¼€å‘å’Œå®šåˆ¶</p><p>3.Spring Cloud é…ç½®å¤æ‚ï¼Œéš¾ä»¥ä¸Šæ‰‹</p><h3 id="â€¢Spring-Cloud-Alibaba-çš„ä¼˜åŠ¿"><a href="#â€¢Spring-Cloud-Alibaba-çš„ä¼˜åŠ¿" class="headerlink" title="â€¢Spring Cloud Alibaba çš„ä¼˜åŠ¿"></a>â€¢Spring Cloud Alibaba çš„ä¼˜åŠ¿</h3><ol><li>é˜¿é‡Œä½¿ç”¨è¿‡çš„ç»„ä»¶ç»å†äº†è€ƒéªŒï¼ˆé«˜å¹¶å‘ï¼Œé«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨ï¼Œæ€§èƒ½å¼ºæ‚ï¼Œè®¾è®¡åˆç†ï¼Œç°åœ¨å¼€æº</li></ol><p>å‡ºæ¥ä¾›å¤§å®¶ä½¿ç”¨ã€‚</p><ol start="2"><li>æ­é…å®Œå–„çš„å¯è§†åŒ–ç•Œé¢ï¼Œç»™å¼€å‘è¿ç»´å¸¦æ¥æå¤§çš„ä¾¿åˆ©æ­å»ºç®€å•ï¼Œå­¦ä¹ æ›²çº¿ä½ã€‚</li></ol><ul><li><h3 id="åˆ†å¸ƒå¼å¾®æœåŠ¡æŠ€æœ¯é€‰å‹å»ºè®®"><a href="#åˆ†å¸ƒå¼å¾®æœåŠ¡æŠ€æœ¯é€‰å‹å»ºè®®" class="headerlink" title="åˆ†å¸ƒå¼å¾®æœåŠ¡æŠ€æœ¯é€‰å‹å»ºè®®"></a><strong>åˆ†å¸ƒå¼å¾®æœåŠ¡æŠ€æœ¯é€‰å‹å»ºè®®</strong></h3></li></ul><p>ä»¥Spring Cloud Alibabaä¸ºä¸»ï¼Œä»¥Spring Cloud åŸç”Ÿç»„ä»¶ä¸ºè¾…ã€‚</p><h1 id="3-å¾®æœåŠ¡åŸºç¡€ç¯å¢ƒæ­å»º"><a href="#3-å¾®æœåŠ¡åŸºç¡€ç¯å¢ƒæ­å»º" class="headerlink" title="3 å¾®æœåŠ¡åŸºç¡€ç¯å¢ƒæ­å»º"></a>3 å¾®æœåŠ¡åŸºç¡€ç¯å¢ƒæ­å»º</h1><h2 id="3-1-åˆ›å»ºçˆ¶å·¥ç¨‹-ï¼Œç”¨äºèšåˆå…¶å®ƒå¾®æœåŠ¡æ¨¡å—"><a href="#3-1-åˆ›å»ºçˆ¶å·¥ç¨‹-ï¼Œç”¨äºèšåˆå…¶å®ƒå¾®æœåŠ¡æ¨¡å—" class="headerlink" title="3.1 åˆ›å»ºçˆ¶å·¥ç¨‹ ï¼Œç”¨äºèšåˆå…¶å®ƒå¾®æœåŠ¡æ¨¡å—"></a>3.1 åˆ›å»ºçˆ¶å·¥ç¨‹ ï¼Œç”¨äºèšåˆå…¶å®ƒå¾®æœåŠ¡æ¨¡å—</h2><h3 id="3-1-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£"><a href="#3-1-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£" class="headerlink" title="3.1.1 éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£"></a><strong>3.1.1</strong> éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£</h3><h3 id="3-1-2-å®ç°æ­¥éª¤"><a href="#3-1-2-å®ç°æ­¥éª¤" class="headerlink" title="3.1.2 å®ç°æ­¥éª¤"></a><strong>3.1.2</strong> å®ç°æ­¥éª¤</h3><h4 id="3-1-2-1-åˆ›å»ºçˆ¶é¡¹ç›®-ä½œä¸ºèšåˆå…¶å®ƒå¾®æœåŠ¡æ¨¡å—"><a href="#3-1-2-1-åˆ›å»ºçˆ¶é¡¹ç›®-ä½œä¸ºèšåˆå…¶å®ƒå¾®æœåŠ¡æ¨¡å—" class="headerlink" title="3.1.2.1 åˆ›å»ºçˆ¶é¡¹ç›®, ä½œä¸ºèšåˆå…¶å®ƒå¾®æœåŠ¡æ¨¡å—"></a>3.1.2.1 åˆ›å»ºçˆ¶é¡¹ç›®, ä½œä¸ºèšåˆå…¶å®ƒå¾®æœåŠ¡æ¨¡å—</h4><p>###æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªçˆ¶é¡¹ç›®**,** è¯¥çˆ¶é¡¹ç›®ä¼šå»ç®¡ç†å¤šä¸ªå¾®æœåŠ¡æ¨¡å—(module)</p><p>Mavenåˆ›å»ºé¡¹ç›® ä½¿ç”¨webapp Mavenå·¥ä»¶</p><h4 id="3-1-2-2-é¡¹ç›®è®¾ç½®"><a href="#3-1-2-2-é¡¹ç›®è®¾ç½®" class="headerlink" title="3.1.2.2 é¡¹ç›®è®¾ç½®"></a>3.1.2.2 é¡¹ç›®è®¾ç½®</h4><ol><li></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519194056058.png" alt="image-20230519194056058"></p><ol start="2"><li></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519194231324.png" alt="image-20230519194231324"></p><p>3.çˆ¶é¡¹ç›®æœ¬èº«ä¸å†™ä»£ç ï¼Œæ˜¯ç”¨æ¥è¿›è¡Œç®¡ç†çš„</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519194329079.png" alt="image-20230519194329079"></p><h4 id="3-1-2-4-é…ç½®çˆ¶å·¥ç¨‹-pom-xml-ä½œä¸ºèšåˆå…¶å®ƒæ¨¡å—"><a href="#3-1-2-4-é…ç½®çˆ¶å·¥ç¨‹-pom-xml-ä½œä¸ºèšåˆå…¶å®ƒæ¨¡å—" class="headerlink" title="3.1.2.4 é…ç½®çˆ¶å·¥ç¨‹ pom.xml, ä½œä¸ºèšåˆå…¶å®ƒæ¨¡å—"></a>3.1.2.4 é…ç½®çˆ¶å·¥ç¨‹ pom.xml, ä½œä¸ºèšåˆå…¶å®ƒæ¨¡å—</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>e-commerce-center<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--  è¡¨æ˜æ˜¯ä¸€ä¸ªçˆ¶å·¥ç¨‹ï¼Œç”¨äºèšåˆç®¡ç†å…¶ä»–æ¨¡å—--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>e-commerce-center Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      è€å¸ˆè¯´æ˜: ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ log4j , é˜²æ­¢å®‰å…¨æ¼æ´</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>2.17.2<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.18.20<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>8.0.31<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">druid.version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">druid.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mybatis.spring.boot.version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">mybatis.spring.boot.version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  1. dependencyManagement ä½œç”¨: å­æ¨¡å—ç»§æ‰¿å, é”å®šç‰ˆæœ¬,</span></span><br><span class="line"><span class="comment">  å­æ¨¡å—ä¸ç”¨å†å†™ version --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      è€å¸ˆè§£è¯»:</span></span><br><span class="line"><span class="comment">      1. type: pom å’Œ scope import é…åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">      2. è¡¨ç¤º çˆ¶é¡¹ç›®çš„å­æ¨¡å—, åœ¨å¼•å…¥ springboot ç›¸å…³ä¾èµ–æ—¶ é”å®šç‰ˆæœ¬ä¸º</span></span><br><span class="line"><span class="comment">      3. é€šè¿‡ pom + import è§£å†³ maven å•ç»§æ‰¿æœºåˆ¶</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>Hoxton.SR1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;druid.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.spring.boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;junit.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-1-3-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#3-1-3-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="3.1.3 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a><strong>3.1.3</strong> æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><h4 id="3-1-3-1-Mavençš„dependencyManagementè¯´æ˜"><a href="#3-1-3-1-Mavençš„dependencyManagementè¯´æ˜" class="headerlink" title="3.1.3.1 Mavençš„dependencyManagementè¯´æ˜"></a>3.1.3.1 Mavençš„dependencyManagementè¯´æ˜</h4><p>1ã€Maven ä½¿ç”¨ dependencyManagement å…ƒç´ æ¥æä¾›äº†ä¸€ç§ç®¡ç†ä¾èµ–ç‰ˆæœ¬å·çš„æ–¹å¼ã€‚é€šå¸¸åœ¨é¡¹ç›®</p><p>packaging ä¸º POMï¼Œä¸­ä½¿ç”¨dependencvManadement å…ƒç´ ã€‚</p><p>2ã€ä½¿ç”¨pom.xml ä¸­çš„dependencyManagement å…ƒç´ èƒ½è®©æ‰€æœ‰åœ¨å­é¡¹ç›®ä¸­å¼•ç”¨ä¸€ä¸ªä¾èµ–ï¼Œ Maven ä¼šæ²¿ç€çˆ¶å­å±‚æ¬¡å‘ä¸Šèµ°ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæ‹¥æœ‰dependencyManagement å…ƒç´ çš„é¡¹ç›®ï¼Œç„¶åå®ƒå°±ä¼šä½¿ç”¨è¿™ä¸ªdependencyManagement å…ƒç´ ä¸­æŒ‡å®šçš„ç‰ˆæœ¬å·ã€‚</p><p>3ã€å¥½å¤„ï¼šå¦‚æœæœ‰å¤šä¸ªå­é¡¹ç›®éƒ½å·1ç”¨åŒä¸€æ ·ä¾èµ–ï¼Œåˆ™å¯ä»¥é¿å…åœ¨æ¯ä¸ªä½¿ç”¨çš„å­é¡¹ç›®é‡Œéƒ½å£°æ˜ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œå½“å¼€çº§æˆ–åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œåªéœ€è¦åœ¨é¡¶å±‚çˆ¶å®¹å™¨é‡Œæ›´æ–°ï¼Œè€Œä¸éœ€è¦åˆ†åˆ«åœ¨å­é¡¹ç›®çš„ä¿®æ”¹;å¦å¤–å¦‚æœæŸä¸ªå­é¡¹ç›®éœ€è¦å¦å¤–çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œåªéœ€è¦å£°æ˜version å°±å¯ã€‚</p><p>4ã€dependency Management é‡Œåªæ˜¯å£°æ˜ä¾èµ–ï¼Œå¹¶ä¸å®ç°å¼•å…¥ï¼Œå› æ­¤å­é¡¹ç›®éœ€è¦æ˜¾ç¤ºçš„å£°æ˜éœ€è¦ç”¨çš„ä¾èµ–ã€‚</p><p>5ã€å¦‚æœä¸åœ¨å­é¡¹ç›®ä¸­å£°æ˜ä¾èµ–ï¼Œæ˜¯ä¸ä¼šä»çˆ¶é¡¹ç›®ä¸­ç»§æ‰¿ä¸‹æ¥çš„ï¼›åªæœ‰åœ¨å­é¡¹ç›®ä¸­å†™äº†è¯¥ä¾èµ–é¡¹ï¼Œå¹¶ä¸”æ²¡æœ‰æŒ‡å®šå…·ä½“ç‰ˆæœ¬ï¼Œæ‰ä¼šä»çˆ¶é¡¹ç›®ä¸­ç»§æ‰¿è¯¥é¡¹ï¼Œå¹¶ä¸”version å’Œ scope éƒ½è¯»å–è‡ªçˆ¶ pom</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230519202427190.png" alt="image-20230519202427190" style="zoom:50%;" /><p>6ã€å¦‚æœå­é¡¹ç›®ä¸­æŒ‡å®šäº†ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨å­é¡¹ç›®ä¸­æŒ‡å®šçš„ jar ç‰ˆæœ¬</p><h2 id="3-2-åˆ›å»ºä¼šå‘˜ä¸­å¿ƒå¾®æœåŠ¡æ¨¡å—-service-provider"><a href="#3-2-åˆ›å»ºä¼šå‘˜ä¸­å¿ƒå¾®æœåŠ¡æ¨¡å—-service-provider" class="headerlink" title="3.2 åˆ›å»ºä¼šå‘˜ä¸­å¿ƒå¾®æœåŠ¡æ¨¡å— -service provider"></a>3.2 åˆ›å»ºä¼šå‘˜ä¸­å¿ƒå¾®æœåŠ¡æ¨¡å— -service provider</h2><h3 id="3-2-1-éœ€æ±‚è¯´æ˜"><a href="#3-2-1-éœ€æ±‚è¯´æ˜" class="headerlink" title="3.2.1 éœ€æ±‚è¯´æ˜"></a><strong>3.2.1</strong> éœ€æ±‚è¯´æ˜</h3><h4 id="1ã€é€šè¿‡æµè§ˆå™¨å¯ä»¥è·å–ä¼šå‘˜ä¿¡æ¯-é€šè¿‡ä¼šå‘˜ä¸­å¿ƒå¾®æœåŠ¡æ¨¡å—"><a href="#1ã€é€šè¿‡æµè§ˆå™¨å¯ä»¥è·å–ä¼šå‘˜ä¿¡æ¯-é€šè¿‡ä¼šå‘˜ä¸­å¿ƒå¾®æœåŠ¡æ¨¡å—" class="headerlink" title="1ã€é€šè¿‡æµè§ˆå™¨å¯ä»¥è·å–ä¼šå‘˜ä¿¡æ¯**(é€šè¿‡ä¼šå‘˜ä¸­å¿ƒå¾®æœåŠ¡æ¨¡å—)**"></a><strong>1</strong>ã€é€šè¿‡æµè§ˆå™¨å¯ä»¥è·å–ä¼šå‘˜ä¿¡æ¯**(<strong>é€šè¿‡ä¼šå‘˜ä¸­å¿ƒå¾®æœåŠ¡æ¨¡å—</strong>)**</h4><h3 id="3-2-2-æ€è·¯åˆ†æ"><a href="#3-2-2-æ€è·¯åˆ†æ" class="headerlink" title="3.2.2 æ€è·¯åˆ†æ"></a><strong>3.2.2</strong> æ€è·¯åˆ†æ</h3><p>1ã€åˆ›å»º Moduel &amp; å®Œæˆé…ç½®</p><p>2ã€åˆ›å»ºæ•°æ®åº“&#x2F;è¡¨</p><p>3ã€åˆ›å»º entity-dao&#x2F;Mapper.xml-service-controller</p><p>4ã€å®Œæˆæµ‹è¯•</p><h3 id="3-2-3-å®ç°æ­¥éª¤"><a href="#3-2-3-å®ç°æ­¥éª¤" class="headerlink" title="3.2.3 å®ç°æ­¥éª¤"></a><strong>3.2.3</strong> å®ç°æ­¥éª¤</h3><p>â€‹application.yml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10000</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">member-service-provider-10000</span><span class="comment">#åç§°ï¼Œå¯ä»¥è‡ªå·±æŒ‡å®š</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/booking?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">QWEASDzxc123</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span> <span class="comment">#åé¢ mapper æ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.study.springcloud.entity</span>  <span class="comment">#å®ä½“ç±»çš„åŒ…è·¯å¾„</span></span><br></pre></td></tr></table></figure><p>MemberMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>e-commerce-center<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>member-service-provider-10000<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;packaging&gt;war&lt;/packaging&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>member-service-provider-10000 Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ä½¿ç”¨ç‰ˆæœ¬ä»²è£ï¼Œä»çˆ¶é¡¹ç›®ä¸­è·å–ç‰ˆæœ¬--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        springbootç¨‹åºçš„ç›‘æ§ç³»ç»Ÿï¼Œå®ç°ç³»ç»Ÿå¥åº·æ£€æµ‹</span></span><br><span class="line"><span class="comment">            å¯ä»¥é€šè¿‡ http://localhost:10000/actuator çœ‹åˆ°ç›¸å…³è¿æ¥</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>member-service-provider-10000<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-2-4-ğŸŒŸæ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#3-2-4-ğŸŒŸæ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="3.2.4 ğŸŒŸæ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a><strong>3.2.4</strong> ğŸŒŸæ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><p><strong>ä¼ è¾“javabeanæ—¶</strong></p><p>1ã€æˆ‘ä»¬çš„å‰ç«¯å¦‚æœæ˜¯ä»¥ <strong>json æ ¼å¼</strong>æ¥å‘é€æ·»åŠ ä¿¡æ¯Memberï¼Œé‚£ä¹ˆæˆ‘ä»¬<strong>éœ€è¦ä½¿ç”¨@RequestBody</strong>,</p><p>æ‰èƒ½å°†æ•°æ®å°è£åˆ°å¯¹åº”çš„ beanï¼ŒåŒæ—¶ä¿è¯ http çš„è¯·æ±‚å¤´çš„ content-type æ˜¯å¯¹åº”çš„</p><p>2ã€å¦‚æœå‰ç«¯æ˜¯ä»¥ <strong>è¡¨å•</strong> æˆ–è€… <strong>parameters</strong> å½¢å¼æäº¤ï¼Œ åˆ™ä¸€å®šä¸èƒ½ä½¿ç”¨@RequestBodyï¼Œ æ‰</p><p>ä¼šè¿›è¡Œå¯¹è±¡å‚æ•°å°è£…ï¼ŒåŒæ—¶ä¿è¯http çš„è¯·æ±‚å¤´çš„ content-type æ˜¯å¯¹åº”</p><p>3ã€åœ¨è¿›è¡Œ SpringBoot åº”ç”¨ç¨‹åºæµ‹è¯•æ—¶ï¼Œå¼•å…¥çš„ jUnit æ˜¯ore.junit.jupiter.api.Test</p><p>4ã€ åœ¨è¿è¡Œç¨‹åºæ—¶ï¼Œä¸€å®šè¦ç¡®ä¿ä½ çš„ XxxxMapper.xml æ–‡ä»¶è¢«è‡ªåŠ¨æ”¾åˆ°çš„ target ç›®å½•çš„</p><p>classes æŒ‡å®šç›®å½•ã€‚</p><h2 id="3-3-åˆ›å»ºä½¿ç”¨ä¼šå‘˜å¾®æœåŠ¡æ¨¡å—-service-consumer"><a href="#3-3-åˆ›å»ºä½¿ç”¨ä¼šå‘˜å¾®æœåŠ¡æ¨¡å—-service-consumer" class="headerlink" title="3.3 åˆ›å»ºä½¿ç”¨ä¼šå‘˜å¾®æœåŠ¡æ¨¡å— -service consumer"></a>3.3 åˆ›å»ºä½¿ç”¨ä¼šå‘˜å¾®æœåŠ¡æ¨¡å— -service consumer</h2><h3 id="3-3-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£"><a href="#3-3-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£" class="headerlink" title="3.3.1 éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£"></a><strong>3.3.1</strong> éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£</h3><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230520114632421.png" alt="image-20230520114632421" style="zoom:30%;" /><p>-æµè§ˆå™¨: <a href="http://localhost/member/consumer/get/1">http://localhost/member/consumer/get/1</a></p><p>-æµ‹è¯•æ·»åŠ ä¼šå‘˜ : <a href="http://localhost/member/consumer/save">http://localhost/member/consumer/save</a></p><h3 id="3-3-2-æ€è·¯åˆ†æ-x2F-å›¾è§£"><a href="#3-3-2-æ€è·¯åˆ†æ-x2F-å›¾è§£" class="headerlink" title="3.3.2 æ€è·¯åˆ†æ**&#x2F;**å›¾è§£"></a><strong>3.3.2</strong> æ€è·¯åˆ†æ**&#x2F;**å›¾è§£</h3><p>1ã€åˆ›å»º Moduel(member-service-consumer-80) ï¼† å®Œæˆé…ç½</p><p>2ã€åˆ›å»º controller</p><p>3ã€å®Œæˆæµ‹è¯•</p><h3 id="3-3-3-å®ç°æ­¥éª¤"><a href="#3-3-3-å®ç°æ­¥éª¤" class="headerlink" title="3.3.3 å®ç°æ­¥éª¤"></a><strong>3.3.3</strong> å®ç°æ­¥éª¤</h3><h4 id="3-3-3-1-åˆ›å»º-Moduel-amp-å®Œæˆé…ç½®"><a href="#3-3-3-1-åˆ›å»º-Moduel-amp-å®Œæˆé…ç½®" class="headerlink" title="3.3.3.1 åˆ›å»º Moduel &amp; å®Œæˆé…ç½®"></a>3.3.3.1 åˆ›å»º Moduel &amp; å®Œæˆé…ç½®</h4><h5 id="åˆ›å»ºModuelï¼š"><a href="#åˆ›å»ºModuelï¼š" class="headerlink" title="åˆ›å»ºModuelï¼š"></a>åˆ›å»ºModuelï¼š</h5><p>åœ¨åˆ›å»ºModuelåï¼Œå…¶çˆ¶å·¥ç¨‹çš„ pom.xml ä¼šåšç›¸åº”å˜åŒ–ï¼Œåœ¨<modules>æ ‡ç­¾ä¸­å¢åŠ ç®¡ç†member-service-consumer-80å¾®æœåŠ¡æ¨¡å—</p><h5 id="å®Œæˆé…ç½®ï¼š"><a href="#å®Œæˆé…ç½®ï¼š" class="headerlink" title="å®Œæˆé…ç½®ï¼š"></a>å®Œæˆé…ç½®ï¼š</h5><p>pom.xml &#x2F; application.yaml å¯å‚è€ƒä¹‹å‰å†™çš„ï¼Œå–è‡ªå·±éœ€è¦çš„å³å¯ã€‚</p><h5 id="æ³¨å…¥-RestTemplateï¼š"><a href="#æ³¨å…¥-RestTemplateï¼š" class="headerlink" title="æ³¨å…¥ RestTemplateï¼š"></a>æ³¨å…¥ RestTemplateï¼š</h5><h6 id="RestTemplateåŸºæœ¬ä»‹ç»ï¼š"><a href="#RestTemplateåŸºæœ¬ä»‹ç»ï¼š" class="headerlink" title="RestTemplateåŸºæœ¬ä»‹ç»ï¼š"></a>RestTemplateåŸºæœ¬ä»‹ç»ï¼š</h6><p>â€‹1ã€<strong>RestTemplate</strong> æ˜¯Spring æä¾›çš„ç”¨äºè®¿é—® Rest æœåŠ¡çš„æ¨¡æ¿ç±»</p><p>â€‹2ã€RestTerplate æä¾›äº†å¤šç§<strong>ä¾¿æ·è®¿é—®è¿œç¨‹ Http æœåŠ¡</strong>çš„æ–¹æ³•</p><p>â€‹3ã€è¯´æ˜ï¼šå¯ä»¥è¿™æ ·ç†è§£ï¼Œé€šè¿‡ RestTemplateï¼Œæˆ‘ä»¬å¯ä»¥å‘å‡º http è¯·æ±‚(æ”¯æŒRestful é£æ ¼)ï¼Œå»è°ƒç”¨Controller æä¾›çš„ API æ¥å£ï¼Œå°±åƒæˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨å‘å‡ºhttp è¯·æ±‚è°ƒç”¨è¯¥ APIæ¥å£ä¸€æ ·ã€‚</p><p>â€‹4ã€ä½¿ç”¨ç®€å•ä¾¿æ·</p><h6 id="å®˜ç½‘åœ°å€ï¼š"><a href="#å®˜ç½‘åœ°å€ï¼š" class="headerlink" title="å®˜ç½‘åœ°å€ï¼š"></a>å®˜ç½‘åœ°å€ï¼š</h6><p><a href="https://docs.spring.io/spring-framework/docs/5.2.2.RELEASE/javadoc-api/org/springframework/web/client/RestTemplate.html">https://docs.spring.io/spring-framework/docs/5.2.2.RELEASE/javadoc-api/org/springframework/web/client/RestTemplate.html</a></p><h6 id="åˆ›å»ºé…ç½®ç±»-com-x2F-hspedu-x2F-springcloud-x2F-config-x2F-CustomizationBean-java"><a href="#åˆ›å»ºé…ç½®ç±»-com-x2F-hspedu-x2F-springcloud-x2F-config-x2F-CustomizationBean-java" class="headerlink" title="åˆ›å»ºé…ç½®ç±»: com&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;CustomizationBean.java"></a>åˆ›å»ºé…ç½®ç±»: com&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;CustomizationBean.java</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomizationBean</span> &#123;</span><br><span class="line">    <span class="comment">//é…ç½®æ³¨å…¥RestTemplate bean å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">getRestTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="åˆ›å»º-com-x2F-hspedu-x2F-springcloud-x2F-controller-x2F-MemberConsumerController-java"><a href="#åˆ›å»º-com-x2F-hspedu-x2F-springcloud-x2F-controller-x2F-MemberConsumerController-java" class="headerlink" title="åˆ›å»º:com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberConsumerController.java"></a>åˆ›å»º:com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberConsumerController.java</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemberConsumerController</span> &#123;</span><br><span class="line">    <span class="comment">//urlç”±ï¼ˆipï¼šç«¯å£ï¼‰+ï¼ˆè¯·æ±‚åç§°ï¼‰ä¸¤éƒ¨åˆ†ç»„æˆ</span></span><br><span class="line">    <span class="comment">//å®šä¹‰member_service_provider_url</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MEMBER_SERVICE_PROVIDER_URL</span> <span class="operator">=</span></span><br><span class="line">            <span class="string">&quot;http://localhost:10000&quot;</span>;</span><br><span class="line">    <span class="comment">//æ–¹æ³•/æ¥å£ï¼Œæ·»åŠ memberå¯¹è±¡åˆ°æ•°æ®åº“/è¡¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è£…é…RestController</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;member/consumer/save&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;Member&gt; <span class="title function_">save</span><span class="params">(Member member)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;service-consumer member=&#123;&#125;&quot;</span>,member);</span><br><span class="line">        <span class="keyword">return</span> restTemplate.postForObject(</span><br><span class="line">                MEMBER_SERVICE_PROVIDER_URL+<span class="string">&quot;/member/save&quot;</span>,member, Result.class);</span><br><span class="line">        <span class="comment">//url,è¦saveçš„å¯¹è±¡ï¼Œè¿”å›å€¼çš„ç±»å‹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®id è°ƒç”¨æœåŠ¡æ¥å£ï¼Œè¿”å›memberå¯¹è±¡ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/member/consumer/get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;Member&gt; <span class="title function_">getMemberById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(</span><br><span class="line">                MEMBER_SERVICE_PROVIDER_URL+<span class="string">&quot;/member/get/&quot;</span> + id,Result.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-3-3-2-æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨ç»†èŠ‚"><a href="#3-3-3-2-æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨ç»†èŠ‚" class="headerlink" title="3.3.3.2 æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨ç»†èŠ‚"></a>3.3.3.2 æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨ç»†èŠ‚</h4><h5 id="æ·»åŠ ä¼šå‘˜æ•°æ®åº“ä¸­ä¸º-null-çš„è§£å†³æ–¹æ¡ˆ"><a href="#æ·»åŠ ä¼šå‘˜æ•°æ®åº“ä¸­ä¸º-null-çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="æ·»åŠ ä¼šå‘˜æ•°æ®åº“ä¸­ä¸º null çš„è§£å†³æ–¹æ¡ˆ"></a>æ·»åŠ ä¼šå‘˜æ•°æ®åº“ä¸­ä¸º <strong>null</strong> çš„è§£å†³æ–¹æ¡ˆ</h5><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230520171355467.png" alt="image-20230520171355467" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230520171418620.png" alt="image-20230520171418620" style="zoom:50%;" /><h5 id="å¼€å¯-Run-DashBoard"><a href="#å¼€å¯-Run-DashBoard" class="headerlink" title="å¼€å¯ Run DashBoard"></a>å¼€å¯ <strong>Run DashBoard</strong></h5><p>â€‹å½“springcloud çš„æœåŠ¡æœ‰å¤šä¸ªæ—¶ï¼Œç®¡ç†å¤šä¸ªæœåŠ¡çš„å¯åŠ¨ä½¿ç”¨runä¼šä¸å¥½ç®¡ç†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ </p><p>RunDashboard.</p><p>æ‰¾åˆ° ä½ çš„é¡¹ç›®&#x2F;.idea&#x2F;workspace.xml æ–‡ä»¶åœ¨å…¶ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç å³å¯</p><p>æ·»åŠ åœ¨ï¼šåŸæœ¬ç¬¬äºŒè¡Œ<project version="4">çš„ä¸‹ä¸€è¡Œå³å¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">name</span>=<span class="string">&quot;RunDashboard&quot;</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">name</span>=<span class="string">&quot;configurationTypes&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;SpringBootApplicationConfigurationType&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">name</span>=<span class="string">&quot;ruleStates&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RuleState</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ConfigurationTypeDashboardGroupingRule&quot;</span> /&gt;</span> </span><br><span class="line">      <span class="tag">&lt;/<span class="name">RuleState</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RuleState</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;StatusDashboardGroupingRule&quot;</span> /&gt;</span> </span><br><span class="line">      <span class="tag">&lt;/<span class="name">RuleState</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">option</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‡å¯é¡¹ç›® </p><p>â€‹<strong>è§†å›¾-å·¥å…·çª—å£-æœåŠ¡</strong> å³å¯æ–¹ä¾¿ç®¡ç†å„ä¸ªä¸»ç¨‹åºï¼</p><h2 id="3-4-åˆ›å»ºå…±ç”¨æ¨¡å—-ä¾›å…¶å®ƒæ¨¡å—ä½¿ç”¨"><a href="#3-4-åˆ›å»ºå…±ç”¨æ¨¡å—-ä¾›å…¶å®ƒæ¨¡å—ä½¿ç”¨" class="headerlink" title="3.4 åˆ›å»ºå…±ç”¨æ¨¡å—-ä¾›å…¶å®ƒæ¨¡å—ä½¿ç”¨"></a>3.4 åˆ›å»ºå…±ç”¨æ¨¡å—-ä¾›å…¶å®ƒæ¨¡å—ä½¿ç”¨</h2><h3 id="3-4-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£"><a href="#3-4-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£" class="headerlink" title="3.4.1 éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£"></a><strong>3.4.1</strong> éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£</h3><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230520185154382.png" alt="image-20230520185154382" style="zoom:50%;" /><h3 id="3-4-2-æ€è·¯åˆ†æ-x2F-å›¾è§£"><a href="#3-4-2-æ€è·¯åˆ†æ-x2F-å›¾è§£" class="headerlink" title="3.4.2 æ€è·¯åˆ†æ**&#x2F;**å›¾è§£"></a><strong>3.4.2</strong> æ€è·¯åˆ†æ**&#x2F;**å›¾è§£</h3><p>1ã€åˆ›å»º Moduel &amp; å®Œæˆé…ç½®</p><p>2ã€åˆ›å»ºentityï¼ŒæŠŠå…±ç”¨çš„å®ä½“ç±»æ”¾åˆ°å¯¹åº”çš„åŒ…ä¸‹</p><p>3ã€å®Œæˆæµ‹è¯•</p><h3 id="3-4-3-å®ç°æ­¥éª¤"><a href="#3-4-3-å®ç°æ­¥éª¤" class="headerlink" title="3.4.3 å®ç°æ­¥éª¤"></a><strong>3.4.3</strong> å®ç°æ­¥éª¤</h3><h4 id="3-4-3-1-åˆ›å»º-Moduel-amp-å®Œæˆé…ç½®"><a href="#3-4-3-1-åˆ›å»º-Moduel-amp-å®Œæˆé…ç½®" class="headerlink" title="3.4.3.1 åˆ›å»º Moduel &amp; å®Œæˆé…ç½®"></a>3.4.3.1 åˆ›å»º Moduel &amp; å®Œæˆé…ç½®</h4><h5 id="3-4-3-1-1-åˆ›å»º-e-commerce-center-common-api"><a href="#3-4-3-1-1-åˆ›å»º-e-commerce-center-common-api" class="headerlink" title="3.4.3.1.1 åˆ›å»º e_commerce_center-common-api"></a><strong>3.4.3.1.1</strong> åˆ›å»º <strong>e_commerce_center-common-api</strong></h5><h6 id="åœ¨pom-xmlä¸­æå–å…¬å…±ä¾èµ–"><a href="#åœ¨pom-xmlä¸­æå–å…¬å…±ä¾èµ–" class="headerlink" title="åœ¨pom.xmlä¸­æå–å…¬å…±ä¾èµ–"></a>åœ¨pom.xmlä¸­æå–å…¬å…±ä¾èµ–</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è€å¸ˆè§£è¯»&lt;optional&gt;true&lt;/optional&gt;:</span></span><br><span class="line"><span class="comment">    1. true è¡¨ç¤ºä¸¤ä¸ªé¡¹ç›®ä¹‹é—´ä¾èµ–ä¸ä¼ é€’</span></span><br><span class="line"><span class="comment">    2. å°ä¼™ä¼´å¯ä»¥è¿™é‡Œç†è§£&lt;optional&gt;true&lt;/optional&gt;: é˜²æ­¢å°†è¯¥ä¾èµ–ä¼ é€’åˆ°å…¶ä»–æ¨¡å—ä¸­</span></span><br><span class="line"><span class="comment">    è¯´çš„å†å…·ä½“ä¸€ç‚¹ï¼Œæ¯”å¦‚ member-service-consumer-80 æ¨¡å—ä¾èµ–äº†æœ¬é¡¹ç›®,</span></span><br><span class="line"><span class="comment">    é‚£ä¹ˆæœ¬é¡¹ç›®ä¸ä¼šæŠŠ lombok ä¼ é€’ç»™ member-service-consumer-80</span></span><br><span class="line"><span class="comment">    3. ä¸è®¾ç½® optional æˆ–è€… optional æ˜¯ falseï¼Œè¡¨ç¤ºä¼ é€’ä¾èµ–</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h6 id="æŠ½å–å…±ç”¨-API-x2F-ç±»"><a href="#æŠ½å–å…±ç”¨-API-x2F-ç±»" class="headerlink" title="æŠ½å–å…±ç”¨ API&#x2F;ç±»"></a>æŠ½å–å…±ç”¨ API&#x2F;ç±»</h6><p>â€‹å†™å…¥å…¬å…±çš„entity</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230520191145475.png" alt="image-20230520191145475" style="zoom:55%;" /><h6 id="ä½¿ç”¨-Maven-æ‰“åŒ…æˆ-jar"><a href="#ä½¿ç”¨-Maven-æ‰“åŒ…æˆ-jar" class="headerlink" title="ä½¿ç”¨ Maven æ‰“åŒ…æˆ jar"></a>ä½¿ç”¨ Maven æ‰“åŒ…æˆ jar</h6><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230520192050410.png" alt="image-20230520192050410" style="zoom:50%;" /><p>ä¼šåœ¨testç›®å½•ä¸­ç”Ÿæˆå¯¹åº”jaråŒ…</p><h6 id="å·¥ç¨‹é‡æ„"><a href="#å·¥ç¨‹é‡æ„" class="headerlink" title="å·¥ç¨‹é‡æ„"></a>å·¥ç¨‹é‡æ„</h6><p>â€‹1.åœ¨ <strong>member-service-consumer-80</strong> å¼•å…¥ <strong>e_commerce_center-common-api-1.0-SNAPSHOT.jar</strong></p><p>â€‹åˆ é™¤åŸæ¥çš„ <strong>entity</strong> åŒ…</p><p>â€‹ä¿®æ”¹ <strong>pom.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥ e_commerce_center-common-api --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hspedu.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>e_commerce_center-common-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®Œæˆäº†ï¼</p><h1 id="4-SpringCloud-Eureka-æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#4-SpringCloud-Eureka-æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="4 SpringCloud Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>4 SpringCloud Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h1><h2 id="4-1-Eurekaä»‹ç»"><a href="#4-1-Eurekaä»‹ç»" class="headerlink" title="4.1 Eurekaä»‹ç»"></a>4.1 Eurekaä»‹ç»</h2><h3 id="4-1-1-å­¦-Eureka-å‰çš„è¯´æ˜"><a href="#4-1-1-å­¦-Eureka-å‰çš„è¯´æ˜" class="headerlink" title="4.1.1 å­¦ Eureka å‰çš„è¯´æ˜"></a><strong>4.1.1</strong> å­¦ <strong>Eureka</strong> å‰çš„è¯´æ˜</h3><h4 id="1ã€Spring-Cloud-ç»„ä»¶é€‰å‹å›¾"><a href="#1ã€Spring-Cloud-ç»„ä»¶é€‰å‹å›¾" class="headerlink" title="1ã€Spring Cloud ç»„ä»¶é€‰å‹å›¾"></a><strong>1</strong>ã€Spring Cloud ç»„ä»¶é€‰å‹å›¾</h4><p>![image-20230519190901580](&#x2F;Users&#x2F;donn&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230519190901580.png)</p><h4 id="2ã€ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œç›®å‰ä¸»æµçš„æœåŠ¡æ³¨å†Œ-amp-å‘ç°çš„ç»„ä»¶æ˜¯-Nacosï¼Œ-ä½†æ˜¯-Eureka-ä½œä¸ºä¸€ä¸ªè€ç‰Œç»å…¸çš„-æœåŠ¡æ³¨å†Œ-amp-å‘ç°æŠ€æœ¯è¿˜æ˜¯æœ‰å¿…è¦å­¦ä¹ ä¸€ä¸‹ï¼ŒåŸå› ï¼š"><a href="#2ã€ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œç›®å‰ä¸»æµçš„æœåŠ¡æ³¨å†Œ-amp-å‘ç°çš„ç»„ä»¶æ˜¯-Nacosï¼Œ-ä½†æ˜¯-Eureka-ä½œä¸ºä¸€ä¸ªè€ç‰Œç»å…¸çš„-æœåŠ¡æ³¨å†Œ-amp-å‘ç°æŠ€æœ¯è¿˜æ˜¯æœ‰å¿…è¦å­¦ä¹ ä¸€ä¸‹ï¼ŒåŸå› ï¼š" class="headerlink" title="2ã€ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œç›®å‰ä¸»æµçš„æœåŠ¡æ³¨å†Œ&amp;å‘ç°çš„ç»„ä»¶æ˜¯ Nacosï¼Œ ä½†æ˜¯ Eureka ä½œä¸ºä¸€ä¸ªè€ç‰Œç»å…¸çš„ æœåŠ¡æ³¨å†Œ&amp;å‘ç°æŠ€æœ¯è¿˜æ˜¯æœ‰å¿…è¦å­¦ä¹ ä¸€ä¸‹ï¼ŒåŸå› ï¼š"></a>2ã€ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œç›®å‰ä¸»æµçš„æœåŠ¡æ³¨å†Œ&amp;å‘ç°çš„ç»„ä»¶æ˜¯ Nacosï¼Œ ä½†æ˜¯ Eureka ä½œä¸ºä¸€ä¸ªè€ç‰Œç»å…¸çš„ æœåŠ¡æ³¨å†Œ&amp;å‘ç°æŠ€æœ¯è¿˜æ˜¯æœ‰å¿…è¦å­¦ä¹ ä¸€ä¸‹ï¼ŒåŸå› ï¼š</h4><p>ï¼ˆ1ï¼‰ ä¸€äº›æ—©æœŸçš„åˆ†å¸ƒå¼ å¾®æœåŠ¡é¡¹ç›®ä½¿ç”¨çš„æ˜¯ Eurekaï¼Œ å°ä¼™ä¼´åœ¨å·¥ä½œä¸­ï¼Œå®Œå…¨æœ‰å¯èƒ½é‡åˆ°è¿™ç§æƒ…å†µã€‚</p><p>ï¼ˆ2ï¼‰ åæœŸçš„æœåŠ¡æ³¨å†Œ&amp;å‘ç°ç»„ä»¶&#x2F;æŠ€æœ¯ï¼Œéƒ½å‚è€ƒäº† Eureka è®¾è®¡å’Œç†å¿µï¼Œå­¦ä¹ äº†Eureka åï¼Œæˆ‘ä»¬ä¸Šæ‰‹Nacoså®¹æ˜“å¾ˆå¤šï¼Œè€Œä¸”ç†è§£çš„æ›´æ·±åˆ»ã€‚</p><h3 id="4-1-2-å½“å‰é¡¹ç›®æ¶æ„é—®é¢˜åˆ†æ-å¼•å‡º-Eureka"><a href="#4-1-2-å½“å‰é¡¹ç›®æ¶æ„é—®é¢˜åˆ†æ-å¼•å‡º-Eureka" class="headerlink" title="4.1.2 å½“å‰é¡¹ç›®æ¶æ„é—®é¢˜åˆ†æ **-**å¼•å‡º Eureka"></a><strong>4.1.2</strong> å½“å‰é¡¹ç›®æ¶æ„é—®é¢˜åˆ†æ **-**å¼•å‡º Eureka</h3><p>ä¸€å›¾èƒœåƒè¨€</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230521192330770.png" alt="image-20230521192330770"></p><p>1.åœ¨ä¼ä¸šçº§é¡¹ç›®ä¸­ï¼ŒæœåŠ¡æ¶ˆè´¹è®¿é—®è¯·æ±‚ä¼šå­˜åœ¨é«˜å¹¶å‘ (ä¸€ä¸ªæœåŠ¡æä¾›æ¨¡å—å¯èƒ½æ— æ³•æ‰¿å—)</p><p>2.å¦‚æœåªæœ‰ä¸€ä¸ªä¼šå‘˜ä¸­å¿ƒ-æä¾›æœåŠ¡æ¨¡å—ï¼Œå¯ç”¨æ€§å·® (å¦‚æœåªæœ‰ä¸€ä¸ªæœåŠ¡æä¾›æ¨¡å—ï¼Œå¦‚æœæ•…éšœï¼Œç³»ç»Ÿå°†æ— æ³•ä½¿ç”¨ï¼Œå¯ç”¨æ€§å·®)</p><p>3.æ‰€ä»¥ï¼Œä¼šå‘˜ä¸­å¿ƒæä¾›æœåŠ¡å¾€å¾€æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šæœ‰<strong>å¤šä¸ªä¼šå‘˜ä¸­å¿ƒæä¾›æœåŠ¡å¾®æœåŠ¡æ¨¡å—</strong> ( é«˜å¯ç”¨ )  </p><p>4.é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œå°±å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šæœåŠ¡æ¶ˆè´¹æ–¹ï¼Œæ€ä¹ˆå»å‘ç°å¯ä»¥ä½¿ç”¨çš„æœåŠ¡ </p><p>5,å½“æœåŠ¡æ¶ˆè´¹æ–¹ï¼Œå‘ç°äº†å¯ä»¥ä½¿ç”¨çš„æœåŠ¡å(å¯èƒ½æ˜¯å¤šä¸ªï¼Œåˆå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šåˆ°åº•è°ƒç”¨ AæœåŠ¡ï¼Œè¿˜æ˜¯BæœåŠ¡ï¼Ÿ è¿™å°±å¼•å‡ºäº†æœåŠ¡æ³¨å†Œå’Œè´Ÿè½½å‡è¡¡)</p><p>6.Eureka å°±å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜</p><h3 id="4-1-3-å¼•å…¥-Eureka-é¡¹ç›®æ¶æ„"><a href="#4-1-3-å¼•å…¥-Eureka-é¡¹ç›®æ¶æ„" class="headerlink" title="4.1.3 å¼•å…¥ Eureka é¡¹ç›®æ¶æ„"></a><strong>4.1.3</strong> å¼•å…¥ <strong>Eureka</strong> é¡¹ç›®æ¶æ„</h3><h4 id="ä¸€å›¾èƒœåƒè¨€"><a href="#ä¸€å›¾èƒœåƒè¨€" class="headerlink" title="ä¸€å›¾èƒœåƒè¨€"></a>ä¸€å›¾èƒœåƒè¨€</h4><p>â€‹<img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230521193144050.png" alt="image-20230521193144050"></p><ol><li><p>ä¼šå‘˜ä¸­å¿ƒ-æ˜¯æä¾›æœåŠ¡çš„æ¨¡å—ï¼Œåœ¨é¡¹ç›®ä¸­ï¼Œä¼šåšæˆé›†ç¾¤ï¼Œæä¾›é«˜å¯ç”¨</p></li><li><p>Eureka Server æœ‰å¿…è¦çš„è¯ï¼Œä¹Ÿå¯ä»¥åšæˆé›†ç¾¤</p></li><li><p>Eureka åŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼šEureka Serverå’Œ Eureka Client</p></li><li><p>Eureka Server æä¾›æ³¨å†ŒæœåŠ¡ï¼Œå„ä¸ªå¾®æœåŠ¡èŠ‚ç‚¹é€šè¿‡é…ç½®å¯åŠ¨åï¼Œä¼šåœ¨ Eureka Serverä¸­è¿¸è¡Œæ³¨å†Œï¼Œè¿™æ · EurekaServer ä¸­çš„æœåŠ¡æ³¨å†Œè¡¨ä¸­å°†ä¼šå­˜å‚¨æ‰€æœ‰å¯ç”¨æœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒæœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯å¯ä»¥åœ¨ç•Œé¢ä¸­ç›´è§‚çœ‹åˆ°ã€‚</p></li><li><p>Euretka Client é€šè¿‡æ³¨å†Œä¸­å¿ƒè¿›è¡Œè®¿é—®ï¼Œæ˜¯ä¸€ä¸ªJava å®¢æˆ·ç«¯ï¼Œç”¨äºç®€åŒ– Eureka Serverçš„äº¤äº’ï¼Œå®¢æˆ·ç«¯åŒæ—¶ä¹Ÿå…·å¤‡ä¸€ä¸ªå†…ç½®çš„ã€ä½¿ç”¨è½®è¯¢(round-robinï¼‰ è´Ÿè½½ç®—æ³•çš„è´Ÿè½½å‡è¡¡å™¨ã€‚åœ¨åº”ç”¨å¯åŠ¨åï¼Œå°†ä¼šå‘ Eureka Server å‘é€å¿ƒè·³ï¼ˆé»˜è®¤å‘¨æœŸä¸º 30ç§’)ã€‚å¦‚æœ Eureka Server åœ¨å¤šä¸ªå¿ƒè·³å‘¨æœŸå†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªèŠ‚ç‚¹çš„å¿ƒè·³ï¼ŒEurekaServer å°†ä¼šä»æœåŠ¡æ³¨å†Œè¡¨ä¸­æŠŠè¿™ä¸ªæœåŠ¡èŠ‚ç‚¹ç§»é™¤(é»˜è®¤90ç§’)</p></li></ol><h3 id="4-1-4-æœåŠ¡æ²»ç†ä»‹ç»"><a href="#4-1-4-æœåŠ¡æ²»ç†ä»‹ç»" class="headerlink" title="4.1.4 æœåŠ¡æ²»ç†ä»‹ç»"></a><strong>4.1.4</strong> æœåŠ¡æ²»ç†ä»‹ç»</h3><h4 id="4-1-4-1-Eurekaå®ç°æœåŠ¡æ²»ç†"><a href="#4-1-4-1-Eurekaå®ç°æœåŠ¡æ²»ç†" class="headerlink" title="4.1.4.1 Eurekaå®ç°æœåŠ¡æ²»ç†"></a>4.1.4.1 Eurekaå®ç°æœåŠ¡æ²»ç†</h4><h4 id="4-1-4-2-åœ¨ä¼ ç»Ÿçš„-rpc-è¿œç¨‹è°ƒç”¨æ¡†æ¶ä¸­ï¼Œç®¡ç†æ¯ä¸ªæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œç®¡ç†å›°éš¾ï¼Œæ‰€ä»¥-éœ€è¦æ²»ç†æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»"><a href="#4-1-4-2-åœ¨ä¼ ç»Ÿçš„-rpc-è¿œç¨‹è°ƒç”¨æ¡†æ¶ä¸­ï¼Œç®¡ç†æ¯ä¸ªæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œç®¡ç†å›°éš¾ï¼Œæ‰€ä»¥-éœ€è¦æ²»ç†æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»" class="headerlink" title="4.1.4.2 åœ¨ä¼ ç»Ÿçš„ rpc è¿œç¨‹è°ƒç”¨æ¡†æ¶ä¸­ï¼Œç®¡ç†æ¯ä¸ªæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œç®¡ç†å›°éš¾ï¼Œæ‰€ä»¥ éœ€è¦æ²»ç†æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»"></a>4.1.4.2 åœ¨ä¼ ç»Ÿçš„ rpc è¿œç¨‹è°ƒç”¨æ¡†æ¶ä¸­ï¼Œç®¡ç†æ¯ä¸ªæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œç®¡ç†å›°éš¾ï¼Œæ‰€ä»¥ éœ€è¦æ²»ç†æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»</h4><h4 id="4-1-4-3-æœåŠ¡æ²»ç†å®ç°æœåŠ¡è°ƒç”¨ã€è´Ÿè½½å‡è¡¡ã€å®¹é”™ç­‰ï¼Œå®ç°æœåŠ¡å‘ç°ä¸æ³¨å†Œã€‚"><a href="#4-1-4-3-æœåŠ¡æ²»ç†å®ç°æœåŠ¡è°ƒç”¨ã€è´Ÿè½½å‡è¡¡ã€å®¹é”™ç­‰ï¼Œå®ç°æœåŠ¡å‘ç°ä¸æ³¨å†Œã€‚" class="headerlink" title="4.1.4.3 æœåŠ¡æ²»ç†å®ç°æœåŠ¡è°ƒç”¨ã€è´Ÿè½½å‡è¡¡ã€å®¹é”™ç­‰ï¼Œå®ç°æœåŠ¡å‘ç°ä¸æ³¨å†Œã€‚"></a>4.1.4.3 æœåŠ¡æ²»ç†å®ç°æœåŠ¡è°ƒç”¨ã€è´Ÿè½½å‡è¡¡ã€å®¹é”™ç­‰ï¼Œå®ç°æœåŠ¡å‘ç°ä¸æ³¨å†Œã€‚</h4><h4 id="4-1-4-4-äºŒè¯´åˆ†å¸ƒå¼å¼€å‘-https-jingyan-baidu-com-article-46650658def479f549e5f83e-html"><a href="#4-1-4-4-äºŒè¯´åˆ†å¸ƒå¼å¼€å‘-https-jingyan-baidu-com-article-46650658def479f549e5f83e-html" class="headerlink" title="4.1.4.4 äºŒè¯´åˆ†å¸ƒå¼å¼€å‘: https://jingyan.baidu.com/article/46650658def479f549e5f83e.html"></a>4.1.4.4 äºŒè¯´åˆ†å¸ƒå¼å¼€å‘: <a href="https://jingyan.baidu.com/article/46650658def479f549e5f83e.html">https://jingyan.baidu.com/article/46650658def479f549e5f83e.html</a></h4><h3 id="4-1-5-æœåŠ¡æ³¨å†Œå’Œå‘ç°"><a href="#4-1-5-æœåŠ¡æ³¨å†Œå’Œå‘ç°" class="headerlink" title="4.1.5 æœåŠ¡æ³¨å†Œå’Œå‘ç°"></a><strong>4.1.5</strong> æœåŠ¡æ³¨å†Œå’Œå‘ç°</h3><p>Eurekaé‡‡ç”¨äº†CS [client-server-javaåŸºç¡€æˆ‘ä»¬è®²è¿‡ä¸€ä¸ªå¤šäººèŠå¤©é¡¹ç›®] çš„è®¾è®¡æ¶æ„ï¼ŒEureka Server ä½œä¸ºæœåŠ¡æ³¨å†ŒåŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œå®ƒæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚</p><p>ç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œ<strong>ä½¿ç”¨ Eurekaçš„å®¢æˆ·ç«¯è¿æ¥åˆ° Eureka Server</strong>å¹¶ç»´æŒå¿ƒè·³è¿æ¥ï¼Œé€šè¿‡ Eureka Server æ¥ç›‘æ§ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</p><p>åœ¨æœåŠ¡æ³¨å†Œä¸å‘ç°ä¸­ï¼Œæœ‰ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒã€‚å½“æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šæŠŠå½“å‰è‡ªå·±æœåŠ¡å™¨çš„ä¿¡æ¯ æ¯”å¦‚ æœåŠ¡åœ°å€é€šè®¯åœ°å€ç­‰ä»¥åˆ«åæ–¹å¼æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒä¸Šã€‚</p><p>æœåŠ¡æ¶ˆè´¹è€…æˆ–è€…æœåŠ¡æä¾›è€…ï¼Œä»¥æœåŠ¡åˆ«åçš„æ–¹å¼å»æ³¨å†Œä¸­å¿ƒä¸Šè·å–åˆ°å®é™…çš„æœåŠ¡æä¾›è€…é€šè®¯åœ°å€ï¼Œç„¶åé€šè¿‡RPCè°ƒç”¨æœåŠ¡ã€‚</p><h2 id="4-2-åˆ›å»ºå•æœº-Eureka-Server-æ³¨å†Œä¸­å¿ƒ"><a href="#4-2-åˆ›å»ºå•æœº-Eureka-Server-æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="4.2 åˆ›å»ºå•æœº Eureka Server-æ³¨å†Œä¸­å¿ƒ"></a>4.2 åˆ›å»ºå•æœº Eureka Server-æ³¨å†Œä¸­å¿ƒ</h2><h3 id="4-2-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£"><a href="#4-2-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£" class="headerlink" title="4.2.1 éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£"></a><strong>4.2.1</strong> éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230522104534270.png" alt="image-20230522104534270"></p><h3 id="4-2-2-å®ç°æ­¥éª¤"><a href="#4-2-2-å®ç°æ­¥éª¤" class="headerlink" title="4.2.2 å®ç°æ­¥éª¤"></a><strong>4.2.2</strong> å®ç°æ­¥éª¤</h3><h4 id="4-2-2-1-åˆ›å»º-Moduel-amp-å®Œæˆé…ç½®"><a href="#4-2-2-1-åˆ›å»º-Moduel-amp-å®Œæˆé…ç½®" class="headerlink" title="4.2.2.1 åˆ›å»º Moduel &amp; å®Œæˆé…ç½®"></a>4.2.2.1 åˆ›å»º Moduel &amp; å®Œæˆé…ç½®</h4><h5 id="4-2-2-1-1-åˆ›å»º-e-commerce-eureka-server-9001-å¾®æœåŠ¡æ¨¡å—-ä½œä¸ºæ³¨å†Œä¸­å¿ƒ"><a href="#4-2-2-1-1-åˆ›å»º-e-commerce-eureka-server-9001-å¾®æœåŠ¡æ¨¡å—-ä½œä¸ºæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="4.2.2.1.1 åˆ›å»º e-commerce-eureka-server-9001 å¾®æœåŠ¡æ¨¡å—**[**ä½œä¸ºæ³¨å†Œä¸­å¿ƒ]"></a>4.2.2.1.1 åˆ›å»º <strong>e-commerce-eureka-server-9001</strong> å¾®æœåŠ¡æ¨¡å—**[**ä½œä¸ºæ³¨å†Œä¸­å¿ƒ]</h5><h6 id="åˆ›å»º-module"><a href="#åˆ›å»º-module" class="headerlink" title="åˆ›å»º module"></a>åˆ›å»º <strong>module</strong></h6><h6 id="4-2-2-1-2-ä¿®æ”¹-e-commerce-eureka-server-9001-çš„-pom-xml-åŠ å…¥ä¾èµ–"><a href="#4-2-2-1-2-ä¿®æ”¹-e-commerce-eureka-server-9001-çš„-pom-xml-åŠ å…¥ä¾èµ–" class="headerlink" title="4.2.2.1.2 ä¿®æ”¹ e-commerce-eureka-server-9001 çš„ pom.xml , åŠ å…¥ä¾èµ–"></a>4.2.2.1.2 ä¿®æ”¹ <strong>e-commerce-eureka-server-9001</strong> çš„ <strong>pom.xml ,</strong> åŠ å…¥ä¾èµ–</h6><h6 id="4-2-2-1-3-åˆ›å»º-resources-x2F-application-yml"><a href="#4-2-2-1-3-åˆ›å»º-resources-x2F-application-yml" class="headerlink" title="4.2.2.1.3 åˆ›å»º resources&#x2F;application.yml"></a><strong>4.2.2.1.3</strong> åˆ›å»º <strong>resources&#x2F;application.yml</strong></h6><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9001</span></span><br><span class="line"><span class="comment"># é…ç½®eureka-server</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span> <span class="comment">#æœåŠ¡å®ä¾‹å</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="comment">#ä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">#è¡¨ç¤ºè‡ªå·±å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œä½œç”¨æ˜¯ç»´æŠ¤æ³¨å†ŒæœåŠ¡å®ä¾‹ï¼Œä¸éœ€è¦å»æ£€ç´¢æœåŠ¡</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span></span><br></pre></td></tr></table></figure><h6 id="4-2-2-1-4-åˆ›å»ºä¸»å¯åŠ¨ç±»-com-x2F-hspedu-x2F-springcloud-x2F-EurekaApplication-java"><a href="#4-2-2-1-4-åˆ›å»ºä¸»å¯åŠ¨ç±»-com-x2F-hspedu-x2F-springcloud-x2F-EurekaApplication-java" class="headerlink" title="4.2.2.1.4 åˆ›å»ºä¸»å¯åŠ¨ç±» com&#x2F;hspedu&#x2F;springcloud&#x2F;EurekaApplication.java"></a><strong>4.2.2.1.4</strong> åˆ›å»ºä¸»å¯åŠ¨ç±» <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;EurekaApplication.java</strong></h6><p>è®°å¾—æ·»åŠ @EnableEurekaServerï¼Œè¡¨ç¤ºè¯¥ç¨‹åºä½œä¸ºEurekaServer</p><h3 id="4-2-3-å°†-member-service-provider-10000-ä½œ-ä¸º-EurekaClient-æ³¨-å†Œ-åˆ°-e-commerce-eureka-server-9001-æˆä¸ºæœåŠ¡æä¾›è€…"><a href="#4-2-3-å°†-member-service-provider-10000-ä½œ-ä¸º-EurekaClient-æ³¨-å†Œ-åˆ°-e-commerce-eureka-server-9001-æˆä¸ºæœåŠ¡æä¾›è€…" class="headerlink" title="4.2.3 å°† member-service-provider-10000 ä½œ ä¸º EurekaClient æ³¨ å†Œ åˆ° e-commerce-eureka-server-9001 æˆä¸ºæœåŠ¡æä¾›è€…"></a><strong>4.2.3</strong> å°† <strong>member-service-provider-10000</strong> ä½œ ä¸º <strong>EurekaClient</strong> æ³¨ å†Œ åˆ° <strong>e-commerce-eureka-server-9001</strong> æˆä¸ºæœåŠ¡æä¾›è€…</h3><h4 id="4-2-3-1-æ¶æ„ç¤ºæ„å›¾"><a href="#4-2-3-1-æ¶æ„ç¤ºæ„å›¾" class="headerlink" title="4.2.3.1 æ¶æ„ç¤ºæ„å›¾"></a>4.2.3.1 æ¶æ„ç¤ºæ„å›¾</h4><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230522124755649.png" alt="image-20230522124755649" style="zoom:50%;" /><h4 id="4-2-3-2-ä¿®æ”¹-member-service-provider-10000-çš„-pom-xml"><a href="#4-2-3-2-ä¿®æ”¹-member-service-provider-10000-çš„-pom-xml" class="headerlink" title="4.2.3.2 ä¿®æ”¹ member-service-provider-10000 çš„ pom.xml"></a>4.2.3.2 ä¿®æ”¹ member-service-provider-10000 çš„ pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--       å¼•å…¥eureka-clientåœºæ™¯å¯åŠ¨å™¨starter--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="4-2-3-3-ä¿®æ”¹-member-service-provider-10000-çš„-resources-x2F-application-yml"><a href="#4-2-3-3-ä¿®æ”¹-member-service-provider-10000-çš„-resources-x2F-application-yml" class="headerlink" title="4.2.3.3 ä¿®æ”¹ member-service-provider-10000 çš„ resources&#x2F;application.yml"></a>4.2.3.3 ä¿®æ”¹ member-service-provider-10000 çš„ resources&#x2F;application.yml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">member-service-provider-10000</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/e_commerce_center_db?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">QWEASDzxc123</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.study.springcloud.entity</span></span><br><span class="line"><span class="comment">#é…ç½®eureka-client</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span> <span class="comment">#å°†è‡ªå·±æ³¨å†Œåˆ°Eureka-server</span></span><br><span class="line">    <span class="comment">#è¡¨ç¤ºä»Eureka-serveræŠ“å–æ³¨å†Œä¿¡æ¯</span></span><br><span class="line">    <span class="comment">#å¦‚æœæ˜¯å•èŠ‚ç‚¹ï¼Œå¯ä»¥ä¸é…ç½®ï¼›</span></span><br><span class="line">    <span class="comment">#ä½†æ˜¯provideræ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œåˆ™å¿…é¡»å°†æ­¤é¡¹é…ç½®ä¸ºtrueï¼Œè¿™æ ·æ‰èƒ½é…åˆRibbonä½¿ç”¨è´Ÿè½½å‡è¡¡åŠŸèƒ½</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="comment"># è¡¨ç¤ºå°†è‡ªå·±æ³¨å†Œåˆ°å“ªä¸ªeureka-server</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:9001/eureka</span></span><br></pre></td></tr></table></figure><h4 id="4-2-3-4-ä¿®æ”¹-member-service-provider-10000-çš„-com-x2F-hspedu-x2F-springcloud-x2F-MemberApplication-java"><a href="#4-2-3-4-ä¿®æ”¹-member-service-provider-10000-çš„-com-x2F-hspedu-x2F-springcloud-x2F-MemberApplication-java" class="headerlink" title="4.2.3.4 ä¿®æ”¹ member-service-provider-10000 çš„ com&#x2F;hspedu&#x2F;springcloud&#x2F;MemberApplication.java"></a>4.2.3.4 ä¿®æ”¹ member-service-provider-10000 çš„ com&#x2F;hspedu&#x2F;springcloud&#x2F;MemberApplication.java</h4><p>æ·»åŠ æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@EnableEurekaClient,å°†è¯¥ç¨‹åºæ ‡è¯†ä¸ºEureka-client</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br></pre></td></tr></table></figure><h4 id="4-2-3-5-å®Œæˆæµ‹è¯•"><a href="#4-2-3-5-å®Œæˆæµ‹è¯•" class="headerlink" title="4.2.3.5 å®Œæˆæµ‹è¯•"></a>4.2.3.5 å®Œæˆæµ‹è¯•</h4><h5 id="4-2-3-5-1-å¯åŠ¨-e-commerce-eureka-server-9001"><a href="#4-2-3-5-1-å¯åŠ¨-e-commerce-eureka-server-9001" class="headerlink" title="4.2.3.5.1 å¯åŠ¨ **e-commerce-eureka-server-9001 **"></a><strong>4.2.3.5.1</strong> å¯åŠ¨ **e-commerce-eureka-server-9001 **</h5><h5 id="4-2-3-5-2-å¯åŠ¨-member-service-provider-10000"><a href="#4-2-3-5-2-å¯åŠ¨-member-service-provider-10000" class="headerlink" title="4.2.3.5.2 å¯åŠ¨ **member-service-provider-10000 **"></a><strong>4.2.3.5.2</strong> å¯åŠ¨ **member-service-provider-10000 **</h5><h5 id="4-2-3-5-3-æµè§ˆå™¨-http-localhost-9001"><a href="#4-2-3-5-3-æµè§ˆå™¨-http-localhost-9001" class="headerlink" title="4.2.3.5.3 æµè§ˆå™¨**: http://localhost:9001**"></a><strong>4.2.3.5.3</strong> æµè§ˆå™¨**: <a href="http://localhost:9001/">http://localhost:9001</a>**</h5><h5 id="4-2-3-5-4-å¾®æœåŠ¡æ³¨å†Œåé…ç½®è¯´æ˜"><a href="#4-2-3-5-4-å¾®æœåŠ¡æ³¨å†Œåé…ç½®è¯´æ˜" class="headerlink" title="4.2.3.5.4 å¾®æœåŠ¡æ³¨å†Œåé…ç½®è¯´æ˜"></a><strong>4.2.3.5.4</strong> å¾®æœåŠ¡æ³¨å†Œåé…ç½®è¯´æ˜</h5><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230522130616526.png" alt="image-20230522130616526"></p><h3 id="4-2-4-é…-ç½®-member-service-consumer-80-ä½œ-ä¸º-EurekaClientï¼Œ-å¯-ä»¥-æ‹‰å–-x2F-è·-å–e-commerce-eureka-server-9001-æä¾›çš„æœåŠ¡ä¿¡æ¯"><a href="#4-2-4-é…-ç½®-member-service-consumer-80-ä½œ-ä¸º-EurekaClientï¼Œ-å¯-ä»¥-æ‹‰å–-x2F-è·-å–e-commerce-eureka-server-9001-æä¾›çš„æœåŠ¡ä¿¡æ¯" class="headerlink" title="4.2.4 é… ç½® member-service-consumer-80 ä½œ ä¸º EurekaClientï¼Œ å¯ ä»¥ æ‹‰å– &#x2F; è· å–e-commerce-eureka-server-9001 æä¾›çš„æœåŠ¡ä¿¡æ¯"></a><strong>4.2.4</strong> é… ç½® <strong>member-service-consumer-80</strong> ä½œ ä¸º <strong>EurekaClient</strong>ï¼Œ å¯ ä»¥ æ‹‰å– <strong>&#x2F;</strong> è· å–e-commerce-eureka-server-9001 æä¾›çš„æœåŠ¡ä¿¡æ¯</h3><h4 id="4-2-4-1-æ¶æ„ç¤ºæ„å›¾"><a href="#4-2-4-1-æ¶æ„ç¤ºæ„å›¾" class="headerlink" title="4.2.4.1 æ¶æ„ç¤ºæ„å›¾"></a>4.2.4.1 æ¶æ„ç¤ºæ„å›¾</h4><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230522202407897.png" alt="image-20230522202407897"></p><h4 id="4-2-4-2-ä¿®æ”¹-pom-xml"><a href="#4-2-4-2-ä¿®æ”¹-pom-xml" class="headerlink" title="4.2.4.2 ä¿®æ”¹ pom.xml"></a>4.2.4.2 ä¿®æ”¹ pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--       å¼•å…¥eureka-clientåœºæ™¯å¯åŠ¨å™¨starter--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="4-2-4-3-ä¿®æ”¹-application-yml"><a href="#4-2-4-3-ä¿®æ”¹-application-yml" class="headerlink" title="4.2.4.3 ä¿®æ”¹ application.yml"></a>4.2.4.3 ä¿®æ”¹ application.yml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">åœ¨åŸæœ¬çš„é…ç½®åœ¨å¢åŠ ï¼š</span></span><br><span class="line"><span class="comment">#é…ç½®eureka-client</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span> <span class="comment">#å°†è‡ªå·±æ³¨å†Œåˆ°Eureka-server</span></span><br><span class="line">    <span class="comment">#è¡¨ç¤ºä»Eureka-serveræŠ“å–æ³¨å†Œä¿¡æ¯</span></span><br><span class="line">    <span class="comment">#å¦‚æœæ˜¯å•èŠ‚ç‚¹ï¼Œå¯ä»¥ä¸é…ç½®ï¼›</span></span><br><span class="line">    <span class="comment">#ä½†æ˜¯provideræ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œåˆ™å¿…é¡»å°†æ­¤é¡¹é…ç½®ä¸ºtrueï¼Œè¿™æ ·æ‰èƒ½é…åˆRibbonä½¿ç”¨è´Ÿè½½å‡è¡¡åŠŸèƒ½</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="comment"># è¡¨ç¤ºå°†è‡ªå·±æ³¨å†Œåˆ°å“ªä¸ªeureka-server</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:9001/eureka</span></span><br></pre></td></tr></table></figure><h4 id="4-2-4-4-ä¿®æ”¹-MemberConsumerApplication-java"><a href="#4-2-4-4-ä¿®æ”¹-MemberConsumerApplication-java" class="headerlink" title="4.2.4.4 ä¿®æ”¹ MemberConsumerApplication.java"></a>4.2.4.4 ä¿®æ”¹ MemberConsumerApplication.java</h4><p>æ·»åŠ æ³¨è§£ï¼š@EnableEurekaClient             å°†è¯¥ç¨‹åºæ ‡è¯†ä¸ºEureka-client</p><h4 id="4-2-4-5-å®Œæˆæµ‹è¯•"><a href="#4-2-4-5-å®Œæˆæµ‹è¯•" class="headerlink" title="4.2.4.5 å®Œæˆæµ‹è¯•"></a>4.2.4.5 å®Œæˆæµ‹è¯•</h4><h5 id="4-2-4-5-1-å¯åŠ¨-e-commerce-eureka-server-9001"><a href="#4-2-4-5-1-å¯åŠ¨-e-commerce-eureka-server-9001" class="headerlink" title="4.2.4.5.1 å¯åŠ¨ **e-commerce-eureka-server-9001 **"></a><strong>4.2.4.5.1</strong> å¯åŠ¨ **e-commerce-eureka-server-9001 **</h5><h5 id="4-2-4-5-2-å¯åŠ¨-member-service-consumer-80"><a href="#4-2-4-5-2-å¯åŠ¨-member-service-consumer-80" class="headerlink" title="4.2.4.5.2 å¯åŠ¨ **member-service-consumer-80 **"></a><strong>4.2.4.5.2</strong> å¯åŠ¨ **member-service-consumer-80 **</h5><h5 id="4-2-4-5-3-æµè§ˆå™¨-http-localhost-9001"><a href="#4-2-4-5-3-æµè§ˆå™¨-http-localhost-9001" class="headerlink" title="4.2.4.5.3 æµè§ˆå™¨**: http://localhost:9001**"></a><strong>4.2.4.5.3</strong> æµè§ˆå™¨**: <a href="http://localhost:9001/">http://localhost:9001</a>**</h5><h3 id="4-2-5-Service-Consumer-ã€Service-Provider-ã€EurekaServer-çš„ç»´æŠ¤æœºåˆ¶"><a href="#4-2-5-Service-Consumer-ã€Service-Provider-ã€EurekaServer-çš„ç»´æŠ¤æœºåˆ¶" class="headerlink" title="4.2.5 Service Consumer ã€Service Provider ã€EurekaServer çš„ç»´æŠ¤æœºåˆ¶"></a><strong>4.2.5 Service Consumer</strong> ã€<strong>Service Provider</strong> ã€<strong>EurekaServer</strong> çš„ç»´æŠ¤æœºåˆ¶</h3><p>EurekaServerä¸­ç»´æŠ¤äº†æœåŠ¡ä¿¡æ¯â€”â€”ä¸€ä¸ªé”®å€¼å¯¹ï¼škeyæ˜¯<strong>æœåŠ¡å</strong>ï¼Œvalueæ˜¯ <strong>è°ƒç”¨æœåŠ¡çš„åœ°å€</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230526170804321.png" alt="image-20230526170804321"></p><h3 id="4-2-6-Eurekaè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼"><a href="#4-2-6-Eurekaè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼" class="headerlink" title="4.2.6 Eurekaè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼"></a><strong>4.2.6 Eureka</strong>è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼</h3><h4 id="4-2-6-1-è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ç†è®º"><a href="#4-2-6-1-è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ç†è®º" class="headerlink" title="4.2.6.1 è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ç†è®º"></a>4.2.6.1 è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ç†è®º</h4><ol><li><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ <strong>Eureka å¯åŠ¨äº†è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼</strong></p></li><li><p>è‡ªæˆ‘ä¿è¯æœºåˆ¶&#x2F;æ¨¡å¼è¯´æ˜</p><ul><li><p>é»˜è®¤æƒ…æ³ä¸‹Eurekaclientå®šæ—¶å‘EurekaServerç«¯å‘é€å¿ƒè·³åŒ…ã€‚</p></li><li><p>å¦‚æœEurekaåœ¨serverç«¯åœ¨ä¸€å®šæ—¶é—´å†…ï¼ˆé»˜è®¤90ç§’ï¼‰æ²¡æœ‰æ”¶åˆ°Eurekaclientå‘é€å¿ƒè·³åŒ…ï¼Œä¾¿ä¼šç›´æ¥ä»æœåŠ¡æ³¨å†Œåˆ—è¡¨ä¸­å‰”é™¤è¯¥æœåŠ¡ã€‚</p></li><li><p>å¦‚æœEureka å¼€å¯äº†è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼&#x2F;æœºåˆ¶ï¼Œé‚£ä¹ˆåœ¨çŸ­æ—¶é—´ (90ç§’ä¸­ï¼‰å†…ä¸¢å¤±äº†å¤§é‡çš„æœåŠ¡å®ä¾‹å¿ƒè·³ï¼Œè¿™æ—¶å€™EurekaServerä¼šå¼€å¯è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œä¸ä¼šå‰”é™¤è¯¥æœåŠ¡ï¼ˆè¯¥ç°è±¡å¯èƒ½å‡ºç°åœ¨å¦‚æœç½‘ç»œä¸é€šæˆ–è€…é˜»é‘«) å› ä¸ºå®¢æˆ·ç«¯è¿˜èƒ½æ­£å¸¸å‘é€å¿ƒè·³ï¼Œåªæ˜¯ç½‘ç»œå»¶è¿Ÿé—®é¢˜ï¼Œè€Œä¿æŠ¤æœºåˆ¶æ˜¯ä¸ºäº†è§£å†³æ­¤é—®é¢˜è€Œäº§ç”Ÿçš„ã€‚</p></li></ul></li><li><p>è‡ªæˆ‘ä¿æŠ¤æ˜¯å±äº <strong>CAP</strong> é‡Œé¢çš„ AP åˆ†æ”¯ï¼Œ ä¿è¯é«˜å¯ç”¨å’Œåˆ†åŒºå®¹é”™æ€§ã€‚(capè§£è¯»ï¼š<a href="https://blog.csdn.net/wangliangluang/article/details/120626014">https://blog.csdn.net/wangliangluang/article/details/120626014</a>)</p></li><li><p>è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼æ˜¯â€”ç§<strong>åº”å¯¹ç½‘ç»œå¼‚å¸¸çš„å®‰å…¨ä¿æŠ¤æªæ–½</strong>ã€‚å®ƒçš„æ¶æ„å“²å­¦æ˜¯å®å¯åŒæ—¶ä¿ç•™æ‰€æœ‰å¾®æœåŠ¡(å¥åº·çš„å¾®æœåŠ¡å’Œä¸å¥åº·çš„å¾®æœåŠ¡éƒ½ä¼šä¿ç•™)ä¹Ÿä¸ç›²ç›®æ³¨é”€ä»»ä½•å¥åº·çš„å¾®æœ åŠ¡ã€‚ä½¿ç”¨è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œå¯ä»¥è®© Eureka é›†ç¾¤æ›´åŠ çš„å¥å£®ã€ç¨³å®šã€‚</p></li><li><p>æµ‹è¯•ï¼š</p><p>â€¦â€¦</p></li></ol><h2 id="4-3-æ­å»º-EurekaServer-é›†ç¾¤-å®ç°è´Ÿè½½å‡è¡¡-amp-æ•…éšœå®¹é”™"><a href="#4-3-æ­å»º-EurekaServer-é›†ç¾¤-å®ç°è´Ÿè½½å‡è¡¡-amp-æ•…éšœå®¹é”™" class="headerlink" title="4.3 æ­å»º EurekaServer é›†ç¾¤- å®ç°è´Ÿè½½å‡è¡¡&amp;æ•…éšœå®¹é”™"></a>4.3 æ­å»º EurekaServer é›†ç¾¤- å®ç°è´Ÿè½½å‡è¡¡&amp;æ•…éšœå®¹é”™</h2><h3 id="4-3-1-ä¸ºä»€ä¹ˆéœ€è¦é›†ç¾¤-Eureka-Server"><a href="#4-3-1-ä¸ºä»€ä¹ˆéœ€è¦é›†ç¾¤-Eureka-Server" class="headerlink" title="4.3.1 ä¸ºä»€ä¹ˆéœ€è¦é›†ç¾¤ Eureka Server"></a><strong>4.3.1</strong> ä¸ºä»€ä¹ˆéœ€è¦é›†ç¾¤ Eureka Server</h3><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230528115636389.png" alt="image-20230528115636389" style="zoom:50%;" /><ol><li><p>å¾®æœåŠ¡ RPC è¿œç¨‹æœåŠ¡è°ƒç”¨æœ€æ ¸å¿ƒçš„æ˜¯å®ç°é«˜å¯ç”¨</p></li><li><p>å¦‚æœæ³¨å†Œä¸­å¿ƒåªæœ‰1ä¸ªï¼Œå®ƒå‡ºæ•…éšœï¼Œä¼šå¯¼è‡´æ•´ä¸ªæœåŠ¡ç¯å¢ƒä¸å¯ç”¨</p></li><li><p>è§£å†³åŠæ³•ï¼šæ­å»º <strong>Eureka æ³¨å†Œä¸­å¿ƒé›†ç¾¤</strong>ï¼Œ<strong>å®ç°è´Ÿè½½å‡è¡¡+æ•…éšœå®¹é”™</strong></p></li></ol><h3 id="4-3-2éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#4-3-2éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="4.3.2éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a>4.3.2éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230528120007909.png" alt="image-20230528120007909"></p><h3 id="4-3-3-æ­å»º-Eureka-Server-é›†ç¾¤"><a href="#4-3-3-æ­å»º-Eureka-Server-é›†ç¾¤" class="headerlink" title="4.3.3 æ­å»º Eureka Server é›†ç¾¤"></a><strong>4.3.3</strong> æ­å»º <strong>Eureka Server</strong> é›†ç¾¤</h3><h4 id="4-3-3-1-åˆ›å»º-e-commerce-eureka-server-9002-å¾®æœåŠ¡æ¨¡å—-ä½œä¸ºæ³¨å†Œä¸­å¿ƒ"><a href="#4-3-3-1-åˆ›å»º-e-commerce-eureka-server-9002-å¾®æœåŠ¡æ¨¡å—-ä½œä¸ºæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="4.3.3.1 åˆ›å»º e-commerce-eureka-server-9002 å¾®æœåŠ¡æ¨¡å—[ä½œä¸ºæ³¨å†Œä¸­å¿ƒ]"></a>4.3.3.1 åˆ›å»º e-commerce-eureka-server-9002 å¾®æœåŠ¡æ¨¡å—[ä½œä¸ºæ³¨å†Œä¸­å¿ƒ]</h4><h5 id="4-3-3-1-1-åˆ›å»ºæ­¥éª¤å‚è€ƒ-e-commerce-eureka-server-9001"><a href="#4-3-3-1-1-åˆ›å»ºæ­¥éª¤å‚è€ƒ-e-commerce-eureka-server-9001" class="headerlink" title="4.3.3.1.1 åˆ›å»ºæ­¥éª¤å‚è€ƒ e-commerce-eureka-server-9001"></a><strong>4.3.3.1.1</strong> åˆ›å»ºæ­¥éª¤å‚è€ƒ <strong>e-commerce-eureka-server-9001</strong></h5><h5 id="4-3-3-1-2-ä¿®æ”¹-pom-xml-åŠ å…¥ä¾èµ–"><a href="#4-3-3-1-2-ä¿®æ”¹-pom-xml-åŠ å…¥ä¾èµ–" class="headerlink" title="4.3.3.1.2 ä¿®æ”¹ pom.xml , åŠ å…¥ä¾èµ–"></a><strong>4.3.3.1.2</strong> ä¿®æ”¹ <strong>pom.xml ,</strong> åŠ å…¥ä¾èµ–</h5><h5 id="4-3-3-1-3-åˆ›å»º-resources-x2F-application-yml"><a href="#4-3-3-1-3-åˆ›å»º-resources-x2F-application-yml" class="headerlink" title="4.3.3.1.3 åˆ›å»º resources&#x2F;application.yml"></a><strong>4.3.3.1.3</strong> åˆ›å»º <strong>resources&#x2F;application.yml</strong></h5><h5 id="4-3-3-1-4-åˆ›å»ºä¸»å¯åŠ¨ç±»-EurekaApplication9002-java"><a href="#4-3-3-1-4-åˆ›å»ºä¸»å¯åŠ¨ç±»-EurekaApplication9002-java" class="headerlink" title="4.3.3.1.4 åˆ›å»ºä¸»å¯åŠ¨ç±» EurekaApplication9002.java"></a><strong>4.3.3.1.4</strong> åˆ›å»ºä¸»å¯åŠ¨ç±» <strong>EurekaApplication9002.java</strong></h5><h4 id="4-3-3-2-ä¿®æ”¹-e-commerce-eureka-server-9001-å¾®æœåŠ¡æ¨¡å—"><a href="#4-3-3-2-ä¿®æ”¹-e-commerce-eureka-server-9001-å¾®æœåŠ¡æ¨¡å—" class="headerlink" title="4.3.3.2 ä¿®æ”¹ e-commerce-eureka-server-9001 å¾®æœåŠ¡æ¨¡å—"></a>4.3.3.2 ä¿®æ”¹ e-commerce-eureka-server-9001 å¾®æœåŠ¡æ¨¡å—</h4><h5 id="4-3-3-2-1-ä¿®æ”¹-resources-x2F-application-yml"><a href="#4-3-3-2-1-ä¿®æ”¹-resources-x2F-application-yml" class="headerlink" title="4.3.3.2.1 ä¿®æ”¹ resources&#x2F;application.yml"></a><strong>4.3.3.2.1</strong> ä¿®æ”¹ <strong>resources&#x2F;application.yml</strong></h5><h5 id="4-3-3-2-2-ä¿®æ”¹ä¸»å¯åŠ¨ç±»åä¸º-EurekaApplication9001-java"><a href="#4-3-3-2-2-ä¿®æ”¹ä¸»å¯åŠ¨ç±»åä¸º-EurekaApplication9001-java" class="headerlink" title="4.3.3.2.2 ä¿®æ”¹ä¸»å¯åŠ¨ç±»åä¸º EurekaApplication9001.java"></a><strong>4.3.3.2.2</strong> ä¿®æ”¹ä¸»å¯åŠ¨ç±»åä¸º <strong>EurekaApplication9001.java</strong></h5><h4 id="4-3-3-3-ä¿®æ”¹-hosts-æ–‡ä»¶"><a href="#4-3-3-3-ä¿®æ”¹-hosts-æ–‡ä»¶" class="headerlink" title="4.3.3.3 ä¿®æ”¹ hosts æ–‡ä»¶"></a>4.3.3.3 ä¿®æ”¹ hosts æ–‡ä»¶</h4><p>â€‹åŸŸåè½¬ipåœ°å€ï¼šå…ˆæ‰¾æœ¬æœºçš„hostæ–‡ä»¶ï¼Œhostsæ–‡ä»¶ä¸­æ²¡æœ‰æ‰å»DNSæœåŠ¡å™¨å¯»æ‰¾ï¼Œ</p><p>â€‹ç°åœ¨æˆ‘ä»¬éœ€è¦è®¿é—®eureka9001.comè¿™æ ·çš„å½¢å¼ï¼Œå°±éœ€è¦è‡ªè¡Œåœ¨æœ¬æœºçš„hostsæ–‡ä»¶æ·»åŠ é”®å€¼å¯¹å®ç°åŸŸå-&gt;ip</p><p>&#x2F;private&#x2F;etc&#x2F;hostså¤åˆ¶å‡ºæ¥ï¼Œä¿®æ”¹ï¼Œè¦†ç›–åŸæ¥çš„æ–‡ä»¶å³å¯å®Œæˆä¿®æ”¹</p><p>â€‹åœ¨hostsæ–‡ä»¶ä¸­æ·»åŠ å†…å®¹ï¼š</p><p>â€‹<strong>#eureka</strong> ä¸»æœºåå’Œ <strong>ip</strong> æ˜ å°„ </p><p>â€‹**127.0.0.1 eureka9001.com **</p><p>â€‹<strong>127.0.0.1 eureka9002.com</strong></p><h4 id="4-3-3-4-å®Œæˆæµ‹è¯•"><a href="#4-3-3-4-å®Œæˆæµ‹è¯•" class="headerlink" title="4.3.3.4 å®Œæˆæµ‹è¯•"></a>4.3.3.4 å®Œæˆæµ‹è¯•</h4><h5 id="4-3-3-4-1-å¯åŠ¨-e-commerce-eureka-server-9001"><a href="#4-3-3-4-1-å¯åŠ¨-e-commerce-eureka-server-9001" class="headerlink" title="4.3.3.4.1 å¯åŠ¨ **e-commerce-eureka-server-9001"></a><strong>4.3.3.4.1</strong> å¯åŠ¨ **e-commerce-eureka-server-9001</h5><h5 id="4-3-3-4-2-å¯åŠ¨-e-commerce-eureka-server-9002"><a href="#4-3-3-4-2-å¯åŠ¨-e-commerce-eureka-server-9002" class="headerlink" title="4.3.3.4.2** å¯åŠ¨ **e-commerce-eureka-server-9002"></a>4.3.3.4.2** å¯åŠ¨ **e-commerce-eureka-server-9002</h5><h5 id="4-3-3-4-3-æµè§ˆå™¨-http-eureka9001-com-9001-æµè§ˆå™¨-http-eureka9002-com-9002"><a href="#4-3-3-4-3-æµè§ˆå™¨-http-eureka9001-com-9001-æµè§ˆå™¨-http-eureka9002-com-9002" class="headerlink" title="4.3.3.4.3** æµè§ˆå™¨**: http://eureka9001.com:9001** æµè§ˆå™¨**: http://eureka9002.com:9002**"></a>4.3.3.4.3** æµè§ˆå™¨**: <a href="http://eureka9001.com:9001/">http://eureka9001.com:9001</a>** æµè§ˆå™¨**: <a href="http://eureka9002.com:9002/">http://eureka9002.com:9002</a>**</h5><h4 id="4-3-3-5-å°†-member-service-provider-10000-æ³¨å†Œåˆ°-EurekaServer-é›†ç¾¤-ç›®å‰-2-å°"><a href="#4-3-3-5-å°†-member-service-provider-10000-æ³¨å†Œåˆ°-EurekaServer-é›†ç¾¤-ç›®å‰-2-å°" class="headerlink" title="4.3.3.5 å°† member-service-provider-10000 æ³¨å†Œåˆ° EurekaServer é›†ç¾¤(ç›®å‰ 2 å°)"></a>4.3.3.5 å°† member-service-provider-10000 æ³¨å†Œåˆ° EurekaServer é›†ç¾¤(ç›®å‰ 2 å°)</h4><h5 id="4-3-3-5-1-ä¿®æ”¹-resources-x2F-application-yml"><a href="#4-3-3-5-1-ä¿®æ”¹-resources-x2F-application-yml" class="headerlink" title="4.3.3.5.1 ä¿®æ”¹ resources&#x2F;application.yml"></a><strong>4.3.3.5.1</strong> ä¿®æ”¹ <strong>resources&#x2F;application.yml</strong></h5><p>â€˜â€™â€™</p><p>defaultZone: <a href="http://eureka9001.com:9001/eureka">http://eureka9001.com:9001/eureka</a>, <a href="http://eureka9002.com:9002/eureka">http://eureka9002.com:9002/eureka</a></p><p>*#*è¡¨ç¤ºå°†è‡ªå·±æ³¨å†Œåˆ°å“ªä¸ª <em>eurekaServer</em></p><p>å°†æœ¬å¾®æœåŠ¡æ³¨å†Œåˆ°å¤šä¸ª <em>eurekaServer,</em> ä½¿ç”¨é€—å·éš”å¼€</p><p>â€˜â€™â€™</p><h5 id="4-3-3-5-2-å®Œæˆæµ‹è¯•"><a href="#4-3-3-5-2-å®Œæˆæµ‹è¯•" class="headerlink" title="4.3.3.5.2 å®Œæˆæµ‹è¯•"></a><strong>4.3.3.5.2</strong> å®Œæˆæµ‹è¯•</h5><p><strong>1.</strong> <strong>å¯åŠ¨</strong> <strong>e-commerce-eureka-server-9001</strong> <strong>å’Œ</strong> <strong>e-commerce-eureka-server-9002</strong></p><p><strong>2. å¯åŠ¨</strong> <strong>member-service-provider-10000<br>3.</strong> <strong>è§‚å¯Ÿ</strong> <strong>member-service-provider-10000</strong> <strong>æ˜¯å¦æ³¨å†Œåˆ°</strong> <strong>Eureka</strong> <strong>é›†ç¾¤</strong>å‰ <strong>2</strong> <strong>å°</strong>)</p><h4 id="4-3-3-6-å°†-member-service-consumer-80-æ³¨å†Œåˆ°-EurekaServer-é›†ç¾¤-ç›®å‰-2-å°"><a href="#4-3-3-6-å°†-member-service-consumer-80-æ³¨å†Œåˆ°-EurekaServer-é›†ç¾¤-ç›®å‰-2-å°" class="headerlink" title="4.3.3.6 å°† member-service-consumer-80 æ³¨å†Œåˆ° EurekaServer é›†ç¾¤(ç›®å‰ 2 å°)"></a>4.3.3.6 å°† member-service-consumer-80 æ³¨å†Œåˆ° EurekaServer é›†ç¾¤(ç›®å‰ 2 å°)</h4><h5 id="4-3-3-6-1-ä¿®æ”¹-resources-x2F-application-yml"><a href="#4-3-3-6-1-ä¿®æ”¹-resources-x2F-application-yml" class="headerlink" title="4.3.3.6.1 ä¿®æ”¹ resources&#x2F;application.yml"></a><strong>4.3.3.6.1</strong> ä¿®æ”¹ <strong>resources&#x2F;application.yml</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaultZone: http://eureka9001.com:9001/eureka,http://eureka9002.com:9002/eureka</span><br></pre></td></tr></table></figure><h5 id="4-3-3-6-2-å®Œæˆæµ‹è¯•"><a href="#4-3-3-6-2-å®Œæˆæµ‹è¯•" class="headerlink" title="4.3.3.6.2 å®Œæˆæµ‹è¯•"></a><strong>4.3.3.6.2</strong> å®Œæˆæµ‹è¯•</h5><p><strong>1.</strong> <strong>å¯åŠ¨</strong> <strong>e-commerce-eureka-server-9001</strong> <strong>å’Œ</strong> <strong>e-commerce-eureka-server-9002</strong><br><strong>2.</strong> <strong>å¯åŠ¨</strong> <strong>member-service-consumer-80<br>3.</strong> <strong>è§‚å¯Ÿ</strong> <strong>member-service-consumer-80</strong> <strong>æ˜¯å¦æ³¨å†Œåˆ°</strong> <strong>Eureka</strong> <strong>é›†ç¾¤</strong>(<strong>ç›®å‰</strong> <strong>2</strong> <strong>å°</strong>)</p><h3 id="4-3-4-æ­å»ºä¼šå‘˜ä¸­å¿ƒæœåŠ¡æä¾›æ–¹-é›†ç¾¤"><a href="#4-3-4-æ­å»ºä¼šå‘˜ä¸­å¿ƒæœåŠ¡æä¾›æ–¹-é›†ç¾¤" class="headerlink" title="4.3.4 æ­å»ºä¼šå‘˜ä¸­å¿ƒæœåŠ¡æä¾›æ–¹**-**é›†ç¾¤"></a><strong>4.3.4</strong> æ­å»ºä¼šå‘˜ä¸­å¿ƒæœåŠ¡æä¾›æ–¹**-**é›†ç¾¤</h3><h4 id="4-3-4-1-æ¶æ„ç¤ºæ„å›¾"><a href="#4-3-4-1-æ¶æ„ç¤ºæ„å›¾" class="headerlink" title="4.3.4.1 æ¶æ„ç¤ºæ„å›¾"></a>4.3.4.1 æ¶æ„ç¤ºæ„å›¾</h4><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230528140357541.png" alt="image-20230528140357541"></p><h4 id="4-3-4-2-åˆ›å»ºmember-service-provider-10002"><a href="#4-3-4-2-åˆ›å»ºmember-service-provider-10002" class="headerlink" title="4.3.4.2 åˆ›å»ºmember-service-provider-10002"></a>4.3.4.2 åˆ›å»ºmember-service-provider-10002</h4><p>1.å‚è€ƒmember-service-provider-10000 æ¥åˆ›å»º member-service-provider-10002 å³å¯</p><p>2.åˆ›å»ºå¥½åï¼Œä½¿ç”¨memberservice-provider-10000 çš„æº ç å’Œé…ç½®æ›¿æ›member-service-provider-10002 ç”Ÿæˆçš„ä»£ç ï¼ˆä¸è¦åˆ°ç£ç›˜æ•´ä½“æ‹·è´ï¼Œä¼šå‡ºç°å…³è”åˆ° member-service-provider-10000 çš„é—®é¢˜ï¼Œå¾ˆéº»çƒ¦ï¼Œå¯ä»¥åˆ›å»ºå¥½æ–°é¡¹ç›®çš„åŒ…ï¼Œç„¶åå†æ‹·è´å¯¹åº”åŒ…ä¸‹çš„æ–‡ä»¶ï¼Œå°±ä¸ä¼šå‡ºå‘é¢˜ï¼‰</p><p>3.æé†’ï¼Œæ‹·è´æ—¶ä¸è¦å¿˜è®°æ‹·è´ resources&#x2F;mapper&#x2F;Mem berMapper:xml è¿™äº›xaos.xml æ–‡ä»¶</p><h4 id="4-3-4-3-åˆ›å»º-resources-x2F-application-yml"><a href="#4-3-4-3-åˆ›å»º-resources-x2F-application-yml" class="headerlink" title="4.3.4.3 åˆ›å»º resources&#x2F;application.yml"></a>4.3.4.3 åˆ›å»º resources&#x2F;application.yml</h4><p><strong>1.</strong> åˆ›å»ºå¥½ <strong>application.yml</strong></p><p><strong>2.</strong> ä» <strong>member-service-provider-10000</strong> æ‹·è´ <strong>application.yml</strong> çš„å†…å®¹</p><p><strong>3.</strong> ä¿®æ”¹ç«¯å£å·å³å¯</p><h4 id="4-3-4-4-ä¿®æ”¹ä¸»å¯åŠ¨ç±»å"><a href="#4-3-4-4-ä¿®æ”¹ä¸»å¯åŠ¨ç±»å" class="headerlink" title="4.3.4.4 ä¿®æ”¹ä¸»å¯åŠ¨ç±»å"></a>4.3.4.4 ä¿®æ”¹ä¸»å¯åŠ¨ç±»å</h4><p><strong>1.</strong> ä¿®æ”¹ <strong>member-service-provider-10000</strong> çš„ä¸»å¯åŠ¨ç±»ä¸º <strong>MemberProviderApplication10000</strong></p><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>member-service-provider-10002</strong> <strong>çš„ä¸»å¯åŠ¨ç±»ä¸º</strong> <strong>MemberProviderApplication10002</strong></p><h4 id="4-3-4-5-å®Œæˆæµ‹è¯•"><a href="#4-3-4-5-å®Œæˆæµ‹è¯•" class="headerlink" title="4.3.4.5 å®Œæˆæµ‹è¯•"></a>4.3.4.5 å®Œæˆæµ‹è¯•</h4><p>â€¦â€¦</p><h4 id="4-3-4-6-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#4-3-4-6-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="4.3.4.6 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>4.3.4.6 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><ol><li>å› ä¸º member-service-provider-10000 å’Œ mem ber-service-provider-10002 ä½œä¸ºä¸€ä¸ªé›†ç¾¤æä¾›æœåŠ¡ï¼Œå› æ­¤éœ€è¦å°‡ spring.application.name è¿›è¡Œç»Ÿä¸€ã€‚</li><li>è¿™æ ·æ¶ˆè´¹æ–¹é€šè¿‡ç»Ÿä¸€çš„åˆ«åè¿›è¡Œè´Ÿè½½å‡è¡¡è°ƒç”¨ã€‚</li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230528142117680.png" alt="image-20230528142117680" style="zoom:33%;" /><p>å°†ç›¸åŒæœåŠ¡çš„æä¾›æ–¹å¯¹å¤–æš´éœ²çš„åç§°è®¾ç½®ä¸ºç›¸åŒçš„ï¼Œè¿™æ ·å°±æ–¹ä¾¿ç®¡ç†äº†ã€‚</p><h3 id="4-3-5-é…ç½®æœåŠ¡æ¶ˆè´¹ç«¯-member-service-consumer-80-ä½¿ç”¨ä¼šå‘˜ä¸­å¿ƒæœåŠ¡é›†ç¾¤"><a href="#4-3-5-é…ç½®æœåŠ¡æ¶ˆè´¹ç«¯-member-service-consumer-80-ä½¿ç”¨ä¼šå‘˜ä¸­å¿ƒæœåŠ¡é›†ç¾¤" class="headerlink" title="4.3.5 é…ç½®æœåŠ¡æ¶ˆè´¹ç«¯ member-service-consumer-80 ä½¿ç”¨ä¼šå‘˜ä¸­å¿ƒæœåŠ¡é›†ç¾¤"></a><strong>4.3.5</strong> é…ç½®æœåŠ¡æ¶ˆè´¹ç«¯ <strong>member-service-consumer-80</strong> ä½¿ç”¨ä¼šå‘˜ä¸­å¿ƒæœåŠ¡é›†ç¾¤</h3><h4 id="4-3-5-1-æ¶æ„å›¾"><a href="#4-3-5-1-æ¶æ„å›¾" class="headerlink" title="4.3.5.1 æ¶æ„å›¾"></a>4.3.5.1 æ¶æ„å›¾</h4><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230528143413873.png" alt="image-20230528143413873"></p><h4 id="4-3-5-2-ä¿®æ”¹-MemberConsumerController-java"><a href="#4-3-5-2-ä¿®æ”¹-MemberConsumerController-java" class="headerlink" title="4.3.5.2 ä¿®æ”¹ MemberConsumerController.java"></a>4.3.5.2 ä¿®æ”¹ MemberConsumerController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MEMBER_SERVICE_PROVIDER_URL</span> <span class="operator">=</span> <span class="string">&quot;http://member-service-provider&quot;</span>;</span><br><span class="line"><span class="comment">//member-service-providerä¸ºæœåŠ¡æä¾›é›†ç¾¤å¯¹å¤–æš´éœ²çš„ç»Ÿä¸€åç§°</span></span><br></pre></td></tr></table></figure><h4 id="4-3-5-3-ä¿®æ”¹-CustomizationBean-java"><a href="#4-3-5-3-ä¿®æ”¹-CustomizationBean-java" class="headerlink" title="4.3.5.3 ä¿®æ”¹ CustomizationBean.java"></a>4.3.5.3 ä¿®æ”¹ CustomizationBean.java</h4><p>â€‹ç»™ RestTemplateæ·»åŠ æ³¨è§£ï¼š**@LoadBalanced**</p><p>â€‹ç›®çš„æ˜¯ï¼šèµ‹äºˆ <em>RestTemplate</em> è´Ÿè½½å‡è¡¡çš„èƒ½åŠ›</p><h4 id="4-3-5-5-å®Œæˆæµ‹è¯•"><a href="#4-3-5-5-å®Œæˆæµ‹è¯•" class="headerlink" title="4.3.5.5 å®Œæˆæµ‹è¯•"></a>4.3.5.5 å®Œæˆæµ‹è¯•</h4><h5 id="4-3-5-5-1-å¯åŠ¨-eureka-server-é›†ç¾¤-ç›®å‰-2-å°"><a href="#4-3-5-5-1-å¯åŠ¨-eureka-server-é›†ç¾¤-ç›®å‰-2-å°" class="headerlink" title="4.3.5.5.1 å¯åŠ¨ eureka server é›†ç¾¤**(ç›®å‰ 2 å°)**"></a>4.3.5.5.1 å¯åŠ¨ <strong>eureka server</strong> é›†ç¾¤**(<strong>ç›®å‰ <strong>2</strong> å°</strong>)**</h5><h5 id="4-3-5-5-2-å¯åŠ¨-member-service-provider-10000"><a href="#4-3-5-5-2-å¯åŠ¨-member-service-provider-10000" class="headerlink" title="4.3.5.5.2 å¯åŠ¨ member-service-provider-10000"></a>4.3.5.5.2 å¯åŠ¨ <strong>member-service-provider-10000</strong></h5><h5 id="4-3-5-5-3-å¯åŠ¨-member-service-provider-10002"><a href="#4-3-5-5-3-å¯åŠ¨-member-service-provider-10002" class="headerlink" title="4.3.5.5.3 å¯åŠ¨ member-service-provider-10002"></a>4.3.5.5.3 å¯åŠ¨ <strong>member-service-provider-10002</strong></h5><h5 id="4-3-5-5-4ä¸æ€¥ï¼Œå…ˆæµ‹è¯•-http-localhost-10000-member-get-1-å’Œ-http-localhost-10002-member-get-1"><a href="#4-3-5-5-4ä¸æ€¥ï¼Œå…ˆæµ‹è¯•-http-localhost-10000-member-get-1-å’Œ-http-localhost-10002-member-get-1" class="headerlink" title="4.3.5.5.4ä¸æ€¥ï¼Œå…ˆæµ‹è¯• : http://localhost:10000/member/get/1 å’Œ http://localhost:10002/member/get/1"></a><strong>4.3.5.5.4</strong>ä¸æ€¥ï¼Œå…ˆæµ‹è¯• <strong>: <a href="http://localhost:10000/member/get/1">http://localhost:10000/member/get/1</a></strong> å’Œ <strong><a href="http://localhost:10002/member/get/1">http://localhost:10002/member/get/1</a></strong></h5><p>å…ˆçœ‹çœ‹ç›´æ¥ä½¿ç”¨æœåŠ¡æä¾›æ–¹æ—¶æœ‰æ²¡æœ‰é—®é¢˜ï¼Œæ²¡é—®é¢˜å†è¿›è¡Œä¸‹ä¸€æ­¥æµ‹è¯•(æ–¹ä¾¿æ’é”™ï¼)</p><h5 id="4-3-5-5-5-å¯åŠ¨-member-service-consumer-80"><a href="#4-3-5-5-5-å¯åŠ¨-member-service-consumer-80" class="headerlink" title="4.3.5.5.5 å¯åŠ¨ member-service-consumer-80"></a><strong>4.3.5.5.5</strong> å¯åŠ¨ <strong>member-service-consumer-80</strong></h5><h5 id="4-3-5-5-6-æµè§ˆå™¨è®¿é—®-http-localhost-member-consumer-get-1"><a href="#4-3-5-5-6-æµè§ˆå™¨è®¿é—®-http-localhost-member-consumer-get-1" class="headerlink" title="4.3.5.5.6 æµè§ˆå™¨è®¿é—®**: http://localhost/member/consumer/get/1**"></a><strong>4.3.5.5.6</strong> æµè§ˆå™¨è®¿é—®**: <a href="http://localhost/member/consumer/get/1">http://localhost/member/consumer/get/1</a>**</h5><h4 id="4-3-5-6-äº¤æ›¿è®¿é—®memberæœåŠ¡è¯´æ˜"><a href="#4-3-5-6-äº¤æ›¿è®¿é—®memberæœåŠ¡è¯´æ˜" class="headerlink" title="4.3.5.6 äº¤æ›¿è®¿é—®memberæœåŠ¡è¯´æ˜:"></a>4.3.5.6 äº¤æ›¿è®¿é—®memberæœåŠ¡è¯´æ˜:</h4><ol><li>æ³¨è§£@LoadBalanced åº•å±‚æ˜¯Ribbonæ”¯æŒç®—æ³•</li><li>2.Ribbonå’ŒEureka æ•´åˆåconsumer ç›´æ¥è°ƒç”¨æœåŠ¡è€Œä¸ç”¨å†å…³å¿ƒåœ°å€å’Œç«¯å£å·ï¼Œä¸”è¯¥æœåŠ¡è¿˜æœ‰è´Ÿè½½åŠŸèƒ½</li></ol><h3 id="4-3-6-è·å–-Eureka-Server-æœåŠ¡æ³¨å†Œä¿¡æ¯-DiscoveryClient"><a href="#4-3-6-è·å–-Eureka-Server-æœåŠ¡æ³¨å†Œä¿¡æ¯-DiscoveryClient" class="headerlink" title="4.3.6 è·å– Eureka Server æœåŠ¡æ³¨å†Œä¿¡æ¯ -DiscoveryClient"></a><strong>4.3.6</strong> è·å– <strong>Eureka Server</strong> æœåŠ¡æ³¨å†Œä¿¡æ¯ <strong>-DiscoveryClient</strong></h3><h4 id="4-3-6-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#4-3-6-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="4.3.6.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>4.3.6.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> éœ€æ±‚åˆ†æç¤ºæ„å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230528150507261.png" alt="image-20230528150507261"></p><p><strong>2.</strong> <strong>è¿™é‡Œæˆ‘ä»¬ä»¥æœåŠ¡æ¶ˆè´¹æ–¹</strong>ï¼Œ <strong>å»è·å–</strong> <strong>Eureka Server</strong> <strong>çš„æœåŠ¡æ³¨å†Œä¿¡æ¯ä¸ºä¾‹è®²è§£</strong></p><p><strong>3.</strong> <strong>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨æœåŠ¡æä¾›æ–¹è·å–</strong> <strong>Eureka Server</strong> <strong>çš„æœåŠ¡æ³¨å†Œä¿¡æ¯</strong></p><h4 id="4-3-6-2-ä»£ç å®ç°"><a href="#4-3-6-2-ä»£ç å®ç°" class="headerlink" title="4.3.6.2 ä»£ç å®ç°"></a>4.3.6.2 ä»£ç å®ç°</h4><ol><li><strong>æ‰€åœ¨æ¨¡å—  member-service-consumer-80</strong></li><li><strong>ä¿®æ”¹</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberConsumerController.java</strong></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è£…é…DiscoveryClient</span></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> DiscoveryClient discoveryClient;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/member/consumer/discovery&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">discovery</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;String&gt; services = discoveryClient.getServices();</span><br><span class="line">    <span class="keyword">for</span> (String service : services)&#123;</span><br><span class="line">        log.info(<span class="string">&quot;æœåŠ¡å=&#123;&#125;&quot;</span>,service);</span><br><span class="line">        List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(service);</span><br><span class="line">        <span class="keyword">for</span> (ServiceInstance instance : instances)&#123;</span><br><span class="line">            log.info(<span class="string">&quot;id=&#123;&#125;,host=&#123;&#125;,port=&#123;&#125;,uri=&#123;&#125;&quot;</span>,instance.getServiceId(),instance.getHost(),instance.getPort(),instance.getUri());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> discoveryClient;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3.</strong> <strong>è¿™é‡Œä¿®æ”¹ä¸»å¯åŠ¨ç±»</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;MemberConsumerApplication.java</strong></p><p>æ·»åŠ æ³¨è§£ï¼š@EnableDiscoveryClient</p><h4 id="4-3-6-3-æµ‹è¯•"><a href="#4-3-6-3-æµ‹è¯•" class="headerlink" title="4.3.6.3 æµ‹è¯•"></a>4.3.6.3 æµ‹è¯•</h4><p><strong>1.</strong> <strong>é‡å¯</strong> <strong>member-service-consumer-80</strong></p><p><strong>2.</strong> <strong>æµè§ˆå™¨è¾“å‡º</strong> <strong><a href="http://localhost/member/consumer/discovery">http://localhost/member/consumer/discovery</a></strong></p><h4 id="4-3-6-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜"><a href="#4-3-6-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜" class="headerlink" title="4.3.6.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜"></a>4.3.6.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜</h4><ol><li><p>åœ¨å¼•å…¥ <strong>DiscoveryClient</strong> æ—¶ï¼Œä¸è¦å¼•å…¥é”™è¯¯çš„åŒ…ï¼š</p><p>æ­£ç¡®çš„åŒ…**:** <strong>import</strong> <strong>org.springframework.cloud.client.discovery.DiscoveryClient</strong>;</p><p>é”™è¯¯çš„åŒ…**:** <strong>import</strong> <strong>com.netflix.discovery.DiscoveryClient</strong>;</p></li></ol><h2 id="4-4-Eurekaåç»­è¯´æ˜"><a href="#4-4-Eurekaåç»­è¯´æ˜" class="headerlink" title="4.4 Eurekaåç»­è¯´æ˜"></a>4.4 Eurekaåç»­è¯´æ˜</h2><p><strong>1. Eureka</strong> åœæ›´è¯´æ˜**: <a href="https://github.com/Netflix/eureka/wiki">https://github.com/Netflix/eureka/wiki</a>**</p><p><strong>2.</strong> <strong>å¯¹äºä¸€äº›æ—©æœŸä½¿ç”¨</strong> <strong>Eureka</strong> <strong>é¡¹ç›®ï¼ŒæŒæ¡è€å¸ˆè®²è§£æŠ€æœ¯åŸºæœ¬å¯ä»¥åº”ä»˜äº†</strong>(<strong>è¿™ä¹Ÿæ˜¯è€å¸ˆä¸ºä»€ä¹ˆè¿˜ è¦è®²</strong> <strong>Eureka</strong> <strong>çš„åŸå› </strong>)</p><p><strong>3.ç›®å‰æ›¿ä»£ Eureka åšæœåŠ¡æ³¨å†Œå’Œå‘ç°ï¼Œå‡è¡¡è´Ÿè½½çš„ æœ€ä½³ç»„ä»¶æ˜¯ spring Cloud Alibaba Nacosï¼Œåé¢è€å¸ˆä¼šé‡ç‚¹è®²è§£ã€‚</strong></p><p><strong>4.è™½ç„¶Eureka åœæ›´ï¼Œç›®å‰ç”¨çš„ä¸å¤šï¼Œä½†æ˜¯å®ƒçš„æœåŠ¡æ³¨å†Œå’Œå‘ç°ï¼Œå‡è¡¡è´Ÿè½½çš„æ€æƒ³æ˜¯ä¼˜å…ˆçš„ï¼Œæœ‰äº†Eureka çš„åŸºç¡€ï¼Œæˆ‘ä»¬å­¦ä¹  Spring Cloud Alibaba Nacos ä¼šè½»æ¾å¾ˆå¤š</strong></p><h1 id="5-SpringCloudRibbonæœåŠ¡è´Ÿè½½å‡è¡¡"><a href="#5-SpringCloudRibbonæœåŠ¡è´Ÿè½½å‡è¡¡" class="headerlink" title="5 SpringCloudRibbonæœåŠ¡è´Ÿè½½å‡è¡¡"></a><strong>5 SpringCloudRibbon</strong>æœåŠ¡è´Ÿè½½å‡è¡¡</h1><h2 id="5-1-Ribbonä»‹ç»"><a href="#5-1-Ribbonä»‹ç»" class="headerlink" title="5.1 Ribbonä»‹ç»"></a>5.1 Ribbonä»‹ç»</h2><h3 id="5-1-1-Ribbonæ˜¯ä»€ä¹ˆ"><a href="#5-1-1-Ribbonæ˜¯ä»€ä¹ˆ" class="headerlink" title="5.1.1 Ribbonæ˜¯ä»€ä¹ˆ"></a><strong>5.1.1 Ribbon</strong>æ˜¯ä»€ä¹ˆ</h3><ol><li><p>Spring Cloud Ribbon æ˜¯<strong>åŸºäº Netflix Ribbon</strong> å®ç°çš„ä¸€å¥—**<u>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</u>**çš„å·¥å…·ã€‚</p></li><li><p>Ribbon ä¸»è¦åŠŸèƒ½æ˜¯<strong>æä¾›å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ç®—æ³•å’ŒæœåŠ¡è°ƒç”¨</strong></p></li><li><p>Ribbon å®¢æˆ·ç«¯ç»„ä»¶æä¾›ä¸€ç³»åˆ—å®Œå–„çš„é…ç½®é¡¹å¦‚è¿æ¥è¶…æ—¶ï¼Œé‡è¯•ç­‰ã€‚</p></li><li><p>Ribbon ä¼šåŸºäºæŸç§è§„åˆ™ï¼ˆå¦‚ç®€å•è½®è¯¢ï¼Œéšæœºè¿æ¥ç­‰ï¼‰å»è¿æ¥æŒ‡å®šæœåŠ¡</p></li><li><p>ç¨‹åºå‘˜å¾ˆå®¹æ˜“ä½¿ç”¨ Ribbon çš„è´Ÿè½½å‡è¡¡ç®—æ³•å®ç°è´Ÿè½½å‡è¡¡</p></li><li><p>ä¸€å¥è¯ï¼šRibbonï¼š <strong>è´Ÿè½½å‡è¡¡+RestTemplateè°ƒç”¨</strong></p></li></ol><h3 id="5-1-2-å®˜ç½‘"><a href="#5-1-2-å®˜ç½‘" class="headerlink" title="5.1.2 å®˜ç½‘"></a><strong>5.1.2</strong> å®˜ç½‘</h3><h4 id="5-1-2-1-https-github-com-Netflix-ribbon"><a href="#5-1-2-1-https-github-com-Netflix-ribbon" class="headerlink" title="5.1.2.1 https://github.com/Netflix/ribbon"></a>5.1.2.1 <a href="https://github.com/Netflix/ribbon">https://github.com/Netflix/ribbon</a></h4><h3 id="5-1-3-Ribbonè¿›å…¥ç»´æŠ¤çŠ¶æ€"><a href="#5-1-3-Ribbonè¿›å…¥ç»´æŠ¤çŠ¶æ€" class="headerlink" title="5.1.3 Ribbonè¿›å…¥ç»´æŠ¤çŠ¶æ€"></a><strong>5.1.3 Ribbon</strong>è¿›å…¥ç»´æŠ¤çŠ¶æ€</h3><p><strong>Ribbon ç›®å‰è¿›å…¥ç»´æŠ¤æ¨¡å¼, æœªæ¥æ›¿æ¢æ–¹æ¡ˆ æ˜¯ <u>Spring Cloud LoadBalancer</u></strong></p><h3 id="5-1-4-LB-Load-Balance"><a href="#5-1-4-LB-Load-Balance" class="headerlink" title="5.1.4 LB(Load Balance)"></a>5.1.4 LB(Load Balance)</h3><h4 id="5-1-4-1-LBåˆ†ç±»"><a href="#5-1-4-1-LBåˆ†ç±»" class="headerlink" title="5.1.4.1 LBåˆ†ç±»"></a>5.1.4.1 LBåˆ†ç±»</h4><h5 id="é›†ä¸­å¼-LB"><a href="#é›†ä¸­å¼-LB" class="headerlink" title="é›†ä¸­å¼ LB"></a>é›†ä¸­å¼ LB</h5><ul><li><p>å³åœ¨æœåŠ¡çš„æ¶ˆè´¹æ–¹å’Œæä¾›æ–¹ä¹‹é—´ä½¿ç”¨ç‹¬ç«‹çš„LBè®¾æ–½ï¼ˆå¯ä»¥æ˜¯ç¡¬ä»¶ï¼Œå¦‚F5ï¼Œä¹Ÿå¯ä»¥æ˜¯è½¯ä»¶ï¼Œå¦‚Nginx)ï¼Œç”±è¯¥è®¾æ–½è´Ÿè´£æŠŠè®¿å‘è¯·æ±‚é€šè¿‡æŸç§ç­–ç•¥è½¬å‘è‡³æœåŠ¡çš„æä¾›æ–¹ï¼š</p></li><li><p>LB(Load Balance è´Ÿè½½å‡è¡¡ï¼‰</p></li></ul><h5 id="è¿›ç¨‹å†…-LB"><a href="#è¿›ç¨‹å†…-LB" class="headerlink" title="è¿›ç¨‹å†… LB"></a>è¿›ç¨‹å†… LB</h5><ul><li><p>å°†LBé€»è¾‘é›†æˆåˆ°æ¶ˆè´¹æ–¹ï¼Œæ¶ˆè´¹æ–¹ä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·çŸ¥æœ‰å“ªäº›æœåŠ¡åœ°å€å¯ç”¨ï¼Œç„¶åå†ä»è¿™äº›åœ°å€ä¸­é€‰æ‹©å‡ºä¸€ä¸ªåˆé€‚çš„æœåŠ¡åœ°å€ã€‚</p></li><li><p>Ribbonå°±å±äºè¿›ç¨‹å†…LBï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç±»åº“ï¼Œé›†æˆäºæ¶ˆè´¹æ–¹è¿›ç¨‹ï¼Œæ¶ˆè´¹æ–¹é€šè¿‡å®ƒæ¥è·å–åˆ°æœåŠ¡æä¾›æ–¹çš„åœ°å€ã€‚</p></li></ul><h4 id="5-1-4-2-å®ä¾‹-å‰é¢-member-consumer-è½®è¯¢è´Ÿè½½è®¿é—®-10000-x2F-10002-åº•å±‚å°±æ˜¯-Ribbon-é»˜è®¤çš„è½®è¯¢è´Ÿè½½ç®—æ³•"><a href="#5-1-4-2-å®ä¾‹-å‰é¢-member-consumer-è½®è¯¢è´Ÿè½½è®¿é—®-10000-x2F-10002-åº•å±‚å°±æ˜¯-Ribbon-é»˜è®¤çš„è½®è¯¢è´Ÿè½½ç®—æ³•" class="headerlink" title="5.1.4.2 å®ä¾‹-å‰é¢ member-consumer è½®è¯¢è´Ÿè½½è®¿é—® 10000&#x2F;10002 åº•å±‚å°±æ˜¯ Ribbon é»˜è®¤çš„è½®è¯¢è´Ÿè½½ç®—æ³•"></a>5.1.4.2 å®ä¾‹-å‰é¢ member-consumer è½®è¯¢è´Ÿè½½è®¿é—® 10000&#x2F;10002 åº•å±‚å°±æ˜¯ Ribbon é»˜è®¤çš„è½®è¯¢è´Ÿè½½ç®—æ³•</h4><h2 id="5-2-RibbonåŸç†"><a href="#5-2-RibbonåŸç†" class="headerlink" title="5.2 RibbonåŸç†"></a>5.2 RibbonåŸç†</h2><h3 id="5-2-1-Ribbonæ¶æ„å›¾-amp-æœºåˆ¶"><a href="#5-2-1-Ribbonæ¶æ„å›¾-amp-æœºåˆ¶" class="headerlink" title="5.2.1 Ribbonæ¶æ„å›¾**&amp;**æœºåˆ¶"></a><strong>5.2.1 Ribbon</strong>æ¶æ„å›¾**&amp;**æœºåˆ¶</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230529203201726.png" alt="image-20230529203201726">Ribbon æœºåˆ¶</p><ol><li><strong>å…ˆé€‰æ‹© EurekaServer</strong>ï¼Œå®ƒ<u>ä¼˜å…ˆé€‰æ‹©åœ¨åŒä¸€ä¸ªåŒºåŸŸå†…è´Ÿè½½è¾ƒå°‘çš„ serve</u>r</li><li><strong>å†æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„ç­–ç•¥</strong>ï¼Œåœ¨<u>ä» serverå–åˆ°çš„æœåŠ¡æ³¨å†Œåˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªåœ°å€</u></li><li>Ribbon æä¾›äº†å¤šç§ç­–ç•¥ï¼šæ¯”å¦‚è½®è¯¢ã€éšæœºå’Œæ ¹æ®å“åº”æ—¶é—´åŠ æƒã€‚</li></ol><h3 id="5-2-2-Ribbonå¸¸è§è´Ÿè½½ç®—æ³•"><a href="#5-2-2-Ribbonå¸¸è§è´Ÿè½½ç®—æ³•" class="headerlink" title="5.2.2 Ribbonå¸¸è§è´Ÿè½½ç®—æ³•"></a><strong>5.2.2 Ribbon</strong>å¸¸è§è´Ÿè½½ç®—æ³•</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230529203353777.png" alt="image-20230529203353777"></p><h2 id="5-3-æ›¿æ¢è´Ÿè½½å‡è¡¡ç®—æ³•-åº”ç”¨å®ä¾‹"><a href="#5-3-æ›¿æ¢è´Ÿè½½å‡è¡¡ç®—æ³•-åº”ç”¨å®ä¾‹" class="headerlink" title="5.3 æ›¿æ¢è´Ÿè½½å‡è¡¡ç®—æ³•-åº”ç”¨å®ä¾‹"></a>5.3 æ›¿æ¢è´Ÿè½½å‡è¡¡ç®—æ³•-åº”ç”¨å®ä¾‹</h2><h3 id="5-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#5-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="5.3.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>5.3.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h3><ol><li>éœ€æ±‚ï¼šå°†é»˜è®¤çš„è½®è¯¢ç®—æ³•æ”¹æˆéšæœºç®—æ³• RandomRule</li><li>æµè§ˆå™¨è¾“å…¥ï¼šhtp:&#x2F;&#x2F;ocalhost&#x2F;member&#x2F;consuimer&#x2F;get&#x2F;1</li><li>è¦æ±‚ å½·é—®çš„ 10000&#x2F;10002 ç«¯å£çš„æœåŠ¡æ˜¯éšæœºçš„</li></ol><h3 id="5-3-2ä»£ç å®ç°"><a href="#5-3-2ä»£ç å®ç°" class="headerlink" title="5.3.2ä»£ç å®ç°"></a>5.3.2ä»£ç å®ç°</h3><ol><li>åˆ›å»º member-service-consumer-80com&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;RibbonRule.java</li></ol><h3 id="5-3-3-æµ‹è¯•"><a href="#5-3-3-æµ‹è¯•" class="headerlink" title="5.3.3 æµ‹è¯•"></a><strong>5.3.3</strong> æµ‹è¯•</h3><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥ **: <a href="http://localhost/member/consumer/get/1">http://localhost/member/consumer/get/1</a> **</p><p><strong>2.</strong> <strong>è§‚å¯Ÿè®¿é—®çš„</strong> <strong>10000&#x2F;10002</strong> <strong>ç«¯å£çš„æœåŠ¡æ˜¯éšæœºçš„</strong></p><h1 id="6-SpringCloud-Open-FeignæœåŠ¡è°ƒç”¨"><a href="#6-SpringCloud-Open-FeignæœåŠ¡è°ƒç”¨" class="headerlink" title="6 SpringCloud Open FeignæœåŠ¡è°ƒç”¨"></a>6 SpringCloud Open FeignæœåŠ¡è°ƒç”¨</h1><h2 id="6-1-OpenFeignä»‹ç»"><a href="#6-1-OpenFeignä»‹ç»" class="headerlink" title="6.1 OpenFeignä»‹ç»"></a>6.1 OpenFeignä»‹ç»</h2><h3 id="6-1-1-OpenFeignæ˜¯ä»€ä¹ˆ"><a href="#6-1-1-OpenFeignæ˜¯ä»€ä¹ˆ" class="headerlink" title="6.1.1 OpenFeignæ˜¯ä»€ä¹ˆ"></a><strong>6.1.1 OpenFeign</strong>æ˜¯ä»€ä¹ˆ</h3><ol><li><p>0penFeign æ˜¯ä¸ªå£°æ˜å¼ Webservice å®¢æˆ·ç«¯ï¼Œä½¿ç”¨ OpenFeign è®©ç¼–å†™ web Service å®¢æˆ·ç«¯æ›´ç®€å•</p></li><li><p>å®ƒçš„ä½¿ç”¨æ–¹æ³•æ˜¯å®šä¹‰ä¸€ä¸ªæœåŠ¡æ¥å£ç„¶ååœ¨ä¸Šé¢æ·»åŠ æ³¨è§£</p></li><li><p>0penFeign ä¹Ÿæ”¯æŒå¯æ‹”æ’å¼çš„ç¼–ç å™¨å’Œè§£ç å™¨ã€‚</p></li><li><p>Spring cloud å¯¹ OpenFeign è¿›è¡Œäº†å°è£…ä½¿å…¶æ”¯æŒäº† Spring Mvc æ ‡å‡†æ³¨è§£å’ŒHttpMessageConverters</p></li><li><p>0penFeign å¯ä»¥ä¸Eureka å’Œ Ribbon ç»„åˆä½¿ç”¨ä»¥æ”¯æŒè´Ÿè½½å‡è¡¡</p></li></ol><h3 id="6-1-2-å®˜ç½‘"><a href="#6-1-2-å®˜ç½‘" class="headerlink" title="6.1.2 å®˜ç½‘"></a><strong>6.1.2</strong> å®˜ç½‘</h3><h4 id="6-1-2-1-https-github-com-spring-cloud-spring-cloud-openfeign"><a href="#6-1-2-1-https-github-com-spring-cloud-spring-cloud-openfeign" class="headerlink" title="6.1.2.1 https://github.com/spring-cloud/spring-cloud-openfeign"></a>6.1.2.1 <a href="https://github.com/spring-cloud/spring-cloud-openfeign">https://github.com/spring-cloud/spring-cloud-openfeign</a></h4><h3 id="6-1-3-Feignå’ŒOpenFeignåŒºåˆ«"><a href="#6-1-3-Feignå’ŒOpenFeignåŒºåˆ«" class="headerlink" title="6.1.3 Feignå’ŒOpenFeignåŒºåˆ«"></a><strong>6.1.3 Feign</strong>å’Œ<strong>OpenFeign</strong>åŒºåˆ«</h3><p>â€‹Feign(ä¸å¥½ç”¨ï¼Œæ²¡äººç”¨äº†)ï¼š</p><ul><li><p>Feignæ˜¯Spring Cioudç»„ä»¶ä¸­çš„ä¸€ä¸ªè½»é‡çº§RESTfulçš„HTTPæœåŠ¡å®¢æˆ·ç«¯</p></li><li><p>Feignå†…ç½®äº†Ribbonï¼Œç”¨æ¥åšå®¢æˆ·ç«¯å…è½½å‡è¡¡ï¼Œ å»è°ƒç”¨æœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡ã€‚</p></li><li><p>Feignçš„ä½¿ç”¨æ–¹å¼æ˜¯ï¼šä½¿ç”¨Feignçš„æ³¨è§£å®šä¹‰æ¥å£ï¼Œè°ƒç”¨æœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡</p></li><li><p>Feignæ”¯æŒçš„æ³¨è§£å’Œç”¨æ³•è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://githulb.com/OpenFeign/feign">https://githulb.com/OpenFeign/feign</a></p></li><li><p>Feignæœ¬èº«ä¸æ”¯æŒSpring MvCçš„æ³¨è§£ï¼Œå®ƒæœ‰ä¸€å¥—è‡ªå·±çš„æ³¨è§£</p></li></ul><p>â€‹</p><p>â€‹OpenFeignï¼š</p><ul><li><p>openFeignæ˜¯Spring Cloud **<u>åœ¨Feignçš„åŸºç¡€ä¸Šæ”¯æŒäº†Spring MvCçš„æ³¨è§£</u>**ï¼Œå¦‚@Requesappingç­‰ç­‰ã€‚</p></li><li><p>OpenFeignçš„@FeignClientå¯ä»¥è§£æSpringvCçš„@RequestMappingæ³¨è§£ä¸‹çš„æ¥å£</p></li><li><p>OpenFeigné€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼äº§ç”Ÿå®ç°ç±»ï¼Œå®ç°<strong>ç±»ä¸­åšè´Ÿè½½å‡è¡¡å¹¶è°ƒç”¨å…¶ä»–æœåŠ¡</strong></p></li></ul><p>ç²¾ç®€ä¸€å¥è¯ : <strong>OpenFeign å°±æ˜¯åœ¨ Feign åŸºç¡€ä¸Šåšäº†åŠ å¼º</strong> , æœ‰äº›ç¨‹åºå‘˜ä¸ºäº†æ–¹ä¾¿ï¼Œè¯´ <u>Feign å°±æ˜¯æŒ‡çš„ OpenFeign</u></p><h2 id="6-2-OpenFeign-åº”ç”¨å®ä¾‹"><a href="#6-2-OpenFeign-åº”ç”¨å®ä¾‹" class="headerlink" title="6.2 OpenFeign-åº”ç”¨å®ä¾‹"></a>6.2 OpenFeign-åº”ç”¨å®ä¾‹</h2><h3 id="6-2-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#6-2-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="6.2.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>6.2.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230529210545959.png" alt="image-20230529210545959"></p><p>(Eurekaå®ç°è·å–æœåŠ¡ã€Ribbonå®ç°è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç®—æ³•ã€RestTemplateå®ç°è¿œç¨‹è°ƒç”¨)</p><p>(Eurekaå®ç°è·å–æœåŠ¡ã€OpenFeignå®ç°è´Ÿè½½å‡è¡¡+è¿œç¨‹è°ƒç”¨)</p><h3 id="6-2-2-åˆ›å»ºæœåŠ¡æ¶ˆè´¹æ¨¡å—-é€šè¿‡-OpenFeigen-å®ç°è¿œç¨‹è°ƒç”¨"><a href="#6-2-2-åˆ›å»ºæœåŠ¡æ¶ˆè´¹æ¨¡å—-é€šè¿‡-OpenFeigen-å®ç°è¿œç¨‹è°ƒç”¨" class="headerlink" title="6.2.2 åˆ›å»ºæœåŠ¡æ¶ˆè´¹æ¨¡å— **-**é€šè¿‡ OpenFeigen å®ç°è¿œç¨‹è°ƒç”¨"></a><strong>6.2.2</strong> åˆ›å»ºæœåŠ¡æ¶ˆè´¹æ¨¡å— **-**é€šè¿‡ <strong>OpenFeigen</strong> å®ç°è¿œç¨‹è°ƒç”¨</h3><p><strong>1.</strong> å‚è€ƒ <strong>member-service-consumer-80</strong> åˆ›å»º **member-service-consumer-openfeign-80(**å…·ä½“æ­¥éª¤å‚è€ƒä»¥å‰)</p><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>pom.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼•å…¥openfeign-startï¼Œå³åœºæ™¯å¯åŠ¨å™¨    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>**3.åˆ›å»º application.yml å†…å®¹å¦‚ä¸‹:**ã€</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">e-commerce-consumer-openfeign</span></span><br><span class="line"><span class="comment">#é…ç½®eureka-client</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span> <span class="comment">#å°†è‡ªå·±æ³¨å†Œåˆ°Eureka-server</span></span><br><span class="line">    <span class="comment">#è¡¨ç¤ºä»Eureka-serveræŠ“å–æ³¨å†Œä¿¡æ¯</span></span><br><span class="line">    <span class="comment">#å¦‚æœæ˜¯å•èŠ‚ç‚¹ï¼Œå¯ä»¥ä¸é…ç½®ï¼›</span></span><br><span class="line">    <span class="comment">#ä½†æ˜¯provideræ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œåˆ™å¿…é¡»å°†æ­¤é¡¹é…ç½®ä¸ºtrueï¼Œè¿™æ ·æ‰èƒ½é…åˆRibbonä½¿ç”¨è´Ÿè½½å‡è¡¡åŠŸèƒ½</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="comment"># è¡¨ç¤ºå°†è‡ªå·±æ³¨å†Œåˆ°å“ªä¸ªeureka-server</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka9001.com:9001/eureka,http://eureka9002.com:9002/eureka</span></span><br></pre></td></tr></table></figure><p>4.åˆ›å»ºä¸»å¯åŠ¨ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients</span> <span class="comment">//å¯åŠ¨openFeignClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemberConsumerOpenfeignApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MemberConsumerOpenfeignApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>åˆ›å»º com&#x2F;study&#x2F;springcloud&#x2F;service&#x2F;MemberFeignService.java</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;MEMBER-SERVICE-PROVIDER&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MemberFeignService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ¨è¿™é‡Œå®šä¹‰æ–¹æ³•â€”â€”è¿œç¨‹è°ƒç”¨æœåŠ¡æä¾›æ–¹ç»™çš„æ¥å£</span></span><br><span class="line">    <span class="comment">//åŸæ¥æ˜¯ä½¿ç”¨RestControllerå®ç°åŠŸèƒ½çš„</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.è¿œç¨‹è°ƒç”¨çš„æ–¹å¼æ˜¯get</span></span><br><span class="line">    <span class="comment">//2.è¿œç¨‹è°ƒç”¨çš„url http:MEMBER-SERVICE-PROVIDER/member/get/&#123;id&#125;</span></span><br><span class="line">    <span class="comment">//3.MEMBER-SERVICE-PROVIDERæ˜¯æœåŠ¡æä¾›æ–¹åœ¨Eureka Serveræ³¨å†Œçš„æœåŠ¡</span></span><br><span class="line">    <span class="comment">//4.openfeignä¼šæ ¹æ®è´Ÿè½½å‡è¡¡æ¥å†³å®šè°ƒç”¨å“ªä¸ªæœåŠ¡-é»˜è®¤æ˜¯è½®è¯¢</span></span><br><span class="line">    <span class="comment">//5.ä¼˜ç‚¹ï¼šopenfeignæ”¯æŒäº†springMVCæ³¨è§£ + æ¥å£ --&gt;è§£è€¦</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/member/get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">getMemberById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span>Long id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="6"><li>åˆ›å»º com&#x2F;study&#x2F;springcloud&#x2F;controller&#x2F;MemberConsumerFeignController.java</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span> <span class="comment">//ç»“æœä»¥jsonæ ¼å¼è¿”å›</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemberConsumerFeignController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è£…é…MemberFeignService</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> MemberFeignService memberFeignService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/member/consumer/openfeign/get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">getMemberById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span>Long id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> memberFeignService.getMemberById(id);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-2-3-æµ‹è¯•"><a href="#6-2-3-æµ‹è¯•" class="headerlink" title="6.2.3 æµ‹è¯•"></a><strong>6.2.3</strong> æµ‹è¯•</h3><p>â€‹æµè§ˆå™¨è¾“å…¥ <strong>: <a href="http://localhost/member/consumer/openfeign/get/1">http://localhost/member/consumer/openfeign/get/1</a></strong></p><h3 id="6-2-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#6-2-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="6.2.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a><strong>6.2.4</strong> æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><ul><li><p>é…Openfeignçš„ä½¿ç”¨ç‰¹ç‚¹æ˜¯ å¾®æœåŠ¡è°ƒç”¨æ¥å£+@Feignclientï¼Œä½¿ç”¨æ¥å£è¿›è¡Œ<strong>è§£è€¦</strong></p></li><li><p>@FeignClient(value &#x3D; â€œMEMBER-SERVICE-PROVIDERâ€)ï¼Œè¿™é‡ŒMEMBER-SERVICE-PROVIDERå°±æ˜¯Eureka ServeræœåŠ¡æä¾›æ–¹æ³¨å†Œçš„åç§°ï¼Œä¸è¦å†™é”™äº†</p></li><li><p>æ¥å£æ–¹æ³•ä¸Šï¼š valueæ˜¯ä¸èƒ½ä¹±å†™ï¼Œè¿œç¨‹è°ƒç”¨çš„url ä¸º<a href="http://member-service-provider/member/get/%7Bid%7D">http://MEMBER-SERVICE-PROVIDER/member/get/{id}</a></p></li></ul><p>â€‹@GetMapping(â€œ&#x2F;member&#x2F;get&#x2F;{id}â€)<br>â€‹    public Result getMemberById(@PathVariable(â€œidâ€)Long id);</p><h2 id="6-3-æ—¥å¿—é…ç½®"><a href="#6-3-æ—¥å¿—é…ç½®" class="headerlink" title="6.3 æ—¥å¿—é…ç½®"></a>6.3 æ—¥å¿—é…ç½®</h2><h3 id="6-3-1-åŸºæœ¬ä»‹ç»"><a href="#6-3-1-åŸºæœ¬ä»‹ç»" class="headerlink" title="6.3.1 åŸºæœ¬ä»‹ç»"></a><strong>6.3.1</strong> åŸºæœ¬ä»‹ç»</h3><p>1ï¼è¯´æ˜ï¼šFeign æä¾›äº†æ—¥å¿—æ‰“å°åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡é…ç½æ¥è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼Œä»è€Œå¯¹ Feign æ¥å£çš„è°ƒç”¨æƒ…å†µè¿›è¡Œç›‘æ§å’Œè¾“å‡º</p><p>2.æ—¥å¿—çº§åˆ«</p><ul><li><p><strong>NONE</strong> ï¼šé»˜è®¤çš„ï¼Œä¸æ˜¾ç¤ºä»»ä½•æ—¥å¿—</p></li><li><p><strong>BASIC</strong>ï¼šä»…è®°å½•è¯·æ±‚æ–¹æ³•ã€URLã€å“åº”çŠ¶æ€ç åŠæ‰§è¡Œæ—¶é—´;</p></li><li><p><strong>HEADERS</strong> ï¼š é™¤äº† BASICä¸­å®šä¹‰çš„ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜æœ‰è¯·æ±‚å’Œå“åº”çš„å¤´ä¿¡æ¯;</p></li><li><p><strong>FULL</strong>ï¼šé™¤äº†HEADERSä¸­å®šä¹‰çš„ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜æœ‰è¯·æ±‚å’Œå“åº”çš„æ­£æ–‡åŠå…ƒæ•°æ®ã€‚</p></li></ul><h3 id="6-3-2-é…ç½®æ—¥å¿—-åº”ç”¨å®ä¾‹"><a href="#6-3-2-é…ç½®æ—¥å¿—-åº”ç”¨å®ä¾‹" class="headerlink" title="6.3.2 é…ç½®æ—¥å¿—**-**åº”ç”¨å®ä¾‹"></a><strong>6.3.2</strong> é…ç½®æ—¥å¿—**-**åº”ç”¨å®ä¾‹</h3><p><strong>1.</strong> åœ¨ <strong>member-service-consumer-openfeign-80</strong> åˆ› å»º</p><p><strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;OpenFeignConfig.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OpenFeignConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Logger.Level <span class="title function_">loggerLevel</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Logger.Level.FULL;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> åœ¨ <strong>member-service-consumer-openfeign-80</strong> ä¿®æ”¹ <strong>application.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¯¹MemberFeignServiceæ¥å£è°ƒç”¨è¿‡ç¨‹æ‰“å°ä¿¡æ¯-debug</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.study.springcloud.service.MemberFeignService:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230530125632781.png" alt="image-20230530125632781" style="zoom:50%;" /><h3 id="6-3-3-æµ‹è¯•"><a href="#6-3-3-æµ‹è¯•" class="headerlink" title="6.3.3 æµ‹è¯•"></a><strong>6.3.3</strong> æµ‹è¯•</h3><p>â€¦â€¦</p><h2 id="6-4-OpenFeignè¶…æ—¶"><a href="#6-4-OpenFeignè¶…æ—¶" class="headerlink" title="6.4 OpenFeignè¶…æ—¶"></a>6.4 OpenFeignè¶…æ—¶</h2><p>è‹¥æœåŠ¡æä¾›æ–¹(å¯èƒ½ç”±äºå„ç§åŸå› ï¼Œæ¯”å¦‚æ“ä½œæ•°æ®åº“æ—¶é—´è¿‡é•¿)å“åº”è¶…è¿‡OpenFeignçš„ç­‰å¾…æ—¶é—´(é»˜è®¤1ç§’)ï¼Œä¼šè¿”å›è¶…æ—¶é”™è¯¯(time out)</p><p>â€¦â€¦</p><h3 id="6-4-3-è®¾ç½®OpenFeignè¶…æ—¶æ—¶é—´"><a href="#6-4-3-è®¾ç½®OpenFeignè¶…æ—¶æ—¶é—´" class="headerlink" title="6.4.3 è®¾ç½®OpenFeignè¶…æ—¶æ—¶é—´"></a><strong>6.4.3</strong> è®¾ç½®OpenFeignè¶…æ—¶æ—¶é—´</h3><p>åœ¨æœåŠ¡æ¶ˆè´¹æ–¹çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œå“åº”é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®feignå®¢æˆ·ç«¯è¶…æ—¶æ—¶é—´</span></span><br><span class="line"><span class="comment"># read-timeout å»ºç«‹è¿æ¥ï¼šä»æœåŠ¡æä¾›æ–¹è·å–å¯ç”¨èµ„æºçš„å…¨éƒ¨æ—¶é—´</span></span><br><span class="line"><span class="comment"># connect-timeout ä¸¤ç«¯è¿æ¥æ‰€ç”¨æ—¶é—´</span></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">connect-timeout:</span> <span class="number">5000</span></span><br><span class="line">        <span class="attr">read-timeout:</span> <span class="number">5000</span></span><br></pre></td></tr></table></figure><h3 id="6-4-4-æµ‹è¯•"><a href="#6-4-4-æµ‹è¯•" class="headerlink" title="6.4.4 æµ‹è¯•"></a><strong>6.4.4</strong> æµ‹è¯•</h3><p>â€¦â€¦</p><h1 id="7-ğŸŒŸSpringCloudGateway-æœåŠ¡ç½‘å…³"><a href="#7-ğŸŒŸSpringCloudGateway-æœåŠ¡ç½‘å…³" class="headerlink" title="7 ğŸŒŸSpringCloudGateway æœåŠ¡ç½‘å…³"></a>7 ğŸŒŸSpringCloudGateway æœåŠ¡ç½‘å…³</h1><h2 id="7-1-Gatewayä»‹ç»"><a href="#7-1-Gatewayä»‹ç»" class="headerlink" title="7.1 Gatewayä»‹ç»"></a>7.1 Gatewayä»‹ç»</h2><h3 id="7-1-1-çœ‹ä¸€ä¸ªéœ€æ±‚ï¼Œå¼•å‡ºç½‘å…³æœåŠ¡"><a href="#7-1-1-çœ‹ä¸€ä¸ªéœ€æ±‚ï¼Œå¼•å‡ºç½‘å…³æœåŠ¡" class="headerlink" title="7.1.1 çœ‹ä¸€ä¸ªéœ€æ±‚ï¼Œå¼•å‡ºç½‘å…³æœåŠ¡"></a><strong>7.1.1</strong> çœ‹ä¸€ä¸ªéœ€æ±‚ï¼Œå¼•å‡ºç½‘å…³æœåŠ¡</h3><p><strong>1</strong>ã€æœ‰ä¸€ä¸ªå‰åç«¯åˆ†ç¦»é¡¹ç›®**,** åˆ†æå¦‚å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230530144204835.png" alt="image-20230530144204835"></p><p>2ã€ä½¿ç”¨ç½‘å…³æœåŠ¡, é‡æ„é¡¹ç›®æ¶æ„</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230530144645171.png" alt="image-20230530144645171"></p><h3 id="7-1-2-ğŸŒŸGateway-ç½‘ç»œæ‹“æ‰‘å›¾"><a href="#7-1-2-ğŸŒŸGateway-ç½‘ç»œæ‹“æ‰‘å›¾" class="headerlink" title="7.1.2 ğŸŒŸGateway ç½‘ç»œæ‹“æ‰‘å›¾"></a><strong>7.1.2 ğŸŒŸGateway</strong> ç½‘ç»œæ‹“æ‰‘å›¾</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230530151559362.png" alt="image-20230530151559362"></p><h3 id="7-1-3-Gatewayæ˜¯ä»€ä¹ˆ"><a href="#7-1-3-Gatewayæ˜¯ä»€ä¹ˆ" class="headerlink" title="7.1.3 Gatewayæ˜¯ä»€ä¹ˆ"></a><strong>7.1.3 Gateway</strong>æ˜¯ä»€ä¹ˆ</h3><ol><li><p>Gateway æ˜¯åœ¨ Spring ç”Ÿæ€ç³»ç»Ÿä¹‹ä¸Šæ„å»ºçš„ API ç½‘å…³æœåŠ¡ï¼ŒåŸºäº spring , Spring Boot å’Œ Project Reactor ç­‰æŠ€æœ¯ã€‚</p></li><li><p>Gateway æ—¨åœ¨æä¾›ä¸€ç§ç®€å•è€Œæœ‰æ•ˆçš„æ–¹å¼æ¥å¯¹ API è¿›è¡Œè·¯ç”±ï¼Œä»¥åŠæä¾›ä¸€äº›å¼ºå¤§çš„è¿‡æ»¤å™¨åŠŸèƒ½ï¼Œä¾‹å¦‚ ï¼šç†”æ–­ã€é™æµã€é‡è¯•ç­‰ã€‚</p></li></ol><h3 id="7-1-4-å®˜ç½‘"><a href="#7-1-4-å®˜ç½‘" class="headerlink" title="7.1.4 å®˜ç½‘"></a>7.1.4 å®˜ç½‘</h3><h4 id="7-1-4-1-https-cloud-spring-io-spring-cloud-static-spring-cloud-gateway-2-2-1-RELEASE-reference-html"><a href="#7-1-4-1-https-cloud-spring-io-spring-cloud-static-spring-cloud-gateway-2-2-1-RELEASE-reference-html" class="headerlink" title="7.1.4.1 https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/"></a>7.1.4.1 <a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/">https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/</a></h4><h3 id="7-1-5-Gateway-æ ¸å¿ƒåŠŸèƒ½"><a href="#7-1-5-Gateway-æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="7.1.5 Gateway æ ¸å¿ƒåŠŸèƒ½"></a><strong>7.1.5 Gateway</strong> æ ¸å¿ƒåŠŸèƒ½</h3><h4 id="7-1-5-1-é‰´æƒ"><a href="#7-1-5-1-é‰´æƒ" class="headerlink" title="7.1.5.1 é‰´æƒ"></a>7.1.5.1 é‰´æƒ</h4><h4 id="7-1-5-2-æµé‡æ§åˆ¶"><a href="#7-1-5-2-æµé‡æ§åˆ¶" class="headerlink" title="7.1.5.2 æµé‡æ§åˆ¶"></a>7.1.5.2 æµé‡æ§åˆ¶</h4><h4 id="7-1-5-3-ç†”æ–­"><a href="#7-1-5-3-ç†”æ–­" class="headerlink" title="7.1.5.3 ç†”æ–­"></a>7.1.5.3 ç†”æ–­</h4><h4 id="7-1-5-4-æ—¥å¿—ç›‘æ§"><a href="#7-1-5-4-æ—¥å¿—ç›‘æ§" class="headerlink" title="7.1.5.4 æ—¥å¿—ç›‘æ§"></a>7.1.5.4 æ—¥å¿—ç›‘æ§</h4><h4 id="7-1-5-5-åå‘ä»£ç†"><a href="#7-1-5-5-åå‘ä»£ç†" class="headerlink" title="7.1.5.5 åå‘ä»£ç†"></a>7.1.5.5 åå‘ä»£ç†</h4><h3 id="7-1-6-Gateway-vs-Zuul"><a href="#7-1-6-Gateway-vs-Zuul" class="headerlink" title="7.1.6 Gateway vs Zuul"></a><strong>7.1.6 Gateway vs Zuul</strong></h3><h4 id="7-1-6-1-Gateway-å’Œ-Zuul-åŒºåˆ«"><a href="#7-1-6-1-Gateway-å’Œ-Zuul-åŒºåˆ«" class="headerlink" title="7.1.6.1 Gateway å’Œ Zuul åŒºåˆ«"></a>7.1.6.1 Gateway å’Œ Zuul åŒºåˆ«</h4><ol><li><p>SpringCloud Gateway ä½œä¸º Spring Cloud ç”Ÿæ€ç³»ç»Ÿä¸­çš„ç½‘å…³ï¼Œç›®æ ‡æ˜¯æ›¿ä»£ Zuul</p></li><li><p>SpringCloud Gateway æ˜¯åŸºäº Spring WebFluxæ¡†æ¶å®ç°çš„</p></li><li><p>Spring WebFlux æ¡†æ¶åº•å±‚åˆ™ä½¿ç”¨äº†é«˜æ€§èƒ½çš„ Reactor æ¨¡å¼é€šä¿¡æ¡†æ¶ Nettyï¼Œæå‡äº†ç½‘å…³æ€§èƒ½</p></li></ol><h4 id="7-1-6-2-Gateway-ç‰¹æ€§"><a href="#7-1-6-2-Gateway-ç‰¹æ€§" class="headerlink" title="7.1.6.2 Gateway ç‰¹æ€§"></a>7.1.6.2 Gateway ç‰¹æ€§</h4><p>â€‹Spring Cloud Gateway åŸº äº Spring Framework(æ”¯ ç‰¹ Spring WebFlux)ï¼Œ project Reactor å’Œ spring Boot è¿›è¡Œæ„å»ºï¼Œå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p><ul><li>åŠ¨æ€è·¯ç”±</li><li>å¯ä»¥å¯¹è·¯ç”±æŒ‡å®š predicate(æ–­è¨€)å’ŒFilter(è¿‡æ»¤å™¨ï¼‰</li><li>é›†æˆHystrixçš„æ–­è·¯å™¨åŠŸèƒ½</li><li>é›†æˆ Spring Cloud æœåŠ¡å‘ç°åŠŸèƒ½</li><li>è¯·æ±‚é™æµåŠŸèƒ½</li><li>æ”¯æŒè·¯å¾„é‡å†™</li></ul><h2 id="7-2-GatewayåŸºæœ¬åŸç†"><a href="#7-2-GatewayåŸºæœ¬åŸç†" class="headerlink" title="7.2 GatewayåŸºæœ¬åŸç†"></a>7.2 GatewayåŸºæœ¬åŸç†</h2><h3 id="7-2-1-Gatewayæ ¸å¿ƒç»„ä»¶"><a href="#7-2-1-Gatewayæ ¸å¿ƒç»„ä»¶" class="headerlink" title="7.2.1 Gatewayæ ¸å¿ƒç»„ä»¶"></a><strong>7.2.1 Gateway</strong>æ ¸å¿ƒç»„ä»¶</h3><h4 id="7-2-1-1-ä¸€å¼ å›¾"><a href="#7-2-1-1-ä¸€å¼ å›¾" class="headerlink" title="7.2.1.1 ä¸€å¼ å›¾"></a>7.2.1.1 ä¸€å¼ å›¾</h4><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230530152704594.png" alt="image-20230530152704594" style="zoom:50%;" /><ol><li><p>web è¯·æ±‚é€šè¿‡ä¸€äº›åŒ¹é…æ¡ä»¶ï¼Œå®šä½åˆ°çœŸæ­£çš„æœåŠ¡èŠ‚ç‚¹&#x2F;å¾®æœåŠ¡æ¨¡å—ï¼Œåœ¨è¿™ä¸ªè½¬å‘è¿‡ç¨‹çš„å‰åï¼Œè¿›è¡Œä¸€äº›ç²¾ç»†åŒ–æ§åˆ¶ã€‚</p></li><li><p>predicateï¼šå°±æ˜¯åŒ¹é…æ¡ä»¶(è¯·æ±‚æ˜¯å¦èƒ½è¢«æ¥å—ä½¿ç”¨)</p></li><li><p>filterï¼šå¯ä»¥ç†è§£ä¸ºæ˜¯ç½‘å…³çš„è¿‡æ»¤æœºåˆ¶ã€‚</p><p>æœ‰äº†predicate å’Œfilterï¼Œå†åŠ ä¸Šç›®æ ‡ URL,å°±å¯ä»¥å®ç°ä¸€ä¸ªå…·ä½“çš„è·¯ç”±</p></li></ol><h4 id="7-2-1-2-Route-è·¯ç”±"><a href="#7-2-1-2-Route-è·¯ç”±" class="headerlink" title="7.2.1.2 Route(è·¯ç”±)"></a>7.2.1.2 Route(è·¯ç”±)</h4><p>ä¸€å¥è¯ï¼šè·¯ç”±æ˜¯æ„å»ºç½‘å…³çš„åŸºæœ¬æ¨¡å—ï¼Œå®ƒç”± <strong>ID</strong>ï¼Œ<strong>ç›®æ ‡ URL</strong>ï¼Œ<strong>ä¸€ç³»åˆ—çš„æ–­è¨€å’Œè¿‡æ»¤å™¨</strong>ç»„æˆï¼Œå¦‚æœæ–­è¨€ä¸º true åˆ™åŒ¹é…è¯¥è·¯ç”±ã€‚</p><h4 id="7-2-1-3-Predicate-æ–­è¨€"><a href="#7-2-1-3-Predicate-æ–­è¨€" class="headerlink" title="7.2.1.3 Predicate(æ–­è¨€)"></a>7.2.1.3 Predicate(æ–­è¨€)</h4><ol><li><p>ä¸€å¥è¯ï¼šå¯¹ HTTP è¯·æ±‚ä¸­çš„æ‰€æœ‰å†…å®¹ï¼ˆä¾‹å¦‚è¯·æ±‚å¤´æˆ–è¯·æ±‚å‚æ•°ï¼‰è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœè¯·æ±‚ä¸æ–­è¨€ç›¸åŒ¹é…åˆ™è¿›è¡Œè·¯ç”±</p></li><li><p>ç®€å•ä¸¾ä¾‹ï¼Œæ¯”å¦‚é…ç½®è·¯å¾„ï¼Œ- Path&#x3D;&#x2F;member&#x2F;get&#x2F;**             æ–­è¨€,è·¯ç»ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±è½¬å‘ï¼Œå¦‚æœHttp è¯·æ±‚çš„è·¯å¾„ä¸åŒ¹é…ï¼Œåˆ™ä¸è¿›è¡Œè·¯ç”±è½¬å‘ã€‚</p></li></ol><h4 id="7-2-1-4-Filter-è¿‡æ»¤"><a href="#7-2-1-4-Filter-è¿‡æ»¤" class="headerlink" title="7.2.1.4 Filter(è¿‡æ»¤)"></a>7.2.1.4 Filter(è¿‡æ»¤)</h4><p>1ã€ä¸€å¥è¯ï¼šä½¿ç”¨è¿‡æ»¤å™¨ï¼Œå¯ä»¥åœ¨<strong>è¯·æ±‚è¢«è·¯ç”±å‰æˆ–è€…ä¹‹å</strong>å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†</p><p>2ã€ä½ å¯ä»¥ç†è§£æˆï¼Œåœ¨å¯¹ Http è¯·æ±‚æ–­è¨€åŒ¹é…æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡ç½‘å…³çš„è¿‡æ»¤æœºåˆ¶ï¼Œå¯¹Http è¯·æ±‚å¤„ç†</p><h3 id="7-2-2-HowItWorkså·¥ä½œæœºåˆ¶"><a href="#7-2-2-HowItWorkså·¥ä½œæœºåˆ¶" class="headerlink" title="7.2.2 HowItWorkså·¥ä½œæœºåˆ¶"></a><strong>7.2.2 HowItWorks</strong>å·¥ä½œæœºåˆ¶</h3><h4 id="7-2-2-1-ä¸€å›¾èƒœåƒè¨€"><a href="#7-2-2-1-ä¸€å›¾èƒœåƒè¨€" class="headerlink" title="7.2.2.1 ä¸€å›¾èƒœåƒè¨€"></a>7.2.2.1 ä¸€å›¾èƒœåƒè¨€</h4><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230530163559159.png" alt="image-20230530163559159" style="zoom:50%;" /><ol><li><p>å®¢æˆ·ç«¯å‘ Spring Cloud Gateway å‘å‡ºè¯·æ±‚ã€‚ç„¶ååœ¨ Gateway Handler Mapping ä¸­æ‰¾åˆ°ä¸è¯·æ±‚ç›¸åŒ¹é…çš„è·¯ç”±ï¼Œå°‡å…¶å‘é€åˆ° Gateway Web Handlerã€‚</p></li><li><p>Handler å†é€šè¿‡æŒ‡å®šçš„è¿‡æ»¤å™¨é“¾æ¥å°†è¯·æ±‚å‘é€åˆ°æˆ‘ä»¬å®é™…çš„æœåŠ¡æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œç„¶åè¿”å›ã€‚</p></li><li><p>è¿‡æ»¤å™¨ä¹‹é—´ç”¨è™šçº¿åˆ†å¼€æ˜¯å› ä¸ºè¿‡æ»¤å™¨å¯èƒ½ä¼šåœ¨å‘é€ä»£ç†è¯·æ±‚ä¹‹å‰ï¼ˆâ€preâ€ï¼‰æˆ–ä¹‹å(â€œpostâ€ï¼‰æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚</p></li><li><p>Filter åœ¨â€preâ€ç±»å‹çš„è¿‡æ»¤å™¨å¯ä»¥åš<strong>å‚æ•°æ ¡éªŒã€æƒé™æ ¡éªŒã€æµé‡ç›‘æ§ã€æ—¥å¿—è¾“å‡ºã€åè®®è½¬æ¢</strong>ç­‰ï¼Œ</p></li><li><p>åœ¨â€postâ€ç±»å‹çš„è¿‡æ»¤å™¨ä¸­å¯ä»¥åšå“åº”å†…å®¹ã€å“åº”å¤´çš„ä¿®æ”¹ï¼Œæ—¥å¿—çš„è¾“å‡ºï¼Œæµé‡ç›‘æ§ç­‰æœ‰ç€éå¸¸é‡è¦çš„ä½œç”¨ã€‚</p></li></ol><p>ä¸€å¥è¯è¯´ï¼šè·¯ç”±è½¬å‘ï¼‹æ‰§è¡Œè¿‡æ»¤å™¨é“¾</p><h2 id="7-3-æ­å»º-Gateway-å¾®æœåŠ¡"><a href="#7-3-æ­å»º-Gateway-å¾®æœåŠ¡" class="headerlink" title="7.3 æ­å»º Gateway å¾®æœåŠ¡"></a>7.3 æ­å»º Gateway å¾®æœåŠ¡</h2><h3 id="7-3-1-æ­å»º-Gateway-åº”ç”¨å®ä¾‹"><a href="#7-3-1-æ­å»º-Gateway-åº”ç”¨å®ä¾‹" class="headerlink" title="7.3.1 æ­å»º **Gateway-**åº”ç”¨å®ä¾‹"></a><strong>7.3.1</strong> æ­å»º **Gateway-**åº”ç”¨å®ä¾‹</h3><h4 id="7-3-1-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#7-3-1-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="7.3.1.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>7.3.1.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p>â€“ å¼•å…¥ <strong>Gateway</strong> é¡¹ç›®æ¶æ„</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230531095247037.png" alt="image-20230531095247037"></p><p><strong>1.</strong> <strong>é€šè¿‡ç½‘å…³æš´éœ²çš„æ¥å£ï¼Œå®ç°è°ƒç”¨çœŸæ­£çš„æœåŠ¡</strong> </p><p><strong>2.</strong> <strong>ç½‘å…³æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¾®æœåŠ¡æ¨¡å—</strong></p><h4 id="7-3-1-2-ä»£ç å®ç°"><a href="#7-3-1-2-ä»£ç å®ç°" class="headerlink" title="7.3.1.2 ä»£ç å®ç°"></a>7.3.1.2 ä»£ç å®ç°</h4><p><strong>1.</strong> å‚è€ƒ <strong>member-service-consumer-80</strong> åˆ›å»º **e-commerce-gateway-20000(**å…·ä½“æ­¥éª¤å‚è€ƒä»¥å‰)<br><strong>2.</strong> ä¿®æ”¹ <strong>pom.xml,</strong> éƒ¨åˆ†å†…å®¹å¯ä»¥ä» <strong>member-service-consumer-80</strong> çš„ <strong>pom.xml</strong> æ‹·è´</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>e-commerce-center<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>e-commerce-gateway-20000<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--       å¼•å…¥gateway startï¼Œ ç½‘å…³åœºæ™¯å¯åŠ¨å™¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--       å¼•å…¥eureka-clientåœºæ™¯å¯åŠ¨å™¨starter--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--è€å¸ˆç‰¹åˆ«è¯´æ˜ï¼š</span></span><br><span class="line"><span class="comment">    ä¸è¦å¼•å…¥ï¼šspring-boot-starter-webã€spring-boot-starter-actuator</span></span><br><span class="line"><span class="comment">    å¦åˆ™ä¼šå‡ºç°å†²çª</span></span><br><span class="line"><span class="comment">    å› ä¸ºgatewayæ˜¯ä¸€ä¸ªæœåŠ¡ç½‘å…³ï¼Œä¸éœ€è¦web</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¼•å…¥ e_commerce_center-common-api --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>e_commerce_center-common-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3.<strong>åˆ›å»º <strong>application.yml(<strong>é‡ç‚¹æ ¸å¿ƒ</strong>)</strong> å†…å®¹å¦‚ä¸‹</strong>:</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">20000</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">e-commerce-gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span> <span class="comment">#é…ç½®è·¯ç”±ï¼Œå¯ä»¥é…ç½®å¤šä¸ª List&lt;RouteDefinition&gt; routes</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">member_route01</span> <span class="comment">#è·¯ç”±çš„idï¼Œç¨‹åºå‘˜è‡ªè¡Œé…ç½®</span></span><br><span class="line">          <span class="comment">#gateway æœ€ç»ˆè®¿é—®çš„url æ˜¯ uri + path</span></span><br><span class="line">          <span class="comment">#åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€ï¼šä¹Ÿå¯ä»¥æ˜¯å¤–ç½‘ å¦‚www.baidu.com</span></span><br><span class="line">          <span class="comment">#æ¯”å¦‚ï¼šå®¢æˆ·ç«¯/æµè§ˆå™¨è¯·æ±‚urlï¼šhttp:localhost:20000/member/get/1</span></span><br><span class="line">          <span class="comment">#ç½‘å…³å¯¹è¯·æ±‚urlä¸­çš„pathè¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…å¤±è´¥ï¼Œè¿”å›404</span></span><br><span class="line">          <span class="comment">#å¦‚æœåŒ¹é…æˆåŠŸï¼Œæœ€ç»ˆè®¿é—®çš„url=http://localhost:10000/member/get/1</span></span><br><span class="line">          <span class="comment">#                     å³ uri + path</span></span><br><span class="line">          <span class="comment">#è¿™é‡Œâ¬‡ï¸çš„uriæ˜¯å›ºå®šä¸å˜çš„ï¼Œåœ¨å½“å‰è¿™ç§æƒ…å†µä¸‹æ˜¯å¯ä»¥ä¸ä½¿ç”¨Eureka Server çš„</span></span><br><span class="line">          <span class="comment">#åé¢ä¼šä½¿ç”¨çµæ´»urié…ç½®ï¼Œä¼šç”¨åˆ°Eureka Server</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">http://localhost:10000</span></span><br><span class="line">          <span class="attr">predicates:</span> <span class="comment"># æ–­è¨€ï¼Œå¯ä»¥æœ‰å¤šç§å½¢å¼</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/member/get/**</span></span><br><span class="line"><span class="comment"># é…ç½®Eureka Client</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">e-commerce-service</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span> <span class="comment">#å°†è‡ªå·±æ³¨å†Œåˆ°Eureka-server</span></span><br><span class="line">    <span class="comment">#è¡¨ç¤ºä»Eureka-serveræŠ“å–æ³¨å†Œä¿¡æ¯</span></span><br><span class="line">    <span class="comment">#å¦‚æœæ˜¯å•èŠ‚ç‚¹ï¼Œå¯ä»¥ä¸é…ç½®ï¼›</span></span><br><span class="line">    <span class="comment">#ä½†æ˜¯provideræ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œåˆ™å¿…é¡»å°†æ­¤é¡¹é…ç½®ä¸ºtrueï¼Œè¿™æ ·æ‰èƒ½é…åˆRibbonä½¿ç”¨è´Ÿè½½å‡è¡¡åŠŸèƒ½</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="comment"># è¡¨ç¤ºå°†è‡ªå·±æ³¨å†Œåˆ°å“ªä¸ªeureka-server</span></span><br><span class="line">      <span class="comment">#è¿™é‡Œä¸ºäº†æ–¹ä¾¿ï¼Œå°±ä½¿ç”¨9001ç«¯å£ä¸€ä¸ªserver</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka9001.com:9001/eureka</span></span><br></pre></td></tr></table></figure><p>**4.**åˆ›å»ºä¸»å¯åŠ¨ç±» <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;GateWayApplication20000.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GateWayApplication20000</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(GateWayApplication20000.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="7-3-1-3-æµ‹è¯•"><a href="#7-3-1-3-æµ‹è¯•" class="headerlink" title="7.3.1.3 æµ‹è¯•"></a>7.3.1.3 æµ‹è¯•</h4><p>â€¦â€¦</p><h4 id="7-3-1-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#7-3-1-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="7.3.1.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>7.3.1.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><p>å› ä¸ºæˆ‘ä»¬çš„ member çš„ controller çš„æ–¹æ³•å‚æ•°ä½¿ç”¨äº†@RequestBody ,æ‰€ä»¥åœ¨ä½¿ç”¨ postmanæ—¶ï¼Œéœ€è¦ä½¿ç”¨ json æ ¼å¼å‘é€æ•°æ®, å¦åˆ™ä¼šæŠ¥400é”™è¯¯ã€‚</p><h3 id="7-3-2-äºŒè¯´-Gateway-è·¯ç”±é…ç½®"><a href="#7-3-2-äºŒè¯´-Gateway-è·¯ç”±é…ç½®" class="headerlink" title="7.3.2 äºŒè¯´ Gateway è·¯ç”±é…ç½®"></a><strong>7.3.2</strong> äºŒè¯´ <strong>Gateway</strong> è·¯ç”±é…ç½®</h3><h4 id="7-3-2-1-æ–¹å¼-1-application-yml-ä¸­é…ç½®-å‰é¢è®²è¿‡"><a href="#7-3-2-1-æ–¹å¼-1-application-yml-ä¸­é…ç½®-å‰é¢è®²è¿‡" class="headerlink" title="7.3.2.1 æ–¹å¼ 1: application.yml ä¸­é…ç½®-å‰é¢è®²è¿‡"></a>7.3.2.1 æ–¹å¼ 1: application.yml ä¸­é…ç½®-å‰é¢è®²è¿‡</h4><h4 id="7-3-2-2-æ–¹å¼-2-ç¼–å†™é…ç½®ç±»æ³¨å…¥ã€äº†è§£ã€‘"><a href="#7-3-2-2-æ–¹å¼-2-ç¼–å†™é…ç½®ç±»æ³¨å…¥ã€äº†è§£ã€‘" class="headerlink" title="7.3.2.2 æ–¹å¼ 2: ç¼–å†™é…ç½®ç±»æ³¨å…¥ã€äº†è§£ã€‘"></a>7.3.2.2 æ–¹å¼ 2: ç¼–å†™é…ç½®ç±»æ³¨å…¥ã€äº†è§£ã€‘</h4><p>â€‹<strong>1.</strong> å…ˆæ³¨é”€ <strong>application.yml</strong> å¯¹ç½‘å…³è·¯ç”±éƒ¨åˆ†æ³¨é”€</p><p>â€‹<strong>2.</strong> <strong>é‡å¯</strong> <strong>e-commerce-gateway-20000,</strong> <strong>å†æ¬¡æµ‹è¯•ï¼Œç½‘å…³è·¯ç”±å¤±æ•ˆ</strong></p><p><strong>3.</strong> å‚è€ƒå®˜æ–¹æ–‡æ¡£:<a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#spring-cloud-circuitbreaker-filter-factory">https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#spring-cloud-circuitbreaker-filter-factory</a> ï¼Œ åˆ› å»ºcom&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;GateWayRoutesConfig.java</p><h4 id="7-3-2-3-æµ‹è¯•"><a href="#7-3-2-3-æµ‹è¯•" class="headerlink" title="7.3.2.3 æµ‹è¯•"></a>7.3.2.3 æµ‹è¯•</h4><p>â€¦â€¦</p><h3 id="7-3-3-åŠ¨æ€è·¯ç”±"><a href="#7-3-3-åŠ¨æ€è·¯ç”±" class="headerlink" title="7.3.3 åŠ¨æ€è·¯ç”±"></a><strong>7.3.3</strong> åŠ¨æ€è·¯ç”±</h3><h4 id="7-3-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾"><a href="#7-3-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾" class="headerlink" title="7.3.3.1 éœ€æ±‚åˆ†æ&#x2F;å›¾"></a>7.3.3.1 éœ€æ±‚åˆ†æ&#x2F;å›¾</h4><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230531150741007.png" alt="image-20230531150741007"></p><h4 id="7-3-3-2-ä»£ç å®ç°"><a href="#7-3-3-2-ä»£ç å®ç°" class="headerlink" title="7.3.3.2 ä»£ç å®ç°"></a>7.3.3.2 ä»£ç å®ç°</h4><p><strong>1.</strong> ä¿®æ”¹ <strong>e-commerce-gateway-20000</strong> çš„ <strong>application.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">20000</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">e-commerce-gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">locator:</span></span><br><span class="line">          <span class="comment"># å¯ç”¨ DiscoveryClient æœåŠ¡å‘ç°</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">routes:</span> <span class="comment">#é…ç½®è·¯ç”±ï¼Œå¯ä»¥é…ç½®å¤šä¸ª List&lt;RouteDefinition&gt; routes</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">member_route01</span> <span class="comment">#è·¯ç”±çš„idï¼Œç¨‹åºå‘˜è‡ªè¡Œé…ç½®</span></span><br><span class="line">          <span class="comment"># 1. lb:è´Ÿè½½å‡è¡¡åè®®åç§°</span></span><br><span class="line">          <span class="comment">#    member-service-providerï¼šæ³¨å†Œåˆ°eureka serverçš„æœåŠ¡å(å°å†™)</span></span><br><span class="line">          <span class="comment"># 2. é»˜è®¤æƒ…å†µä¸‹ï¼Œè´Ÿè½½å‡è¡¡ç®—æ³•ä¸ºè½®è¯¢</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://member-service-provider</span></span><br><span class="line">          <span class="attr">predicates:</span> </span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/member/get/**</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">member_route02</span> </span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://member-service-provider</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/member/save</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">member_route03</span> </span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://member-service-provider</span></span><br><span class="line">          <span class="attr">predicates:</span> </span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/</span></span><br><span class="line"><span class="comment"># é…ç½®Eureka Client</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">e-commerce-service</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span> <span class="comment">#å°†è‡ªå·±æ³¨å†Œåˆ°Eureka-server</span></span><br><span class="line">    <span class="comment">#è¡¨ç¤ºä»Eureka-serveræŠ“å–æ³¨å†Œä¿¡æ¯</span></span><br><span class="line">    <span class="comment">#å¦‚æœæ˜¯å•èŠ‚ç‚¹ï¼Œå¯ä»¥ä¸é…ç½®ï¼›</span></span><br><span class="line">    <span class="comment">#ä½†æ˜¯provideræ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œåˆ™å¿…é¡»å°†æ­¤é¡¹é…ç½®ä¸ºtrueï¼Œè¿™æ ·æ‰èƒ½é…åˆRibbonä½¿ç”¨è´Ÿè½½å‡è¡¡åŠŸèƒ½</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="comment"># è¡¨ç¤ºå°†è‡ªå·±æ³¨å†Œåˆ°å“ªä¸ªeureka-server</span></span><br><span class="line">      <span class="comment">#è¿™é‡Œä¸ºäº†æ–¹ä¾¿ï¼Œå°±ä½¿ç”¨9001ç«¯å£ä¸€ä¸ªserver</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka9001.com:9001/eureka</span></span><br></pre></td></tr></table></figure><h4 id="7-3-3-3-æµ‹è¯•"><a href="#7-3-3-3-æµ‹è¯•" class="headerlink" title="7.3.3.3 æµ‹è¯•"></a>7.3.3.3 æµ‹è¯•</h4><h5 id="7-3-3-3-1-å¯åŠ¨-e-commerce-eureka-server-9001"><a href="#7-3-3-3-1-å¯åŠ¨-e-commerce-eureka-server-9001" class="headerlink" title="7.3.3.3.1 å¯åŠ¨ e-commerce-eureka-server-9001"></a>7.3.3.3.1 å¯åŠ¨ e-commerce-eureka-server-9001</h5><h5 id="7-3-3-3-2-å¯åŠ¨-member-service-provider-10000"><a href="#7-3-3-3-2-å¯åŠ¨-member-service-provider-10000" class="headerlink" title="7.3.3.3.2 å¯åŠ¨ member-service-provider-10000"></a>7.3.3.3.2 å¯åŠ¨ member-service-provider-10000</h5><h5 id="7-3-3-3-3-å¯åŠ¨-member-service-provider-10002"><a href="#7-3-3-3-3-å¯åŠ¨-member-service-provider-10002" class="headerlink" title="7.3.3.3.3 å¯åŠ¨ member-service-provider-10002"></a>7.3.3.3.3 å¯åŠ¨ member-service-provider-10002</h5><h5 id="7-3-3-3-4-å¯åŠ¨-e-commerce-gateway-20000"><a href="#7-3-3-3-4-å¯åŠ¨-e-commerce-gateway-20000" class="headerlink" title="7.3.3.3.4 å¯åŠ¨ e-commerce-gateway-20000"></a>7.3.3.3.4 å¯åŠ¨ e-commerce-gateway-20000</h5><h5 id="7-3-3-3-5-æµè§ˆå™¨-é€šè¿‡ç½‘å…³è®¿é—®-http-localhost-20000-member-get-1"><a href="#7-3-3-3-5-æµè§ˆå™¨-é€šè¿‡ç½‘å…³è®¿é—®-http-localhost-20000-member-get-1" class="headerlink" title="7.3.3.3.5 æµè§ˆå™¨**:(é€šè¿‡ç½‘å…³è®¿é—®) http://localhost:20000/member/get/1**"></a>7.3.3.3.5 æµè§ˆå™¨**:(<strong>é€šè¿‡ç½‘å…³è®¿é—®</strong>) <a href="http://localhost:20000/member/get/1">http://localhost:20000/member/get/1</a>**</h5><p>â€‹æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost:20000/member/get/1">http://localhost:20000/member/get/1</a>**</p><h4 id="7-3-3-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#7-3-3-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="7.3.3.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>7.3.3.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><h5 id="7-3-3-4-1-é…ç½®å¥½åŠ¨æ€è·¯ç”±å-Gateway-ä¼šæ ¹æ®æ³¨å†Œä¸­å¿ƒä¸Šå¾®æœåŠ¡åï¼Œä¸ºè¯·æ±‚åˆ›å»ºåŠ¨æ€è·¯ç”±ï¼Œå®ç°-åŠ¨æ€è·¯ç”±-åŠŸèƒ½"><a href="#7-3-3-4-1-é…ç½®å¥½åŠ¨æ€è·¯ç”±å-Gateway-ä¼šæ ¹æ®æ³¨å†Œä¸­å¿ƒä¸Šå¾®æœåŠ¡åï¼Œä¸ºè¯·æ±‚åˆ›å»ºåŠ¨æ€è·¯ç”±ï¼Œå®ç°-åŠ¨æ€è·¯ç”±-åŠŸèƒ½" class="headerlink" title="7.3.3.4.1 é…ç½®å¥½åŠ¨æ€è·¯ç”±å Gateway ä¼šæ ¹æ®æ³¨å†Œä¸­å¿ƒä¸Šå¾®æœåŠ¡åï¼Œä¸ºè¯·æ±‚åˆ›å»ºåŠ¨æ€è·¯ç”±ï¼Œå®ç° åŠ¨æ€è·¯ç”± åŠŸèƒ½"></a><strong>7.3.3.4.1</strong> é…ç½®å¥½åŠ¨æ€è·¯ç”±å <strong>Gateway</strong> ä¼šæ ¹æ®æ³¨å†Œä¸­å¿ƒä¸Šå¾®æœåŠ¡åï¼Œä¸ºè¯·æ±‚åˆ›å»ºåŠ¨æ€è·¯ç”±ï¼Œå®ç° åŠ¨æ€è·¯ç”± åŠŸèƒ½</h5><h5 id="7-3-3-4-2-ä½¿ç”¨çš„-lb-åè®®æ”¯æŒè´Ÿè½½å‡è¡¡-è½®è¯¢ç®—æ³•"><a href="#7-3-3-4-2-ä½¿ç”¨çš„-lb-åè®®æ”¯æŒè´Ÿè½½å‡è¡¡-è½®è¯¢ç®—æ³•" class="headerlink" title="7.3.3.4.2 ä½¿ç”¨çš„ lb åè®®æ”¯æŒè´Ÿè½½å‡è¡¡**-**è½®è¯¢ç®—æ³•"></a><strong>7.3.3.4.2</strong> ä½¿ç”¨çš„ <strong>lb</strong> åè®®æ”¯æŒè´Ÿè½½å‡è¡¡**-**è½®è¯¢ç®—æ³•</h5><h5 id="7-3-3-4-3-é…ç½®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œ-æµ‹è¯•å®Œæ¯•æ¢å¤æˆåŸæ¥çš„è½®è¯¢ç®—æ³•"><a href="#7-3-3-4-3-é…ç½®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œ-æµ‹è¯•å®Œæ¯•æ¢å¤æˆåŸæ¥çš„è½®è¯¢ç®—æ³•" class="headerlink" title="7.3.3.4.3 é…ç½®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œ æµ‹è¯•å®Œæ¯•æ¢å¤æˆåŸæ¥çš„è½®è¯¢ç®—æ³•"></a><strong>7.3.3.4.3</strong> é…ç½®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œ æµ‹è¯•å®Œæ¯•æ¢å¤æˆåŸæ¥çš„è½®è¯¢ç®—æ³•</h5><h2 id="7-4-Predicate-x2F-æ–­è¨€"><a href="#7-4-Predicate-x2F-æ–­è¨€" class="headerlink" title="7.4 Predicate&#x2F;æ–­è¨€"></a>7.4 Predicate&#x2F;æ–­è¨€</h2><h3 id="7-4-1-åŸºæœ¬ä»‹ç»"><a href="#7-4-1-åŸºæœ¬ä»‹ç»" class="headerlink" title="7.4.1 åŸºæœ¬ä»‹ç»"></a><strong>7.4.1</strong> åŸºæœ¬ä»‹ç»</h3><h4 id="7-4-1-1-ä¸€å¥è¯-Predicate-å°±æ˜¯ä¸€ç»„åŒ¹é…è§„åˆ™ï¼Œå½“è¯·æ±‚åŒ¹é…æˆåŠŸï¼Œå°±æ‰§è¡Œå¯¹åº”Route-åŒ¹é…å¤±è´¥ï¼Œæ”¾å¼ƒ-å¤„ç†-x2F-è½¬å‘"><a href="#7-4-1-1-ä¸€å¥è¯-Predicate-å°±æ˜¯ä¸€ç»„åŒ¹é…è§„åˆ™ï¼Œå½“è¯·æ±‚åŒ¹é…æˆåŠŸï¼Œå°±æ‰§è¡Œå¯¹åº”Route-åŒ¹é…å¤±è´¥ï¼Œæ”¾å¼ƒ-å¤„ç†-x2F-è½¬å‘" class="headerlink" title="7.4.1.1 ä¸€å¥è¯: Predicate å°±æ˜¯ä¸€ç»„åŒ¹é…è§„åˆ™ï¼Œå½“è¯·æ±‚åŒ¹é…æˆåŠŸï¼Œå°±æ‰§è¡Œå¯¹åº”Route, åŒ¹é…å¤±è´¥ï¼Œæ”¾å¼ƒ å¤„ç†&#x2F;è½¬å‘"></a>7.4.1.1 ä¸€å¥è¯: Predicate å°±æ˜¯ä¸€ç»„åŒ¹é…è§„åˆ™ï¼Œå½“è¯·æ±‚åŒ¹é…æˆåŠŸï¼Œå°±æ‰§è¡Œå¯¹åº”Route, åŒ¹é…å¤±è´¥ï¼Œæ”¾å¼ƒ å¤„ç†&#x2F;è½¬å‘</h4><h4 id="7-4-1-2-RoutePredicateFactories"><a href="#7-4-1-2-RoutePredicateFactories" class="headerlink" title="7.4.1.2 RoutePredicateFactories"></a>7.4.1.2 RoutePredicateFactories</h4><p><strong>æ–‡æ¡£åœ°å€</strong>: <a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories">https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories</a></p><ul><li>Spring Cloud GatewayåŒ…æ‹¬è®¸å¤šå†…ç½®çš„Route Predicateå·¥å‚ï¼Œæ‰€æœ‰è¿™äº›Predicateéƒ½ä¸HTTPè¯·æ±‚çš„ä¸åŒå±æ€§åŒ¹é…ï¼Œå¯ä»¥ç»„åˆä½¿ç”¨ï¼</li><li>Spring Cloud Gateway åˆ›å»º Route å¯¹è±¡æ—¶ï¼Œä½¿ç”¨RoutePredicateFactory åˆ›å»ºPredicateå¯¹è±¡ï¼ŒPredicate å¯¹è±¡å¯ä»¥èµ‹å€¼ç»™Routeã€‚</li><li>æ‰€æœ‰è¿™äº›è°“è¯éƒ½åŒ¹é…HTTPè¯·æ±‚çš„ä¸åŒå±æ€§ã€‚å¤šç§è°“è¯å·¥å‚å¯ä»¥ç»„åˆ</li></ul><p>å…¶å®å°±æ˜¯åˆ©ç”¨å·¥å‚ä¸­çš„apiè¿›è¡Œæ–­è¨€</p><h3 id="7-4-2-RoutePredicateå®ä¾‹-æ ¹æ®ä¸Šè¿°æ–‡æ¡£è¿›è¡Œæ“ä½œæ¼”ç¤º"><a href="#7-4-2-RoutePredicateå®ä¾‹-æ ¹æ®ä¸Šè¿°æ–‡æ¡£è¿›è¡Œæ“ä½œæ¼”ç¤º" class="headerlink" title="7.4.2 RoutePredicateå®ä¾‹(æ ¹æ®ä¸Šè¿°æ–‡æ¡£è¿›è¡Œæ“ä½œæ¼”ç¤º)"></a>7.4.2 RoutePredicateå®ä¾‹(æ ¹æ®ä¸Šè¿°æ–‡æ¡£è¿›è¡Œæ“ä½œæ¼”ç¤º)</h3><h4 id="7-4-2-1-AfterRoutePredicate"><a href="#7-4-2-1-AfterRoutePredicate" class="headerlink" title="7.4.2.1 AfterRoutePredicate"></a>7.4.2.1 AfterRoutePredicate</h4><h5 id="7-4-2-1-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#7-4-2-1-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="7.4.2.1.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>7.4.2.1.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h5><p><strong>1.</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</p><p>â€‹éœ€æ±‚**:** åªæœ‰ 2022-11-18 12:35:50 <u><strong>ä¹‹å</strong></u>çš„è¯·æ±‚æ‰è¿›è¡ŒåŒ¹é…**&#x2F;<strong>è½¬å‘</strong>,** ä¸æ»¡è¶³è¯¥æ¡ä»¶çš„ï¼Œä¸å¤„ç†</p><h5 id="7-4-2-1-2-ä»£ç å®ç°"><a href="#7-4-2-1-2-ä»£ç å®ç°" class="headerlink" title="7.4.2.1.2 ä»£ç å®ç°"></a><strong>7.4.2.1.2</strong> ä»£ç å®ç°</h5><h5 id="1-å‚è€ƒæ–‡æ¡£-https-cloud-spring-io-spring-cloud-static-spring-cloud-gateway-2-2-1-RELEASE-reference-html-gateway-request-predicates-factories"><a href="#1-å‚è€ƒæ–‡æ¡£-https-cloud-spring-io-spring-cloud-static-spring-cloud-gateway-2-2-1-RELEASE-reference-html-gateway-request-predicates-factories" class="headerlink" title="1. å‚è€ƒæ–‡æ¡£ : https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories"></a><strong>1.</strong> å‚è€ƒæ–‡æ¡£ <strong>: <a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories">https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories</a></strong></h5><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>e-commerce-gateway-20000</strong> <strong>çš„</strong> <strong>application.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">after_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">After=2017-01-20T17:42:47.789-07:00[America/Denver]</span></span><br></pre></td></tr></table></figure><h4 id="7-4-2-2-BeforeRoutePredicate"><a href="#7-4-2-2-BeforeRoutePredicate" class="headerlink" title="7.4.2.2 BeforeRoutePredicate"></a>7.4.2.2 BeforeRoutePredicate</h4><p><strong>1.</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</p><p>éœ€æ±‚**:** åªæœ‰ 2022-11-18 12:35:50 <u><strong>ä¹‹å‰</strong></u>çš„è¯·æ±‚æ‰è¿›è¡ŒåŒ¹é…**&#x2F;<strong>è½¬å‘</strong>,** ä¸æ»¡è¶³è¯¥æ¡ä»¶çš„ï¼Œä¸å¤„ç†</p><h5 id="7-4-2-2-2-ä»£ç å®ç°"><a href="#7-4-2-2-2-ä»£ç å®ç°" class="headerlink" title="7.4.2.2.2 ä»£ç å®ç°"></a><strong>7.4.2.2.2</strong> ä»£ç å®ç°</h5><p><strong>1.</strong> å‚è€ƒæ–‡æ¡£ <strong>: <a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories">https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories</a></strong></p><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>e-commerce-gateway-20000</strong> <strong>çš„</strong> <strong>application.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">before_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">Before=2017-01-20T17:42:47.789-07:00[America/Denver]</span></span><br></pre></td></tr></table></figure><h4 id="7-4-2-3-BetweenRoutePredicate"><a href="#7-4-2-3-BetweenRoutePredicate" class="headerlink" title="7.4.2.3 BetweenRoutePredicate"></a>7.4.2.3 BetweenRoutePredicate</h4><p><strong>1.</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</p><p>éœ€æ±‚**:** åªæœ‰ <strong>2020-11-18 12:35:50</strong> å’Œ <strong>2022-11-18 12:35:50</strong> <u><em>ä¹‹é—´</em></u> çš„è¯·æ±‚æ‰è¿›è¡ŒåŒ¹é…**&#x2F;<strong>è½¬ å‘</strong>,** ä¸æ»¡è¶³è¯¥æ¡ä»¶çš„ï¼Œä¸å¤„ç†</p><h5 id="7-4-2-3-2-ä»£ç å®ç°"><a href="#7-4-2-3-2-ä»£ç å®ç°" class="headerlink" title="7.4.2.3.2 ä»£ç å®ç°"></a><strong>7.4.2.3.2</strong> ä»£ç å®ç°</h5><p><strong>1.</strong> å‚è€ƒæ–‡æ¡£ <strong>: <a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories">https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories</a></strong></p><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>e-commerce-gateway-20000</strong> <strong>çš„</strong> <strong>application.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">between_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">Between=2017-01-20T17:42:47.789-07:00[America/Denver],</span> <span class="number">2017-01-21T17:42:47.789-07:00</span>[<span class="string">America/Denver</span>]</span><br></pre></td></tr></table></figure><h4 id="7-4-2-4-CookieRoutePredicate"><a href="#7-4-2-4-CookieRoutePredicate" class="headerlink" title="7.4.2.4 CookieRoutePredicate"></a>7.4.2.4 CookieRoutePredicate</h4><h5 id="7-4-2-4-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#7-4-2-4-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="7.4.2.4.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>7.4.2.4.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h5><p>â€‹éœ€æ±‚**:** è¯·æ±‚å¸¦æœ‰ <strong>cookie</strong> é”®**: user** å€¼**: hsp** æ‰åŒ¹é…**&#x2F;**æ–­è¨€æˆåŠŸ</p><p><strong>1.4.2.4.2</strong> ä»£ç å®ç°</p><p><strong>1.</strong> å‚è€ƒæ–‡æ¡£ <strong>: <a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories">https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gateway-request-predicates-factories</a></strong></p><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>e-commerce-gateway-20000</strong> <strong>çš„</strong> <strong>application.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">cookie_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">Cookie=chocolate,</span> <span class="string">ch.p</span></span><br><span class="line">        <span class="comment"># chocolate æ˜¯ cookie åå­— ch.p æ˜¯ cookie çš„å€¼ï¼Œæ˜¯æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…çš„</span></span><br></pre></td></tr></table></figure><h4 id="7-4-2-5-HeaderRoutePredicate"><a href="#7-4-2-5-HeaderRoutePredicate" class="headerlink" title="7.4.2.5 HeaderRoutePredicate"></a>7.4.2.5 HeaderRoutePredicate</h4><h5 id="7-4-2-5-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#7-4-2-5-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="7.4.2.5.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>7.4.2.5.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h5><p><strong>1.</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</p><p><strong>éœ€æ±‚</strong>: <strong>è¯·æ±‚å¤´</strong> <strong>Header</strong> <strong>æœ‰</strong> <strong>X-Request-Id</strong>ï¼Œ å¹¶ä¸”å€¼ä¸ºxxxxx æ‰åŒ¹é…&#x2F;æ–­è¨€æˆåŠŸ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">header_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">Header=X-Request-Id,</span> <span class="string">\d+</span></span><br><span class="line">        <span class="comment"># X-Request-Id æ˜¯ header çš„åç§°, \d+ æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼</span></span><br></pre></td></tr></table></figure><h4 id="7-4-2-6-HostRoutePredicate"><a href="#7-4-2-6-HostRoutePredicate" class="headerlink" title="7.4.2.6 HostRoutePredicate"></a>7.4.2.6 HostRoutePredicate</h4><h5 id="7-4-2-6-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#7-4-2-6-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="7.4.2.6.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>7.4.2.6.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h5><p><strong>1.</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</p><p>éœ€æ±‚ï¼š <strong>è¯·æ±‚</strong> <strong>Host</strong> <strong>æ˜¯</strong><em><strong>*.hspedu.*</strong></em> æ‰åŒ¹é…&#x2F;æ–­è¨€æˆåŠŸ <strong>,</strong> <strong>æ¯”å¦‚</strong> <strong>Hostï¼š <a href="http://www.hspedu.com/">www.hspedu.com</a></strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">host_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">Host=**.somehost.org,**.anotherhost.org</span></span><br><span class="line">        <span class="comment">#Host å¯ä»¥æœ‰å¤šä¸ª, ä½¿ç”¨é€—å·é—´éš”</span></span><br></pre></td></tr></table></figure><h4 id="7-4-2-7-MethodRoutePredicate"><a href="#7-4-2-7-MethodRoutePredicate" class="headerlink" title="7.4.2.7 MethodRoutePredicate"></a>7.4.2.7 MethodRoutePredicate</h4><p><strong>1.4.2.7.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</p><p><strong>éœ€æ±‚</strong>: <strong>è¯·æ±‚æ˜¯</strong> <strong>XXXXXX</strong> <strong>æ–¹å¼æ‰åŒ¹é…</strong>&#x2F;<strong>æ–­è¨€æˆåŠŸ</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">method_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">Method=GET,POST</span></span><br><span class="line">        <span class="comment"># è¯·æ±‚æ–¹å¼å¯ä»¥æœ‰å¤šä¸ª, ä½¿ç”¨é€—å·é—´éš”</span></span><br></pre></td></tr></table></figure><h4 id="7-4-2-8-PathRoutePredicate"><a href="#7-4-2-8-PathRoutePredicate" class="headerlink" title="7.4.2.8 PathRoutePredicate"></a>7.4.2.8 PathRoutePredicate</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">host_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">Path=/red/&#123;segment&#125;,/blue/&#123;segment&#125;</span></span><br><span class="line">        <span class="comment"># Path å¯ä»¥æœ‰å¤šä¸ª, ä½¿ç”¨é€—å·é—´éš”</span></span><br></pre></td></tr></table></figure><h4 id="7-4-2-9-QueryRoutePredicate"><a href="#7-4-2-9-QueryRoutePredicate" class="headerlink" title="7.4.2.9 QueryRoutePredicate"></a>7.4.2.9 QueryRoutePredicate</h4><h5 id="1-4-2-9-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#1-4-2-9-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="1.4.2.9.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>1.4.2.9.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h5><p>éœ€æ±‚**:** è¯·æ±‚æœ‰å‚æ•° <strong>email ,<strong>å¹¶ä¸”æ»¡è¶³ç”µå­é‚®ä»¶çš„åŸºæœ¬æ ¼å¼</strong>,</strong> æ‰èƒ½åŒ¹é…**&#x2F;**æ–­è¨€æˆåŠŸ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">query_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">Query=red,</span> <span class="string">gree.</span></span><br><span class="line">        <span class="comment">#red æ˜¯å‚æ•°å gree. æ˜¯å€¼, æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼.</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">#å¯¹åº”é‚®ç®±ï¼š</span></span><br><span class="line">      <span class="comment"># - Query=email, [\w-]+@([a-zA-Z]+\.)+[a-zA-Z]+</span></span><br></pre></td></tr></table></figure><h4 id="7-4-2-10-RemoteAddr-Route-Predicate"><a href="#7-4-2-10-RemoteAddr-Route-Predicate" class="headerlink" title="7.4.2.10 RemoteAddr Route Predicate"></a>7.4.2.10 RemoteAddr Route Predicate</h4><h5 id="7-4-2-10-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#7-4-2-10-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="7.4.2.10.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>7.4.2.10.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h5><p><strong>éœ€æ±‚</strong>: <strong>è¯·æ±‚çš„</strong> <strong>IP</strong> <strong>æ˜¯</strong> <strong>127.0.0.1,</strong> <strong>æ‰èƒ½åŒ¹é…</strong>&#x2F;æ–­è¨€æˆåŠŸ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">remoteaddr_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">RemoteAddr=192.168.1.1/24</span></span><br></pre></td></tr></table></figure><h2 id="7-5-Filter-x2F-è¿‡æ»¤å™¨"><a href="#7-5-Filter-x2F-è¿‡æ»¤å™¨" class="headerlink" title="7.5 Filter&#x2F;è¿‡æ»¤å™¨"></a>7.5 Filter&#x2F;è¿‡æ»¤å™¨</h2><h3 id="7-5-1-åŸºæœ¬ä»‹ç»"><a href="#7-5-1-åŸºæœ¬ä»‹ç»" class="headerlink" title="7.5.1 åŸºæœ¬ä»‹ç»"></a><strong>7.5.1</strong> åŸºæœ¬ä»‹ç»</h3><p><strong>1.</strong> æ–‡æ¡£åœ°å€ <strong>: <a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gatewayfilter-factories">https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.1.RELEASE/reference/html/#gatewayfilter-factories</a></strong></p><p> <strong>è·¯ç”±è¿‡æ»¤å™¨å¯ç”¨äºä¿®æ”¹è¿›å…¥çš„HTTPè¯·æ±‚å’Œè¿”å›çš„HTTPå“åº”</strong></p><p><strong>Spring Cloud Gateway å†…ç½®äº†å¤šç§è·¯ç”±è¿‡æ»¤å™¨ï¼Œä»–ä»¬éƒ½ç”±GatewayFilterçš„å·¥å‚ç±»æ¥äº§ç”Ÿ</strong></p><h3 id="7-5-2-ç±»å‹"><a href="#7-5-2-ç±»å‹" class="headerlink" title="7.5.2 ç±»å‹"></a><strong>7.5.2</strong> ç±»å‹</h3><h4 id="7-5-2-1-GatewayFilter"><a href="#7-5-2-1-GatewayFilter" class="headerlink" title="7.5.2.1 GatewayFilter"></a>7.5.2.1 GatewayFilter</h4><h4 id="7-5-2-2-GlobalFilter"><a href="#7-5-2-2-GlobalFilter" class="headerlink" title="7.5.2.2 GlobalFilter"></a>7.5.2.2 GlobalFilter</h4><p>ä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨å®˜æ–¹çš„filterï¼Œéƒ½æ˜¯è‡ªå®šä¹‰æ»¡è¶³éœ€æ±‚ï¼Œå› æ­¤åªä»‹ç»ä¸€ä¸ªå®˜æ–¹filter</p><h3 id="7-5-3-GatewayFilterä½¿ç”¨"><a href="#7-5-3-GatewayFilterä½¿ç”¨" class="headerlink" title="7.5.3 GatewayFilterä½¿ç”¨"></a><strong>7.5.3 GatewayFilter</strong>ä½¿ç”¨</h3><h4 id="7-5-3-1-å¼€å‘ç›´æ¥ä½¿ç”¨-GatewayFilter-è¾ƒå°‘ï¼Œä¸€èˆ¬æ˜¯è‡ªå®šä¹‰è¿‡æ»¤å™¨"><a href="#7-5-3-1-å¼€å‘ç›´æ¥ä½¿ç”¨-GatewayFilter-è¾ƒå°‘ï¼Œä¸€èˆ¬æ˜¯è‡ªå®šä¹‰è¿‡æ»¤å™¨" class="headerlink" title="7.5.3.1 å¼€å‘ç›´æ¥ä½¿ç”¨ GatewayFilter è¾ƒå°‘ï¼Œä¸€èˆ¬æ˜¯è‡ªå®šä¹‰è¿‡æ»¤å™¨"></a>7.5.3.1 å¼€å‘ç›´æ¥ä½¿ç”¨ GatewayFilter è¾ƒå°‘ï¼Œä¸€èˆ¬æ˜¯è‡ªå®šä¹‰è¿‡æ»¤å™¨</h4><p>â€‹æ¼”ç¤ºï¼šThe AddRequestParameter GatewayFilter Factory</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">add_request_parameter_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">https://example.org</span></span><br><span class="line">        <span class="attr">filters:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddRequestParameter=color,</span> <span class="string">blue</span></span><br></pre></td></tr></table></figure><h3 id="7-5-4-è‡ªå®šä¹‰-GlobalFilter"><a href="#7-5-4-è‡ªå®šä¹‰-GlobalFilter" class="headerlink" title="7.5.4 è‡ªå®šä¹‰ GlobalFilter"></a><strong>7.5.4</strong> è‡ªå®šä¹‰ <strong>GlobalFilter</strong></h3><h4 id="7-5-4-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#7-5-4-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="7.5.4.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>7.5.4.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> è‡ªå®šä¹‰å…¨å±€ <strong>GlobalFilter</strong> è¿‡æ»¤å™¨<br><strong>2.</strong> å¦‚æœè¯·æ±‚å‚æ•° <strong>user&#x3D;hspedu , pwd&#x3D;123456</strong> åˆ™æ”¾è¡Œ**,** å¦åˆ™ä¸èƒ½é€šè¿‡éªŒè¯</p><h4 id="7-5-4-2-ä»£ç å®ç°"><a href="#7-5-4-2-ä»£ç å®ç°" class="headerlink" title="7.5.4.2 ä»£ç å®ç°"></a>7.5.4.2 ä»£ç å®ç°</h4><p><strong>1.</strong> åœ¨ <strong>e-commerce-gateway-20000</strong> åˆ›å»º<strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;filter&#x2F;CustomGateWayFilter.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.GatewayFilterChain;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.GlobalFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.Ordered;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.server.ServerWebExchange;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/6/1</span></span><br><span class="line"><span class="comment"> * 11:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomGateWayFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span>, Ordered &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//filteræ˜¯æ ¸å¿ƒçš„æ–¹æ³•ï¼Œå°†æˆ‘ä»¬çš„è¿‡æ»¤ä¸šåŠ¡å†™åœ¨è¯¥æ–¹æ³•ä¸­</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="comment">//å…ˆè·å–åˆ°å¯¹åº”çš„å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span></span><br><span class="line">                exchange.getRequest().getQueryParams().getFirst(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span></span><br><span class="line">                exchange.getRequest().getQueryParams().getFirst(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(!(<span class="string">&quot;hspedu&quot;</span>.equals(user) &amp;&amp; <span class="string">&quot;123456&quot;</span>.equals(pwd)))&#123;</span><br><span class="line">            exchange.getResponse().setStatusCode(HttpStatus.NOT_ACCEPTABLE);</span><br><span class="line">            <span class="keyword">return</span> exchange.getResponse().setComplete();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¡¨ç¤ºè¿‡æ»¤å™¨æ‰§è¡Œçš„é¡ºåºï¼Œæ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="7-5-4-3-æµ‹è¯•"><a href="#7-5-4-3-æµ‹è¯•" class="headerlink" title="7.5.4.3 æµ‹è¯•"></a>7.5.4.3 æµ‹è¯•</h4><h5 id="7-5-4-3-1-å¯åŠ¨-e-commerce-eureka-server-9001"><a href="#7-5-4-3-1-å¯åŠ¨-e-commerce-eureka-server-9001" class="headerlink" title="7.5.4.3.1 å¯åŠ¨ e-commerce-eureka-server-9001"></a><strong>7.5.4.3.1</strong> å¯åŠ¨ e-commerce-eureka-server-9001</h5><h5 id="7-5-4-3-2-å¯åŠ¨-member-service-provider-10000-x2F-10002"><a href="#7-5-4-3-2-å¯åŠ¨-member-service-provider-10000-x2F-10002" class="headerlink" title="7.5.4.3.2 å¯åŠ¨ member-service-provider-10000&#x2F;10002"></a>7.5.4.3.2 å¯åŠ¨ member-service-provider-10000&#x2F;10002</h5><h5 id="7-5-4-3-3-å¯åŠ¨-e-commerce-gateway-20000"><a href="#7-5-4-3-3-å¯åŠ¨-e-commerce-gateway-20000" class="headerlink" title="7.5.4.3.3 å¯åŠ¨ e-commerce-gateway-20000"></a>7.5.4.3.3 å¯åŠ¨ e-commerce-gateway-20000</h5><h5 id="7-5-4-3-4-æµè§ˆå™¨-é€šè¿‡ç½‘å…³è®¿é—®-http-localhost-20000-member-get-1-user-hspedu-amp-pwd-123456-è¾“å…¥-http-localhost-20000-member-get-1-user-hspedu-amp-pwd-123456"><a href="#7-5-4-3-4-æµè§ˆå™¨-é€šè¿‡ç½‘å…³è®¿é—®-http-localhost-20000-member-get-1-user-hspedu-amp-pwd-123456-è¾“å…¥-http-localhost-20000-member-get-1-user-hspedu-amp-pwd-123456" class="headerlink" title="7.5.4.3.4 æµè§ˆå™¨**:(é€šè¿‡ç½‘å…³è®¿é—®) http://localhost:20000/member/get/1?user=hspedu&amp;pwd=123456** è¾“å…¥**: http://localhost:20000/member/get/1?user=hspedu&amp;pwd=123456**"></a>7.5.4.3.4 æµè§ˆå™¨**:(<strong>é€šè¿‡ç½‘å…³è®¿é—®</strong>) <a href="http://localhost:20000/member/get/1?user=hspedu&pwd=123456">http://localhost:20000/member/get/1?user=hspedu&amp;pwd=123456</a>** è¾“å…¥**: <a href="http://localhost:20000/member/get/1?user=hspedu&pwd=123456">http://localhost:20000/member/get/1?user=hspedu&amp;pwd=123456</a>**</h5><h4 id="7-5-4-4-æµ‹è¯•å®Œæ¯•ï¼Œè®°å¾—ä»£ç æ¢å¤åˆ°æµ‹è¯•å‰"><a href="#7-5-4-4-æµ‹è¯•å®Œæ¯•ï¼Œè®°å¾—ä»£ç æ¢å¤åˆ°æµ‹è¯•å‰" class="headerlink" title="7.5.4.4 æµ‹è¯•å®Œæ¯•ï¼Œè®°å¾—ä»£ç æ¢å¤åˆ°æµ‹è¯•å‰"></a>7.5.4.4 æµ‹è¯•å®Œæ¯•ï¼Œè®°å¾—ä»£ç æ¢å¤åˆ°æµ‹è¯•å‰</h4><h1 id="8-SpringCloud-Sleuth-Zipkin-æœåŠ¡è·Ÿè¸ª"><a href="#8-SpringCloud-Sleuth-Zipkin-æœåŠ¡è·Ÿè¸ª" class="headerlink" title="8 SpringCloud Sleuth+Zipkin æœåŠ¡è·Ÿè¸ª"></a>8 SpringCloud Sleuth+Zipkin æœåŠ¡è·Ÿè¸ª</h1><h2 id="8-1-Sleuth-x2F-ZipKinåŸºç¡€"><a href="#8-1-Sleuth-x2F-ZipKinåŸºç¡€" class="headerlink" title="8.1 Sleuth&#x2F;ZipKinåŸºç¡€"></a>8.1 Sleuth&#x2F;ZipKinåŸºç¡€</h2><h3 id="8-1-1-å®˜ç½‘"><a href="#8-1-1-å®˜ç½‘" class="headerlink" title="8.1.1 å®˜ç½‘"></a><strong>8.1.1</strong> å®˜ç½‘</h3><h4 id="8-1-1-1-https-github-com-spring-cloud-spring-cloud-sleuth"><a href="#8-1-1-1-https-github-com-spring-cloud-spring-cloud-sleuth" class="headerlink" title="8.1.1.1 https://github.com/spring-cloud/spring-cloud-sleuth"></a>8.1.1.1 <a href="https://github.com/spring-cloud/spring-cloud-sleuth">https://github.com/spring-cloud/spring-cloud-sleuth</a></h4><h3 id="8-1-2-Sleuth-x2F-Zipkinæ˜¯ä»€ä¹ˆ"><a href="#8-1-2-Sleuth-x2F-Zipkinæ˜¯ä»€ä¹ˆ" class="headerlink" title="8.1.2 Sleuth&#x2F;Zipkinæ˜¯ä»€ä¹ˆ?"></a><strong>8.1.2 Sleuth&#x2F;Zipkin</strong>æ˜¯ä»€ä¹ˆ?</h3><h4 id="8-1-2-1-æ¦‚è¿°-ä¸¤å¼ å›¾"><a href="#8-1-2-1-æ¦‚è¿°-ä¸¤å¼ å›¾" class="headerlink" title="8.1.2.1 æ¦‚è¿°(ä¸¤å¼ å›¾)"></a>8.1.2.1 æ¦‚è¿°(ä¸¤å¼ å›¾)</h4><ol><li><p>åœ¨å¾®æœåŠ¡æ¡†æ¶ä¸­ï¼Œä¸€ä¸ªç”±å®¢æˆ·ç«¯å‘èµ·çš„è¯·æ±‚åœ¨åç«¯ç³»ç»Ÿä¸­ä¼šç»è¿‡å¤šä¸ªä¸åŒçš„æœåŠ¡èŠ‚ç‚¹è°ƒç”¨**,** æ¥ååŒäº§ç”Ÿæœ€åçš„è¯·æ±‚ç»“æœï¼Œæ¯ä¸€ä¸ªè¯·æ±‚éƒ½ä¼šå½¢æˆä¸€æ¡å¤æ‚çš„åˆ†å¸ƒå¼æœåŠ¡è°ƒç”¨é“¾è·¯</p></li><li><p>é“¾è·¯ä¸­çš„ä»»ä½•ä¸€ç¯å‡ºç°é«˜å»¶æ—¶æˆ–é”™è¯¯éƒ½ä¼šå¼•èµ·æ•´ä¸ªè¯·æ±‚æœ€åçš„å¤±è´¥,å› æ­¤<u>å¯¹æ•´ä¸ªæœåŠ¡çš„è°ƒç”¨è¿›è¡Œé“¾è·¯è¿½è¸ªå’Œåˆ†æ</u>å°±éå¸¸çš„é‡è¦</p></li><li><p>Sleuth å’Œ Zipkinç®€å•å…³ç³»å›¾</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230601125136474.png" alt="image-20230601125136474"></p><h4 id="8-1-2-2-ä¸€å¥è¯-Sleuth-æä¾›äº†ä¸€å¥—å®Œæ•´çš„æœåŠ¡è·Ÿè¸ªçš„è§£å†³æ–¹æ¡ˆ-å¹¶å…¼å®¹-Zipkin"><a href="#8-1-2-2-ä¸€å¥è¯-Sleuth-æä¾›äº†ä¸€å¥—å®Œæ•´çš„æœåŠ¡è·Ÿè¸ªçš„è§£å†³æ–¹æ¡ˆ-å¹¶å…¼å®¹-Zipkin" class="headerlink" title="8.1.2.2 ä¸€å¥è¯: Sleuth æä¾›äº†ä¸€å¥—å®Œæ•´çš„æœåŠ¡è·Ÿè¸ªçš„è§£å†³æ–¹æ¡ˆ å¹¶å…¼å®¹ Zipkin"></a>8.1.2.2 ä¸€å¥è¯: Sleuth æä¾›äº†ä¸€å¥—å®Œæ•´çš„æœåŠ¡è·Ÿè¸ªçš„è§£å†³æ–¹æ¡ˆ å¹¶å…¼å®¹ Zipkin</h4><h4 id="8-1-2-3-æ¢³ç†-ğŸŒŸSleuth-åšé“¾è·¯è¿½è¸ª-Zipkin-åšæ•°æ®æœé›†-x2F-å­˜å‚¨-x2F-å¯è§†åŒ–"><a href="#8-1-2-3-æ¢³ç†-ğŸŒŸSleuth-åšé“¾è·¯è¿½è¸ª-Zipkin-åšæ•°æ®æœé›†-x2F-å­˜å‚¨-x2F-å¯è§†åŒ–" class="headerlink" title="8.1.2.3 æ¢³ç†: ğŸŒŸSleuth åšé“¾è·¯è¿½è¸ª , Zipkin åšæ•°æ®æœé›†&#x2F;å­˜å‚¨&#x2F;å¯è§†åŒ–"></a>8.1.2.3 æ¢³ç†: ğŸŒŸ<u>Sleuth åšé“¾è·¯è¿½è¸ª , Zipkin åšæ•°æ®æœé›†&#x2F;å­˜å‚¨&#x2F;å¯è§†åŒ–</u></h4><h3 id="8-1-3-Sleuthå·¥ä½œåŸç†"><a href="#8-1-3-Sleuthå·¥ä½œåŸç†" class="headerlink" title="8.1.3 Sleuthå·¥ä½œåŸç†"></a><strong>8.1.3 Sleuth</strong>å·¥ä½œåŸç†</h3><p><strong>1. Span</strong> å’Œ <strong>Trace</strong> åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ä½¿ç”¨ <strong>Zipkin</strong> çš„è¿‡ç¨‹**-**å›¾å½¢åŒ–</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230603152155135.png" alt="image-20230603152155135"></p><ul><li><p>è¡¨ç¤ºä¸€è¯·æ±‚é“¾è·¯ï¼Œä¸€æ¡é“¾è·¯é€šè¿‡Trace idå”¯ä¸€æ ‡è¯†ï¼Œspanæ ‡è¯†å‘èµ·çš„è¯·æ±‚ä¿¡æ¯ï¼Œå„spané€šè¿‡parent idå…³è”èµ·æ¥</p></li><li><p>Traceï¼šç±»ä¼¼äºæ ‘ç»“æ„çš„Spané›†åˆï¼Œè¡¨ç¤ºä¸€æ¡è°ƒç”¨é“¾è·¯ï¼Œå­˜åœ¨å”¯ä¸€æ ‡è¯† (ä¸€æ¡è¯·æ±‚é“¾è·¯åªæœ‰å”¯ä¸€ä¸€ä¸ªTrace id)</p></li><li><p>Spanï¼šåŸºæœ¬å·¥ä½œå•å…ƒï¼Œè¡¨ç¤ºè°ƒç”¨é“¾è·¯æ¥æºï¼Œé€šä¿—çš„ç†è§£spanå°±æ˜¯ä¸€æ¬¡è¯·æ±‚ä¿¡æ¯</p></li></ul><p><strong>2. spans</strong> <strong>çš„</strong> <strong>parent&#x2F;child</strong> <strong>å…³ç³»å›¾å½¢åŒ–</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230603152459615.png" alt="image-20230603152459615"></p><ul><li><p>å°ä¼™ä¼´æ³¨æ„çœ‹è€å¸ˆæ ‡è¯†çš„çº¢çº¿ï¼Œåä¸€ä¸ªspanèŠ‚ç‚¹çš„parentid æŒ‡å‘&#x2F;è®°å½• äº†ä¸Šä¸€ä¸ªSpanç»“ç‚¹</p></li><li><p>spanå°±æ˜¯ä¸€æ¬¡è¯·æ±‚ä¿¡æ¯</p></li><li><p>å¤šä¸ªSpané›†åˆå°±æ„æˆ<u>ä¸€æ¡è°ƒç”¨é“¾è·¯</u></p></li><li><p>åœ¨span&#x3D;C è¿™ä¸ªèŠ‚ç‚¹å­˜åœ¨åˆ†æ”¯</p></li></ul><h2 id="8-2-Sleuth-x2F-ZipKin-æ­å»ºé“¾è·¯ç›‘æ§å®ä¾‹"><a href="#8-2-Sleuth-x2F-ZipKin-æ­å»ºé“¾è·¯ç›‘æ§å®ä¾‹" class="headerlink" title="8.2 Sleuth&#x2F;ZipKin-æ­å»ºé“¾è·¯ç›‘æ§å®ä¾‹"></a>8.2 Sleuth&#x2F;ZipKin-æ­å»ºé“¾è·¯ç›‘æ§å®ä¾‹</h2><h3 id="8-2-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£"><a href="#8-2-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£" class="headerlink" title="8.2.1 éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£"></a><strong>8.2.1</strong> éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£</h3><p><strong>è¦æ±‚</strong>: <strong>é€šè¿‡</strong> <strong>Sleuth</strong> <strong>å’Œ</strong> <strong>Zipkin</strong> <strong>å¯ä»¥å¯¹</strong>æœåŠ¡è°ƒç”¨é“¾è·¯<strong>è¿›è¡Œç›‘æ§</strong>, <strong>å¹¶åœ¨</strong> <strong>Zipkin</strong> <strong>è¿›è¡Œæ˜¾ç¤º</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230603152942262.png" alt="image-20230603152942262"></p><h3 id="8-2-2-å®‰è£…-x2F-ä½¿ç”¨-Zipkin"><a href="#8-2-2-å®‰è£…-x2F-ä½¿ç”¨-Zipkin" class="headerlink" title="8.2.2 å®‰è£…**&#x2F;**ä½¿ç”¨ Zipkin"></a><strong>8.2.2</strong> å®‰è£…**&#x2F;**ä½¿ç”¨ <strong>Zipkin</strong></h3><h4 id="8-2-2-1-ä¸‹è½½"><a href="#8-2-2-1-ä¸‹è½½" class="headerlink" title="8.2.2.1 ä¸‹è½½"></a>8.2.2.1 ä¸‹è½½</h4><ol><li><p>ä¸‹è½½åœ°å€ï¼š<a href="https://repo1.maven.org/maven2/io/zipkin/zipkin-server/">https://repo1.maven.org/maven2/io/zipkin/zipkin-server/</a></p></li><li><p>å¾—åˆ° zipkin-server-2.14.1-exec.jar</p></li></ol><h4 id="8-2-2-2-è¿è¡Œ"><a href="#8-2-2-2-è¿è¡Œ" class="headerlink" title="8.2.2.2 è¿è¡Œ"></a>8.2.2.2 è¿è¡Œ</h4><ol><li>è¿›å…¥ zipkin-server-2.14.1-exec.jar æ‰€åœ¨ç›®å½•çš„ç»ˆç«¯</li><li>æ‰§è¡Œå‘½ä»¤  java -jar zipkin-server-2.14.1-exec.jar    å¼€å¯zipkinæœåŠ¡</li></ol><h4 id="8-2-2-3-è®¿é—®"><a href="#8-2-2-3-è®¿é—®" class="headerlink" title="8.2.2.3 è®¿é—®"></a>8.2.2.3 è®¿é—®</h4><p>â€‹æµè§ˆå™¨è¾“å…¥**:<a href="http://localhost:9411/zipkin/">http://localhost:9411/zipkin/</a>**</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230603225430611.png" alt="image-20230603225430611"></p><h3 id="8-2-3-æœåŠ¡æä¾›æ–¹é›†æˆ-Sleuth-x2F-Zipkin"><a href="#8-2-3-æœåŠ¡æä¾›æ–¹é›†æˆ-Sleuth-x2F-Zipkin" class="headerlink" title="8.2.3 æœåŠ¡æä¾›æ–¹é›†æˆ Sleuth&#x2F;Zipkin"></a><strong>8.2.3</strong> æœåŠ¡æä¾›æ–¹é›†æˆ <strong>Sleuth&#x2F;Zipkin</strong></h3><p><strong>1.</strong> ä¿®æ”¹ <strong>member-service-provider-10000</strong> çš„ <strong>pom.xml ,</strong> å¢åŠ å¼•å…¥ <strong>sleuth+zipkin</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼•å…¥sleuthä¸zipkinç›¸å…³ä¾èµ–    --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åŒ…å«äº† sleuth+zipkin--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230603230040079.png" alt="image-20230603230040079" style="zoom:50%;" /><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>member-service-provider-10000</strong> <strong>çš„</strong> <strong>appliaction.xml ,</strong> <strong>æŒ‡å®š</strong> <strong>Zipkin</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">member-service-provider</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/e_commerce_center_db?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">QWEASDzxc123</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">  <span class="comment">#é…ç½®sleuthå’Œzipkin</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://localhost:9411</span></span><br><span class="line">  <span class="attr">sleuth:</span></span><br><span class="line">    <span class="attr">sampler:</span></span><br><span class="line">      <span class="comment"># é‡‡æ ·ç‡ åœ¨0ï½1ä¹‹é—´ï¼Œ1è¡¨ç¤ºå…¨éƒ¨é‡‡é›†</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">1</span></span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.study.springcloud.entity</span></span><br><span class="line"><span class="comment">#é…ç½®eureka-client</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span> <span class="comment">#å°†è‡ªå·±æ³¨å†Œåˆ°Eureka-server</span></span><br><span class="line">    <span class="comment">#è¡¨ç¤ºä»Eureka-serveræŠ“å–æ³¨å†Œä¿¡æ¯</span></span><br><span class="line">    <span class="comment">#å¦‚æœæ˜¯å•èŠ‚ç‚¹ï¼Œå¯ä»¥ä¸é…ç½®ï¼›</span></span><br><span class="line">    <span class="comment">#ä½†æ˜¯provideræ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œåˆ™å¿…é¡»å°†æ­¤é¡¹é…ç½®ä¸ºtrueï¼Œè¿™æ ·æ‰èƒ½é…åˆRibbonä½¿ç”¨è´Ÿè½½å‡è¡¡åŠŸèƒ½</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="comment"># è¡¨ç¤ºå°†è‡ªå·±æ³¨å†Œåˆ°å“ªä¸ªeureka-</span></span><br><span class="line">      <span class="comment"># å°†æœ¬æœåŠ¡æ³¨å†Œåˆ°å¤šä¸ªeureka-serverï¼Œä½¿ç”¨é€—å·é—´éš”å³å¯</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka9001.com:9001/eureka,http://eureka9002.com:9002/eureka</span></span><br><span class="line"><span class="comment">#  instance:</span></span><br><span class="line">    <span class="comment">#1ç§’å‘é€ä¸€æ¬¡å¿ƒè·³(é»˜è®¤æ˜¯90ç§’</span></span><br><span class="line"><span class="comment">#    lease-renewal-interval-in-seconds: 1</span></span><br><span class="line">    <span class="comment">#æœåŠ¡ç«¯æ”¶åˆ°æœ€åä¸€æ¬¡å¿ƒè·³åçš„ç­‰å¾…æ—¶é—´ä¸Šé™</span></span><br><span class="line"><span class="comment">#    lease-expiration-duration-in-seconds: 2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="8-2-4-æœåŠ¡æ¶ˆè´¹æ–¹é›†æˆ-Sleuth-x2F-Zipkin"><a href="#8-2-4-æœåŠ¡æ¶ˆè´¹æ–¹é›†æˆ-Sleuth-x2F-Zipkin" class="headerlink" title="8.2.4 æœåŠ¡æ¶ˆè´¹æ–¹é›†æˆ Sleuth&#x2F;Zipkin"></a>8.2.4 æœåŠ¡æ¶ˆè´¹æ–¹é›†æˆ Sleuth&#x2F;Zipkin</h3><p><strong>1.</strong> ä¿®æ”¹ <strong>member-service-consumer-80</strong> çš„ <strong>pom.xml ,</strong> å¢åŠ å¼•å…¥ <strong>sleuth+zipkin</strong></p><p><strong>2.</strong> ä¿®æ”¹ <strong>member-service-consumer-80</strong> çš„ <strong>appliaction.xml ,</strong> æŒ‡å®š <strong>Zipkin</strong></p><h3 id="8-2-5-æµ‹è¯•"><a href="#8-2-5-æµ‹è¯•" class="headerlink" title="8.2.5 æµ‹è¯•"></a><strong>8.2.5</strong> æµ‹è¯•</h3><h4 id="8-2-5-1-å¯åŠ¨-e-commerce-eureka-server-9001"><a href="#8-2-5-1-å¯åŠ¨-e-commerce-eureka-server-9001" class="headerlink" title="8.2.5.1 å¯åŠ¨ e-commerce-eureka-server-9001"></a>8.2.5.1 å¯åŠ¨ e-commerce-eureka-server-9001</h4><h4 id="8-2-5-2-å¯åŠ¨-member-service-provider-10000"><a href="#8-2-5-2-å¯åŠ¨-member-service-provider-10000" class="headerlink" title="8.2.5.2 å¯åŠ¨ member-service-provider-10000"></a>8.2.5.2 å¯åŠ¨ member-service-provider-10000</h4><h4 id="8-2-5-3-å¯åŠ¨-member-service-consumer-80"><a href="#8-2-5-3-å¯åŠ¨-member-service-consumer-80" class="headerlink" title="8.2.5.3 å¯åŠ¨ member-service-consumer-80"></a>8.2.5.3 å¯åŠ¨ member-service-consumer-80</h4><h4 id="8-2-5-4-æµè§ˆå™¨-æµè§ˆå™¨è¾“å…¥-http-localhost-member-consumer-get-1"><a href="#8-2-5-4-æµè§ˆå™¨-æµè§ˆå™¨è¾“å…¥-http-localhost-member-consumer-get-1" class="headerlink" title="8.2.5.4 æµè§ˆå™¨: æµè§ˆå™¨è¾“å…¥: http://localhost/member/consumer/get/1"></a>8.2.5.4 æµè§ˆå™¨: æµè§ˆå™¨è¾“å…¥: <a href="http://localhost/member/consumer/get/1">http://localhost/member/consumer/get/1</a></h4><h3 id="8-2-6-æŸ¥çœ‹ç›‘æ§-amp-åˆ†æç»“æœ"><a href="#8-2-6-æŸ¥çœ‹ç›‘æ§-amp-åˆ†æç»“æœ" class="headerlink" title="8.2.6 æŸ¥çœ‹ç›‘æ§**&amp;**åˆ†æç»“æœ"></a>8.2.6 æŸ¥çœ‹ç›‘æ§**&amp;**åˆ†æç»“æœ</h3><h4 id="8-2-6-1-æŸ¥çœ‹ç›‘æ§-amp-åˆ†æç»“æœ"><a href="#8-2-6-1-æŸ¥çœ‹ç›‘æ§-amp-åˆ†æç»“æœ" class="headerlink" title="8.2.6.1 æŸ¥çœ‹ç›‘æ§&amp;åˆ†æç»“æœ"></a>8.2.6.1 æŸ¥çœ‹ç›‘æ§&amp;åˆ†æç»“æœ</h4><p><strong>1.</strong> æŸ¥çœ‹ **Zipkin : <a href="http://localhost:9411/zipkin/">http://localhost:9411/zipkin/</a> **</p><p><strong>2.</strong> <strong>é€‰æ‹©æŸä¸ªæœåŠ¡ï¼Œçœ‹ç»“æœ</strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230604102426067.png" alt="image-20230604102426067" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230604102442418.png" alt="image-20230604102442418" style="zoom:50%;" /><p><strong>3.</strong> æŸ¥çœ‹ä¸€æ¬¡è°ƒç”¨é“¾è·¯çš„æ·±åº¦ï¼Œä»¥åŠè¯¥é“¾è·¯åŒ…å«è¯·æ±‚,å„ä¸ªè¯·æ±‚è€—æ—¶ï¼Œ**<u><em>æ‰¾åˆ°è¯·æ±‚ç“¶é¢ˆï¼Œä¸ºä¼˜åŒ–æä¾›ä¾æ®</em></u>**(é‡è¦)</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230604102455803.png" alt="image-20230604102455803" style="zoom:50%;" /><p><strong>4.</strong> <strong>æŸ¥çœ‹æœåŠ¡è°ƒç”¨çš„ä¾èµ–å…³ç³»</strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230604102509066.png" alt="image-20230604102509066" style="zoom:50%;" /><h1 id="9-ğŸŒŸSpringCloudAlibabaNacos-æœåŠ¡æ³¨å†Œä¸­å¿ƒ-æœåŠ¡é…ç½®"><a href="#9-ğŸŒŸSpringCloudAlibabaNacos-æœåŠ¡æ³¨å†Œä¸­å¿ƒ-æœåŠ¡é…ç½®" class="headerlink" title="9 ğŸŒŸSpringCloudAlibabaNacos æœåŠ¡æ³¨å†Œä¸­å¿ƒ+æœåŠ¡é…ç½®"></a>9 ğŸŒŸSpringCloudAlibabaNacos æœåŠ¡æ³¨å†Œä¸­å¿ƒ+æœåŠ¡é…ç½®</h1><h2 id="9-1-NacosåŸºç¡€"><a href="#9-1-NacosåŸºç¡€" class="headerlink" title="9.1 NacosåŸºç¡€"></a>9.1 NacosåŸºç¡€</h2><h3 id="9-1-1-å®˜ç½‘"><a href="#9-1-1-å®˜ç½‘" class="headerlink" title="9.1.1 å®˜ç½‘"></a>9.1.1 å®˜ç½‘</h3><h4 id="9-1-1-1-https-github-com-alibaba-Nacos"><a href="#9-1-1-1-https-github-com-alibaba-Nacos" class="headerlink" title="9.1.1.1 https://github.com/alibaba/Nacos"></a>9.1.1.1 <a href="https://github.com/alibaba/Nacos">https://github.com/alibaba/Nacos</a></h4><h3 id="9-1-2-Nacosæ˜¯ä»€ä¹ˆ"><a href="#9-1-2-Nacosæ˜¯ä»€ä¹ˆ" class="headerlink" title="9.1.2 Nacosæ˜¯ä»€ä¹ˆ?"></a>9.1.2 Nacosæ˜¯ä»€ä¹ˆ?</h3><h4 id="9-1-2-1-ä¸€å¥è¯-Nacos-å°±æ˜¯æ³¨å†Œä¸­å¿ƒ-æ›¿ä»£-Eureka-é…ç½®ä¸­å¿ƒ-æ›¿ä»£-Config"><a href="#9-1-2-1-ä¸€å¥è¯-Nacos-å°±æ˜¯æ³¨å†Œä¸­å¿ƒ-æ›¿ä»£-Eureka-é…ç½®ä¸­å¿ƒ-æ›¿ä»£-Config" class="headerlink" title="9.1.2.1 ä¸€å¥è¯: Nacos å°±æ˜¯æ³¨å†Œä¸­å¿ƒ[æ›¿ä»£ Eureka]+é…ç½®ä¸­å¿ƒ[æ›¿ä»£ Config]"></a>9.1.2.1 ä¸€å¥è¯: <u>Nacos å°±æ˜¯æ³¨å†Œä¸­å¿ƒ[æ›¿ä»£ Eureka]+é…ç½®ä¸­å¿ƒ[æ›¿ä»£ Config]</u></h4><h4 id="9-1-2-2-Nacos-Dynamic-Naming-and-Configuration-Service"><a href="#9-1-2-2-Nacos-Dynamic-Naming-and-Configuration-Service" class="headerlink" title="9.1.2.2 Nacos:Dynamic Naming and Configuration Service"></a>9.1.2.2 Nacos:Dynamic Naming and Configuration Service</h4><h4 id="9-1-2-3-Nacos-æ¶æ„ç†è®ºåŸºç¡€-CAP-ç†è®º-æ”¯æŒ-AP-å’Œ-CP-å¯ä»¥åˆ‡æ¢"><a href="#9-1-2-3-Nacos-æ¶æ„ç†è®ºåŸºç¡€-CAP-ç†è®º-æ”¯æŒ-AP-å’Œ-CP-å¯ä»¥åˆ‡æ¢" class="headerlink" title="9.1.2.3 Nacos:æ¶æ„ç†è®ºåŸºç¡€: CAP ç†è®º (æ”¯æŒ AP å’Œ CP, å¯ä»¥åˆ‡æ¢)"></a>9.1.2.3 Nacos:æ¶æ„ç†è®ºåŸºç¡€: CAP ç†è®º (æ”¯æŒ AP å’Œ CP, å¯ä»¥åˆ‡æ¢)</h4><p>CAPç†è®ºï¼š</p><p>â€‹ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³<strong>ä¸€è‡´æ€§</strong>ï¼ˆConsistencyï¼‰ã€<strong>å¯ç”¨æ€§</strong>ï¼ˆAvailabilityï¼‰å’Œ<strong>åˆ†åŒºå®¹é”™æ€§</strong>ï¼ˆPartition toleranceï¼‰è¿™ä¸‰é¡¹ä¸­çš„ä¸¤é¡¹ã€‚</p><ul><li><strong>ä¸€è‡´æ€§</strong>æŒ‡ â€œall nodes see the same data at the same timeâ€ï¼Œå³æ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´çš„æ•°æ®å®Œå…¨ä¸€è‡´ã€‚å³å¤šå‰¯æœ¬ï¼ˆReplicationsï¼‰é—®é¢˜ä¸­çš„æ•°æ®ä¸€è‡´æ€§</li><li><strong>å¯ç”¨æ€§</strong>æŒ‡â€œ<code>Reads and writes always succeed</code>â€ï¼Œå³æœåŠ¡åœ¨æ­£å¸¸å“åº”æ—¶é—´å†…ä¸€ç›´å¯ç”¨ã€‚å¥½çš„å¯ç”¨æ€§ä¸»è¦æ˜¯æŒ‡ç³»ç»Ÿèƒ½å¤Ÿå¾ˆå¥½çš„ä¸ºç”¨æˆ·æœåŠ¡ï¼Œä¸å‡ºç°ç”¨æˆ·æ“ä½œå¤±è´¥æˆ–è€…è®¿é—®è¶…æ—¶ç­‰ç”¨æˆ·ä½“éªŒä¸å¥½çš„æƒ…å†µã€‚</li><li><strong>åˆ†åŒºå®¹é”™æ€§</strong>æŒ‡â€œthe system continues to operate despite arbitrary message loss or failure of part of the systemâ€ï¼Œå³åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é‡åˆ°æŸèŠ‚ç‚¹æˆ–ç½‘ç»œåˆ†åŒºæ•…éšœçš„æ—¶å€™ï¼Œä»ç„¶èƒ½å¤Ÿå¯¹å¤–æä¾›æ»¡è¶³ä¸€è‡´æ€§æˆ–å¯ç”¨æ€§çš„æœåŠ¡ã€‚</li></ul><p>æ¯”å¦‚å¯¹äºä¸¤ä¸ªç»“ç‚¹å¦‚æœå®ƒä»¬ä¹‹é—´çš„ç½‘ç»œæ–­å¼€äº†ï¼Œæˆ‘ä»¬å‡è®¾éœ€è¦æ»¡è¶³åˆ†åŒºå®¹é”™æ€§ï¼Œé‚£ä¹ˆä¸€å®šè¦åœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´è¿›è¡Œå–èˆ(åˆ†åŒºå®¹é”™æ€§æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ»¡è¶³ä¸€è‡´æ€§é‚£å°±å¿…é¡»ç­‰å¾…ç½‘ç»œæ¢å¤åæ•°æ®è¿›è¡ŒåŒæ­¥åæ‰èƒ½æä¾›æœåŠ¡â€”â€”æ”¾å¼ƒäº†å¯ç”¨æ€§ï¼›åä¹‹ï¼Œå¦‚æœé€‰æ‹©äº†å¯ç”¨æ€§ï¼Œé‚£ä¹ˆä¸¤ä¸ªç»“ç‚¹æä¾›çš„æ•°æ®ä¸€å®šä¸èƒ½ä¿è¯ä¸€è‡´æ€§â€”â€”ç‰ºç‰²äº†ä¸€è‡´æ€§)</p><h3 id="9-1-3-Nacosä¸‹è½½-amp-è¿è¡Œ"><a href="#9-1-3-Nacosä¸‹è½½-amp-è¿è¡Œ" class="headerlink" title="9.1.3 Nacosä¸‹è½½&amp;è¿è¡Œ"></a>9.1.3 Nacosä¸‹è½½&amp;è¿è¡Œ</h3><h4 id="9-1-3-1-ä¸‹è½½-https-github-com-alibaba-nacos-releases-tag-1-2-1"><a href="#9-1-3-1-ä¸‹è½½-https-github-com-alibaba-nacos-releases-tag-1-2-1" class="headerlink" title="9.1.3.1 ä¸‹è½½: https://github.com/alibaba/nacos/releases/tag/1.2.1"></a>9.1.3.1 ä¸‹è½½: <a href="https://github.com/alibaba/nacos/releases/tag/1.2.1">https://github.com/alibaba/nacos/releases/tag/1.2.1</a></h4><h4 id="9-1-3-2-ç¯å¢ƒè¦æ±‚-Java8-x2F-Maven-3-2-x"><a href="#9-1-3-2-ç¯å¢ƒè¦æ±‚-Java8-x2F-Maven-3-2-x" class="headerlink" title="9.1.3.2 ç¯å¢ƒè¦æ±‚: Java8&#x2F;Maven 3.2.x+"></a>9.1.3.2 ç¯å¢ƒè¦æ±‚: Java8&#x2F;Maven 3.2.x+</h4><h4 id="9-1-3-3-è§£å‹"><a href="#9-1-3-3-è§£å‹" class="headerlink" title="9.1.3.3 è§£å‹"></a>9.1.3.3 è§£å‹</h4><p>åœ¨æˆ‘çš„macä¸­æ‰§è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /Applications/nacos/bin//å› ä¸ºæˆ‘æŠŠnacosæ”¾åœ¨äº†/Applicationsç›®å½•ä¸‹</span><br><span class="line">sh startup.sh -m standalone//åœ¨nacos/binç›®å½•ä¸‹æ‰§è¡Œè¯¥è¯­å¥å³å¯æˆåŠŸå¯åŠ¨nacosæœåŠ¡</span><br><span class="line">sh shutdown.sh//å…³é—­nacos</span><br></pre></td></tr></table></figure><h4 id="9-1-3-4-æµè§ˆå™¨-http-localhost-8848-nacos"><a href="#9-1-3-4-æµè§ˆå™¨-http-localhost-8848-nacos" class="headerlink" title="9.1.3.4 æµè§ˆå™¨ http://localhost:8848/nacos"></a>9.1.3.4 æµè§ˆå™¨ <a href="http://localhost:8848/nacos">http://localhost:8848/nacos</a></h4><h4 id="9-1-3-5-ç”¨æˆ·å-x2F-å¯†ç -ä¸º-nacos"><a href="#9-1-3-5-ç”¨æˆ·å-x2F-å¯†ç -ä¸º-nacos" class="headerlink" title="9.1.3.5 ç”¨æˆ·å&#x2F;å¯†ç  ä¸º nacos"></a>9.1.3.5 ç”¨æˆ·å&#x2F;å¯†ç  ä¸º nacos</h4><h2 id="9-2-åˆ›å»º-Nacos-æœåŠ¡æä¾›è€…"><a href="#9-2-åˆ›å»º-Nacos-æœåŠ¡æä¾›è€…" class="headerlink" title="9.2 åˆ›å»º Nacos æœåŠ¡æä¾›è€…"></a>9.2 åˆ›å»º Nacos æœåŠ¡æä¾›è€…</h2><h3 id="9-2-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£"><a href="#9-2-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£" class="headerlink" title="9.2.1 éœ€æ±‚è¯´æ˜&#x2F;å›¾è§£"></a>9.2.1 éœ€æ±‚è¯´æ˜&#x2F;å›¾è§£</h3><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230604111207532.png" alt="image-20230604111207532" style="zoom:50%;" /><h3 id="9-2-2-åˆ›å»º-member-service-nacos-provider-10004-å¹¶æ³¨å†Œåˆ°-NacosServer8848"><a href="#9-2-2-åˆ›å»º-member-service-nacos-provider-10004-å¹¶æ³¨å†Œåˆ°-NacosServer8848" class="headerlink" title="9.2.2 åˆ›å»º member-service-nacos-provider-10004 å¹¶æ³¨å†Œåˆ° NacosServer8848"></a><strong>9.2.2</strong> åˆ›å»º member-service-nacos-provider-10004 å¹¶æ³¨å†Œåˆ° NacosServer8848</h3><h4 id="9-2-2-1-åˆ›å»º-member-service-nacos-provider-10004"><a href="#9-2-2-1-åˆ›å»º-member-service-nacos-provider-10004" class="headerlink" title="9.2.2.1 åˆ›å»º member-service-nacos-provider-10004"></a>9.2.2.1 åˆ›å»º member-service-nacos-provider-10004</h4><ol><li><p>å‚è€ƒ<strong>member-service-provider-10000</strong> æ¥åˆ›å»º <strong>member-service-nacos-provider-10004</strong> å³å¯</p></li><li><p>åˆ›å»ºå¥½åï¼Œä½¿ç”¨member-service-provider-10000 çš„æºç å’Œé…ç½®æ›¿æ¢member-service-nacos-provider-10004 ç”Ÿæˆçš„ä»£ç </p></li><li><p>æé†’ï¼Œæ‹·è´æ—¶ä¸è¦å¿˜è®°æ‹·è´ resources&#x2F;mapper&#x2F;MernberrVapper.xml è¿™äº›xeox.xrl æ–‡ä»¶</p></li></ol><h4 id="9-2-2-2-ä¿®æ”¹çˆ¶é¡¹ç›®-pom-xml"><a href="#9-2-2-2-ä¿®æ”¹çˆ¶é¡¹ç›®-pom-xml" class="headerlink" title="9.2.2.2 ä¿®æ”¹çˆ¶é¡¹ç›® pom.xml"></a>9.2.2.2 ä¿®æ”¹çˆ¶é¡¹ç›® pom.xml</h4><p><strong>1.</strong> å‚è€ƒå®˜æ–¹æ–‡æ¡£ <strong><a href="https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html#_spring_cloud_alibaba_nacos_discovery">https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html#_spring_cloud_alibaba_nacos_discovery</a></strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="9-2-2-3-ä¿®æ”¹æœ¬æ¨¡å—-pom-xml"><a href="#9-2-2-3-ä¿®æ”¹æœ¬æ¨¡å—-pom-xml" class="headerlink" title="9.2.2.3 ä¿®æ”¹æœ¬æ¨¡å— pom.xml"></a>9.2.2.3 ä¿®æ”¹æœ¬æ¨¡å— pom.xml</h4><p><strong>1.</strong> å°† <strong>member-service-provider-10000</strong> çš„ <strong>pom.xml</strong> çš„<dependencies>â€¦</dependencies></p><p>æ‹·è´è¿‡æ¥ï¼Œä¿®æ”¹å³å¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>e-commerce-center<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>member-service-nacos-provider-10004<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥nacos-start nacosåœºæ™¯å¯åŠ¨å™¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        ä½¿ç”¨ç‰ˆæœ¬ä»²è£ï¼Œä»çˆ¶é¡¹ç›®ä¸­è·å–ç‰ˆæœ¬--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        springbootç¨‹åºçš„ç›‘æ§ç³»ç»Ÿï¼Œå®ç°ç³»ç»Ÿå¥åº·æ£€æµ‹</span></span><br><span class="line"><span class="comment">                    å¯ä»¥é€šè¿‡ http://localhost:10000/actuator çœ‹åˆ°ç›¸å…³è¿æ¥</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å¼•å…¥ e_commerce_center-common-api --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.study.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>e_commerce_center-common-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="9-2-2-4-åˆ›å»º-application-yml"><a href="#9-2-2-4-åˆ›å»º-application-yml" class="headerlink" title="9.2.2.4 åˆ›å»º application.yml"></a>9.2.2.4 åˆ›å»º application.yml</h4><p><strong>1.</strong> å°† <strong>member-service-provider-10000</strong> çš„ <strong>application.xml</strong> æ‹·è´è¿‡æ¥ï¼Œä¿®æ”¹å³å¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10004</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">member-service-nacos-provider</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/e_commerce_center_db?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">QWEASDzxc123</span></span><br><span class="line"><span class="comment">#  é…ç½®nacos</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#é…ç½®nacos serverçš„åœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.study.springcloud.entity</span></span><br><span class="line"><span class="comment">#é…ç½®æš´éœ²æ‰€æœ‰çš„ç›‘æ§ç‚¹</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&#x27;*&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="9-2-2-5-åˆ›å»ºä¸»å¯åŠ¨ç±»"><a href="#9-2-2-5-åˆ›å»ºä¸»å¯åŠ¨ç±»" class="headerlink" title="9.2.2.5 åˆ›å»ºä¸»å¯åŠ¨ç±»"></a>9.2.2.5 åˆ›å»ºä¸»å¯åŠ¨ç±»</h4><p><strong>1.</strong> åˆ›å»ºä¸»å¯åŠ¨ç±» MemberNacosProviderApplication10004</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼•å…¥nacoså‘ç°çš„æ³¨è§£</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemberNacosProviderApplication10004</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MemberNacosProviderApplication10004.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9-2-2-6-ä¸ºçœ‹åˆ°æ›´å¥½æç¤ºï¼Œä¿®æ”¹-Controller"><a href="#9-2-2-6-ä¸ºçœ‹åˆ°æ›´å¥½æç¤ºï¼Œä¿®æ”¹-Controller" class="headerlink" title="9.2.2.6 ä¸ºçœ‹åˆ°æ›´å¥½æç¤ºï¼Œä¿®æ”¹ Controller"></a>9.2.2.6 ä¸ºçœ‹åˆ°æ›´å¥½æç¤ºï¼Œä¿®æ”¹ Controller</h4><p>â€¦â€¦</p><h4 id="9-2-2-7-æµ‹è¯•"><a href="#9-2-2-7-æµ‹è¯•" class="headerlink" title="9.2.2.7 æµ‹è¯•"></a>9.2.2.7 æµ‹è¯•</h4><h5 id="9-2-2-7-1-å¯åŠ¨-Nacos-Server-8848"><a href="#9-2-2-7-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="9.2.2.7.1 å¯åŠ¨ Nacos Server 8848"></a><strong>9.2.2.7.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="9-2-2-7-2-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#9-2-2-7-2-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="9.2.2.7.2 å¯åŠ¨ member-service-nacos-provider-10004"></a>9.2.2.7.2 å¯åŠ¨ <strong>member-service-nacos-provider-10004</strong></h5><h5 id="9-2-2-7-3-è§‚å¯Ÿ-nacos-æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ"><a href="#9-2-2-7-3-è§‚å¯Ÿ-nacos-æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ" class="headerlink" title="9.2.2.7.3 è§‚å¯Ÿ nacos æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ"></a><strong>9.2.2.7.3</strong> è§‚å¯Ÿ <strong>nacos</strong> æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ</h5><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230604130757230.png" alt="image-20230604130757230"></p><h3 id="9-2-3-åˆ›å»º-member-service-nacos-provider-10006-å¹¶æ³¨å†Œåˆ°-NacosServer8848"><a href="#9-2-3-åˆ›å»º-member-service-nacos-provider-10006-å¹¶æ³¨å†Œåˆ°-NacosServer8848" class="headerlink" title="9.2.3 åˆ›å»º member-service-nacos-provider-10006 å¹¶æ³¨å†Œåˆ° NacosServer8848"></a>9.2.3 åˆ›å»º member-service-nacos-provider-10006 å¹¶æ³¨å†Œåˆ° NacosServer8848</h3><h4 id="9-2-3-1-åˆ›å»º-member-service-nacos-provider-10006"><a href="#9-2-3-1-åˆ›å»º-member-service-nacos-provider-10006" class="headerlink" title="9.2.3.1 åˆ›å»º member-service-nacos-provider-10006"></a>9.2.3.1 åˆ›å»º member-service-nacos-provider-10006</h4><ol><li><p>å‚è€ƒmember-service-nacos-provider-10004 æ¥åˆ›å»º member-service-nacos-provider-10006 å³å¯</p></li><li><p>åˆ›å»ºå¥½åï¼Œä½¿ç”¨member-service-nacos-provider-10004 çš„æºç å’Œé…ç½æ›¿æ¢member-service-nacos-provider-10006 ç”Ÿæˆçš„ä»£ç </p></li><li><p>æé†’ï¼Œæ‹·è´æ—¶ä¸è¦å¿˜è®°æ‹·è´ resources&#x2F;mapper&#x2F;MemberMapper.xml è¿™äº›xoxx.xmlæ–‡ä»¶</p></li></ol><h4 id="9-2-3-2-ä¿®æ”¹æœ¬æ¨¡å—-pom-xml"><a href="#9-2-3-2-ä¿®æ”¹æœ¬æ¨¡å—-pom-xml" class="headerlink" title="9.2.3.2 ä¿®æ”¹æœ¬æ¨¡å— pom.xml"></a>9.2.3.2 ä¿®æ”¹æœ¬æ¨¡å— pom.xml</h4><p><strong>1.</strong> å°† <strong>member-service-provider-10000</strong> çš„ <strong>pom.xml</strong> çš„<dependencies>â€¦</dependencies></p><p>æ‹·è´è¿‡æ¥ï¼Œä¿®æ”¹å³å¯</p><h4 id="9-2-3-3-åˆ›å»º-application-yml"><a href="#9-2-3-3-åˆ›å»º-application-yml" class="headerlink" title="9.2.3.3 åˆ›å»º application.yml"></a>9.2.3.3 åˆ›å»º application.yml</h4><p><strong>1.</strong> å°† <strong>member-service-nacos-provider-10004</strong> çš„ <strong>application.xml</strong> æ‹·è´è¿‡æ¥ï¼Œä¿®æ”¹ç«¯å£å³å¯</p><h4 id="9-2-3-4-åˆ›å»ºä¸»å¯åŠ¨ç±»"><a href="#9-2-3-4-åˆ›å»ºä¸»å¯åŠ¨ç±»" class="headerlink" title="9.2.3.4 åˆ›å»ºä¸»å¯åŠ¨ç±»"></a>9.2.3.4 åˆ›å»ºä¸»å¯åŠ¨ç±»</h4><p><strong>1.</strong> åˆ›å»ºä¸»å¯åŠ¨ç±» MemberNacosProviderApplication10006 (ä¹Ÿå¤åˆ¶è¿‡æ¥ï¼Œæ”¹ä¸ªåç§°å³å¯)</p><h4 id="9-2-3-5-ä¸ºçœ‹åˆ°æ›´å¥½æç¤ºï¼Œä¿®æ”¹-Controller"><a href="#9-2-3-5-ä¸ºçœ‹åˆ°æ›´å¥½æç¤ºï¼Œä¿®æ”¹-Controller" class="headerlink" title="9.2.3.5 ä¸ºçœ‹åˆ°æ›´å¥½æç¤ºï¼Œä¿®æ”¹ Controller"></a>9.2.3.5 ä¸ºçœ‹åˆ°æ›´å¥½æç¤ºï¼Œä¿®æ”¹ Controller</h4><h4 id="9-2-3-6-æµ‹è¯•"><a href="#9-2-3-6-æµ‹è¯•" class="headerlink" title="9.2.3.6 æµ‹è¯•"></a>9.2.3.6 æµ‹è¯•</h4><h5 id="9-2-3-6-1-ä¿è¯-Nacos-Server-8848-æ˜¯å¯åŠ¨çš„"><a href="#9-2-3-6-1-ä¿è¯-Nacos-Server-8848-æ˜¯å¯åŠ¨çš„" class="headerlink" title="9.2.3.6.1 ä¿è¯ Nacos Server 8848 æ˜¯å¯åŠ¨çš„"></a><strong>9.2.3.6.1</strong> ä¿è¯ <strong>Nacos Server 8848</strong> æ˜¯å¯åŠ¨çš„</h5><h5 id="9-2-3-6-2-å¯åŠ¨-member-service-nacos-provider-10006"><a href="#9-2-3-6-2-å¯åŠ¨-member-service-nacos-provider-10006" class="headerlink" title="9.2.3.6.2 å¯åŠ¨ **member-service-nacos-provider-10006 **"></a><strong>9.2.3.6.2</strong> å¯åŠ¨ **member-service-nacos-provider-10006 **</h5><h5 id="9-2-3-6-3-è§‚å¯Ÿ-nacos-æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ"><a href="#9-2-3-6-3-è§‚å¯Ÿ-nacos-æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ" class="headerlink" title="9.2.3.6.3 è§‚å¯Ÿ nacos æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ"></a><strong>9.2.3.6.3</strong> è§‚å¯Ÿ <strong>nacos</strong> æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ</h5><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230605235515301.png" alt="image-20230605235515301"></p><h5 id="9-2-3-6-4-æµè§ˆå™¨-http-localhost-10006-member-get-1"><a href="#9-2-3-6-4-æµè§ˆå™¨-http-localhost-10006-member-get-1" class="headerlink" title="9.2.3.6.4 æµè§ˆå™¨**: http://localhost:10006/member/get/1**"></a><strong>9.2.3.6.4</strong> æµè§ˆå™¨**: <a href="http://localhost:10006/member/get/1">http://localhost:10006/member/get/1</a>**</h5><h2 id="9-3-åˆ›å»º-Nacos-çš„æœåŠ¡æ¶ˆè´¹è€…"><a href="#9-3-åˆ›å»º-Nacos-çš„æœåŠ¡æ¶ˆè´¹è€…" class="headerlink" title="9.3 åˆ›å»º Nacos çš„æœåŠ¡æ¶ˆè´¹è€…"></a>9.3 åˆ›å»º Nacos çš„æœåŠ¡æ¶ˆè´¹è€…</h2><h3 id="9-3-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£"><a href="#9-3-1-éœ€æ±‚è¯´æ˜-x2F-å›¾è§£" class="headerlink" title="9.3.1 éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£"></a><strong>9.3.1</strong> éœ€æ±‚è¯´æ˜**&#x2F;**å›¾è§£</h3><p><strong>â€“</strong> ç¤ºæ„å›¾</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230619155537025.png" alt="image-20230619155537025" style="zoom:50%;" /><h3 id="9-3-2-åˆ›å»º-member-service-nacos-consumer-80-å¹¶æ³¨å†Œåˆ°-NacosServer8848"><a href="#9-3-2-åˆ›å»º-member-service-nacos-consumer-80-å¹¶æ³¨å†Œåˆ°-NacosServer8848" class="headerlink" title="9.3.2 åˆ›å»º member-service-nacos-consumer-80 å¹¶æ³¨å†Œåˆ° NacosServer8848"></a><strong>9.3.2</strong> åˆ›å»º <strong>member-service-nacos-consumer-80</strong> å¹¶æ³¨å†Œåˆ° <strong>NacosServer8848</strong></h3><h4 id="9-3-2-1-åˆ›å»º-member-service-nacos-consumer-80"><a href="#9-3-2-1-åˆ›å»º-member-service-nacos-consumer-80" class="headerlink" title="9.3.2.1 åˆ›å»º member-service-nacos-consumer-80"></a>9.3.2.1 åˆ›å»º member-service-nacos-consumer-80</h4><ol><li>å‚è€ƒ member-service-consumer-80 æ¥åˆ›å»º member-service-nacos-consumer-80 å³å¯</li></ol><h4 id="9-3-2-2-ä¿®æ”¹-pom-xml"><a href="#9-3-2-2-ä¿®æ”¹-pom-xml" class="headerlink" title="9.3.2.2 ä¿®æ”¹ pom.xml"></a>9.3.2.2 ä¿®æ”¹ pom.xml</h4><p>å°† <strong>member-service-consumer-80</strong> çš„ <strong>pom.xml</strong> çš„<dependencies>â€¦</dependencies> æ‹· è´è¿‡æ¥ï¼Œä¿®æ”¹å³å¯</p><h4 id="9-3-2-3-åˆ›å»º-application-yml"><a href="#9-3-2-3-åˆ›å»º-application-yml" class="headerlink" title="9.3.2.3 åˆ›å»º application.yml"></a>9.3.2.3 åˆ›å»º application.yml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">member-service-consumer-80</span></span><br><span class="line">    <span class="comment">#é…ç½®nacos</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="comment">#å¯åŠ¨nacosæœåŠ¡çš„ipä»¥åŠç«¯å£</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br></pre></td></tr></table></figure><h4 id="9-3-2-4-åˆ›å»ºä¸»å¯åŠ¨ç±»"><a href="#9-3-2-4-åˆ›å»ºä¸»å¯åŠ¨ç±»" class="headerlink" title="9.3.2.4 åˆ›å»ºä¸»å¯åŠ¨ç±»"></a>9.3.2.4 åˆ›å»ºä¸»å¯åŠ¨ç±»</h4><p>â€¦â€¦</p><h4 id="9-3-2-5-ä¸šåŠ¡ç±»"><a href="#9-3-2-5-ä¸šåŠ¡ç±»" class="headerlink" title="9.3.2.5 ä¸šåŠ¡ç±»"></a>9.3.2.5 ä¸šåŠ¡ç±»</h4><p><em>nacos</em> æœ¬èº«å°±é›†æˆäº† <em>Ribbon,</em> ç›´æ¥æ”¯æŒ <em>Ribbon(è´Ÿè½½å‡è¡¡)+RestTemplate(è¿œç¨‹è°ƒç”¨)</em> è°ƒç”¨</p><p><strong>1.</strong> åˆ›å»ºé…ç½®ç±» <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;CustomizationBean.java</strong></p><p><strong>2.</strong> åˆ›å»º <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberNacosConsumerController.java</strong></p><h4 id="9-3-2-6-æµ‹è¯•"><a href="#9-3-2-6-æµ‹è¯•" class="headerlink" title="9.3.2.6 æµ‹è¯•"></a>9.3.2.6 æµ‹è¯•</h4><h5 id="9-3-2-6-1-å¯åŠ¨-Nacos-Server-8848"><a href="#9-3-2-6-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="9.3.2.6.1 å¯åŠ¨ Nacos Server 8848"></a><strong>9.3.2.6.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="9-3-2-6-2-å¯åŠ¨-member-service-nacos-provider-10004-x2F-10006-9-3-2-6-3-å¯åŠ¨-member-service-nacos-consumer-80"><a href="#9-3-2-6-2-å¯åŠ¨-member-service-nacos-provider-10004-x2F-10006-9-3-2-6-3-å¯åŠ¨-member-service-nacos-consumer-80" class="headerlink" title="9.3.2.6.2 å¯åŠ¨ member-service-nacos-provider-10004&#x2F;10006 9.3.2.6.3 å¯åŠ¨ member-service-nacos-consumer-80"></a>9.3.2.6.2 å¯åŠ¨ <strong>member-service-nacos-provider-10004&#x2F;10006 9.3.2.6.3</strong> å¯åŠ¨ member-service-nacos-consumer-80</h5><h5 id="9-3-2-6-4-æµè§ˆå™¨-http-localhost-member-nacos-consumer-get-1"><a href="#9-3-2-6-4-æµè§ˆå™¨-http-localhost-member-nacos-consumer-get-1" class="headerlink" title="9.3.2.6.4 æµè§ˆå™¨**: http://localhost/member/nacos/consumer/get/1**"></a>9.3.2.6.4 æµè§ˆå™¨**: <a href="http://localhost/member/nacos/consumer/get/1">http://localhost/member/nacos/consumer/get/1</a>**</h5><h4 id="9-3-2-7-é…ç½®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œ-æµ‹è¯•å®Œæ¯•æ¢å¤æˆåŸæ¥çš„è½®è¯¢ç®—æ³•"><a href="#9-3-2-7-é…ç½®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œ-æµ‹è¯•å®Œæ¯•æ¢å¤æˆåŸæ¥çš„è½®è¯¢ç®—æ³•" class="headerlink" title="9.3.2.7 é…ç½®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œ æµ‹è¯•å®Œæ¯•æ¢å¤æˆåŸæ¥çš„è½®è¯¢ç®—æ³•"></a>9.3.2.7 é…ç½®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œ æµ‹è¯•å®Œæ¯•æ¢å¤æˆåŸæ¥çš„è½®è¯¢ç®—æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.netflix.loadbalancer.IRule;</span><br><span class="line"><span class="keyword">import</span> com.netflix.loadbalancer.RandomRule;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/6/19</span></span><br><span class="line"><span class="comment"> * 16:28</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * RibbonRuleé…ç½®ç±»ï¼Œé…ç½®è‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RibbonRule</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> IRule <span class="title function_">myRibbonRule</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RandomRule</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="9-4-NacosAPå’ŒCPåˆ‡æ¢-ç†è®º"><a href="#9-4-NacosAPå’ŒCPåˆ‡æ¢-ç†è®º" class="headerlink" title="9.4 NacosAPå’ŒCPåˆ‡æ¢-ç†è®º"></a>9.4 NacosAPå’ŒCPåˆ‡æ¢-ç†è®º</h2><h3 id="9-4-1-å„ç§æ³¨å†Œä¸­å¿ƒå¯¹æ¯”"><a href="#9-4-1-å„ç§æ³¨å†Œä¸­å¿ƒå¯¹æ¯”" class="headerlink" title="9.4.1 å„ç§æ³¨å†Œä¸­å¿ƒå¯¹æ¯”"></a><strong>9.4.1</strong> å„ç§æ³¨å†Œä¸­å¿ƒå¯¹æ¯”</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230619224742402.png" alt="image-20230619224742402"></p><h3 id="9-4-2-é€‰æ‹©-AP-è¿˜æ˜¯-CP"><a href="#9-4-2-é€‰æ‹©-AP-è¿˜æ˜¯-CP" class="headerlink" title="9.4.2 é€‰æ‹© AP è¿˜æ˜¯ CP?"></a><strong>9.4.2</strong> é€‰æ‹© <strong>AP</strong> è¿˜æ˜¯ <strong>CP?</strong></h3><p> <strong>1</strong>ã€<strong>CP:</strong> æœåŠ¡å¯ä»¥ä¸èƒ½ç”¨ï¼Œä½†å¿…é¡»è¦ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚<br> <strong>2</strong>ã€<strong>AP:</strong> æ•°æ®å¯ä»¥çŸ­æš‚ä¸ä¸€è‡´ï¼Œä½†æœ€ç»ˆæ˜¯éœ€è¦ä¸€è‡´çš„ï¼Œæ— è®ºå¦‚ä½•éƒ½è¦ä¿è¯æœåŠ¡çš„å¯ç”¨ã€‚<br> <strong>3</strong>ã€å–èˆ:åªèƒ½åœ¨ <strong>CP</strong> å’Œ <strong>AP</strong> é€‰æ‹©ä¸€ä¸ªå¹³è¡¡ç‚¹**,** å¤§å¤šæ•°éƒ½æ˜¯é€‰æ‹© <strong>AP</strong> æ¨¡å¼</p><h3 id="9-4-3-APå’ŒCPåˆ‡æ¢"><a href="#9-4-3-APå’ŒCPåˆ‡æ¢" class="headerlink" title="9.4.3 APå’ŒCPåˆ‡æ¢"></a><strong>9.4.3 AP</strong>å’Œ<strong>CP</strong>åˆ‡æ¢</h3><p><strong>Nacos</strong> é›†ç¾¤é»˜è®¤æ”¯æŒçš„æ˜¯<strong>CAP</strong>åŸåˆ™ä¸­çš„<strong>AP</strong>åŸåˆ™ï¼Œä½†æ˜¯ä¹Ÿå¯åˆ‡æ¢ä¸º<strong>CP</strong>åŸåˆ™**(<strong>ä¸€èˆ¬ä¸åˆ‡æ¢</strong>)**</p><h4 id="9-4-3-2-å‚è€ƒ-https-www-jianshu-com-p-c56e22c222bb"><a href="#9-4-3-2-å‚è€ƒ-https-www-jianshu-com-p-c56e22c222bb" class="headerlink" title="9.4.3.2 å‚è€ƒ: https://www.jianshu.com/p/c56e22c222bb"></a>9.4.3.2 å‚è€ƒ: <a href="https://www.jianshu.com/p/c56e22c222bb">https://www.jianshu.com/p/c56e22c222bb</a></h4><h2 id="9-5-Nacos-é…ç½®ä¸­å¿ƒå®ä¾‹"><a href="#9-5-Nacos-é…ç½®ä¸­å¿ƒå®ä¾‹" class="headerlink" title="9.5 Nacos é…ç½®ä¸­å¿ƒå®ä¾‹"></a>9.5 Nacos é…ç½®ä¸­å¿ƒå®ä¾‹</h2><h3 id="9-5-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#9-5-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="9.5.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>9.5.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h3><p>å¾®æœåŠ¡å„ä¸ªæ¨¡å—ä¸­æœ‰è®¸å¤šé…ç½®æ˜¯ç›¸åŒçš„ï¼Œåœ¨é…ç½®ä¸­å¿ƒè¿›è¡Œç»Ÿä¸€çš„é…ç½®ä¸ä»…é…ç½®æ›´æ–¹ä¾¿ï¼Œä¹Ÿä¾¿äºæ—¥åä¿®æ”¹ã€‚</p><p><strong>â€“</strong> ç¤ºæ„å›¾</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230619225914409.png" alt="image-20230619225914409" style="zoom: 33%;" /><h3 id="9-5-2-åœ¨-Nacos-Server-åŠ å…¥é…ç½®"><a href="#9-5-2-åœ¨-Nacos-Server-åŠ å…¥é…ç½®" class="headerlink" title="9.5.2 åœ¨ Nacos Server åŠ å…¥é…ç½®"></a><strong>9.5.2</strong> åœ¨ <strong>Nacos Server</strong> åŠ å…¥é…ç½®</h3><ol><li>è¿›å…¥åˆ° Nacos Server</li><li>åŠ å…¥é…ç½®ï¼Œ è€éŸ©ç‰¹åˆ«æé†’: æ–‡ä»¶åç¼€.yaml åˆ«å¿˜äº†</li></ol><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230619230758715.png" alt="image-20230619230758715" style="zoom:50%;" /><p><strong>Data ID: e-commerce-nacos-config-client-dev.yaml</strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230619230855754.png" alt="image-20230619230855754" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230619230930267.png" alt="image-20230619230930267" style="zoom:50%;" /><h3 id="9-5-3-åˆ›å»º-Nacos-é…ç½®å®¢æˆ·ç«¯æ¨¡å—-e-commerce-nacos-config-client5000"><a href="#9-5-3-åˆ›å»º-Nacos-é…ç½®å®¢æˆ·ç«¯æ¨¡å—-e-commerce-nacos-config-client5000" class="headerlink" title="9.5.3 åˆ›å»º Nacos é…ç½®å®¢æˆ·ç«¯æ¨¡å— e-commerce-nacos-config-client5000"></a><strong>9.5.3</strong> åˆ›å»º <strong>Nacos</strong> é…ç½®å®¢æˆ·ç«¯æ¨¡å— <strong>e-commerce-nacos-config-client5000</strong></h3><h4 id="9-5-3-1-åˆ›å»º-Module"><a href="#9-5-3-1-åˆ›å»º-Module" class="headerlink" title="9.5.3.1 åˆ›å»º Module"></a>9.5.3.1 åˆ›å»º Module</h4><p>å…ˆåˆ›å»º <strong>e-commerce-nacos-config-client5000</strong> æ¨¡å—ï¼Œå‚è€ƒä»¥å‰çš„æ–¹æ³•</p><h4 id="9-5-3-2-ä¿®æ”¹-pom-xml"><a href="#9-5-3-2-ä¿®æ”¹-pom-xml" class="headerlink" title="9.5.3.2 ä¿®æ”¹ pom.xml"></a>9.5.3.2 ä¿®æ”¹ pom.xml</h4><p><strong>1.</strong> ä¿®æ”¹ <strong>pom.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ä¹‹å‰çš„æ¶ˆè´¹æ–¹xmlæ–‡ä»¶çš„åŸºç¡€ä¸Šæ·»åŠ ï¼š</span><br><span class="line"><span class="comment">&lt;!--nacos-config--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="9-5-3-3-åˆ›å»º-application-xml"><a href="#9-5-3-3-åˆ›å»º-application-xml" class="headerlink" title="9.5.3.3 åˆ›å»º application.xml"></a>9.5.3.3 åˆ›å»º application.xml</h4><p>åˆ›å»º <strong>application.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span> <span class="comment">#æŒ‡å®šç¯å¢ƒï¼Œå¸¸è§çš„ç¯å¢ƒæœ‰ dev/test/prod å¼€å‘ï¼Œæµ‹è¯•ï¼Œç”Ÿäº§</span></span><br></pre></td></tr></table></figure><p>å‚è€ƒ*: <a href="https://blog.csdn.net/zsl131557/article/details/80886114">https://blog.csdn.net/zsl131557/article/details/80886114</a>*</p><h4 id="9-5-3-4-åˆ›å»º-bootstrap-yml"><a href="#9-5-3-4-åˆ›å»º-bootstrap-yml" class="headerlink" title="9.5.3.4 åˆ›å»º bootstrap.yml"></a>9.5.3.4 åˆ›å»º bootstrap.yml</h4><p>åˆ›å»º <strong>bootstrap.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">5000</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œçš„name éœ€è¦å‚è€ƒnacosé…ç½®ä¸­å¿ƒçš„DataId</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">e-commerce-nacos-config-client</span></span><br><span class="line">  <span class="comment">#é…ç½®nacos</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#nacosæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#nacosé…ç½®ä¸­å¿ƒåœ°å€</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span> <span class="comment">#æŒ‡å®šè¯»å–é…ç½®ä¸­å¿ƒçš„yamlåç¼€çš„é…ç½®</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">#è€éŸ©è§£è¯»[é‡è¦]</span></span><br><span class="line"><span class="comment">#nacos é…ç½®å®¢æˆ·ç«¯ï¼Œä¼šæ ¹æ®é…ç½®ï¼Œæ‰¾åˆ°èµ„æºè·å–é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#(1 config-server-addr)                       localhost:8848</span></span><br><span class="line"><span class="comment">#(2 spring.application.name/å¯¹åº” DataId)       e-commerce-nacos-config-client </span></span><br><span class="line"><span class="comment">#(3 spring.profiles.active)                   dev</span></span><br><span class="line"><span class="comment">#(4 spring.cloud.nacos.config.file-extension æ–‡ä»¶æ‰©å±•å)    .yaml</span></span><br><span class="line"><span class="comment">#ä¹Ÿå°±åˆ° localhost:8848 ä¸‹çš„ e-commerce-nacos-config-client-dev.yaml è·å–é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment">#è§„åˆ™æ€»ç»“: $&#123;spring.application.name&#125;-$&#123;spring.profile.active&#125;.$&#123;spring.cloud.nacos.config.file-extension&#125;</span></span><br></pre></td></tr></table></figure><h4 id="9-5-3-5-ä¸»å¯åŠ¨ç±»"><a href="#9-5-3-5-ä¸»å¯åŠ¨ç±»" class="headerlink" title="9.5.3.5 ä¸»å¯åŠ¨ç±»"></a>9.5.3.5 ä¸»å¯åŠ¨ç±»</h4><p>â€¦â€¦</p><h4 id="9-5-3-6-ä¸šåŠ¡ç±»"><a href="#9-5-3-6-ä¸šåŠ¡ç±»" class="headerlink" title="9.5.3.6 ä¸šåŠ¡ç±»"></a>9.5.3.6 ä¸šåŠ¡ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/6/20</span></span><br><span class="line"><span class="comment"> * 15:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NacosConfigClientController</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * è§£è¯» <span class="doctag">@Value</span>(&quot;$&#123;config.ip&#125;&quot;)</span></span><br><span class="line"><span class="comment">    * 1. client ä¼šæ‹‰å– Nacos Server çš„ e-commerce-nacos-config-client-dev.yaml * config:</span></span><br><span class="line"><span class="comment">    * ip: &quot;122.11.11.11&quot;</span></span><br><span class="line"><span class="comment">    * name: &quot;éŸ©é¡ºå¹³æ•™è‚²&quot;</span></span><br><span class="line"><span class="comment">    * 2. <span class="doctag">@Value</span>(&quot;$&#123;config.ip&#125;&quot;) ä¼šå°† config.ip èµ‹ç»™ configIp</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;config.ip&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String configIp;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;config.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String configName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/nacos/config/ip&quot;)</span> <span class="keyword">public</span> String <span class="title function_">getConfigIp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> configIp; &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/nacos/config/name&quot;)</span> <span class="keyword">public</span> String <span class="title function_">getConfigName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> configName; &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="9-5-3-7-æµ‹è¯•"><a href="#9-5-3-7-æµ‹è¯•" class="headerlink" title="9.5.3.7 æµ‹è¯•"></a>9.5.3.7 æµ‹è¯•</h4><h5 id="9-5-3-7-1-å¯åŠ¨-Nacos-Server"><a href="#9-5-3-7-1-å¯åŠ¨-Nacos-Server" class="headerlink" title="9.5.3.7.1 å¯åŠ¨ **Nacos Server"></a><strong>9.5.3.7.1</strong> å¯åŠ¨ **Nacos Server</h5><h5 id="9-5-3-7-2-å¯åŠ¨-e-commerce-nacos-config-client5000"><a href="#9-5-3-7-2-å¯åŠ¨-e-commerce-nacos-config-client5000" class="headerlink" title="9.5.3.7.2 å¯åŠ¨ **e-commerce-nacos-config-client5000 **"></a>9.5.3.7.2 å¯åŠ¨ **e-commerce-nacos-config-client5000 **</h5><h5 id="9-5-3-7-3-æµè§ˆå™¨-http-localhost-5000-nacos-config-ip"><a href="#9-5-3-7-3-æµè§ˆå™¨-http-localhost-5000-nacos-config-ip" class="headerlink" title="9.5.3.7.3 æµè§ˆå™¨**: http://localhost:5000/nacos/config/ip**"></a><strong>9.5.3.7.3</strong> æµè§ˆå™¨**: <a href="http://localhost:5000/nacos/config/ip">http://localhost:5000/nacos/config/ip</a>**</h5><p>â€‹æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost:5000/nacos/config/ip">http://localhost:5000/nacos/config/ip</a>**</p><h4 id="9-5-3-8-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#9-5-3-8-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="9.5.3.8 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>9.5.3.8 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><p><strong>0. src\main\java\com\study\springcloud\controller\NacosConfigClientController.java</strong> çš„ @Value(â€œ${config.ip}â€), æ˜¯ import org.springframework.beans.factory.annotation.Value; è€Œä¸æ˜¯ lombok åŒ…ä¸‹çš„.</p><p><strong>1.</strong> <strong>é…ç½®æ–‡ä»¶</strong> <strong>application.yml</strong> <strong>å’Œ</strong> <strong>bootstrap.yml</strong> ç»“åˆä¼šå¾—åˆ°é…ç½®æ–‡ä»¶&#x2F;èµ„æºçš„åœ°å€</p><p> <strong>2.</strong> <strong>å‚è€ƒæ–‡æ¡£</strong>: <a href="https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html">https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html</a></p><p><strong>3.</strong> <strong>æ³¨æ„åœ¨</strong> <strong>Nacos Server</strong> <strong>çš„é…ç½®æ–‡ä»¶çš„åç¼€æ˜¯</strong> <strong>.yaml ,</strong> <strong>è€Œä¸æ˜¯</strong> <strong>.yml</strong></p><p><strong>4.</strong> <strong>åœ¨é¡¹ç›®åˆå§‹åŒ–æ—¶ï¼Œè¦ä¿è¯å…ˆä»é…ç½®ä¸­å¿ƒè¿›è¡Œé…ç½®æ‹‰å–ï¼Œæ‹‰å–é…ç½®ä¹‹åï¼Œæ‰èƒ½ä¿è¯é¡¹ç›®çš„æ­£å¸¸å¯åŠ¨</strong>, <strong>ä¹Ÿå°±æ˜¯è¯´å¦‚æœé¡¹ç›®ä¸èƒ½æ­£ç¡®çš„è·å–åˆ°</strong> <strong>Nacos Server</strong> <strong>çš„é…ç½®æ•°æ®ï¼Œé¡¹ç›®æ˜¯å¯åŠ¨ä¸äº†çš„</strong>.[<strong>æ¼”ç¤º</strong>]</p><p><strong>5. springboot</strong> <strong>ä¸­é…ç½®æ–‡ä»¶çš„åŠ è½½æ˜¯å­˜åœ¨ä¼˜å…ˆçº§é¡ºåºçš„ï¼Œ</strong>bootstrap.yml <strong>ä¼˜å…ˆçº§é«˜äº</strong> <strong>application.yml</strong></p><p>ğŸŒŸ<strong>6.</strong> <strong>@RefreshScope</strong> <strong>æ˜¯</strong> <strong>springcloud</strong> <strong>åŸç”Ÿæ³¨è§£ï¼Œå®ç°é…ç½®ä¿¡æ¯è‡ªåŠ¨åˆ·æ–°</strong>, <strong>å¦‚æœåœ¨</strong> <strong>Nacos Server</strong> <strong>ä¿®æ”¹äº†é…ç½®æ•°æ®ï¼Œ</strong>Client <strong>ç«¯å°±ä¼šå¾—åˆ°æœ€æ–°é…ç½®</strong></p><h2 id="9-6-Nacos-åˆ†ç±»é…ç½®-å®ç°é…ç½®éš”ç¦»"><a href="#9-6-Nacos-åˆ†ç±»é…ç½®-å®ç°é…ç½®éš”ç¦»" class="headerlink" title="9.6 Nacos åˆ†ç±»é…ç½® (å®ç°é…ç½®éš”ç¦»)"></a>9.6 Nacos åˆ†ç±»é…ç½® (å®ç°é…ç½®éš”ç¦»)</h2><h3 id="9-6-1-DataIDæ–¹æ¡ˆ"><a href="#9-6-1-DataIDæ–¹æ¡ˆ" class="headerlink" title="9.6.1 DataIDæ–¹æ¡ˆ"></a><strong>9.6.1 DataID</strong>æ–¹æ¡ˆ</h3><h4 id="9-6-1-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#9-6-1-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="9.6.1.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>9.6.1.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>â€“</strong> ç¤ºæ„å›¾</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620155605713.png" alt="image-20230620155605713" style="zoom:50%;" /><h4 id="9-6-1-2-è§£å†³æ–¹æ¡ˆåˆ†æ"><a href="#9-6-1-2-è§£å†³æ–¹æ¡ˆåˆ†æ" class="headerlink" title="9.6.1.2 è§£å†³æ–¹æ¡ˆåˆ†æ"></a>9.6.1.2 è§£å†³æ–¹æ¡ˆåˆ†æ</h4><h5 id="9-6-1-2-1-ä½¿ç”¨-Data-ID-æ–¹æ¡ˆè§£å†³"><a href="#9-6-1-2-1-ä½¿ç”¨-Data-ID-æ–¹æ¡ˆè§£å†³" class="headerlink" title="9.6.1.2.1 ä½¿ç”¨ Data ID æ–¹æ¡ˆè§£å†³"></a><strong>9.6.1.2.1</strong> ä½¿ç”¨ <strong>Data ID</strong> æ–¹æ¡ˆè§£å†³</h5><h4 id="9-6-1-3-é…ç½®å®ç°"><a href="#9-6-1-3-é…ç½®å®ç°" class="headerlink" title="9.6.1.3 é…ç½®å®ç°"></a>9.6.1.3 é…ç½®å®ç°</h4><p><strong>1.</strong> åœ¨ <strong>nacos server</strong> åˆ›å»ºæ–°çš„é…ç½®:<strong>e-commerce-nacos-config-client-test.yaml</strong></p><h4 id="9-6-1-4-ä¿®æ”¹-application-yml"><a href="#9-6-1-4-ä¿®æ”¹-application-yml" class="headerlink" title="9.6.1.4 ä¿®æ”¹ application.yml"></a>9.6.1.4 ä¿®æ”¹ application.yml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">test</span> <span class="comment">#æŒ‡å®šç¯å¢ƒï¼Œå¸¸è§çš„ç¯å¢ƒæœ‰ dev/test/prod å¼€å‘ï¼Œæµ‹è¯•ï¼Œç”Ÿäº§</span></span><br></pre></td></tr></table></figure><h4 id="9-6-1-5-æµ‹è¯•"><a href="#9-6-1-5-æµ‹è¯•" class="headerlink" title="9.6.1.5 æµ‹è¯•"></a>9.6.1.5 æµ‹è¯•</h4><h5 id="9-6-1-5-1-æµè§ˆå™¨-http-localhost-5000-nacos-config-ip"><a href="#9-6-1-5-1-æµè§ˆå™¨-http-localhost-5000-nacos-config-ip" class="headerlink" title="9.6.1.5.1 æµè§ˆå™¨**: http://localhost:5000/nacos/config/ip**"></a><strong>9.6.1.5.1</strong> æµè§ˆå™¨**: <a href="http://localhost:5000/nacos/config/ip">http://localhost:5000/nacos/config/ip</a>**</h5><p>**1.**æµè§ˆå™¨è¾“å…¥: <a href="http://localhost:5000/nacos/config/ip">http://localhost:5000/nacos/config/ip</a></p><h3 id="9-6-2-Groupæ–¹æ¡ˆ"><a href="#9-6-2-Groupæ–¹æ¡ˆ" class="headerlink" title="9.6.2 Groupæ–¹æ¡ˆ"></a><strong>9.6.2 Group</strong>æ–¹æ¡ˆ</h3><h4 id="9-6-2-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#9-6-2-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="9.6.2.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>9.6.2.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>â€“</strong> ç¤ºæ„å›¾</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620161153853.png" alt="image-20230620161153853" style="zoom:50%;" /><h4 id="9-6-2-2-è§£å†³æ–¹æ¡ˆåˆ†æ"><a href="#9-6-2-2-è§£å†³æ–¹æ¡ˆåˆ†æ" class="headerlink" title="9.6.2.2 è§£å†³æ–¹æ¡ˆåˆ†æ"></a>9.6.2.2 è§£å†³æ–¹æ¡ˆåˆ†æ</h4><h5 id="9-6-2-2-1-ä½¿ç”¨-Group-æ–¹æ¡ˆè§£å†³"><a href="#9-6-2-2-1-ä½¿ç”¨-Group-æ–¹æ¡ˆè§£å†³" class="headerlink" title="9.6.2.2.1 ä½¿ç”¨ Group æ–¹æ¡ˆè§£å†³"></a><strong>9.6.2.2.1</strong> ä½¿ç”¨ <strong>Group</strong> æ–¹æ¡ˆè§£å†³</h5><h4 id="9-6-2-3-é…ç½®å®ç°"><a href="#9-6-2-3-é…ç½®å®ç°" class="headerlink" title="9.6.2.3 é…ç½®å®ç°"></a>9.6.2.3 é…ç½®å®ç°</h4><p><strong>1.</strong> åœ¨ <strong>nacos server</strong> åˆ›å»ºæ–°çš„é…ç½®:<strong>order&#x2F;e-commerce-nacos-config-client-dev.yaml</strong></p><p><strong>2.</strong> <strong>åœ¨</strong> <strong>nacos server</strong> **åˆ›å»ºæ–°çš„é…ç½®:**seckill&#x2F;e-commerce-nacos-config-client-dev.yaml</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230620161749751.png" alt="image-20230620161749751" style="zoom:50%;" /><h4 id="9-6-2-4-ä¿®æ”¹-application-yml"><a href="#9-6-2-4-ä¿®æ”¹-application-yml" class="headerlink" title="9.6.2.4 ä¿®æ”¹ application.yml"></a>9.6.2.4 ä¿®æ”¹ application.yml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span> <span class="comment">#æŒ‡å®šç¯å¢ƒï¼Œå¸¸è§çš„ç¯å¢ƒæœ‰ dev/test/prod å¼€å‘ï¼Œæµ‹è¯•ï¼Œç”Ÿäº§</span></span><br></pre></td></tr></table></figure><h4 id="9-6-2-5-ä¿®æ”¹-bootstrap-yml"><a href="#9-6-2-5-ä¿®æ”¹-bootstrap-yml" class="headerlink" title="9.6.2.5 ä¿®æ”¹ bootstrap.yml"></a>9.6.2.5 ä¿®æ”¹ bootstrap.yml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">20000</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œçš„name éœ€è¦å‚è€ƒnacosé…ç½®ä¸­å¿ƒçš„DataId</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">e-commerce-nacos-config-client</span></span><br><span class="line">  <span class="comment">#é…ç½®nacos</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#nacosæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#nacosé…ç½®ä¸­å¿ƒåœ°å€</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span> <span class="comment">#æŒ‡å®šè¯»å–é…ç½®ä¸­å¿ƒçš„yamlåç¼€çš„é…ç½®</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">order</span> <span class="comment">#æŒ‡å®šorderç»„ï¼Œé»˜è®¤ä¸ºDEFAULT_GROUP</span></span><br></pre></td></tr></table></figure><h4 id="9-6-2-6-æµ‹è¯•"><a href="#9-6-2-6-æµ‹è¯•" class="headerlink" title="9.6.2.6 æµ‹è¯•"></a>9.6.2.6 æµ‹è¯•</h4><h5 id="9-6-2-6-1-æµè§ˆå™¨-http-localhost-5000-nacos-config-ip"><a href="#9-6-2-6-1-æµè§ˆå™¨-http-localhost-5000-nacos-config-ip" class="headerlink" title="9.6.2.6.1 æµè§ˆå™¨**: http://localhost:5000/nacos/config/ip**"></a><strong>9.6.2.6.1</strong> æµè§ˆå™¨**: <a href="http://localhost:5000/nacos/config/ip">http://localhost:5000/nacos/config/ip</a>**</h5><p>**1.**æµè§ˆå™¨è¾“å…¥: <a href="http://localhost:5000/nacos/config/ip">http://localhost:5000/nacos/config/ip</a></p><h3 id="9-6-3-Namespaceæ–¹æ¡ˆ"><a href="#9-6-3-Namespaceæ–¹æ¡ˆ" class="headerlink" title="9.6.3 Namespaceæ–¹æ¡ˆ"></a><strong>9.6.3 Namespace</strong>æ–¹æ¡ˆ</h3><h4 id="9-6-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#9-6-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="9.6.3.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>9.6.3.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>â€“</strong> ç¤ºæ„å›¾</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620162224978.png" alt="image-20230620162224978" style="zoom:50%;" /><h4 id="9-6-3-2-è§£å†³æ–¹æ¡ˆåˆ†æ"><a href="#9-6-3-2-è§£å†³æ–¹æ¡ˆåˆ†æ" class="headerlink" title="9.6.3.2 è§£å†³æ–¹æ¡ˆåˆ†æ"></a>9.6.3.2 è§£å†³æ–¹æ¡ˆåˆ†æ</h4><h5 id="9-6-3-2-1-ä½¿ç”¨-Namespace-æ–¹æ¡ˆè§£å†³"><a href="#9-6-3-2-1-ä½¿ç”¨-Namespace-æ–¹æ¡ˆè§£å†³" class="headerlink" title="9.6.3.2.1 ä½¿ç”¨ Namespace æ–¹æ¡ˆè§£å†³"></a><strong>9.6.3.2.1</strong> ä½¿ç”¨ <strong>Namespace</strong> æ–¹æ¡ˆè§£å†³</h5><h4 id="9-6-3-3-é…ç½®å®ç°"><a href="#9-6-3-3-é…ç½®å®ç°" class="headerlink" title="9.6.3.3 é…ç½®å®ç°"></a>9.6.3.3 é…ç½®å®ç°</h4><p><strong>1.</strong> åœ¨ <strong>nacos server</strong> åˆ›å»ºæ–°çš„ <strong>namespace , baidu</strong> å’Œ <strong>alibaba</strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620162934242.png" alt="image-20230620162934242" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620163057931.png" alt="image-20230620163057931" style="zoom:50%;" /><p><strong>2.</strong> <strong>åœ¨</strong> <strong>nacos server</strong> <strong>åˆ›å»ºæ–°çš„</strong> <strong>group&#x2F;dataid</strong></p><h4 id="9-6-3-4-ä¿®æ”¹-application-yml"><a href="#9-6-3-4-ä¿®æ”¹-application-yml" class="headerlink" title="9.6.3.4 ä¿®æ”¹ application.yml"></a>9.6.3.4 ä¿®æ”¹ application.yml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span> <span class="comment">#æŒ‡å®šç¯å¢ƒï¼Œå¸¸è§çš„ç¯å¢ƒæœ‰ dev/test/prod å¼€å‘ï¼Œæµ‹è¯•ï¼Œç”Ÿäº§</span></span><br></pre></td></tr></table></figure><h4 id="9-6-3-5-ä¿®æ”¹-bootstrap-yml"><a href="#9-6-3-5-ä¿®æ”¹-bootstrap-yml" class="headerlink" title="9.6.3.5 ä¿®æ”¹ bootstrap.yml"></a>9.6.3.5 ä¿®æ”¹ bootstrap.yml</h4><p><strong>1.</strong> å¢åŠ  <strong>Namespace</strong> å‚æ•°</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">20000</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œçš„name éœ€è¦å‚è€ƒnacosé…ç½®ä¸­å¿ƒçš„DataId</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">e-commerce-nacos-config-client</span></span><br><span class="line">  <span class="comment">#é…ç½®nacos</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#nacosæœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#nacosé…ç½®ä¸­å¿ƒåœ°å€</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span> <span class="comment">#æŒ‡å®šè¯»å–é…ç½®ä¸­å¿ƒçš„yamlåç¼€çš„é…ç½®</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">seckill</span> <span class="comment">#æŒ‡å®šorderç»„ï¼Œé»˜è®¤ä¸ºDEFAULT_GROUP</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">8b005a7a-89b9-40ba-a5da-aac3e6c7a564</span></span><br></pre></td></tr></table></figure><h4 id="9-6-3-6-æµ‹è¯•"><a href="#9-6-3-6-æµ‹è¯•" class="headerlink" title="9.6.3.6 æµ‹è¯•"></a>9.6.3.6 æµ‹è¯•</h4><h5 id="9-6-3-6-1-æµè§ˆå™¨-http-localhost-5000-nacos-config-ip"><a href="#9-6-3-6-1-æµè§ˆå™¨-http-localhost-5000-nacos-config-ip" class="headerlink" title="9.6.3.6.1 æµè§ˆå™¨**: http://localhost:5000/nacos/config/ip**"></a><strong>9.6.3.6.1</strong> æµè§ˆå™¨**: <a href="http://localhost:5000/nacos/config/ip">http://localhost:5000/nacos/config/ip</a>**</h5><p>**1.**æµè§ˆå™¨è¾“å…¥: <a href="http://localhost:5000/nacos/config/ip">http://localhost:5000/nacos/config/ip</a></p><h3 id="9-6-4-Namespace-x2F-Group-x2F-Data-ID-å…³ç³»"><a href="#9-6-4-Namespace-x2F-Group-x2F-Data-ID-å…³ç³»" class="headerlink" title="9.6.4 Namespace&#x2F;Group&#x2F;Data ID å…³ç³»"></a><strong>9.6.4 Namespace&#x2F;Group&#x2F;Data ID</strong> å…³ç³»</h3><h4 id="9-6-4-1-ä¸€å›¾èƒœåƒè¨€"><a href="#9-6-4-1-ä¸€å›¾èƒœåƒè¨€" class="headerlink" title="9.6.4.1 ä¸€å›¾èƒœåƒè¨€"></a>9.6.4.1 ä¸€å›¾èƒœåƒè¨€</h4><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620164046357.png" alt="image-20230620164046357" style="zoom:50%;" /><h4 id="9-6-4-2-è¯¦è§£ä»‹ç»"><a href="#9-6-4-2-è¯¦è§£ä»‹ç»" class="headerlink" title="9.6.4.2 è¯¦è§£ä»‹ç»"></a>9.6.4.2 è¯¦è§£ä»‹ç»</h4><p><strong>1. namespace &#x2F; group &#x2F; data id</strong> çš„å…³ç³»</p><p>2.æ¢³ç†:</p><ul><li><p>Nacosé»˜è®¤çš„å‘½åç©ºé—´æ˜¯publicï¼ŒNamespaceä¸»è¦ç”¨æ¥å®ç°é…ç½®éš”ç¦»,éš”ç¦»èŒƒå›´å¤§</p></li><li><p>Groupé»˜è®¤æ˜¯DEFAULT GROUP, Groupå¯ä»¥æŠŠä¸åŒçš„å¾®æœåŠ¡åˆ’åˆ†åˆ°åŒä¸€ä¸ªåˆ†ç»„é‡Œé¢å»</p></li><li><p>Serviceå°±æ˜¯å¾®æœåŠ¡,ç›¸åŒçš„Serviceå¯ä»¥æ˜¯ä¸€ä¸ªCluster(ç°‡&#x2F;é›†ç¾¤), Instanceå°±æ˜¯å¾®æœåŠ¡çš„å®ä¾‹</p></li></ul><h1 id="10-SpringCloud-Alibaba-Sentinelâ€”â€”åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡å“¨å…µ"><a href="#10-SpringCloud-Alibaba-Sentinelâ€”â€”åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡å“¨å…µ" class="headerlink" title="10 SpringCloud Alibaba Sentinelâ€”â€”åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡å“¨å…µ"></a>10 SpringCloud Alibaba Sentinelâ€”â€”åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡å“¨å…µ</h1><h2 id="10-1-SentinelåŸºç¡€"><a href="#10-1-SentinelåŸºç¡€" class="headerlink" title="10.1 SentinelåŸºç¡€"></a>10.1 SentinelåŸºç¡€</h2><h3 id="10-1-1-å®˜ç½‘"><a href="#10-1-1-å®˜ç½‘" class="headerlink" title="10.1.1 å®˜ç½‘"></a><strong>10.1.1</strong> å®˜ç½‘</h3><h4 id="10-1-1-1-Github-https-github-com-alibaba-Sentinel"><a href="#10-1-1-1-Github-https-github-com-alibaba-Sentinel" class="headerlink" title="10.1.1.1 Github: https://github.com/alibaba/Sentinel"></a>10.1.1.1 Github: <a href="https://github.com/alibaba/Sentinel">https://github.com/alibaba/Sentinel</a></h4><h4 id="10-1-1-2-å¿«é€Ÿå¼€å§‹-https-sentinelguard-io-zh-cn-docs-quick-start-html"><a href="#10-1-1-2-å¿«é€Ÿå¼€å§‹-https-sentinelguard-io-zh-cn-docs-quick-start-html" class="headerlink" title="10.1.1.2 å¿«é€Ÿå¼€å§‹: https://sentinelguard.io/zh-cn/docs/quick-start.html"></a>10.1.1.2 å¿«é€Ÿå¼€å§‹: <a href="https://sentinelguard.io/zh-cn/docs/quick-start.html">https://sentinelguard.io/zh-cn/docs/quick-start.html</a></h4><h4 id="10-1-1-3-ä¸­æ–‡-https-github-com-alibaba-Sentinel-wiki-E4-BB-8B-E7-BB-8D"><a href="#10-1-1-3-ä¸­æ–‡-https-github-com-alibaba-Sentinel-wiki-E4-BB-8B-E7-BB-8D" class="headerlink" title="10.1.1.3 ä¸­æ–‡: https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D"></a>10.1.1.3 ä¸­æ–‡: <a href="https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D">https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D</a></h4><h4 id="10-1-1-4-ä½¿-ç”¨-æ‰‹-å†Œ-https-spring-cloud-alibaba-group-github-io-github-pages-greenwich-spring-cloud-alibaba-html-spring-cloud-alibaba-sentinel"><a href="#10-1-1-4-ä½¿-ç”¨-æ‰‹-å†Œ-https-spring-cloud-alibaba-group-github-io-github-pages-greenwich-spring-cloud-alibaba-html-spring-cloud-alibaba-sentinel" class="headerlink" title="10.1.1.4 ä½¿ ç”¨ æ‰‹ å†Œ https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html#_spring_cloud_alibaba_sentinel"></a>10.1.1.4 ä½¿ ç”¨ æ‰‹ å†Œ <a href="https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html#_spring_cloud_alibaba_sentinel">https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html#_spring_cloud_alibaba_sentinel</a></h4><h3 id="10-1-2-Sentinelæ˜¯ä»€ä¹ˆ"><a href="#10-1-2-Sentinelæ˜¯ä»€ä¹ˆ" class="headerlink" title="10.1.2 Sentinelæ˜¯ä»€ä¹ˆ?"></a><strong>10.1.2 Sentinel</strong>æ˜¯ä»€ä¹ˆ?</h3><h4 id="10-1-2-1-Sentinel-æ¦‚è¿°"><a href="#10-1-2-1-Sentinel-æ¦‚è¿°" class="headerlink" title="10.1.2.1 Sentinel æ¦‚è¿°"></a>10.1.2.1 Sentinel æ¦‚è¿°</h4><ol><li>Sentinel æ˜¯ä»€ä¹ˆ?</li></ol><p>éšç€å¾®æœåŠ¡çš„æµè¡Œï¼ŒæœåŠ¡å’ŒæœåŠ¡ä¹‹é—´çš„ç¨³å®šæ€§å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚Sentinel ä»¥æµé‡ä¸ºåˆ‡å…¥ç‚¹ï¼Œä»æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦ä¿æŠ¤æœåŠ¡çš„ç¨³å®šæ€§ã€‚</p><ol start="2"><li>Sentinel çš„ä¸»è¦ç‰¹æ€§</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620201315601.png" alt="image-20230620201315601"></p><p><strong>æ¢³ç†</strong>: sentinel **å¯ä»¥å®Œæˆçš„åŠŸèƒ½ **: <strong>ç»¿è‰²æ–¹æ¡†</strong>åˆ—å‡ºçš„éƒ¨åˆ†</p><ol start="3"><li>Sentinel çš„å¼€æºç”Ÿæ€</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620201431927.png" alt="image-20230620201431927"></p><h4 id="10-1-2-2-ä¸€å¥è¯-Sentinel-åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡é˜²å«å…µ-ä¿æŠ¤ä½ çš„å¾®æœåŠ¡"><a href="#10-1-2-2-ä¸€å¥è¯-Sentinel-åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡é˜²å«å…µ-ä¿æŠ¤ä½ çš„å¾®æœåŠ¡" class="headerlink" title="10.1.2.2 ä¸€å¥è¯: Sentinel: åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡é˜²å«å…µ, ä¿æŠ¤ä½ çš„å¾®æœåŠ¡"></a>10.1.2.2 ä¸€å¥è¯: Sentinel: åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡é˜²å«å…µ, ä¿æŠ¤ä½ çš„å¾®æœåŠ¡</h4><h3 id="10-1-3-Sentinelæ ¸å¿ƒåŠŸèƒ½"><a href="#10-1-3-Sentinelæ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="10.1.3 Sentinelæ ¸å¿ƒåŠŸèƒ½"></a><strong>10.1.3 Sentinel</strong>æ ¸å¿ƒåŠŸèƒ½</h3><h4 id="10-1-3-1-æµé‡æ§åˆ¶"><a href="#10-1-3-1-æµé‡æ§åˆ¶" class="headerlink" title="10.1.3.1 æµé‡æ§åˆ¶"></a>10.1.3.1 æµé‡æ§åˆ¶</h4><h4 id="10-1-3-2-ç†”æ–­é™çº§"><a href="#10-1-3-2-ç†”æ–­é™çº§" class="headerlink" title="10.1.3.2 ç†”æ–­é™çº§"></a>10.1.3.2 ç†”æ–­é™çº§</h4><p><strong>-</strong> åœ¨è°ƒç”¨ç³»ç»Ÿçš„æ—¶å€™ï¼Œå¦‚æœè°ƒç”¨é“¾è·¯ä¸­çš„æŸä¸ªèµ„æºå‡ºç°äº†ä¸ç¨³å®šï¼Œæœ€ç»ˆä¼šå¯¼è‡´è¯·æ±‚å‘ç”Ÿå †ç§¯ï¼Œå¦‚ä¸‹å›¾ï¼š</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620201814295.png" alt="image-20230620201814295" style="zoom:50%;" /><p><strong>è§£è¯»</strong>ï¼š</p><p>â€‹<u>ç†”æ–­é™çº§å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜</u>ï¼Œæ‰€è°“çš„ç†”æ–­é™çº§å°±æ˜¯å½“æ£€æµ‹åˆ°è°ƒç”¨é“¾è·¯ä¸­æŸä¸ªèµ„æºå‡ºç°ä¸ç¨³å®šçš„è¡¨ç°ï¼Œä¾‹å¦‚è¯·æ±‚å“åº”æ—¶é—´é•¿æˆ–å¼‚å¸¸æ¯”ä¾‹å‡é«˜çš„æ—¶å€™ï¼Œåˆ™<u>å¯¹è¿™ä¸ªèµ„æºçš„è°ƒç”¨è¿›è¡Œé™åˆ¶ï¼Œè®©è¯·æ±‚å¿«é€Ÿå¤±è´¥ï¼Œé¿å…å½±å“åˆ°å…¶å®ƒçš„èµ„æºè€Œå¯¼è‡´çº§è”æ•…éšœ</u>ã€‚</p><h4 id="10-1-3-3-ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤"><a href="#10-1-3-3-ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤" class="headerlink" title="10.1.3.3 ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤"></a>10.1.3.3 ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤</h4><p>â€‹æ ¹æ®ç³»ç»Ÿèƒ½å¤Ÿå¤„ç†çš„è¯·æ±‚ï¼Œå’Œå…è®¸è¿›æ¥çš„è¯·æ±‚ï¼Œæ¥åšå¹³è¡¡ï¼Œè¿½æ±‚çš„ç›®æ ‡æ˜¯åœ¨ç³»ç»Ÿä¸è¢«æ‹–å®çš„æƒ…å†µä¸‹**,** æé«˜ç³»ç»Ÿçš„ååç‡</p><h4 id="10-1-3-4-æ¶ˆæ¯å‰Šå³°å¡«è°·"><a href="#10-1-3-4-æ¶ˆæ¯å‰Šå³°å¡«è°·" class="headerlink" title="10.1.3.4 æ¶ˆæ¯å‰Šå³°å¡«è°·"></a>10.1.3.4 æ¶ˆæ¯å‰Šå³°å¡«è°·</h4><p>â€‹æŸç¬æ—¶æ¥äº†å¤§æµé‡çš„è¯·æ±‚**,** è€Œå¦‚æœæ­¤æ—¶è¦å¤„ç†æ‰€æœ‰è¯·æ±‚ï¼Œå¾ˆå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿè´Ÿè½½è¿‡é«˜ï¼Œå½±å“ç¨³å®šæ€§ã€‚</p><p>â€‹ä½†å…¶å®å¯èƒ½åé¢å‡ ç§’ä¹‹å†…éƒ½æ²¡æœ‰æ¶ˆæ¯æŠ•é€’ï¼Œè‹¥ç›´æ¥æŠŠå¤šä½™çš„æ¶ˆæ¯ä¸¢æ‰åˆ™æ²¡æœ‰å……åˆ†åˆ©ç”¨ç³»ç»Ÿå¤„ç†æ¶ˆæ¯çš„èƒ½åŠ›</p><p><strong>- Sentinel çš„Rate Limiteræ¨¡å¼èƒ½åœ¨æŸä¸€æ®µæ—¶é—´é—´éš”å†…ä»¥åŒ€é€Ÿæ–¹å¼å¤„ç†è¿™æ ·çš„è¯·æ±‚, å……åˆ†åˆ©ç”¨ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›, ä¹Ÿå°±æ˜¯å‰Šå³°å¡«è°·, ä¿è¯èµ„æºçš„ç¨³å®šæ€§</strong></p><h3 id="10-1-4-Sentinelä¸¤ä¸ªç»„æˆéƒ¨åˆ†"><a href="#10-1-4-Sentinelä¸¤ä¸ªç»„æˆéƒ¨åˆ†" class="headerlink" title="10.1.4 Sentinelä¸¤ä¸ªç»„æˆéƒ¨åˆ†"></a><strong>10.1.4 Sentinel</strong>ä¸¤ä¸ªç»„æˆéƒ¨åˆ†</h3><h4 id="10-1-4-1-æ ¸å¿ƒåº“-Java-å®¢æˆ·ç«¯-ä¸ä¾èµ–ä»»ä½•æ¡†æ¶-x2F-åº“ï¼Œèƒ½å¤Ÿè¿è¡Œåœ¨æ‰€æœ‰-Javaè¿è¡Œæ—¶ç¯å¢ƒï¼Œå¯¹-Spring-Cloudæœ‰è¾ƒå¥½çš„æ”¯æŒ"><a href="#10-1-4-1-æ ¸å¿ƒåº“-Java-å®¢æˆ·ç«¯-ä¸ä¾èµ–ä»»ä½•æ¡†æ¶-x2F-åº“ï¼Œèƒ½å¤Ÿè¿è¡Œåœ¨æ‰€æœ‰-Javaè¿è¡Œæ—¶ç¯å¢ƒï¼Œå¯¹-Spring-Cloudæœ‰è¾ƒå¥½çš„æ”¯æŒ" class="headerlink" title="10.1.4.1 æ ¸å¿ƒåº“:(Java å®¢æˆ·ç«¯)ä¸ä¾èµ–ä»»ä½•æ¡†æ¶&#x2F;åº“ï¼Œèƒ½å¤Ÿè¿è¡Œåœ¨æ‰€æœ‰ Javaè¿è¡Œæ—¶ç¯å¢ƒï¼Œå¯¹ Spring Cloudæœ‰è¾ƒå¥½çš„æ”¯æŒ"></a>10.1.4.1 æ ¸å¿ƒåº“:(Java å®¢æˆ·ç«¯)ä¸ä¾èµ–ä»»ä½•æ¡†æ¶&#x2F;åº“ï¼Œèƒ½å¤Ÿè¿è¡Œåœ¨æ‰€æœ‰ Javaè¿è¡Œæ—¶ç¯å¢ƒï¼Œå¯¹ Spring Cloudæœ‰è¾ƒå¥½çš„æ”¯æŒ</h4><h4 id="10-1-4-2-æ§åˆ¶å°-Dashboard-åŸºäº-Spring-Boot-å¼€å‘ï¼Œæ‰“åŒ…åå¯ä»¥ç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦é¢å¤–çš„-Tomcat-ç­‰åº”ç”¨å®¹å™¨-å°±è·Ÿnacosã€eurekaé‚£ç§æ§åˆ¶å°é‚£æ ·"><a href="#10-1-4-2-æ§åˆ¶å°-Dashboard-åŸºäº-Spring-Boot-å¼€å‘ï¼Œæ‰“åŒ…åå¯ä»¥ç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦é¢å¤–çš„-Tomcat-ç­‰åº”ç”¨å®¹å™¨-å°±è·Ÿnacosã€eurekaé‚£ç§æ§åˆ¶å°é‚£æ ·" class="headerlink" title="10.1.4.2 æ§åˆ¶å°:(Dashboard)åŸºäº Spring Boot å¼€å‘ï¼Œæ‰“åŒ…åå¯ä»¥ç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦é¢å¤–çš„ Tomcat ç­‰åº”ç”¨å®¹å™¨(å°±è·Ÿnacosã€eurekaé‚£ç§æ§åˆ¶å°é‚£æ ·)"></a>10.1.4.2 æ§åˆ¶å°:(Dashboard)åŸºäº Spring Boot å¼€å‘ï¼Œæ‰“åŒ…åå¯ä»¥ç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦é¢å¤–çš„ Tomcat ç­‰åº”ç”¨å®¹å™¨(å°±è·Ÿnacosã€eurekaé‚£ç§æ§åˆ¶å°é‚£æ ·)</h4><h2 id="10-2-Sentinelæ§åˆ¶å°"><a href="#10-2-Sentinelæ§åˆ¶å°" class="headerlink" title="10.2 Sentinelæ§åˆ¶å°"></a>10.2 Sentinelæ§åˆ¶å°</h2><h3 id="10-2-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-2-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.2.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>10.2.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h3><p><strong>1.</strong> éœ€æ±‚**:** æ­å»º <strong>Sentinel</strong> æ§åˆ¶å°ï¼Œç”¨äºæ˜¾ç¤ºå„ä¸ªå¾®æœåŠ¡çš„ä½¿ç”¨æƒ…å†µ</p><h3 id="10-2-2-ä¸‹è½½"><a href="#10-2-2-ä¸‹è½½" class="headerlink" title="10.2.2 ä¸‹è½½"></a><strong>10.2.2</strong> ä¸‹è½½</h3><h4 id="10-2-2-1-https-github-com-alibaba-Sentinel-releases-tag-v1-8-0"><a href="#10-2-2-1-https-github-com-alibaba-Sentinel-releases-tag-v1-8-0" class="headerlink" title="10.2.2.1 https://github.com/alibaba/Sentinel/releases/tag/v1.8.0"></a>10.2.2.1 <a href="https://github.com/alibaba/Sentinel/releases/tag/v1.8.0">https://github.com/alibaba/Sentinel/releases/tag/v1.8.0</a></h4><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620203427041.png" alt="image-20230620203427041" style="zoom:50%;" /><h3 id="10-2-3-è¿è¡Œ"><a href="#10-2-3-è¿è¡Œ" class="headerlink" title="10.2.3 è¿è¡Œ"></a><strong>10.2.3</strong> è¿è¡Œ</h3><h4 id="10-2-3-1-æŒ‡ä»¤"><a href="#10-2-3-1-æŒ‡ä»¤" class="headerlink" title="10.2.3.1 æŒ‡ä»¤:"></a>10.2.3.1 æŒ‡ä»¤:</h4><p>æˆ‘æŠŠä¸‹è½½çš„jaråŒ…æ”¾åœ¨ &#x2F;Applications&#x2F;Java&#x2F;jaråŒ…èµ„æº æ­¤å¤„äº†</p><p>å› æ­¤åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹æŒ‡ä»¤å³å¯å¯åŠ¨ Sentinel</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /Applications/Java/jaråŒ…èµ„æº</span><br><span class="line">java -jar sentinel-dashboard-1.8.0.jar //å¯åŠ¨</span><br><span class="line">java -jar sentinel-dashboard-1.8.0.jar --server.port=9999//ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç«¯å£è¿è¡Œè¯¥è¿›ç¨‹</span><br><span class="line">Ctrl+Cå³å¯å…³é—­æœåŠ¡</span><br></pre></td></tr></table></figure><h4 id="10-2-3-2-æ³¨æ„-Sentinel-æ§åˆ¶å°-é»˜è®¤ç«¯å£æ˜¯-8080"><a href="#10-2-3-2-æ³¨æ„-Sentinel-æ§åˆ¶å°-é»˜è®¤ç«¯å£æ˜¯-8080" class="headerlink" title="10.2.3.2 æ³¨æ„: Sentinel æ§åˆ¶å° é»˜è®¤ç«¯å£æ˜¯ 8080"></a>10.2.3.2 æ³¨æ„: Sentinel æ§åˆ¶å° é»˜è®¤ç«¯å£æ˜¯ 8080</h4><h3 id="10-2-4-è®¿é—®"><a href="#10-2-4-è®¿é—®" class="headerlink" title="10.2.4 è®¿é—®"></a><strong>10.2.4</strong> è®¿é—®</h3><h4 id="10-2-4-1-æµè§ˆå™¨-http-localhost-8080"><a href="#10-2-4-1-æµè§ˆå™¨-http-localhost-8080" class="headerlink" title="10.2.4.1 æµè§ˆå™¨: http://localhost:8080"></a>10.2.4.1 æµè§ˆå™¨: <a href="http://localhost:8080/">http://localhost:8080</a></h4><h4 id="10-2-4-2-æ§åˆ¶å°é¡µé¢"><a href="#10-2-4-2-æ§åˆ¶å°é¡µé¢" class="headerlink" title="10.2.4.2 æ§åˆ¶å°é¡µé¢"></a>10.2.4.2 æ§åˆ¶å°é¡µé¢</h4><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost:8080/">http://localhost:8080</a> ,** ç”¨æˆ·**&#x2F;**å¯†ç éƒ½æ˜¯ <strong>sentinel</strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620203842208.png" alt="image-20230620203842208" style="zoom:25%;" /><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620204626829.png" alt="image-20230620204626829" style="zoom:50%;" /><p><strong>2.</strong> <strong>ç™»å½•æˆåŠŸåçš„é¡µé¢</strong>, <strong>ç›®å‰æ˜¯ç©ºçš„ï¼Œå› ä¸º</strong> <strong>sentinel</strong> <strong>è¿˜æ²¡æœ‰è¿›è¡Œæµé‡ç›‘æ§</strong></p><h2 id="10-3-Sentinelç›‘æ§å¾®æœåŠ¡"><a href="#10-3-Sentinelç›‘æ§å¾®æœåŠ¡" class="headerlink" title="10.3 Sentinelç›‘æ§å¾®æœåŠ¡"></a>10.3 Sentinelç›‘æ§å¾®æœåŠ¡</h2><h3 id="10-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.3.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>10.3.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h3><ol><li>éœ€æ±‚**:** ä½¿ç”¨ <strong>Sentinel</strong> æ§åˆ¶å°å¯¹ <strong>member-service-nacos-provider-10004</strong> å¾®æœåŠ¡ è¿›è¡Œå®æ—¶ç›‘æ§</li></ol><p><strong>â€“</strong> ç¤ºæ„å›¾</p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230620204744222.png" alt="image-20230620204744222" style="zoom: 50%;" /><ol start="2"><li>å½“è°ƒç”¨äº†member-service-nacos-provider-10004å¾®æœåŠ¡æ—¶,å¯ä»¥ç›‘æ§åˆ°è¯·æ±‚çš„<strong>url&#x2F;QPS(æ¯ç§’æŸ¥è¯¢ç‡)&#x2F;å“åº”æ—¶é—´&#x2F;æµé‡</strong></li></ol><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230620205650814.png" alt="image-20230620205650814" style="zoom:50%;" /><h3 id="10-3-2-ä»£ç -x2F-é…ç½®å®ç°"><a href="#10-3-2-ä»£ç -x2F-é…ç½®å®ç°" class="headerlink" title="10.3.2 ä»£ç **&#x2F;**é…ç½®å®ç°"></a><strong>10.3.2</strong> ä»£ç **&#x2F;**é…ç½®å®ç°</h3><p><strong>1.</strong> ä¿®æ”¹ <strong>member-service-nacos-provider-10004</strong> çš„ <strong>pom.xml,</strong> å¼•å…¥ <strong>alibaba-sentinel</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼•å…¥alibaba-sentinel starter    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-sentinel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>member-service-nacos-provider-10004</strong> <strong>çš„</strong> <strong>application.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10004</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">member-service-nacos-provider</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/e_commerce_center_db?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">QWEASDzxc123</span></span><br><span class="line"><span class="comment">#  é…ç½®nacos</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#é…ç½®nacos serverçš„åœ°å€</span></span><br><span class="line">    <span class="attr">sentinel:</span></span><br><span class="line">      <span class="attr">transport:</span></span><br><span class="line">        <span class="attr">dashboard:</span> <span class="string">localhost:8080</span> <span class="comment">#è¿™ä¸ªæ˜¯ sentinel æ§åˆ¶å°(sentinel dashboard)çš„åœ°å€ </span></span><br><span class="line">        <span class="comment">#è§£è¯» spring.cloud.sentinel.transport.portï¼š</span></span><br><span class="line">        <span class="comment">#1. spring.cloud.sentinel.transport.port ç«¯å£é…ç½®ä¼šåœ¨è¢«ç›‘æ§çš„å¾®æœåŠ¡</span></span><br><span class="line">        <span class="comment"># å¯¹åº”çš„æœºå™¨ä¸Šå¯åŠ¨ä¸€ä¸ª Http Server</span></span><br><span class="line">        <span class="comment">#2. è¯¥ Server ä¼šä¸ Sentinel æ§åˆ¶å°åšäº¤äº’</span></span><br><span class="line">        <span class="comment">#3. æ¯”å¦‚ Sentinel æ§åˆ¶å°æ·»åŠ äº† 1 ä¸ªé™æµè§„åˆ™ï¼Œä¼šæŠŠè§„åˆ™æ•°æ® push ç»™è¿™ä¸ª</span></span><br><span class="line">        <span class="comment"># Http Server æ¥æ”¶ï¼ŒHttp Server å†å°†è§„åˆ™æ³¨å†Œåˆ° å¾®æœåŠ¡ ä¸­</span></span><br><span class="line">        <span class="comment">#4. ç®€å•çš„è¯´æ˜: spring.cloud.sentinel.transport.port:æŒ‡å®šè¢«ç›‘æ§çš„å¾®æœåŠ¡åº”ç”¨ä¸</span></span><br><span class="line">        <span class="comment"># Sentinel æ§åˆ¶å°äº¤äº’çš„ç«¯å£ï¼Œå¾®æœåŠ¡åº”ç”¨æœ¬åœ°ä¼šèµ·ä¸€ä¸ªè¯¥ç«¯å£å ç”¨çš„ Http Server</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8719</span> <span class="comment">#é»˜è®¤ 8719ï¼Œå‡å¦‚è¢«å ç”¨äº†, ä¼šè‡ªåŠ¨ä» 8719 å¼€å§‹ä¾æ¬¡+1 æ‰«æã€‚</span></span><br><span class="line">        <span class="comment">#ç›´è‡³æ‰¾åˆ°æœªè¢«å ç”¨çš„ç«¯å£</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.study.springcloud.entity</span></span><br><span class="line"><span class="comment">#é…ç½®æš´éœ²æ‰€æœ‰çš„ç›‘æ§ç‚¹</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&#x27;*&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>3.</strong> <strong>æˆåŠŸå¯åŠ¨å</strong>, netstat -anb <strong>å¯ä»¥æŸ¥çœ‹åˆ°è¯¥ç«¯å£</strong>.</p><h3 id="10-3-3-æµ‹è¯•"><a href="#10-3-3-æµ‹è¯•" class="headerlink" title="10.3.3 æµ‹è¯•"></a><strong>10.3.3</strong> æµ‹è¯•</h3><h4 id="10-3-3-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-3-3-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.3.3.1 å¯åŠ¨ Nacos Server 8848"></a>10.3.3.1 å¯åŠ¨ Nacos Server 8848</h4><h4 id="10-3-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-3-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.3.3.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å° &#x2F; Sentinel dashboard"></a>10.3.3.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å° &#x2F; Sentinel dashboard</h4><h4 id="10-3-3-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-3-3-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.3.3.3 å¯åŠ¨ member-service-nacos-provider-10004"></a>10.3.3.3 å¯åŠ¨ member-service-nacos-provider-10004</h4><h4 id="10-3-3-4-æµè§ˆå™¨-localhost-10004-x2F-member-x2F-get-x2F-1"><a href="#10-3-3-4-æµè§ˆå™¨-localhost-10004-x2F-member-x2F-get-x2F-1" class="headerlink" title="10.3.3.4 æµè§ˆå™¨: localhost:10004&#x2F;member&#x2F;get&#x2F;1"></a>10.3.3.4 æµè§ˆå™¨: localhost:10004&#x2F;member&#x2F;get&#x2F;1</h4><h4 id="10-3-3-5-Sentinel-æ§åˆ¶å°ç›‘æ§é¡µé¢"><a href="#10-3-3-5-Sentinel-æ§åˆ¶å°ç›‘æ§é¡µé¢" class="headerlink" title="10.3.3.5 Sentinel æ§åˆ¶å°ç›‘æ§é¡µé¢"></a>10.3.3.5 Sentinel æ§åˆ¶å°ç›‘æ§é¡µé¢</h4><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost:10004/member/get/1">http://localhost:10004/member/get/1</a>**</p><p><strong>2.</strong> <strong>è¿›å…¥åˆ°</strong> <strong>Sentinel</strong> <strong>æŸ¥çœ‹å®æ—¶ç›‘æ§æ•ˆæœ</strong>, <a href="http://localhost:8080/#/dashboard">http://localhost:8080/#/dashboard</a></p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230620211122568.png" alt="image-20230620211122568" style="zoom:50%;" /><h3 id="10-3-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#10-3-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="10.3.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a><strong>10.3.4</strong> æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><h4 id="10-3-4-1-QPS-Queries-Per-Second-æ¯ç§’æŸ¥è¯¢ç‡-ï¼Œæ˜¯æœåŠ¡å™¨æ¯ç§’å“åº”çš„æŸ¥è¯¢æ¬¡æ•°"><a href="#10-3-4-1-QPS-Queries-Per-Second-æ¯ç§’æŸ¥è¯¢ç‡-ï¼Œæ˜¯æœåŠ¡å™¨æ¯ç§’å“åº”çš„æŸ¥è¯¢æ¬¡æ•°" class="headerlink" title="10.3.4.1 QPS: Queries Per Second(æ¯ç§’æŸ¥è¯¢ç‡)ï¼Œæ˜¯æœåŠ¡å™¨æ¯ç§’å“åº”çš„æŸ¥è¯¢æ¬¡æ•°"></a>10.3.4.1 QPS: Queries Per Second(æ¯ç§’æŸ¥è¯¢ç‡)ï¼Œæ˜¯æœåŠ¡å™¨æ¯ç§’å“åº”çš„æŸ¥è¯¢æ¬¡æ•°</h4><h4 id="10-3-4-2-Sentinelé‡‡ç”¨çš„æ˜¯æ‡’åŠ è½½ï¼Œåªæœ‰è°ƒç”¨äº†æŸä¸ªæ¥å£-x2F-æœåŠ¡ï¼Œæ‰èƒ½çœ‹åˆ°ç›‘æ§æ•°æ®"><a href="#10-3-4-2-Sentinelé‡‡ç”¨çš„æ˜¯æ‡’åŠ è½½ï¼Œåªæœ‰è°ƒç”¨äº†æŸä¸ªæ¥å£-x2F-æœåŠ¡ï¼Œæ‰èƒ½çœ‹åˆ°ç›‘æ§æ•°æ®" class="headerlink" title="10.3.4.2 Sentinelé‡‡ç”¨çš„æ˜¯æ‡’åŠ è½½ï¼Œåªæœ‰è°ƒç”¨äº†æŸä¸ªæ¥å£&#x2F;æœåŠ¡ï¼Œæ‰èƒ½çœ‹åˆ°ç›‘æ§æ•°æ®"></a>10.3.4.2 Sentinelé‡‡ç”¨çš„æ˜¯æ‡’åŠ è½½ï¼Œåªæœ‰è°ƒç”¨äº†æŸä¸ªæ¥å£&#x2F;æœåŠ¡ï¼Œæ‰èƒ½çœ‹åˆ°ç›‘æ§æ•°æ®</h4><h2 id="10-4-Sentinelæµé‡æ§åˆ¶"><a href="#10-4-Sentinelæµé‡æ§åˆ¶" class="headerlink" title="10.4 Sentinelæµé‡æ§åˆ¶"></a>10.4 Sentinelæµé‡æ§åˆ¶</h2><h3 id="10-4-1-è§„åˆ™"><a href="#10-4-1-è§„åˆ™" class="headerlink" title="10.4.1 è§„åˆ™"></a><strong>10.4.1</strong> è§„åˆ™</h3><p><strong>1.</strong> å…ˆçœ‹ä¸€å¼ å›¾</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230620211426555.png" alt="image-20230620211426555" style="zoom:40%;" /><ol start="2"><li>å¯¹ä¸Šå›¾çš„è§£è¯»</li></ol><ul><li><p>èµ„æºåï¼šå”¯ä¸€åç§°ï¼Œé»˜è®¤è¯·æ±‚è·¯å¾„</p></li><li><p>é’ˆå¯¹æ¥æºï¼šSentineå¯ä»¥<u>é’ˆå¯¹è°ƒç”¨è€…è¿›è¡Œé™æµï¼Œå¡«å†™å¾®æœåŠ¡å</u>ï¼Œé»˜è®¤defaultï¼ˆä¸åŒºåˆ†æ¥æºï¼‰</p></li><li><p>é˜ˆå€¼ç±»å‹&#x2F;å•æœºé˜ˆå€¼ï¼š</p><ul><li>QPSï¼ˆæ¯ç§’é’Ÿçš„è¯·æ±‚æ•°é‡ï¼‰ï¼šå½“è°ƒç”¨è¯¥ api çš„ QPS è¾¾åˆ°é˜ˆå€¼çš„æ—¶å€™ï¼Œè¿›è¡Œé™æµ</li><li>çº¿ç¨‹æ•°ï¼šå½“è°ƒç”¨è¯¥ api çš„çº¿ç¨‹æ•°è¾¾åˆ°é˜ˆå€¼çš„æ—¶å€™ï¼Œè¿›è¡Œé™æµ</li></ul></li></ul><p>è§£è¯»ï¼š <strong>QPSå’Œçº¿ç¨‹æ•°çš„åŒºåˆ«</strong>ï¼Œæ³¨æ„å¬ï¼Œæ¯”å¦‚ QPSå’Œçº¿ç¨‹æˆ‘ä»¬éƒ½è®¾ç½®é˜ˆå€¼ä¸º1</p><p>ï¼ˆ1ï¼‰å¯¹QPSè€Œè¨€ï¼Œå¦‚æœåœ¨1ç§’å†…ï¼Œå®¢æˆ·ç«¯å‘å‡ºäº†2 æ¬¡è¯·æ±‚ï¼Œå°±è¾¾åˆ°é˜ˆå€¼ï¼Œä»è€Œé™æµ</p><p>ï¼ˆ2ï¼‰å¯¹çº¿ç¨‹æ•°è€Œè¨€ï¼Œå¦‚æœåœ¨1ç§’å†…ï¼Œå®¢æˆ·ç«¯å‘å‡ºäº†2 æ¬¡è¯·æ±‚ï¼Œä¸ä¸€å®šè¾¾åˆ°çº¿ç¨‹é™åˆ¶çš„åœ‹å€¼ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬1 æ¬¡è¯·æ±‚åå°ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªè¯·æ±‚å®Œæˆæ—¶é—´æ˜¯ 0.1 ç§’ï¼ˆå¯ä»¥è§†ä¸ºè¯¥è¯·æ±‚å¯¹åº”çš„çº¿ç¨‹å­˜æ´» 0.1 ç§’)ï¼Œæ‰€ä»¥å½“å®¢æˆ·ç«¯ç¬¬2 æ¬¡è¯·æ±‚æ—¶(æ¯”å¦‚å®¢æˆ·ç«¯æ˜¯åœ¨0.3ç§’å‘å‡ºçš„ï¼‰ï¼Œè¿™æ—¶ç¬¬ 1ä¸ªè¯·æ±‚çš„çº¿ç¨‹å°±å·±ç»ç»“æŸäº†ï¼Œå› æ­¤å°±æ²¡æœ‰è¾¾åˆ°çº¿ç¨‹çš„é—»å€¼ï¼Œä¹Ÿä¸ä¼šé™æµã€‚</p><p>ï¼ˆ3ï¼‰å°ä¼™ä¼´å¯ä»¥è¿™æ ·ç†è§£ï¼Œå¦‚æœ1ä¸ªè¯·æ±‚å¯¹åº”çš„çº¿ç¨‹å¹³å‡æ‰§è¡Œæ—¶é—´ä¸º 0.1 é‚£ä¹ˆï¼Œå°±ç›¸å½“äº QPS ä¸º 10</p><ul><li><p>æ˜¯å¦é›†ç¾¤ï¼šä¸éœ€è¦é›†ç¾¤</p></li><li><p>æµæ§æ¨¡å¼ï¼š</p><ul><li>ç›´æ¥ï¼šapi è¾¾åˆ°é™æµæ¡ä»¶æ—¶ï¼Œç›´æ¥é™æµ</li><li>å…³è”ï¼šå½“å…³è”çš„èµ„æºè¾¾åˆ°é—»å€¼æ—¶ï¼Œå°±é™æµè‡ªå·±</li><li>é“¾è·¯ï¼šå½“ä»æŸä¸ªæ¥å£è¿‡æ¥çš„èµ„æºè¾¾åˆ°é™æµæ¡ä»¶æ—¶ï¼Œå¼€å¯é™æµ</li></ul></li><li><p>æµæ§æ•ˆæœï¼š</p><ul><li>å¿«é€Ÿå¤±è´¥ï¼šç›´æ¥å¤±è´¥ï¼ŒæŠ›å¼‚å¸¸</li><li>Warm Upï¼šæ ¹æ® code Factorï¼ˆå†·åŠ è½½å› å­ï¼Œé»˜è®¤3ï¼‰çš„å€¼ï¼Œä»é˜ˆå€¼&#x2F;codeFactorï¼Œç»è¿‡é¢„çƒ­æ—¶é•¿ï¼Œæ‰è¾¾åˆ°è®¾ç½®çš„ QPS é˜ˆå€¼</li><li>æ’é˜Ÿç­‰å¾…ï¼šåŒ€é€Ÿæ’é˜Ÿï¼Œè®©è¯·æ±‚ä»¥åŒ€é€Ÿçš„é€Ÿåº¦é€šè¿‡ï¼Œé˜ˆå€¼ç±»å‹å¿…é¡»è®¾ç½®ä¸º QPSï¼Œ å¦åˆ™æ— æ•ˆ</li></ul></li></ul><h3 id="10-4-2-æµé‡æ§åˆ¶å®ä¾‹-QPS"><a href="#10-4-2-æµé‡æ§åˆ¶å®ä¾‹-QPS" class="headerlink" title="10.4.2 æµé‡æ§åˆ¶å®ä¾‹**-QPS**"></a><strong>10.4.2</strong> æµé‡æ§åˆ¶å®ä¾‹**-QPS**</h3><h4 id="10-4-2-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-4-2-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.4.2.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.4.2.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p> <strong>1.</strong> éœ€æ±‚**:** é€šè¿‡ <strong>Sentinel</strong> å®ç° æµé‡æ§åˆ¶<br> <strong>2.</strong> <strong>å½“è°ƒç”¨</strong> <strong>member-service-nacos-provider-10004</strong> <strong>çš„</strong> <strong>&#x2F;member&#x2F;get&#x2F;</strong>   **API **æ—¶ï¼Œé™åˆ¶ <strong>1</strong>ç§’å†…æœ€å¤šè®¿é—® <strong>1</strong> <strong>æ¬¡ï¼Œå¦åˆ™ç›´æ¥å¤±è´¥ï¼ŒæŠ›å¼‚å¸¸</strong></p><h4 id="10-4-2-2-é…ç½®å®ç°æ­¥éª¤"><a href="#10-4-2-2-é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.4.2.2 é…ç½®å®ç°æ­¥éª¤"></a>10.4.2.2 é…ç½®å®ç°æ­¥éª¤</h4><p> <strong>1.</strong> ä¸º**&#x2F;member&#x2F;get&#x2F;1** å¢åŠ æµæ§è§„åˆ™</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230622221155249.png" alt="image-20230622221155249"></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230622221223336.png" alt="image-20230622221223336" style="zoom:40%;" /><p><strong>2.</strong> <strong>åœ¨æµæ§è§„åˆ™èœå•ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢çš„æµæ§è§„åˆ™</strong></p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230622221447805.png" alt="image-20230622221447805" style="zoom: 33%;" /><h4 id="10-4-2-3-æµ‹è¯•"><a href="#10-4-2-3-æµ‹è¯•" class="headerlink" title="10.4.2.3 æµ‹è¯•"></a>10.4.2.3 æµ‹è¯•</h4><h5 id="10-4-2-3-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-4-2-3-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.4.2.3.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.4.2.3.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-4-2-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard-10-4-2-3-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-4-2-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard-10-4-2-3-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.4.2.3.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°**&#x2F;Sentinel dashboard 10.4.2.3.3** å¯åŠ¨ **member-service-nacos-provider-10004 **"></a>10.4.2.3.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°**&#x2F;Sentinel dashboard 10.4.2.3.3** å¯åŠ¨ **member-service-nacos-provider-10004 **</h5><h5 id="10-4-2-3-4-æµè§ˆå™¨-localhost-10004-x2F-member-x2F-get-x2F-1"><a href="#10-4-2-3-4-æµè§ˆå™¨-localhost-10004-x2F-member-x2F-get-x2F-1" class="headerlink" title="10.4.2.3.4 æµè§ˆå™¨**: localhost:10004&#x2F;member&#x2F;get&#x2F;1 **"></a><strong>10.4.2.3.4</strong> æµè§ˆå™¨**: localhost:10004&#x2F;member&#x2F;get&#x2F;1 **</h5><h5 id="10-4-2-3-5-Sentinel-æ§åˆ¶å°ç›‘æ§é¡µé¢"><a href="#10-4-2-3-5-Sentinel-æ§åˆ¶å°ç›‘æ§é¡µé¢" class="headerlink" title="10.4.2.3.5 Sentinel æ§åˆ¶å°ç›‘æ§é¡µé¢"></a><strong>10.4.2.3.5 Sentinel</strong> æ§åˆ¶å°ç›‘æ§é¡µé¢</h5><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost:10004/member/get/1">http://localhost:10004/member/get/1</a> , 1** ç§’é’Ÿå†…è®¿é—®æ¬¡æ•°ä¸è¶…è¿‡ <strong>1</strong> æ¬¡**,** é¡µ é¢æ˜¾ç¤ºæ­£å¸¸</p><p><strong>2.</strong> <strong>æµè§ˆå™¨è¾“å…¥</strong>:<a href="http://localhost:10004/member/get/1">http://localhost:10004/member/get/1</a> ,1ç§’é’Ÿå†…è®¿é—®æ¬¡æ•°è¶…è¿‡1æ¬¡, <strong>é¡µé¢å‡ºç°é”™è¯¯æç¤º</strong></p><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230622221636917.png" alt="image-20230622221636917" style="zoom:33%;" /><h4 id="10-4-2-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#10-4-2-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="10.4.2.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>10.4.2.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><h5 id="1-æµé‡è§„åˆ™æ”¹åŠ¨ï¼Œå®æ—¶ç”Ÿæ•ˆï¼Œä¸éœ€é‡å¯å¾®æœåŠ¡-Sentinel-æ§åˆ¶å°"><a href="#1-æµé‡è§„åˆ™æ”¹åŠ¨ï¼Œå®æ—¶ç”Ÿæ•ˆï¼Œä¸éœ€é‡å¯å¾®æœåŠ¡-Sentinel-æ§åˆ¶å°" class="headerlink" title="1. æµé‡è§„åˆ™æ”¹åŠ¨ï¼Œå®æ—¶ç”Ÿæ•ˆï¼Œä¸éœ€é‡å¯å¾®æœåŠ¡ , Sentinel æ§åˆ¶å°"></a><strong>1.</strong> æµé‡è§„åˆ™æ”¹åŠ¨ï¼Œå®æ—¶ç”Ÿæ•ˆï¼Œ<u>ä¸éœ€é‡å¯å¾®æœåŠ¡ <strong>, Sentinel</strong> æ§åˆ¶å°</u></h5><p>â€‹ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºsentinelä¸­è§„åˆ™ä¸€å‘ç”Ÿæ”¹åŠ¨ï¼Œå°±ä¼šå°†ä¿¡æ¯pushåˆ°å¾®æœåŠ¡ä¸»æœºç›‘å¬sentinelæœåŠ¡çš„è¿›ç¨‹</p><h5 id="2-åœ¨-sentinel-é…ç½®æµé‡è§„åˆ™æ—¶ï¼Œå¦‚ä½•é…ç½®é€šé…ç¬¦é—®é¢˜ï¼Œ-æ¯”å¦‚-x2F-member-x2F-get-x2F-1-x2F-member-x2F-get-x2F-2-ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªè§„åˆ™"><a href="#2-åœ¨-sentinel-é…ç½®æµé‡è§„åˆ™æ—¶ï¼Œå¦‚ä½•é…ç½®é€šé…ç¬¦é—®é¢˜ï¼Œ-æ¯”å¦‚-x2F-member-x2F-get-x2F-1-x2F-member-x2F-get-x2F-2-ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªè§„åˆ™" class="headerlink" title="2. åœ¨ sentinel é…ç½®æµé‡è§„åˆ™æ—¶ï¼Œå¦‚ä½•é…ç½®é€šé…ç¬¦é—®é¢˜ï¼Œ æ¯”å¦‚ &#x2F;member&#x2F;get&#x2F;1 &#x2F;member&#x2F;get&#x2F;2 ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªè§„åˆ™"></a><strong>2.</strong> åœ¨ sentinel é…ç½®æµé‡è§„åˆ™æ—¶ï¼Œå¦‚ä½•é…ç½®é€šé…ç¬¦é—®é¢˜ï¼Œ æ¯”å¦‚ &#x2F;member&#x2F;get&#x2F;1 &#x2F;member&#x2F;get&#x2F;2 ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªè§„åˆ™</h5><ul><li>æ–¹æ¡ˆ1: åœ¨sentinelä¸­ &#x2F;member&#x2F;get?id&#x3D;1 å’Œ &#x2F;member&#x2F;get?id&#x3D;2 è¢«ç»Ÿä¸€è®¤ä¸ºæ˜¯**&#x2F;member&#x2F;get** æ‰€ä»¥åªè¦å¯¹&#x2F;member&#x2F;get é™æµå°±OKäº†.      (å°†è¦æºå¸¦çš„å‚æ•°æ”¾åœ¨è½½è·è€Œä¸æ˜¯è·¯å¾„ä¸­)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(value = &quot;/member/get&quot;, params = &quot;id&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">getgetMemberById</span><span class="params">(Long id)</span>&#123;</span><br><span class="line">    <span class="type">Member</span> <span class="variable">member</span> <span class="operator">=</span> memberService.queryMemberById(id);</span><br><span class="line">    <span class="keyword">if</span>(member != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;æŸ¥è¯¢æˆåŠŸ member-service-nacos-provider-10004&quot;</span>,member);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;402&quot;</span>,<span class="string">&quot;ID = &quot;</span>+ id + <span class="string">&quot;ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/Users/donn/Library/Application Support/typora-user-images/image-20230622223803411.png" alt="image-20230622223803411" style="zoom: 50%;" /><p>è®¿é—®ï¼š<a href="http://localhost:10004/member/get?id=3">http://localhost:10004/member/get?id=3</a></p><ul><li>æ–¹æ¡ˆ2: URLèµ„æºæ¸…æ´—<br>å¯ä»¥é€šè¿‡ UrlCleaner æ¥å£æ¥å®ç°èµ„æºæ¸…æ´—ï¼Œä¹Ÿå°±æ˜¯å¯¹äº&#x2F;member&#x2F;get&#x2F;{id}è¿™ä¸ª URLï¼Œæˆ‘ä»¬å¯ä»¥ç»Ÿä¸€å½’é›†åˆ°&#x2F;member&#x2F;get&#x2F;*èµ„æºä¸‹ï¼Œå…·ä½“é…ç½®ä»£ç å¦‚ä¸‹ï¼Œå®ç° UrlCleaner æ¥å£ï¼Œå¹¶é‡å†™ clean æ–¹æ³•å³å¯</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ·»åŠ ä»£ç ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.study.springcloud.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.csp.sentinel.adapter.servlet.callback.UrlCleaner;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/6/22</span></span><br><span class="line"><span class="comment"> * 22:41</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomUrlCleaner</span> <span class="keyword">implements</span> <span class="title class_">UrlCleaner</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">clean</span><span class="params">(String originURL)</span> &#123;</span><br><span class="line">        <span class="comment">//èµ„æºæ¸…æ´—</span></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isBlank(originURL))&#123;</span><br><span class="line">            <span class="keyword">return</span> originURL;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (originURL.startsWith(<span class="string">&quot;/member/get&quot;</span>))&#123;</span><br><span class="line">            <span class="comment">// 1. å¦‚æœè¯·æ±‚çš„æ˜¯æ¥å£ /member/get å¼€å¤´çš„, æ¯”å¦‚/member/get/1</span></span><br><span class="line">            <span class="comment">// 2. ç»™ sentinel çš„è¿”å›çš„èµ„æºåå°±æ˜¯ /member/get/*</span></span><br><span class="line">            <span class="comment">// 3. åœ¨ sentinel å¯¹ /member/get/* æ·»åŠ æµæ§è§„åˆ™å³å¯</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;/member/get/*&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦åˆ™ è¿”å›æ”¶åˆ°çš„URLå³å¯</span></span><br><span class="line">        <span class="keyword">return</span> originURL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-å¦‚æœ-sentinel-æµæ§è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–ï¼Œå½“æˆ‘ä»¬é‡å¯è°ƒç”¨-API-æ‰€åœ¨å¾®æœåŠ¡æ¨¡å—åï¼Œè§„åˆ™ä¼šä¸¢å¤±ï¼Œéœ€è¦é‡æ–°åŠ å…¥"><a href="#3-å¦‚æœ-sentinel-æµæ§è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–ï¼Œå½“æˆ‘ä»¬é‡å¯è°ƒç”¨-API-æ‰€åœ¨å¾®æœåŠ¡æ¨¡å—åï¼Œè§„åˆ™ä¼šä¸¢å¤±ï¼Œéœ€è¦é‡æ–°åŠ å…¥" class="headerlink" title="3. å¦‚æœ sentinel æµæ§è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–ï¼Œå½“æˆ‘ä»¬é‡å¯è°ƒç”¨ API æ‰€åœ¨å¾®æœåŠ¡æ¨¡å—åï¼Œè§„åˆ™ä¼šä¸¢å¤±ï¼Œéœ€è¦é‡æ–°åŠ å…¥"></a><strong>3.</strong> <strong>å¦‚æœ</strong> <strong>sentinel</strong> <strong>æµæ§è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–ï¼Œå½“æˆ‘ä»¬é‡å¯è°ƒç”¨</strong> <strong>API</strong> <strong>æ‰€åœ¨å¾®æœåŠ¡æ¨¡å—åï¼Œè§„åˆ™ä¼šä¸¢å¤±ï¼Œéœ€è¦é‡æ–°åŠ å…¥</strong></h5><h3 id="10-4-3-æµé‡æ§åˆ¶å®ä¾‹-çº¿ç¨‹æ•°"><a href="#10-4-3-æµé‡æ§åˆ¶å®ä¾‹-çº¿ç¨‹æ•°" class="headerlink" title="10.4.3 æµé‡æ§åˆ¶å®ä¾‹**-**çº¿ç¨‹æ•°"></a><strong>10.4.3</strong> æµé‡æ§åˆ¶å®ä¾‹**-**çº¿ç¨‹æ•°</h3><h4 id="10-4-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-4-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.4.3.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.4.3.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p> <strong>1.</strong> éœ€æ±‚**:** é€šè¿‡ <strong>Sentinel</strong> å®ç° æµé‡æ§åˆ¶<br> <strong>2.</strong> å½“è°ƒç”¨ <strong>member-service-nacos-provider-10004</strong> çš„ <strong>&#x2F;member&#x2F;get&#x2F;*</strong>   <strong>API</strong> æ—¶ï¼Œ<u>é™åˆ¶åªæœ‰ä¸€ä¸ªå·¥ä½œçº¿ç¨‹</u>ï¼Œå¦åˆ™ç›´æ¥å¤±è´¥ï¼ŒæŠ›å¼‚å¸¸**.**</p><h4 id="10-4-3-2-é…ç½®å®ç°æ­¥éª¤"><a href="#10-4-3-2-é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.4.3.2 é…ç½®å®ç°æ­¥éª¤"></a>10.4.3.2 é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> ä¸º**&#x2F;member&#x2F;get&#x2F;*** å¢åŠ æµæ§è§„åˆ™</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623143357430.png" alt="image-20230623143357430"></p><p><strong>2.</strong> <strong>åœ¨æµæ§è§„åˆ™èœå•ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢çš„æµæ§è§„åˆ™</strong></p><h4 id="10-4-3-3-æµ‹è¯•"><a href="#10-4-3-3-æµ‹è¯•" class="headerlink" title="10.4.3.3 æµ‹è¯•"></a>10.4.3.3 æµ‹è¯•</h4><h5 id="10-4-3-3-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-4-3-3-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.4.3.3.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.4.3.3.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-4-3-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-4-3-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.4.3.3.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°**&#x2F;Sentinel dashboard **"></a>10.4.3.3.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°**&#x2F;Sentinel dashboard **</h5><h5 id="10-4-3-3-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-4-3-3-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.4.3.3.3 å¯åŠ¨ **member-service-nacos-provider-10004 **"></a><strong>10.4.3.3.3</strong> å¯åŠ¨ **member-service-nacos-provider-10004 **</h5><h5 id="10-4-3-3-4-æµè§ˆå™¨-localhost-10004-x2F-member-x2F-get-x2F-1"><a href="#10-4-3-3-4-æµè§ˆå™¨-localhost-10004-x2F-member-x2F-get-x2F-1" class="headerlink" title="10.4.3.3.4 æµè§ˆå™¨**: localhost:10004&#x2F;member&#x2F;get&#x2F;1 **"></a><strong>10.4.3.3.4</strong> æµè§ˆå™¨**: localhost:10004&#x2F;member&#x2F;get&#x2F;1 **</h5><h5 id="10-4-3-3-5-ç»“æœé¡µé¢"><a href="#10-4-3-3-5-ç»“æœé¡µé¢" class="headerlink" title="10.4.3.3.5 ç»“æœé¡µé¢"></a><strong>10.4.3.3.5</strong> ç»“æœé¡µé¢</h5><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost:10004/member/get/1">http://localhost:10004/member/get/1</a> ,** å¿«é€Ÿåˆ·æ–°**,** é¡µé¢æ˜¾ç¤ºæ­£å¸¸**(<strong>åŸå› æ˜¯æœåŠ¡æ‰§è¡Œæ—¶é—´å¾ˆçŸ­ï¼Œåˆ·æ–°ä¸‹ä¸€æ¬¡çš„æ—¶å€™ï¼Œå¯åŠ¨çš„å·¥ä½œçº¿ç¨‹ï¼Œå·²ç»å®Œæˆ</strong>)**</p><p><strong>2.</strong> <strong>ä¸ºäº†çœ‹åˆ°æ•ˆæœï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸‹</strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®©å®ƒç¡çœ ä¸€ä¸‹</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    TimeUnit.MILLISECONDS.sleep(<span class="number">1000</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3.</strong> <strong>é‡å¯</strong> <strong>member-service-nacos-provider-10004 ,</strong> <strong>æ³¨æ„</strong>éœ€è¦é‡æ–°åŠ å…¥æµæ§è§„åˆ™.</p><p><strong>4.</strong> <strong>æµè§ˆå™¨è¾“å…¥</strong>: <a href="http://localhost:10004/member/get/1">http://localhost:10004/member/get/1</a> , <strong>å¿«é€Ÿåˆ·æ–°</strong>, <strong>é¡µé¢å‡ºç°å¼‚å¸¸</strong></p><h4 id="10-4-3-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#10-4-3-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="10.4.3.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>10.4.3.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><p> <strong>1.</strong> <u>å½“æˆ‘ä»¬è¯·æ±‚ä¸€æ¬¡å¾®æœåŠ¡çš„ <strong>API</strong> æ¥å£æ—¶ï¼Œåå°ä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹</u></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623144551449.png" alt="image-20230623144551449" style="zoom:50%;" /><p>2.é˜ˆå€¼ç±»å‹ QPS å’Œ çº¿ç¨‹æ•°çš„åŒºåˆ«è®¨è®º</p><ul><li>å¦‚æœä¸€ä¸ªçº¿ç¨‹å¹³å‡æ‰§è¡Œæ—¶é—´ä¸º0.05ç§’ï¼Œå°±è¯´æ˜åœ¨1ç§’é’Ÿï¼Œå¯ä»¥æ‰§è¡Œ20æ¬¡(ç›¸å½“äº QPSä¸º20)</li><li>å¦‚æœä¸€ä¸ªçº¿ç¨‹å¹³å‡æ‰§è¡Œæ—¶é—´ä¸º1ç§’ï¼Œè¯´æ˜1ç§’é’Ÿï¼Œå¯ä»¥æ‰§è¡Œ1æ¬¡(ç›¸å½“äº QPSä¸º1)</li><li>å¦‚æœä¸€ä¸ªçº¿ç¨‹å¹³å‡æ‰§è¡Œæ—¶é—´ä¸º2ç§’ï¼Œè¯´æ˜2ç§’é’Ÿå†…ï¼Œæ‰èƒ½æ‰§è¡Œ1æ¬¡è¯·æ±‚</li></ul><h3 id="10-4-4-æµé‡æ§åˆ¶å®ä¾‹-å…³è”"><a href="#10-4-4-æµé‡æ§åˆ¶å®ä¾‹-å…³è”" class="headerlink" title="10.4.4 æµé‡æ§åˆ¶å®ä¾‹**-**å…³è”"></a><strong>10.4.4</strong> æµé‡æ§åˆ¶å®ä¾‹**-**å…³è”</h3><h4 id="10-4-4-1-å…³è”çš„å«ä¹‰"><a href="#10-4-4-1-å…³è”çš„å«ä¹‰" class="headerlink" title="10.4.4.1 å…³è”çš„å«ä¹‰"></a>10.4.4.1 å…³è”çš„å«ä¹‰</h4><h5 id="10-4-4-1-1-å½“å…³è”çš„èµ„æºè¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œå°±é™æµè‡ªå·±"><a href="#10-4-4-1-1-å½“å…³è”çš„èµ„æºè¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œå°±é™æµè‡ªå·±" class="headerlink" title="10.4.4.1.1 å½“å…³è”çš„èµ„æºè¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œå°±é™æµè‡ªå·±"></a><strong>10.4.4.1.1</strong> <u>å½“å…³è”çš„èµ„æºè¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œå°±é™æµè‡ªå·±</u></h5><h4 id="10-4-4-2-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-4-4-2-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.4.4.2 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.4.4.2 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> éœ€æ±‚**:** é€šè¿‡ <strong>Sentinel</strong> å®ç° æµé‡æ§åˆ¶</p><p><strong>2.</strong> å½“è°ƒç”¨ <strong>member-service-nacos-provider-10004</strong> çš„ <strong>&#x2F;t2 API</strong> æ¥å£æ—¶ï¼Œå¦‚æœ <strong>QPS</strong> è¶…è¿‡ <strong>1</strong>ï¼Œè¿™æ—¶è°ƒç”¨ <strong>&#x2F;t1 API</strong> æ¥å£ ç›´æ¥å¤±è´¥ï¼ŒæŠ›å¼‚å¸¸**.** </p><p>â€‹æ¢³ç†: <strong>&#x2F;t2</strong> æ˜¯å…³è”çš„èµ„æº <strong>,</strong> é™æµçš„èµ„æºæ˜¯**&#x2F;t1**</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/t1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">t1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;t1æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/t2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">t2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;t2æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-4-4-3-é…ç½®å®ç°æ­¥éª¤"><a href="#10-4-4-3-é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.4.4.3 é…ç½®å®ç°æ­¥éª¤"></a>10.4.4.3 é…ç½®å®ç°æ­¥éª¤</h4><p> <strong>1.</strong> ä¸º**&#x2F;t1** å¢åŠ æµæ§è§„åˆ™</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623150310128.png" alt="image-20230623150310128" style="zoom:50%;" /><p><strong>2.</strong> <strong>åœ¨æµæ§è§„åˆ™èœå•ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢çš„æµæ§è§„åˆ™</strong></p><h4 id="10-4-4-4-æµ‹è¯•"><a href="#10-4-4-4-æµ‹è¯•" class="headerlink" title="10.4.4.4 æµ‹è¯•"></a>10.4.4.4 æµ‹è¯•</h4><h5 id="10-4-4-4-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-4-4-4-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.4.4.4.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.4.4.4.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-4-4-4-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-4-4-4-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.4.4.4.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°**&#x2F;Sentinel dashboard**"></a>10.4.4.4.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°**&#x2F;Sentinel dashboard**</h5><h5 id="10-4-4-4-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-4-4-4-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.4.4.4.3 å¯åŠ¨ **member-service-nacos-provider-10004 **"></a>10.4.4.4.3 å¯åŠ¨ **member-service-nacos-provider-10004 **</h5><h5 id="10-4-4-4-4-ã€ŒPostmanæ¨¡æ‹Ÿé«˜å¹¶å‘è®¿é—®-x2F-t2-ã€"><a href="#10-4-4-4-4-ã€ŒPostmanæ¨¡æ‹Ÿé«˜å¹¶å‘è®¿é—®-x2F-t2-ã€" class="headerlink" title="10.4.4.4.4 ã€ŒPostmanæ¨¡æ‹Ÿé«˜å¹¶å‘è®¿é—®**&#x2F;t2**ã€"></a><strong>10.4.4.4.4 ã€ŒPostman</strong>æ¨¡æ‹Ÿé«˜å¹¶å‘è®¿é—®**&#x2F;t2**ã€</h5><p><strong>1.</strong> åˆ›å»ºæ–°çš„ <strong>http request</strong></p><p><strong>2.</strong> <strong>ä¿å­˜</strong> <strong>request</strong> <strong>åˆ° ä¸€ä¸ªæ–°çš„</strong> <strong>collection</strong> <strong>ä¸­</strong></p><p><strong>3.</strong> <strong>è®¾ç½®</strong> <strong>run collection</strong> <strong>å‚æ•°</strong>, <strong>å¹¶è¿è¡Œ</strong></p><p><strong>4.</strong> <strong>æµè§ˆå™¨è®¿é—®</strong>: <a href="http://localhost:10004/t1">http://localhost:10004/t1</a></p><h5 id="10-4-4-4-5-æµè§ˆå™¨-localhost-10004-x2F-t1"><a href="#10-4-4-4-5-æµè§ˆå™¨-localhost-10004-x2F-t1" class="headerlink" title="10.4.4.4.5 æµè§ˆå™¨: localhost:10004&#x2F;t1"></a><strong>10.4.4.4.5</strong> æµè§ˆå™¨: localhost:10004&#x2F;t1</h5><p><strong>1.</strong> æµè§ˆå™¨è®¿é—® <strong><a href="http://localhost:10004/t1">http://localhost:10004/t1</a></strong> çš„ç»“æœé¡µé¢</p><h4 id="10-4-4-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#10-4-4-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="10.4.4.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>10.4.4.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><p> <strong>10.4.4.5.1</strong> åœ¨ <strong>postman</strong> æ‰§è¡Œ é«˜å¹¶å‘è®¿é—® <strong>&#x2F;t2</strong> æ²¡æœ‰ç»“æŸæ—¶ï¼Œ å»è®¿é—® <strong>&#x2F;t1</strong> æ‰èƒ½çœ‹åˆ°æµæ§å¼‚å¸¸å‡ºç°</p><h3 id="10-4-5-æµé‡æ§åˆ¶å®ä¾‹-Warm-up"><a href="#10-4-5-æµé‡æ§åˆ¶å®ä¾‹-Warm-up" class="headerlink" title="10.4.5 æµé‡æ§åˆ¶å®ä¾‹**-Warm up**"></a>10.4.5 æµé‡æ§åˆ¶å®ä¾‹**-Warm up**</h3><h4 id="10-4-5-1-Warm-up-ä»‹ç»"><a href="#10-4-5-1-Warm-up-ä»‹ç»" class="headerlink" title="10.4.5.1 Warm up ä»‹ç»"></a>10.4.5.1 Warm up ä»‹ç»</h4><p><strong>1.</strong> æ¦‚è¿°</p><ul><li><strong>å½“æµé‡çªç„¶å¢å¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šå¸Œæœ›ç³»ç»Ÿä»ç©ºé—²çŠ¶æ€åˆ°ç¹å¿™çŠ¶æ€çš„åˆ‡æ¢çš„æ—¶é—´é•¿ ä¸€äº›ã€‚å³å¦‚æœç³»ç»Ÿåœ¨æ­¤ä¹‹å‰é•¿æœŸå¤„äºç©ºé—²çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¸Œæœ›å¤„ç†è¯·æ±‚çš„æ•°é‡æ˜¯ç¼“æ­¥çš„ å¢å¤šï¼Œç»è¿‡é¢„æœŸçš„æ—¶é—´ä»¥åï¼Œåˆ°è¾¾ç³»ç»Ÿå¤„ç†è¯·æ±‚ä¸ªæ•°çš„æœ€å¤§å€¼ã€‚</strong>Warm Up(<strong>å†·å¯åŠ¨ï¼Œ é¢„çƒ­</strong>)<strong>æ¨¡å¼å°±æ˜¯ä¸ºäº†å®ç°è¿™ä¸ªç›®çš„çš„ã€‚</strong></li><li><strong>è¿™ä¸ªåœºæ™¯ä¸»è¦ç”¨äºå¯åŠ¨éœ€è¦é¢å¤–å¼€é”€çš„åœºæ™¯ï¼Œä¾‹å¦‚å»ºç«‹æ•°æ®åº“è¿æ¥ç­‰</strong></li></ul><p><strong>2.</strong> <strong>ä¸€å¼ å›¾</strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623215536876.png" alt="image-20230623215536876" style="zoom:50%;" /><ul><li><strong>é€šå¸¸å†·å¯åŠ¨çš„è¿‡ç¨‹ç³»ç»Ÿå…è®¸é€šè¿‡çš„</strong> <strong>QPS</strong> <strong>æ›²çº¿å›¾</strong>(ä¸Šå›¾)</li><li><strong>é»˜è®¤</strong> <strong>coldFactor</strong> <strong>ä¸º</strong> <strong>3</strong>ï¼Œå³è¯·æ±‚ <strong>QPS</strong> <strong>ä»</strong> <strong>threshold &#x2F; 3</strong> <strong>å¼€å§‹ï¼Œç»é¢„çƒ­æ—¶é•¿é€æ¸å‡è‡³è®¾å®šçš„</strong> <strong>QPS</strong> <strong>é˜ˆå€¼</strong></li><li><strong>è¿™é‡Œçš„</strong>threshold <strong>å°±æ˜¯æœ€ç»ˆè¦è¾¾åˆ°çš„</strong>QPSé˜ˆå€¼.</li></ul><h5 id="10-4-5-1-1-æ–‡-æ¡£"><a href="#10-4-5-1-1-æ–‡-æ¡£" class="headerlink" title="10.4.5.1.1 æ–‡ æ¡£ :"></a><strong>10.4.5.1.1</strong> æ–‡ æ¡£ <strong>:</strong></h5><p><strong><a href="https://github.com/alibaba/Sentinel/wiki/%E9%99%90%E6%B5%81---%E5%86%B7%E5%90%AF%E5%8A%A8">https://github.com/alibaba/Sentinel/wiki/%E9%99%90%E6%B5%81---%E5%86%B7%E5%90%AF%E5%8A%A8</a></strong></p><h5 id="10-4-5-1-2-é»˜è®¤-coldFactor-ä¸º-3ï¼Œå³è¯·æ±‚-QPS-ä»-threshold-x2F-3-å¼€å§‹ï¼Œç»é¢„çƒ­æ—¶é•¿é€æ¸å‡è‡³è®¾å®šçš„-QPS-é˜ˆå€¼"><a href="#10-4-5-1-2-é»˜è®¤-coldFactor-ä¸º-3ï¼Œå³è¯·æ±‚-QPS-ä»-threshold-x2F-3-å¼€å§‹ï¼Œç»é¢„çƒ­æ—¶é•¿é€æ¸å‡è‡³è®¾å®šçš„-QPS-é˜ˆå€¼" class="headerlink" title="10.4.5.1.2 é»˜è®¤ coldFactor ä¸º 3ï¼Œå³è¯·æ±‚ QPS ä» threshold &#x2F; 3 å¼€å§‹ï¼Œç»é¢„çƒ­æ—¶é•¿é€æ¸å‡è‡³è®¾å®šçš„ QPS é˜ˆå€¼"></a><strong>10.4.5.1.2</strong> é»˜è®¤ <strong>coldFactor</strong> ä¸º <strong>3</strong>ï¼Œå³è¯·æ±‚ <strong>QPS</strong> ä» <strong>threshold &#x2F; 3</strong> å¼€å§‹ï¼Œç»é¢„çƒ­æ—¶é•¿é€æ¸å‡è‡³è®¾å®šçš„ <strong>QPS</strong> é˜ˆå€¼</h5><h5 id="10-4-5-1-3-Warm-up-ç§°ä¸º-å†·å¯åŠ¨-x2F-é¢„çƒ­"><a href="#10-4-5-1-3-Warm-up-ç§°ä¸º-å†·å¯åŠ¨-x2F-é¢„çƒ­" class="headerlink" title="10.4.5.1.3 Warm up ç§°ä¸º å†·å¯åŠ¨**&#x2F;**é¢„çƒ­"></a><strong>10.4.5.1.3 Warm up</strong> ç§°ä¸º å†·å¯åŠ¨**&#x2F;**é¢„çƒ­</h5><h5 id="10-4-5-1-4-åº”ç”¨åœºæ™¯-ç§’æ€åœ¨å¼€å¯ç¬é—´ï¼Œå¤§æµé‡å¾ˆå®¹æ˜“é€ æˆå†²å®ç³»ç»Ÿï¼ŒWarmup-å¯æ…¢æ…¢çš„æŠŠæµé‡æ”¾å…¥ï¼Œæœ€ç»ˆå°†é˜€å€¼å¢é•¿åˆ°è®¾ç½®é˜€å€¼"><a href="#10-4-5-1-4-åº”ç”¨åœºæ™¯-ç§’æ€åœ¨å¼€å¯ç¬é—´ï¼Œå¤§æµé‡å¾ˆå®¹æ˜“é€ æˆå†²å®ç³»ç»Ÿï¼ŒWarmup-å¯æ…¢æ…¢çš„æŠŠæµé‡æ”¾å…¥ï¼Œæœ€ç»ˆå°†é˜€å€¼å¢é•¿åˆ°è®¾ç½®é˜€å€¼" class="headerlink" title="10.4.5.1.4 åº”ç”¨åœºæ™¯**:** ç§’æ€åœ¨å¼€å¯ç¬é—´ï¼Œå¤§æµé‡å¾ˆå®¹æ˜“é€ æˆå†²å®ç³»ç»Ÿï¼ŒWarmup å¯æ…¢æ…¢çš„æŠŠæµé‡æ”¾å…¥ï¼Œæœ€ç»ˆå°†é˜€å€¼å¢é•¿åˆ°è®¾ç½®é˜€å€¼"></a><strong>10.4.5.1.4</strong> åº”ç”¨åœºæ™¯**:** ç§’æ€åœ¨å¼€å¯ç¬é—´ï¼Œå¤§æµé‡å¾ˆå®¹æ˜“é€ æˆå†²å®ç³»ç»Ÿï¼Œ<strong>Warmup</strong> å¯æ…¢æ…¢çš„æŠŠæµé‡æ”¾å…¥ï¼Œæœ€ç»ˆå°†é˜€å€¼å¢é•¿åˆ°è®¾ç½®é˜€å€¼</h5><h4 id="10-4-5-2-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-4-5-2-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.4.5.2 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.4.5.2 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> éœ€æ±‚**:** é€šè¿‡ <strong>Sentinel</strong> å®ç°æµé‡æ§åˆ¶**,**æ¼”ç¤º <strong>Warm up</strong></p><p><strong>2.</strong> è°ƒç”¨ <strong>member-service-nacos-provider-10004</strong> çš„ <strong>&#x2F;t2 API</strong> æ¥å£ï¼Œå°† <strong>QPS</strong> è®¾ç½®ä¸º <strong>9,</strong> è®¾ç½® <strong>Warm up</strong> å€¼ä¸º <strong>3</strong></p><p><strong>4.</strong> å«ä¹‰ä¸º è¯·æ±‚ <strong>&#x2F;t2</strong> çš„ <strong>QPS</strong> ä» <strong>threshold &#x2F; 3( 9 &#x2F;3 &#x3D; 3)</strong> å¼€å§‹ï¼Œç»é¢„çƒ­æ—¶é•¿**(3** ç§’**)<strong>é€æ¸å‡è‡³ è®¾å®šçš„ <strong>QPS</strong> é˜ˆå€¼</strong>(9)**</p><p><strong>5.</strong> ä¸ºä»€ä¹ˆæ˜¯ <strong>9 &#x2F; 3,</strong> è¿™ä¸ªæ˜¯ <strong>3</strong> å°±æ˜¯é»˜è®¤å†·å¯åŠ¨å¯åŠ¨åŠ è½½å› å­ <strong>coldFactor&#x3D;3</strong></p><p><strong>6.</strong> æµ‹è¯•é¢„æœŸæ•ˆæœ**:** åœ¨å‰ <strong>3</strong> ç§’ï¼Œå¦‚æœè®¿é—® <strong>&#x2F;t2</strong> çš„ <strong>QPS</strong> è¶…è¿‡ <strong>3,</strong> ä¼šç›´æ¥æŠ¥é”™ï¼Œåœ¨ <strong>3</strong> ç§’å è®¿é—® <strong>&#x2F;t2</strong> çš„ <strong>QPS</strong> è¶…è¿‡ <strong>3,</strong> å°äºç­‰äº <strong>9,</strong> æ˜¯æ­£å¸¸è®¿é—®</p><h4 id="10-4-5-3-é…ç½®å®ç°æ­¥éª¤"><a href="#10-4-5-3-é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.4.5.3 é…ç½®å®ç°æ­¥éª¤"></a>10.4.5.3 é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> ä¸º**&#x2F;t2** å¢åŠ æµæ§è§„åˆ™</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623220623200.png" alt="image-20230623220623200" style="zoom:50%;" /><p><strong>2.</strong> <strong>åœ¨æµæ§è§„åˆ™èœå•ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢çš„æµæ§è§„åˆ™</strong></p><h4 id="10-4-5-4-æµ‹è¯•"><a href="#10-4-5-4-æµ‹è¯•" class="headerlink" title="10.4.5.4 æµ‹è¯•"></a>10.4.5.4 æµ‹è¯•</h4><h5 id="10-4-5-4-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-4-5-4-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.4.5.4.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.4.5.4.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-4-5-4-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-4-5-4-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.4.5.4.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°**&#x2F;Sentinel dashboard **"></a>10.4.5.4.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°**&#x2F;Sentinel dashboard **</h5><h5 id="10-4-5-4-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-4-5-4-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.4.5.4.3 å¯åŠ¨ **member-service-nacos-provider-10004 **"></a><strong>10.4.5.4.3</strong> å¯åŠ¨ **member-service-nacos-provider-10004 **</h5><h5 id="10-4-5-4-4-æµè§ˆå™¨-localhost-10004-x2F-t2"><a href="#10-4-5-4-4-æµè§ˆå™¨-localhost-10004-x2F-t2" class="headerlink" title="10.4.5.4.4 æµè§ˆå™¨**: localhost:10004&#x2F;t2**"></a><strong>10.4.5.4.4</strong> æµè§ˆå™¨**: localhost:10004&#x2F;t2**</h5><p><strong>1.</strong> æµè§ˆå™¨è®¿é—® <strong><a href="http://localhost:10004/t2">http://localhost:10004/t2</a></strong> å¿«é€Ÿåˆ·æ–°é¡µé¢ï¼Œåœ¨å‰ <strong>3</strong> ç§’ï¼Œä¼šå‡ºç°æµæ§å¼‚å¸¸ï¼Œ å <strong>3</strong> ç§’å°±æ­£å¸¸äº†**(<strong>å¦‚æœä½ åˆ·æ–°éå¸¸å¿« <strong>QPS&gt;9</strong> <strong>,</strong> ä»ç„¶ä¼šå‡ºç°æµæ§å¼‚å¸¸</strong>)**</p><h4 id="10-4-5-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#10-4-5-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="10.4.5.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>10.4.5.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><p> <strong>10.4.5.5.1</strong> æµ‹è¯• <strong>Warm up</strong> æ•ˆæœä¸æ˜¯å¾ˆå¥½æµ‹ï¼Œå¦‚æœå‡ºä¸æ¥å¯ä»¥å°è¯•ï¼Œè°ƒæ•´æµæ§è§„åˆ™**:** æ¯”å¦‚ <strong>QPS</strong> ä¸º **11, Warm up é¢„çƒ­æ—¶é—´ **6 ç§’</p><h5 id="10-4-5-5-2-å¦‚æœè¯·æ±‚åœæ­¢-å³-ä¸€æ®µæ—¶é—´æ²¡æœ‰è¾¾åˆ°é˜ˆå€¼-Warm-up-è¿‡ç¨‹å°†é‡å¤-å°ä¼™ä¼´å¯ä»¥ç†è§£æ˜¯ä¸€ä¸ªå¼¹æ€§è¿‡ç¨‹"><a href="#10-4-5-5-2-å¦‚æœè¯·æ±‚åœæ­¢-å³-ä¸€æ®µæ—¶é—´æ²¡æœ‰è¾¾åˆ°é˜ˆå€¼-Warm-up-è¿‡ç¨‹å°†é‡å¤-å°ä¼™ä¼´å¯ä»¥ç†è§£æ˜¯ä¸€ä¸ªå¼¹æ€§è¿‡ç¨‹" class="headerlink" title="10.4.5.5.2 å¦‚æœè¯·æ±‚åœæ­¢**(å³:** ä¸€æ®µæ—¶é—´æ²¡æœ‰è¾¾åˆ°é˜ˆå€¼**), Warm up** è¿‡ç¨‹å°†é‡å¤**,** å°ä¼™ä¼´å¯ä»¥ç†è§£æ˜¯ä¸€ä¸ªå¼¹æ€§è¿‡ç¨‹"></a><strong>10.4.5.5.2</strong> å¦‚æœè¯·æ±‚åœæ­¢**(<strong>å³</strong>:** ä¸€æ®µæ—¶é—´æ²¡æœ‰è¾¾åˆ°é˜ˆå€¼**), Warm up** è¿‡ç¨‹å°†é‡å¤**,** å°ä¼™ä¼´å¯ä»¥ç†è§£æ˜¯ä¸€ä¸ªå¼¹æ€§è¿‡ç¨‹</h5><h3 id="10-4-6-æµé‡æ§åˆ¶å®ä¾‹-æ’é˜Ÿ"><a href="#10-4-6-æµé‡æ§åˆ¶å®ä¾‹-æ’é˜Ÿ" class="headerlink" title="10.4.6 æµé‡æ§åˆ¶å®ä¾‹**-**æ’é˜Ÿ"></a>10.4.6 æµé‡æ§åˆ¶å®ä¾‹**-**æ’é˜Ÿ</h3><h4 id="10-4-6-1-æ’é˜Ÿ-ä»‹ç»"><a href="#10-4-6-1-æ’é˜Ÿ-ä»‹ç»" class="headerlink" title="10.4.6.1 æ’é˜Ÿ ä»‹ç»"></a>10.4.6.1 æ’é˜Ÿ ä»‹ç»</h4><p><strong>1.</strong> æ’é˜Ÿæ–¹å¼:è¿™ç§æ–¹å¼ä¸¥æ ¼æ§åˆ¶äº†è¯·æ±‚é€šè¿‡çš„é—´éš”æ—¶é—´ï¼Œä¹Ÿå³æ˜¯è®©è¯·æ±‚ä»¥å‡åŒ€çš„é€Ÿåº¦é€šè¿‡ï¼Œå¯¹åº”çš„æ˜¯æ¼æ¡¶ç®—æ³•</p><p><strong>2.</strong> <strong>ä¸€å¼ å›¾</strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623221119829.png" alt="image-20230623221119829" style="zoom:33%;" /><p><strong>3.</strong> <strong>è¿™ç§æ–¹å¼ä¸»è¦ç”¨äºå¤„ç†é—´éš”æ€§çªå‘çš„æµé‡ï¼Œä¾‹å¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€‚æ¯”å¦‚è¿™æ ·çš„åœºæ™¯ï¼Œåœ¨æŸä¸€ç§’æœ‰å¤§é‡çš„è¯·æ±‚åˆ°æ¥ï¼Œè€Œæ¥ä¸‹æ¥çš„å‡ ç§’åˆ™å¤„äºç©ºé—²çŠ¶æ€ï¼Œ<u>æˆ‘ä»¬å¸Œæœ›ç³»ç»Ÿèƒ½å¤Ÿåœ¨æ¥ä¸‹æ¥çš„ç©ºé—²æœŸé—´é€æ¸å¤„ç†è¿™äº›è¯·æ±‚</u>ï¼Œè€Œä¸æ˜¯åœ¨ç¬¬ä¸€ç§’ç›´æ¥æ‹’ç»å¤šä½™çš„è¯·æ±‚ã€‚-ç±»ä¼¼å‰é¢è¯´çš„å‰Šå³°å¡«è°·</strong></p><p><strong>4.</strong> <strong>åŒ€é€Ÿæ’é˜Ÿï¼Œé˜ˆå€¼å¿…é¡»è®¾ç½®ä¸ºQPS</strong></p><h4 id="10-4-6-2-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-4-6-2-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.4.6.2 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.4.6.2 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> éœ€æ±‚**:** é€šè¿‡ <strong>Sentinel</strong> å®ç° æµé‡æ§åˆ¶**-<strong>æ’é˜Ÿ<br><strong>2.</strong> è°ƒç”¨ <strong>member-service-nacos-provider-10004</strong> çš„ <strong>&#x2F;t2 API</strong> æ¥å£ï¼Œå°† <strong>QPS</strong> è®¾ç½®ä¸º <strong>1 **<br><strong>3.</strong> å½“è°ƒç”¨ <strong>&#x2F;t2</strong> çš„ <strong>QPS</strong> è¶…è¿‡ <strong>1</strong> æ—¶ï¼Œä¸æ‹’ç»è¯·æ±‚ï¼Œè€Œæ˜¯æ’é˜Ÿç­‰å¾…</strong>,</strong> ä¾æ¬¡æ‰§è¡Œ<br><strong>4.<strong>å½“ç­‰å¾…æ—¶é—´è¶…è¿‡ <strong>10</strong> ç§’ï¼Œåˆ™ä¸ºç­‰å¾…è¶…æ—¶â€”â€”</strong>ç­‰å¾…è¶…æ—¶å°±ä¸è¦äº†</strong></p><h4 id="10-4-6-3-ä¿®æ”¹ä¸šåŠ¡ç±»"><a href="#10-4-6-3-ä¿®æ”¹ä¸šåŠ¡ç±»" class="headerlink" title="10.4.6.3 ä¿®æ”¹ä¸šåŠ¡ç±»"></a>10.4.6.3 ä¿®æ”¹ä¸šåŠ¡ç±»</h4><p><strong>1.</strong> ä¸ºäº†æµ‹è¯•çœ‹åˆ°æ•ˆæœï¼Œä¿®æ”¹ <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberController.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/t2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">t2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿçº¿ç¨‹æ‰§è¡Œæ—¶é—´ä¸º1ç§’</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        TimeUnit.MILLISECONDS.sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  log.info(<span class="string">&quot;æ‰§è¡Œ t2() çº¿ç¨‹ id= &quot;</span> + Thread.currentThread().getId());</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;t2æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-4-6-4-é…ç½®å®ç°æ­¥éª¤"><a href="#10-4-6-4-é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.4.6.4 é…ç½®å®ç°æ­¥éª¤"></a>10.4.6.4 é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> ä¸º**&#x2F;t2** å¢åŠ æµæ§è§„åˆ™</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623222712777.png" alt="image-20230623222712777" style="zoom:50%;" /><p><strong>2.</strong> <strong>åœ¨æµæ§è§„åˆ™èœå•ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢çš„æµæ§è§„åˆ™</strong></p><h4 id="10-4-6-5-æµ‹è¯•"><a href="#10-4-6-5-æµ‹è¯•" class="headerlink" title="10.4.6.5 æµ‹è¯•"></a>10.4.6.5 æµ‹è¯•</h4><h5 id="10-4-6-5-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-4-6-5-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.4.6.5.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.4.6.5.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-4-6-5-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-4-6-5-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.4.6.5.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°**&#x2F;Sentinel dashboard **"></a>10.4.6.5.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°**&#x2F;Sentinel dashboard **</h5><h5 id="10-4-6-5-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-4-6-5-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.4.6.5.3 å¯åŠ¨ **member-service-nacos-provider-10004 **"></a><strong>10.4.6.5.3</strong> å¯åŠ¨ **member-service-nacos-provider-10004 **</h5><h5 id="10-4-6-5-4-æµè§ˆå™¨-localhost-10004-x2F-t2"><a href="#10-4-6-5-4-æµè§ˆå™¨-localhost-10004-x2F-t2" class="headerlink" title="10.4.6.5.4 æµè§ˆå™¨**: localhost:10004&#x2F;t2**"></a><strong>10.4.6.5.4</strong> æµè§ˆå™¨**: localhost:10004&#x2F;t2**</h5><p><strong>1.</strong> æµè§ˆå™¨è®¿é—® <strong><a href="http://localhost:10004/t2">http://localhost:10004/t2</a></strong> å¿«é€Ÿåˆ·æ–°é¡µé¢ <strong>9</strong> æ¬¡ï¼Œè§‚å¯Ÿå‰å°**&#x2F;**åå°è¾“å‡ºçš„æƒ…å†µ</p><p>è¾“å‡ºç»“æœåˆ†æï¼šæ²¡æœ‰æŠ¥é”™è¯¯ï¼Œåå°è¯·æ±‚æ’é˜Ÿæ‰§è¡Œï¼Œæ¯éš”1såŒ€é€Ÿæ‰§è¡Œ</p><p><strong>2.</strong> <strong>æµè§ˆå™¨è®¿é—®</strong> <strong><a href="http://localhost:10004/t2">http://localhost:10004/t2</a></strong> <strong>å¿«é€Ÿåˆ·æ–°é¡µé¢</strong>20<strong>æ¬¡ï¼Œå½“è¯·æ±‚ç­‰å¾…æ—¶é—´è¶…è¿‡</strong>10S, <strong>ä»ç„¶å‡ºç°æµæ§å¼‚å¸¸</strong></p><h2 id="10-5-Sentinelç†”æ–­é™çº§"><a href="#10-5-Sentinelç†”æ–­é™çº§" class="headerlink" title="10.5 Sentinelç†”æ–­é™çº§"></a>10.5 Sentinelç†”æ–­é™çº§</h2><h3 id="10-5-1-çº¿ç¨‹å †ç§¯å¼•å‡ºç†”æ–­é™çº§"><a href="#10-5-1-çº¿ç¨‹å †ç§¯å¼•å‡ºç†”æ–­é™çº§" class="headerlink" title="10.5.1 çº¿ç¨‹å †ç§¯å¼•å‡ºç†”æ–­é™çº§"></a><strong>10.5.1</strong> çº¿ç¨‹å †ç§¯å¼•å‡ºç†”æ–­é™çº§</h3><p><strong>1.</strong> ä¸€ä¸ªæœåŠ¡å¸¸å¸¸ä¼šè°ƒç”¨åˆ«çš„æ¨¡å—ï¼Œå¯èƒ½æ˜¯å¦å¤–çš„ä¸€ä¸ªè¿œç¨‹æœåŠ¡ã€æ•°æ®åº“ï¼Œæˆ–è€…ç¬¬ä¸‰æ–¹ API ç­‰ã€‚</p><p><strong>2.</strong> ä¾‹å¦‚ï¼Œæ”¯ä»˜çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦è¿œç¨‹è°ƒç”¨é“¶è”æä¾›çš„ API;æŸ¥è¯¢æŸä¸ªå•†å“çš„ä»·æ ¼ï¼Œå¯èƒ½éœ€ è¦è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚ç„¶è€Œï¼Œè¿™ä¸ªè¢«ä¾èµ–æœåŠ¡çš„ç¨³å®šæ€§æ˜¯ä¸èƒ½ä¿è¯çš„ã€‚å¦‚æœä¾èµ–çš„æœåŠ¡å‡ºç° äº†ä¸ç¨³å®šçš„æƒ…å†µï¼Œè¯·æ±‚çš„å“åº”æ—¶é—´å˜é•¿ï¼Œé‚£ä¹ˆè°ƒç”¨æœåŠ¡çš„æ–¹æ³•çš„å“åº”æ—¶é—´ä¹Ÿä¼šå˜é•¿ï¼Œçº¿ç¨‹ä¼šäº§ç”Ÿå †ç§¯ï¼Œæœ€ç»ˆå¯èƒ½è€—å°½ä¸šåŠ¡è‡ªèº«çš„çº¿ç¨‹æ± ï¼ŒæœåŠ¡æœ¬èº«ä¹Ÿå˜å¾—ä¸å¯ç”¨</p><p><strong>3.</strong> è¿™æ—¶ï¼Œæˆ‘ä»¬<u>å¯¹ä¸ç¨³å®šçš„æœåŠ¡è¿›è¡Œç†”æ–­é™çº§ï¼Œè®©å…¶å¿«é€Ÿè¿”å›ç»“æœï¼Œä¸è¦é€ æˆçº¿ç¨‹å †ç§¯</u></p><h3 id="10-5-2-æ–‡æ¡£åœ°å€-https-sentinelguard-io-zh-cn-docs-circuit-breaking-html"><a href="#10-5-2-æ–‡æ¡£åœ°å€-https-sentinelguard-io-zh-cn-docs-circuit-breaking-html" class="headerlink" title="10.5.2 æ–‡æ¡£åœ°å€**: https://sentinelguard.io/zh-cn/docs/circuit-breaking.html**"></a><strong>10.5.2</strong> æ–‡æ¡£åœ°å€**: <a href="https://sentinelguard.io/zh-cn/docs/circuit-breaking.html">https://sentinelguard.io/zh-cn/docs/circuit-breaking.html</a>**</h3><h3 id="10-5-3-åŸºæœ¬ä»‹ç»"><a href="#10-5-3-åŸºæœ¬ä»‹ç»" class="headerlink" title="10.5.3 åŸºæœ¬ä»‹ç»"></a><strong>10.5.3</strong> åŸºæœ¬ä»‹ç»</h3><p><strong>1.</strong> ä¸€å¼ å›¾</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623223928543.png" alt="image-20230623223928543" style="zoom:50%;" /><p><strong>2.</strong> <strong>è§£è¯»ä¸Šå›¾</strong>:</p><ul><li><strong>ç°ä»£å¾®æœåŠ¡æ¶æ„éƒ½æ˜¯åˆ†å¸ƒå¼çš„ï¼Œç”±éå¸¸å¤šçš„æœåŠ¡ç»„æˆã€‚ä¸åŒæœåŠ¡ä¹‹é—´ç›¸äº’è°ƒç”¨ï¼Œç»„æˆå¤æ‚çš„è°ƒç”¨é“¾è·¯ã€‚</strong></li><li><strong>é“¾è·¯è°ƒç”¨ä¸­ä¼šäº§ç”Ÿæ”¾å¤§çš„æ•ˆæœã€‚å¤æ‚é“¾è·¯ä¸Šçš„æŸä¸€ç¯ä¸ç¨³å®šï¼Œå°±å¯èƒ½ä¼šå±‚å±‚çº§è”ï¼Œæœ€ç»ˆå¯¼è‡´æ•´ä¸ªé“¾è·¯éƒ½ä¸å¯ç”¨ã€‚</strong></li><li><strong>å› æ­¤éœ€è¦å¯¹ä¸ç¨³å®šçš„å¼±ä¾èµ–æœåŠ¡è°ƒç”¨è¿›è¡Œç†”æ–­é™çº§ï¼Œæš‚æ—¶åˆ‡æ–­ä¸ç¨³å®šè°ƒç”¨ï¼Œé¿å…å±€éƒ¨ä¸ç¨³å®šå› ç´ å¯¼è‡´æ•´ä½“çš„é›ªå´©</strong></li></ul><p><strong>3.</strong> <strong>ç†”æ–­,é™çº§,é™æµä¸‰è€…çš„å…³ç³»</strong></p><ul><li><p>ç†”æ–­ï¼šå¼ºè°ƒçš„æ˜¯æœåŠ¡ä¹‹é—´çš„è°ƒç”¨èƒ½å®ç°è‡ªæˆ‘æ¢å¤çš„çŠ¶æ€ </p></li><li><p>é™æµï¼šæ˜¯ä»ç³»ç»Ÿçš„æµé‡å…¥å£è€ƒè™‘, ä»è¿›å…¥çš„æµé‡ä¸Šè¿›è¡Œé™åˆ¶**, **è¾¾åˆ°ä¿æŠ¤ç³»ç»Ÿçš„ä½œç”¨</p></li><li><p>é™çº§ï¼šæ˜¯ä»ç³»ç»Ÿä¸šåŠ¡çš„ç»´åº¦è€ƒè™‘ï¼Œæµé‡å¤§äº†æˆ–è€…é¢‘ç¹å¼‚å¸¸, å¯ä»¥ç‰ºç‰²ä¸€äº›éæ ¸å¿ƒä¸šåŠ¡ï¼Œä¿æŠ¤æ ¸å¿ƒæµç¨‹æ­£å¸¸ä½¿ç”¨</p></li></ul><p>-ç†”æ–­æ˜¯é™çº§æ–¹å¼çš„ä¸€ç§</p><p>-é™çº§åˆæ˜¯é™æµçš„ä¸€ç§æ–¹å¼  </p><p>-ä¸‰è€…éƒ½æ˜¯ä¸ºäº†é€šè¿‡ä¸€å®šçš„æ–¹å¼<strong>åœ¨æµé‡è¿‡å¤§æˆ–è€…å‡ºç°å¼‚å¸¸æ—¶,ä¿æŠ¤ç³»ç»Ÿçš„æ‰‹æ®µ</strong></p><h3 id="10-5-4-ç†”æ–­ç­–ç•¥"><a href="#10-5-4-ç†”æ–­ç­–ç•¥" class="headerlink" title="10.5.4 ç†”æ–­ç­–ç•¥"></a><strong>10.5.4</strong> ç†”æ–­ç­–ç•¥</h3><h4 id="10-5-4-1-æ…¢è°ƒç”¨æ¯”ä¾‹"><a href="#10-5-4-1-æ…¢è°ƒç”¨æ¯”ä¾‹" class="headerlink" title="10.5.4.1 æ…¢è°ƒç”¨æ¯”ä¾‹"></a>10.5.4.1 æ…¢è°ƒç”¨æ¯”ä¾‹</h4><p>1ã€æ…¢è°ƒç”¨æ¯”ä¾‹ (SLOW_REQUEST_RATIO):é€‰æ‹©ä»¥æ…¢è°ƒç”¨æ¯”ä¾‹ä½œä¸ºé˜ˆå€¼ï¼Œéœ€è¦è®¾ç½®å…è®¸çš„æ…¢è°ƒç”¨ <strong>RT</strong>(å³æœ€å¤§çš„å“åº”æ—¶é—´)ï¼Œ<strong>è¯·æ±‚çš„å“åº”æ—¶é—´å¤§äºè¯¥å€¼åˆ™ç»Ÿè®¡ä¸º<u>æ…¢è°ƒç”¨</u></strong></p><p>2ã€å½“<strong>å•ä½ç»Ÿè®¡æ—¶é•¿(statIntervalMs)å†…è¯·æ±‚æ•°ç›®å¤§äºè®¾ç½®çš„æœ€å°è¯·æ±‚æ•°ç›®</strong>ï¼Œå¹¶ä¸”<strong>æ…¢è°ƒç”¨çš„<u>æ¯”ä¾‹</u>å¤§äºé˜ˆå€¼</strong>ï¼Œåˆ™æ¥ä¸‹æ¥çš„ç†”æ–­æ—¶é•¿å†…è¯·æ±‚ä¼šè‡ªåŠ¨è¢«ç†”æ–­</p><p>3ã€ç†”æ–­æ—¶é•¿å,ç†”æ–­å™¨ä¼šè¿›å…¥æ¢æµ‹æ¢å¤çŠ¶æ€(HALF-OPEN çŠ¶æ€)ï¼Œè‹¥æ¥ä¸‹æ¥çš„ä¸€ä¸ªè¯·æ±‚å“åº”æ—¶é—´å°äºè®¾ç½®çš„æ…¢è°ƒç”¨RTåˆ™ç»“æŸç†”æ–­ï¼Œè‹¥å¤§äºè®¾ç½®çš„æ…¢è°ƒç”¨RT åˆ™ä¼šå†æ¬¡è¢«ç†”æ–­</p><p>4ã€é…ç½®å‚è€ƒ</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623225930567.png" alt="image-20230623225930567" style="zoom:33%;" /><h4 id="10-5-4-2-å¼‚å¸¸æ¯”ä¾‹"><a href="#10-5-4-2-å¼‚å¸¸æ¯”ä¾‹" class="headerlink" title="10.5.4.2 å¼‚å¸¸æ¯”ä¾‹"></a>10.5.4.2 å¼‚å¸¸æ¯”ä¾‹</h4><p>1ã€å¼‚å¸¸æ¯”ä¾‹ (ERROR_RATIO):å½“å•ä½ç»Ÿè®¡æ—¶é•¿(statIntervalMs)å†…è¯·æ±‚æ•°ç›®å¤§äºè®¾ç½®çš„æœ€å°è¯·æ±‚æ•°ç›®ï¼Œå¹¶ä¸”å¼‚å¸¸çš„æ¯”ä¾‹å¤§äºé˜ˆå€¼ï¼Œåˆ™æ¥ä¸‹æ¥çš„ç†”æ–­æ—¶é•¿å†…è¯·æ±‚ä¼šè‡ªåŠ¨è¢«ç†”æ–­</p><p>2ã€ç»è¿‡ç†”æ–­æ—¶é•¿åç†”æ–­å™¨ä¼šè¿›å…¥æ¢æµ‹æ¢å¤çŠ¶æ€(HALF-OPENçŠ¶æ€) </p><p>3ã€è‹¥æ¥ä¸‹æ¥çš„ä¸€ä¸ªè¯·æ±‚æˆåŠŸå®Œæˆ(æ²¡æœ‰é”™è¯¯)åˆ™ç»“æŸç†”æ–­,å¦åˆ™ä¼šå†æ¬¡è¢«ç†”æ–­</p><p>4ã€å¼‚å¸¸æ¯”ç‡çš„é˜ˆå€¼èŒƒå›´æ˜¯[0.0, 1.0]ï¼Œä»£è¡¨0% - 100%</p><p>5ã€é…ç½®å‚è€ƒ</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623230152696.png" alt="image-20230623230152696" style="zoom:33%;" /><p>6ã€å·¥ä½œç¤ºæ„å›¾</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623230238823.png" alt="image-20230623230238823" style="zoom:33%;" /><h4 id="10-5-4-3-å¼‚å¸¸æ•°"><a href="#10-5-4-3-å¼‚å¸¸æ•°" class="headerlink" title="10.5.4.3 å¼‚å¸¸æ•°"></a>10.5.4.3 å¼‚å¸¸æ•°</h4><p>1ã€å¼‚å¸¸æ•° (ERROR_COUNT):<u>å½“å•ä½ç»Ÿè®¡æ—¶é•¿å†…çš„å¼‚å¸¸æ•°ç›®è¶…è¿‡é˜ˆå€¼ä¹‹åä¼šè‡ªåŠ¨è¿›è¡Œç†”æ–­</u></p><p>2ã€ç»è¿‡ç†”æ–­æ—¶é•¿åç†”æ–­å™¨ä¼šè¿›å…¥æ¢æµ‹æ¢å¤çŠ¶æ€(HALF-OPEN çŠ¶æ€) </p><p>3ã€è‹¥æ¥ä¸‹æ¥çš„ä¸€ä¸ªè¯·æ±‚æˆåŠŸå®Œæˆ(æ²¡æœ‰é”™è¯¯)åˆ™ç»“æŸç†”æ–­ï¼Œå¦åˆ™ä¼šå†æ¬¡è¢«ç†”æ–­</p><p>4ã€é…ç½®å‚è€ƒ</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623230424805.png" alt="image-20230623230424805" style="zoom:33%;" /><h3 id="10-5-5-ç†”æ–­é™çº§å®ä¾‹-æ…¢è°ƒç”¨æ¯”ä¾‹"><a href="#10-5-5-ç†”æ–­é™çº§å®ä¾‹-æ…¢è°ƒç”¨æ¯”ä¾‹" class="headerlink" title="10.5.5 ç†”æ–­é™çº§å®ä¾‹**-**æ…¢è°ƒç”¨æ¯”ä¾‹"></a><strong>10.5.5</strong> ç†”æ–­é™çº§å®ä¾‹**-**æ…¢è°ƒç”¨æ¯”ä¾‹</h3><h4 id="10-5-5-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-5-5-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.5.5.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.5.5.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> éœ€æ±‚**:** é€šè¿‡ <strong>Sentinel</strong> å®ç° ç†”æ–­é™çº§æ§åˆ¶**-**<u>æ…¢è°ƒç”¨æ¯”ä¾‹</u></p><p><strong>2.</strong> <strong>å½“è°ƒç”¨</strong> <strong>member-service-nacos-provider-10004</strong> <strong>çš„</strong> <strong>&#x2F;t3 API</strong> <strong>æ¥å£æ—¶ï¼Œå¦‚æœåœ¨</strong> <strong>1s</strong> <strong>å†…æŒç»­è¿›å…¥äº†</strong> <strong>5</strong> <strong>ä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”è¯·æ±‚çš„å¹³å‡å“åº”æ—¶é—´è¶…è¿‡</strong> <strong>200ms,</strong> <strong>é‚£ä¹ˆå°±åœ¨æœªæ¥</strong> <strong>10</strong> <strong>ç§’é’Ÿå†…ï¼Œæ–­è·¯å™¨æ‰“å¼€</strong>, <strong>è®©</strong> <strong>&#x2F;t3 API</strong> <strong>æ¥å£å¾®æœåŠ¡ä¸å¯ç”¨</strong></p><p><strong>3.</strong> <strong>åé¢å¯¹</strong>&#x2F;t3 API <strong>æ¥å£è®¿é—®é™åˆ°</strong> <strong>1S</strong> <strong>å†…</strong> <strong>1</strong> <strong>ä¸ªè¯·æ±‚ï¼Œé™ä½è®¿é—®é‡äº†ï¼Œæ–­è·¯å™¨å…³é—­ï¼Œå¾®æœåŠ¡æ¢å¤</strong></p><h4 id="10-5-5-2-ä¿®æ”¹ä¸šåŠ¡ç±»"><a href="#10-5-5-2-ä¿®æ”¹ä¸šåŠ¡ç±»" class="headerlink" title="10.5.5.2 ä¿®æ”¹ä¸šåŠ¡ç±»"></a>10.5.5.2 ä¿®æ”¹ä¸šåŠ¡ç±»</h4><p><strong>1.</strong> ä¿®æ”¹ <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberController.java</strong> å¢åŠ æ–¹æ³• <strong>t3()</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/t3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">t3</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿçº¿ç¨‹æ‰§è¡Œæ—¶é—´ä¸º1ç§’</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        TimeUnit.MILLISECONDS.sleep(<span class="number">300</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    log.info(<span class="string">&quot;ç†”æ–­é™çº§æµ‹è¯• æ‰§è¡Œ t3() çº¿ç¨‹ id= &quot;</span> + Thread.currentThread().getId());</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;t3æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-5-5-3-é…ç½®å®ç°æ­¥éª¤"><a href="#10-5-5-3-é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.5.5.3 é…ç½®å®ç°æ­¥éª¤"></a>10.5.5.3 é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> ä¸º**&#x2F;t3** å¢åŠ é™çº§è§„åˆ™</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230623231431243.png" alt="image-20230623231431243" style="zoom:50%;" /><p><strong>2.</strong> <strong>åœ¨æµæ§è§„åˆ™èœå•ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢çš„é™çº§è§„åˆ™</strong></p><h4 id="10-5-5-4-æµ‹è¯•"><a href="#10-5-5-4-æµ‹è¯•" class="headerlink" title="10.5.5.4 æµ‹è¯•"></a>10.5.5.4 æµ‹è¯•</h4><h5 id="10-5-5-4-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-5-5-4-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.5.5.4.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.5.5.4.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-5-5-4-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-5-5-4-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.5.5.4.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°**&#x2F;Sentinel dashboard **"></a>10.5.5.4.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°**&#x2F;Sentinel dashboard **</h5><h5 id="10-5-5-4-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-5-5-4-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.5.5.4.3 å¯åŠ¨ member-service-nacos-provider-10004"></a><strong>10.5.5.4.3</strong> å¯åŠ¨ <strong>member-service-nacos-provider-10004</strong></h5><h5 id="10-5-5-4-4-Postmanæµ‹è¯•"><a href="#10-5-5-4-4-Postmanæµ‹è¯•" class="headerlink" title="10.5.5.4.4 Postmanæµ‹è¯•"></a><strong>10.5.5.4.4 Postman</strong>æµ‹è¯•</h5><p><strong>1.</strong> å…ˆåˆ›å»º <strong>collection ,</strong> ä¹Ÿå¯ä»¥åœ¨å·²ç»å­˜åœ¨çš„ <strong>collection</strong> è¿›è¡Œä¿®æ”¹</p><p>â€¦â€¦â€¦â€¦</p><h4 id="10-5-5-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#10-5-5-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="10.5.5.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>10.5.5.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><h5 id="10-5-5-5-1-å¹³å‡å“åº”æ—¶é—´è¶…å‡ºé˜ˆå€¼ä¸”åœ¨-1s-å†…é€šè¿‡çš„è¯·æ±‚-gt-x3D-5-ï¼Œ-ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³åè§¦å‘é™çº§"><a href="#10-5-5-5-1-å¹³å‡å“åº”æ—¶é—´è¶…å‡ºé˜ˆå€¼ä¸”åœ¨-1s-å†…é€šè¿‡çš„è¯·æ±‚-gt-x3D-5-ï¼Œ-ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³åè§¦å‘é™çº§" class="headerlink" title="10.5.5.5.1 å¹³å‡å“åº”æ—¶é—´è¶…å‡ºé˜ˆå€¼ä¸”åœ¨ 1s å†…é€šè¿‡çš„è¯·æ±‚**&gt;&#x3D;5**ï¼Œ ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³åè§¦å‘é™çº§"></a>10.5.5.5.1 å¹³å‡å“åº”æ—¶é—´è¶…å‡ºé˜ˆå€¼ä¸”åœ¨ <strong>1s</strong> å†…é€šè¿‡çš„è¯·æ±‚**&gt;&#x3D;5**ï¼Œ ä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³åè§¦å‘é™çº§</h5><h5 id="10-5-5-5-2-ç†”æ–­æ—¶é—´è¿‡åï¼Œå…³é—­æ–­è·¯å™¨ï¼Œè®¿é—®æ¢å¤æ­£å¸¸"><a href="#10-5-5-5-2-ç†”æ–­æ—¶é—´è¿‡åï¼Œå…³é—­æ–­è·¯å™¨ï¼Œè®¿é—®æ¢å¤æ­£å¸¸" class="headerlink" title="10.5.5.5.2 ç†”æ–­æ—¶é—´è¿‡åï¼Œå…³é—­æ–­è·¯å™¨ï¼Œè®¿é—®æ¢å¤æ­£å¸¸"></a>10.5.5.5.2 ç†”æ–­æ—¶é—´è¿‡åï¼Œå…³é—­æ–­è·¯å™¨ï¼Œè®¿é—®æ¢å¤æ­£å¸¸</h5><h3 id="10-5-6-ç†”æ–­é™çº§å®ä¾‹-å¼‚å¸¸æ¯”ä¾‹"><a href="#10-5-6-ç†”æ–­é™çº§å®ä¾‹-å¼‚å¸¸æ¯”ä¾‹" class="headerlink" title="10.5.6 ç†”æ–­é™çº§å®ä¾‹-å¼‚å¸¸æ¯”ä¾‹"></a>10.5.6 ç†”æ–­é™çº§å®ä¾‹-å¼‚å¸¸æ¯”ä¾‹</h3><h4 id="10-5-6-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-5-6-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.5.6.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.5.6.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> éœ€æ±‚**:** é€šè¿‡ <strong>Sentinel</strong> å®ç° ç†”æ–­é™çº§æ§åˆ¶</p><p><strong>2.</strong> å½“è°ƒç”¨ <strong>member-service-nacos-provider-10004</strong> çš„ <strong>&#x2F;t4 API</strong> æ¥å£æ—¶ï¼Œå½“èµ„æºçš„æ¯ç§’è¯·æ±‚é‡**&gt;&#x3D;5<strong>ï¼Œå¹¶ä¸”æ¯ç§’å¼‚å¸¸æ€»æ•°å é€šè¿‡é‡çš„æ¯”å€¼è¶…è¿‡</strong>20%(<strong>å³å¼‚å¸¸æ¯”ä¾‹åˆ°</strong>20%),** æ–­è·¯å™¨æ‰“å¼€**(<strong>å³</strong>:** è¿›å…¥é™çº§çŠ¶æ€**),** è®© <strong>&#x2F;t4 API</strong> æ¥å£å¾®æœåŠ¡ä¸å¯ç”¨</p><p><strong>3.</strong> å½“å¯¹**&#x2F;t4 API** æ¥å£ è®¿é—®é™åˆ° <strong>1S</strong> å†… <strong>1</strong> ä¸ªè¯·æ±‚ï¼Œé™ä½è®¿é—®é‡äº†ï¼Œæ–­è·¯å™¨å…³é—­ï¼Œ<strong>5</strong> ç§’åå¾®æœåŠ¡æ¢å¤</p><h4 id="10-5-6-2-ä¿®æ”¹ä¸šåŠ¡ç±»"><a href="#10-5-6-2-ä¿®æ”¹ä¸šåŠ¡ç±»" class="headerlink" title="10.5.6.2 ä¿®æ”¹ä¸šåŠ¡ç±»"></a>10.5.6.2 ä¿®æ”¹ä¸šåŠ¡ç±»</h4><p><strong>1.</strong> ä¿®æ”¹ <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberController.java</strong> å¢åŠ æ–¹æ³• <strong>t4()</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>; </span><br><span class="line"><span class="meta">@GetMapping(value = &quot;/t4&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">t4</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((++num) % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//å¼‚å¸¸æ¯”ä¾‹ 50% System.out.println(3 / 0);</span></span><br><span class="line">    &#125;</span><br><span class="line">    log.info(<span class="string">&quot;ç†”æ–­é™çº§æµ‹è¯•ã€å¼‚å¸¸æ¯”ä¾‹ã€‘ æ‰§è¡Œ t4() çº¿ç¨‹ id= &quot;</span> + Thread.currentThread().getId());</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;t4()æ‰§è¡Œ&quot;</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-5-6-3-é…ç½®å®ç°æ­¥éª¤"><a href="#10-5-6-3-é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.5.6.3 é…ç½®å®ç°æ­¥éª¤"></a>10.5.6.3 é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> ä¸º**&#x2F;t4** å¢åŠ é™çº§è§„åˆ™</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230624094738411.png" alt="image-20230624094738411" style="zoom:50%;" /><p><strong>2.</strong> <strong>åœ¨æµæ§è§„åˆ™èœå•ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢çš„é™çº§è§„åˆ™</strong></p><h4 id="10-5-6-4-æµ‹è¯•"><a href="#10-5-6-4-æµ‹è¯•" class="headerlink" title="10.5.6.4 æµ‹è¯•"></a>10.5.6.4 æµ‹è¯•</h4><h5 id="10-5-6-4-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-5-6-4-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.5.6.4.1 å¯åŠ¨ Nacos Server 8848"></a>10.5.6.4.1 å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-5-6-4-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-5-6-4-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.5.6.4.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°&#x2F;Sentinel dashboard"></a>10.5.6.4.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°&#x2F;Sentinel dashboard</h5><h5 id="10-5-6-4-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-5-6-4-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.5.6.4.3 å¯åŠ¨ member-service-nacos-provider-10004"></a>10.5.6.4.3 å¯åŠ¨ member-service-nacos-provider-10004</h5><h5 id="10-5-6-4-4-Postmanæµ‹è¯•"><a href="#10-5-6-4-4-Postmanæµ‹è¯•" class="headerlink" title="10.5.6.4.4 Postmanæµ‹è¯•"></a>10.5.6.4.4 Postmanæµ‹è¯•</h5><p><strong>1.</strong> å…ˆåˆ›å»ºç»™ <strong>collection ,</strong> ä¹Ÿå¯ä»¥åœ¨å·²ç»å­˜åœ¨çš„ <strong>collection</strong> è¿›è¡Œä¿®æ”¹**,** ä¸€å®šç¡®ä¿æ›´æ–°æˆåŠŸ**.**</p><p><strong>2.</strong> <strong>ç‚¹å‡»</strong> <strong>Run sentinel</strong></p><p><strong>3.</strong> æµè§ˆå™¨è®¿é—®: <a href="http://localhost:10004/t4">http://localhost:10004/t4</a> å‡ºç° Blocked by Sentinel (flow limiting)</p><p><strong>4.</strong> <strong>åœæ­¢</strong> <strong>Postman</strong></p><p><strong>5.</strong> æµè§ˆå™¨è®¿é—®: <a href="http://localhost:10004/t4">http://localhost:10004/t4</a> , ç»“æœæ­£å¸¸äº†(ä¸€æ¬¡è¿”å›å¼‚å¸¸ï¼Œä¸€æ¬¡è¿”å›æ­£ç¡®ç»“ æœ)</p><h4 id="10-5-7-5æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#10-5-7-5æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="10.5.7.5æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>10.5.7.5æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><h5 id="10-5-7-5-1-èµ„æºåœ¨-1-åˆ†é’Ÿçš„å¼‚å¸¸æ•°ç›®è¶…è¿‡é˜ˆå€¼ä¹‹åä¼šè¿›è¡Œç†”æ–­é™çº§"><a href="#10-5-7-5-1-èµ„æºåœ¨-1-åˆ†é’Ÿçš„å¼‚å¸¸æ•°ç›®è¶…è¿‡é˜ˆå€¼ä¹‹åä¼šè¿›è¡Œç†”æ–­é™çº§" class="headerlink" title="10.5.7.5.1 èµ„æºåœ¨ 1 åˆ†é’Ÿçš„å¼‚å¸¸æ•°ç›®è¶…è¿‡é˜ˆå€¼ä¹‹åä¼šè¿›è¡Œç†”æ–­é™çº§"></a><strong>10.5.7.5.1</strong> èµ„æºåœ¨ <strong>1</strong> åˆ†é’Ÿçš„å¼‚å¸¸æ•°ç›®è¶…è¿‡é˜ˆå€¼ä¹‹åä¼šè¿›è¡Œç†”æ–­é™çº§</h5><p><strong>10.5.7.5.2</strong> å¼‚å¸¸æ•°ç»Ÿè®¡æ˜¯åˆ†é’Ÿçº§åˆ«çš„ï¼Œè‹¥ è®¾ç½®çš„æ—¶é—´çª—å£ å°äº <strong>60s</strong>ï¼Œåˆ™ç»“æŸç†”æ–­çŠ¶æ€åä»å¯èƒ½å†è¿›å…¥ç†”æ–­çŠ¶æ€**,** æµ‹è¯•æ—¶ï¼Œæœ€å¥½å°†æ—¶é—´çª—å£è®¾ç½®è¶…è¿‡ <strong>60S</strong></p><h2 id="10-6-Sentinel-çƒ­ç‚¹è§„åˆ™"><a href="#10-6-Sentinel-çƒ­ç‚¹è§„åˆ™" class="headerlink" title="10.6 Sentinel çƒ­ç‚¹è§„åˆ™"></a>10.6 Sentinel çƒ­ç‚¹è§„åˆ™</h2><h3 id="10-6-1-ä¸€ä¸ªé—®é¢˜å¼•å‡ºçƒ­ç‚¹-key-é™æµ"><a href="#10-6-1-ä¸€ä¸ªé—®é¢˜å¼•å‡ºçƒ­ç‚¹-key-é™æµ" class="headerlink" title="10.6.1 ä¸€ä¸ªé—®é¢˜å¼•å‡ºçƒ­ç‚¹ key é™æµ"></a><strong>10.6.1</strong> ä¸€ä¸ªé—®é¢˜å¼•å‡ºçƒ­ç‚¹ <strong>key</strong> é™æµ</h3><p><strong>1.</strong> çƒ­ç‚¹**:** çƒ­ç‚¹å³ç»å¸¸è®¿é—®çš„æ•°æ®ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¸Œæœ›ç»Ÿè®¡çƒ­ç‚¹æ•°æ®ä¸­**,** è®¿é—®é¢‘æ¬¡æœ€é«˜çš„ <strong>Top K</strong> æ•°æ®ï¼Œå¹¶å¯¹å…¶è®¿é—®è¿›è¡Œé™åˆ¶ã€‚</p><p><strong>2.</strong> æ¯”å¦‚æŸæ¡æ–°é—»ä¸Šçƒ­æœ ï¼Œåœ¨æŸæ®µæ—¶é—´å†…é«˜é¢‘è®¿é—®ï¼Œ ä¸ºäº†é˜²æ­¢ç³»ç»Ÿé›ªå´©**,** å¯ä»¥å¯¹è¯¥æ¡æ–°é—»è¿›è¡Œçƒ­ç‚¹é™æµ</p><h3 id="10-6-2æ–‡æ¡£åœ°å€"><a href="#10-6-2æ–‡æ¡£åœ°å€" class="headerlink" title="10.6.2æ–‡æ¡£åœ°å€ :"></a>10.6.2æ–‡æ¡£åœ°å€ :</h3><p> <a href="https://github.com/alibaba/Sentinel/wiki/%E7%83%AD%E7%82%B9%E5%8F%82%E6%95%B0%E9%99%90%E6%B5%81">https://github.com/alibaba/Sentinel/wiki/%E7%83%AD%E7%82%B9%E5%8F%82%E6%95%B0%E9%99%90%E6%B5%81</a></p><h3 id="10-6-3-åŸºæœ¬ä»‹ç»"><a href="#10-6-3-åŸºæœ¬ä»‹ç»" class="headerlink" title="10.6.3 åŸºæœ¬ä»‹ç»"></a><strong>10.6.3</strong> åŸºæœ¬ä»‹ç»</h3><p><strong>1.</strong> ä¸€å¼ å›¾<img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230624102921499.png" alt="image-20230624102921499"></p><p><strong>2.</strong> è§£è¯»ä¸Šå›¾:</p><ul><li><p>çƒ­ç‚¹å‚æ•°é™æµä¼šç»Ÿè®¡ä¼ å…¥å‚æ•°ä¸­çš„çƒ­ç‚¹å‚æ•°ï¼Œå¹¶æ ¹æ®é…ç½®çš„é™æµé˜ˆå€¼ä¸æ¨¡å¼ï¼Œå¯¹åŒ…å«çƒ­ç‚¹å‚æ•°çš„èµ„æºè°ƒç”¨è¿›è¡Œé™æµã€‚</p></li><li><p>çƒ­ç‚¹å‚æ•°é™æµå¯ä»¥çœ‹åšæ˜¯ä¸€ç§ç‰¹æ®Šçš„æµé‡æ§åˆ¶ï¼Œä»…å¯¹åŒ…å«çƒ­ç‚¹å‚æ•°çš„èµ„æºè°ƒç”¨ç”Ÿæ•ˆ</p></li><li><p>Sentinel åˆ©ç”¨ LRU ç­–ç•¥ç»Ÿè®¡æœ€è¿‘æœ€å¸¸è®¿é—®çš„çƒ­ç‚¹å‚æ•°ï¼Œç»“åˆä»¤ç‰Œæ¡¶ç®—æ³•æ¥è¿›è¡Œå‚æ•°çº§åˆ«çš„æµæ§ <strong><a href="https://blog.csdn.net/qq_34416331/article/details/106668747">https://blog.csdn.net/qq_34416331/article/details/106668747</a></strong></p></li><li><p>çƒ­ç‚¹å‚æ•°é™æµæ”¯æŒé›†ç¾¤æ¨¡å¼</p></li></ul><h3 id="10-6-4-çƒ­ç‚¹-Key-é™æµ-å®ä¾‹"><a href="#10-6-4-çƒ­ç‚¹-Key-é™æµ-å®ä¾‹" class="headerlink" title="10.6.4 çƒ­ç‚¹ Key é™æµ**-**å®ä¾‹"></a><strong>10.6.4</strong> çƒ­ç‚¹ <strong>Key</strong> é™æµ**-**å®ä¾‹</h3><h4 id="10-6-4-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-6-4-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.6.4.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.6.4.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p> <strong>1.</strong> éœ€æ±‚**:** é€šè¿‡ <strong>Sentinel</strong> å®ç°çƒ­ç‚¹ <strong>Key</strong> é™æµ<br> <strong>2.</strong> å¯¹ <strong>member-service-nacos-provider-10004</strong> çš„ <strong>&#x2F;news?id&#x3D;x&amp;type&#x3D;x API</strong> æ¥å£è¿›è¡Œçƒ­ç‚¹é™æµ<br> <strong>3.</strong> å‡å®š <strong>id&#x3D;10</strong> è¿™ä¸€æ¡æ–°é—»æ˜¯å½“å‰çš„çƒ­ç‚¹æ–°é—»ï¼Œ å½“æŸ¥è¯¢æ–°é—»æ—¶ï¼Œå¯¹é€šå¸¸çš„ <strong>id(<strong>éçƒ­ç‚¹æ–°é—»</strong>)<strong>è¯·æ±‚ <strong>QPS</strong> é™å®šä¸º <strong>2,</strong> å¦‚æœ <strong>id&#x3D;10 QPS</strong> é™å®šä¸º <strong>100<br> 4.</strong> å¦‚æœè®¿é—®è¶…å‡ºäº†è§„å®šçš„ <strong>QPS,</strong> è§¦å‘çƒ­ç‚¹é™æµæœºåˆ¶</strong>,</strong> è°ƒç”¨è‡ªå®šä¹‰çš„æ–¹æ³•ï¼Œç»™å‡ºæç¤ºä¿¡æ¯**. **</p><p> <strong>5.</strong> å½“å¯¹ <strong>&#x2F;news?id&#x3D;x&amp;type&#x3D;x API</strong> æ¥å£é™ä½è®¿é—®é‡ï¼Œ<strong>QPS</strong> è¾¾åˆ°è§„å®šèŒƒå›´**,** æœåŠ¡æ¢å¤</p><h4 id="10-6-4-2-ä¿®æ”¹ä¸šåŠ¡ç±»"><a href="#10-6-4-2-ä¿®æ”¹ä¸šåŠ¡ç±»" class="headerlink" title="10.6.4.2 ä¿®æ”¹ä¸šåŠ¡ç±»"></a>10.6.4.2 ä¿®æ”¹ä¸šåŠ¡ç±»</h4><p><strong>1.</strong> ä¿® æ”¹ <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberController.java</strong> å¢ åŠ  æ–¹ æ³• <strong>queryNews()</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³¨æ„ <span class="doctag">@GetMapping</span> æ˜¯ url å¸¦æœ‰ / , <span class="doctag">@SentinelResource</span> çš„ value æ˜¯æ²¡æœ‰ /çš„</span></span><br><span class="line"><span class="comment"> * * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * * <span class="doctag">@param</span> type</span></span><br><span class="line"><span class="comment"> * * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/news&quot;)</span></span><br><span class="line"><span class="meta">@SentinelResource(value = &quot;news&quot;,blockHandler = &quot;newsBlockHandler&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">queryNews</span><span class="params">(<span class="meta">@RequestParam(value = &quot;id&quot;,required = false)</span> String id,</span></span><br><span class="line"><span class="params">                        <span class="meta">@RequestParam(value = &quot;type&quot;,required = false)</span> String type)</span></span><br><span class="line">&#123;</span><br><span class="line">    log.info(<span class="string">&quot;åˆ° DB æŸ¥è¯¢æ•°æ®åº“.... &quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;è¿”å› id= &quot;</span> + id + <span class="string">&quot; æ–°é—» fromDB&quot;</span>); &#125;</span><br><span class="line"><span class="comment">//çƒ­ç‚¹ key é™åˆ¶å¼‚å¸¸å¤„ç†æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">newsBlockHandler</span><span class="params">(String id, String type, BlockException exception)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;æŸ¥è¯¢ id= &quot;</span> + id</span><br><span class="line">            + <span class="string">&quot; æ–°é—» è§¦å‘çƒ­ç‚¹ key é™åˆ¶ä¿æŠ¤.. sorry&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-6-4-3-æµ‹è¯•"><a href="#10-6-4-3-æµ‹è¯•" class="headerlink" title="10.6.4.3 æµ‹è¯•"></a>10.6.4.3 æµ‹è¯•</h4><h5 id="10-6-4-3-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-6-4-3-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.6.4.3.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.6.4.3.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-6-4-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-6-4-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.6.4.3.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°&#x2F;Sentinel dashboard"></a>10.6.4.3.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°&#x2F;Sentinel dashboard</h5><h5 id="10-6-4-3-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-6-4-3-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.6.4.3.3 å¯åŠ¨ member-service-nacos-provider-10004"></a>10.6.4.3.3 å¯åŠ¨ member-service-nacos-provider-10004</h5><h5 id="10-6-4-3-4-é…ç½®å®ç°æ­¥éª¤"><a href="#10-6-4-3-4-é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.6.4.3.4 é…ç½®å®ç°æ­¥éª¤"></a>10.6.4.3.4 é…ç½®å®ç°æ­¥éª¤</h5><p><strong>1.</strong> ä¸ºèµ„æº <strong>news</strong> å¢åŠ çƒ­ç‚¹è§„åˆ™**,** æ³¨æ„ä¸æ˜¯ <strong>&#x2F;news</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230624104344763.png" alt="image-20230624104344763"></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230624104402958.png" alt="image-20230624104402958" style="zoom: 33%;" /><p><strong>2.</strong> <strong>åœ¨çƒ­ç‚¹å‚æ•°é™æµè§„åˆ™èœå•ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢è§„åˆ™</strong></p><h5 id="10-6-4-3-5-æµè§ˆå™¨-http-localhost-10004-news-id-1-amp-type-E6-95-99-E8-82-B2"><a href="#10-6-4-3-5-æµè§ˆå™¨-http-localhost-10004-news-id-1-amp-type-E6-95-99-E8-82-B2" class="headerlink" title="10.6.4.3.5 æµè§ˆå™¨**: http://localhost:10004/news?id=1&amp;type=%E6%95%99%E8%82%B2**"></a>10.6.4.3.5 æµè§ˆå™¨**: <a href="http://localhost:10004/news?id=1&type=%E6%95%99%E8%82%B2">http://localhost:10004/news?id=1&amp;type=%E6%95%99%E8%82%B2</a>**</h5><p>å¦‚æœQPSæ²¡æœ‰è¶…è¿‡2,åˆ™è¿”å›æ­£ç¡®ç»“æœ</p><p>å¦‚æœQPSè¶…è¿‡2,åˆ™è¿”å›çƒ­ç‚¹keyå¤„ç†ä¿¡æ¯</p><h5 id="10-6-4-3-6-ç‹¬ç«‹è®¾ç½®çƒ­ç‚¹-id-x3D-10-çš„-QPS-é˜ˆå€¼-å³æ·»åŠ ä¾‹å¤–"><a href="#10-6-4-3-6-ç‹¬ç«‹è®¾ç½®çƒ­ç‚¹-id-x3D-10-çš„-QPS-é˜ˆå€¼-å³æ·»åŠ ä¾‹å¤–" class="headerlink" title="10.6.4.3.6 ç‹¬ç«‹è®¾ç½®çƒ­ç‚¹ id&#x3D;10 çš„ QPS é˜ˆå€¼(å³æ·»åŠ ä¾‹å¤–)"></a>10.6.4.3.6 ç‹¬ç«‹è®¾ç½®çƒ­ç‚¹ id&#x3D;10 çš„ QPS é˜ˆå€¼(å³æ·»åŠ ä¾‹å¤–)</h5><p><strong>1.</strong> ç‹¬ç«‹è®¾ç½®çƒ­ç‚¹ <strong>id&#x3D;10</strong> çš„ <strong>QPS</strong> é˜ˆå€¼**(<strong>å³æ·»åŠ ä¾‹å¤–</strong>)**</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230624104744651.png" alt="image-20230624104744651" style="zoom: 50%;" /><h5 id="10-6-4-3-7-æµè§ˆå™¨-http-localhost-10004-news-id-10-amp-type-E6-95-99-E8-82-B2"><a href="#10-6-4-3-7-æµè§ˆå™¨-http-localhost-10004-news-id-10-amp-type-E6-95-99-E8-82-B2" class="headerlink" title="10.6.4.3.7 æµè§ˆå™¨: http://localhost:10004/news?id=10&amp;type=%E6%95%99%E8%82%B2"></a>10.6.4.3.7 æµè§ˆå™¨: <a href="http://localhost:10004/news?id=10&type=%E6%95%99%E8%82%B2">http://localhost:10004/news?id=10&amp;type=%E6%95%99%E8%82%B2</a></h5><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥: <a href="http://localhost:10004/news?id=10&type=%E6%95%99%E8%82%B2">http://localhost:10004/news?id=10&amp;type=%E6%95%99%E8%82%B2</a> , å¦‚æœQPSæ²¡æœ‰è¶…è¿‡ 100,åˆ™è¿”å›æ­£ç¡®ç»“æœ</p><p><strong>2.</strong> <strong>æµè§ˆå™¨è®¿é—®çš„</strong> <strong>id</strong> <strong>ä¸æ˜¯</strong>10 <strong>çš„ï¼Œä»ç„¶éµå®ˆ</strong> <strong>QPS</strong> <strong>ä¸èƒ½è¶…è¿‡</strong> <strong>2</strong> <strong>çš„çƒ­ç‚¹é™åˆ¶</strong></p><h3 id="10-6-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#10-6-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="10.6.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>10.6.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><h4 id="10-6-5-1-çƒ­ç‚¹å‚æ•°ç±»å‹æ˜¯-byte-x2F-int-x2F-long-x2F-float-x2F-double-x2F-char-x2F-String"><a href="#10-6-5-1-çƒ­ç‚¹å‚æ•°ç±»å‹æ˜¯-byte-x2F-int-x2F-long-x2F-float-x2F-double-x2F-char-x2F-String" class="headerlink" title="10.6.5.1 çƒ­ç‚¹å‚æ•°ç±»å‹æ˜¯(byte&#x2F;int&#x2F;long&#x2F;float&#x2F;double&#x2F;char&#x2F;String)"></a>10.6.5.1 çƒ­ç‚¹å‚æ•°ç±»å‹æ˜¯(byte&#x2F;int&#x2F;long&#x2F;float&#x2F;double&#x2F;char&#x2F;String)</h4><h4 id="10-6-5-2-çƒ­ç‚¹å‚æ•°å€¼ï¼Œå¯ä»¥é…ç½®å¤šä¸ª"><a href="#10-6-5-2-çƒ­ç‚¹å‚æ•°å€¼ï¼Œå¯ä»¥é…ç½®å¤šä¸ª" class="headerlink" title="10.6.5.2 çƒ­ç‚¹å‚æ•°å€¼ï¼Œå¯ä»¥é…ç½®å¤šä¸ª"></a>10.6.5.2 çƒ­ç‚¹å‚æ•°å€¼ï¼Œå¯ä»¥é…ç½®å¤šä¸ª</h4><h4 id="10-6-5-3-çƒ­ç‚¹è§„åˆ™åªå¯¹æŒ‡å®šçš„å‚æ•°ç”Ÿæ•ˆ-æ¯”å¦‚æœ¬å®ä¾‹å¯¹-id-ç”Ÿæ•ˆ-å¯¹-type-ä¸ç”Ÿæ•ˆ"><a href="#10-6-5-3-çƒ­ç‚¹è§„åˆ™åªå¯¹æŒ‡å®šçš„å‚æ•°ç”Ÿæ•ˆ-æ¯”å¦‚æœ¬å®ä¾‹å¯¹-id-ç”Ÿæ•ˆ-å¯¹-type-ä¸ç”Ÿæ•ˆ" class="headerlink" title="10.6.5.3 çƒ­ç‚¹è§„åˆ™åªå¯¹æŒ‡å®šçš„å‚æ•°ç”Ÿæ•ˆ (æ¯”å¦‚æœ¬å®ä¾‹å¯¹ id ç”Ÿæ•ˆ, å¯¹ type ä¸ç”Ÿæ•ˆ)"></a>10.6.5.3 çƒ­ç‚¹è§„åˆ™åªå¯¹æŒ‡å®šçš„å‚æ•°ç”Ÿæ•ˆ (æ¯”å¦‚æœ¬å®ä¾‹å¯¹ id ç”Ÿæ•ˆ, å¯¹ type ä¸ç”Ÿæ•ˆ)</h4><h2 id="10-7-ç³»ç»Ÿè§„åˆ™"><a href="#10-7-ç³»ç»Ÿè§„åˆ™" class="headerlink" title="10.7 ç³»ç»Ÿè§„åˆ™"></a>10.7 ç³»ç»Ÿè§„åˆ™</h2><h3 id="10-7-1-ä¸€ä¸ªé—®é¢˜å¼•å‡ºç³»ç»Ÿè§„åˆ™"><a href="#10-7-1-ä¸€ä¸ªé—®é¢˜å¼•å‡ºç³»ç»Ÿè§„åˆ™" class="headerlink" title="10.7.1 ä¸€ä¸ªé—®é¢˜å¼•å‡ºç³»ç»Ÿè§„åˆ™"></a><strong>10.7.1</strong> ä¸€ä¸ªé—®é¢˜å¼•å‡ºç³»ç»Ÿè§„åˆ™</h3><p>1.å¦‚æˆ‘ä»¬ç³»ç»Ÿæœ€å¤§æ€§èƒ½èƒ½æŠ— 100QPSï¼Œå¦‚ä½•åˆ†é… &#x2F;t1 &#x2F;t2 çš„ QPS?</p><p><strong>æ–¹æ¡ˆ1:</strong> &#x2F;t1 åˆ†é… QPS&#x3D;50ï¼›&#x2F;t2 åˆ†é… QPS&#x3D;50ï¼Œé—®é¢˜ï¼Œå¦‚æœ&#x2F;t1 å½“å‰ QPS è¾¾åˆ° 50ï¼Œè€Œ&#x2F;t2 çš„ QPS æ‰ 10ï¼Œä¼šé€ æˆæ²¡æœ‰å……åˆ†åˆ©ç”¨æœåŠ¡å™¨æ€§èƒ½</p><p><strong>æ–¹æ¡ˆ2:</strong> &#x2F;t1 åˆ†é… QPS&#x3D;100 &#x2F;t2 åˆ†é… QPS&#x3D;100ï¼Œé—®é¢˜ï¼Œå®¹æ˜“é€ æˆç³»ç»Ÿæ²¡æœ‰æµé‡ä¿æŠ¤é€ æˆè¯·æ±‚çº¿ç¨‹å †ç§¯ï¼Œå½¢æˆé›ªå´©</p><p><u><strong>æœ‰æ²¡æœ‰å¯¹å„ä¸ªèµ„æºè¯·æ±‚çš„QPSå¼¹æ€§è®¾ç½®ï¼Œåªè¦æ€»æ•°ä¸è¶…è¿‡ç³»ç»Ÿæœ€å¤§QPSçš„æµé‡ä¿æŠ¤è§„åˆ™?&#x3D;&gt; ç³»ç»Ÿè§„åˆ™</strong></u></p><h3 id="10-7-2æ–‡-æ¡£-åœ°-å€"><a href="#10-7-2æ–‡-æ¡£-åœ°-å€" class="headerlink" title="10.7.2æ–‡ æ¡£ åœ° å€ :"></a><strong>10.7.2</strong>æ–‡ æ¡£ åœ° å€ <strong>:</strong></h3><p><strong><a href="https://github.com/alibaba/Sentinel/wiki/%E7%B3%BB%E7%BB%9F%E8%87%AA%E9%80%82%E5%BA%94%E9%99%90%E6%B5%81">https://github.com/alibaba/Sentinel/wiki/%E7%B3%BB%E7%BB%9F%E8%87%AA%E9%80%82%E5%BA%94%E9%99%90%E6%B5%81</a></strong></p><h3 id="10-7-3-ä¸€å¥è¯-ç³»ç»Ÿè§„åˆ™ä½œç”¨-åœ¨ç³»ç»Ÿç¨³å®šçš„å‰æä¸‹ï¼Œä¿æŒç³»ç»Ÿçš„ååé‡"><a href="#10-7-3-ä¸€å¥è¯-ç³»ç»Ÿè§„åˆ™ä½œç”¨-åœ¨ç³»ç»Ÿç¨³å®šçš„å‰æä¸‹ï¼Œä¿æŒç³»ç»Ÿçš„ååé‡" class="headerlink" title="10.7.3 ä¸€å¥è¯**:** ç³»ç»Ÿè§„åˆ™ä½œç”¨**,** åœ¨ç³»ç»Ÿç¨³å®šçš„å‰æä¸‹ï¼Œä¿æŒç³»ç»Ÿçš„ååé‡"></a><strong>10.7.3</strong> ä¸€å¥è¯**:** ç³»ç»Ÿè§„åˆ™ä½œç”¨**,** åœ¨ç³»ç»Ÿç¨³å®šçš„å‰æä¸‹ï¼Œä¿æŒç³»ç»Ÿçš„ååé‡</h3><h3 id="10-7-4-åŸºæœ¬ä»‹ç»"><a href="#10-7-4-åŸºæœ¬ä»‹ç»" class="headerlink" title="10.7.4 åŸºæœ¬ä»‹ç»"></a><strong>10.7.4</strong> åŸºæœ¬ä»‹ç»</h3><p><strong>1.</strong> ä¸€å¼ å›¾<img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230624105741809.png" alt="image-20230624105741809" style="zoom:50%;" /></p><p>**2.**è§£è¯»ä¸Šå›¾:</p><p>ç³»ç»Ÿå¤„ç†è¯·æ±‚çš„è¿‡ç¨‹æƒ³è±¡ä¸ºä¸€ä¸ªæ°´ç®¡ï¼Œåˆ°æ¥çš„è¯·æ±‚æ˜¯å¾€è¿™ä¸ªæ°´ç®¡çŒæ°´ï¼Œå½“ç³»ç»Ÿå¤„ç†é¡ºç•…çš„æ—¶å€™ï¼Œè¯·æ±‚ä¸éœ€è¦æ’é˜Ÿï¼Œç›´æ¥ä»æ°´ç®¡ä¸­ç©¿è¿‡ï¼Œè¿™ä¸ªè¯·æ±‚çš„RTæ˜¯æœ€çŸ­çš„ï¼Œåä¹‹ï¼Œå½“è¯·æ±‚å †ç§¯çš„æ—¶å€™ï¼Œé‚£ä¹ˆå¤„ç†è¯·æ±‚çš„æ—¶é—´åˆ™ä¼šå˜ä¸º:æ’é˜Ÿæ—¶é—´ + æœ€çŸ­å¤„ç†æ—¶é—´</p><p>**3.**ç³»ç»Ÿè§„åˆ™(å‚è€ƒä»¥ä¸‹äº”ç§æ•°æ®æ¥åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦è¶…è´Ÿè·)</p><ul><li><p>Load è‡ªé€‚åº”(ä»…å¯¹ Linux&#x2F;Unix-like æœºå™¨ç”Ÿæ•ˆ): ç³»ç»Ÿçš„ load1 ä½œä¸ºå¯å‘æŒ‡æ ‡ï¼Œè¿›è¡Œè‡ªé€‚åº”ç³»ç»Ÿä¿æŠ¤ã€‚å½“ç³»ç»Ÿ <u>load1 è¶…è¿‡è®¾å®šçš„å¯å‘å€¼</u>ï¼Œä¸”<u>ç³»ç»Ÿå½“å‰çš„å¹¶å‘çº¿ç¨‹æ•°è¶…è¿‡ä¼°ç®—çš„ç³»ç»Ÿå®¹é‡</u>æ—¶æ‰ä¼šè§¦å‘ç³»ç»Ÿä¿æŠ¤(BBR é˜¶æ®µ)ã€‚ç³»ç»Ÿå®¹é‡ç”±ç³»ç»Ÿçš„ maxQps * minRt ä¼°ç®—å¾—å‡ºã€‚è®¾å®šå‚è€ƒå€¼ä¸€èˆ¬æ˜¯ CPU cores *2.5</p></li><li><p>CPU usage (1.5.0+ ç‰ˆæœ¬): å½“ç³»ç»Ÿ CPU ä½¿ç”¨ç‡è¶…è¿‡é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ (å–å€¼èŒƒå›´0.0-1.0)ï¼Œæ¯”è¾ƒçµæ•ã€‚</p></li><li><p>å¹³å‡ RT: å½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„å¹³å‡ RT è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚</p></li><li><p>å¹¶å‘çº¿ç¨‹æ•°:å½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„å¹¶å‘çº¿ç¨‹æ•°è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ã€‚</p></li><li><p>å…¥å£ QPS:å½“å•å°æœºå™¨ä¸Šæ‰€æœ‰å…¥å£æµé‡çš„ QPS è¾¾åˆ°é˜ˆå€¼å³è§¦å‘ç³»ç»Ÿä¿æŠ¤ã€‚</p></li></ul><h3 id="10-7-5-å®ä¾‹"><a href="#10-7-5-å®ä¾‹" class="headerlink" title="10.7.5 å®ä¾‹"></a><strong>10.7.5</strong> å®ä¾‹</h3><h4 id="10-7-5-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-7-5-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.7.5.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.7.5.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.<strong>éœ€æ±‚</strong>:</strong> é€šè¿‡ <strong>Sentinel</strong> å®ç° ç³»ç»Ÿè§„åˆ™**-**å…¥å£ <strong>QPS</strong></p><p><strong>2.<strong>å¯¹ <strong>member-service-nacos-provider-10004</strong> çš„ æ‰€æœ‰ <strong>API</strong> æ¥å£è¿›è¡Œæµé‡ä¿æŠ¤ï¼Œä¸ç®¡è®¿é—®å“ªä¸ª <strong>API</strong> æ¥å£</strong>,</strong> ç³»ç»Ÿå…¥å£æ€»çš„ <strong>QPS</strong> ä¸èƒ½å¤§äº <strong>2,</strong> å¤§äº <strong>2</strong>ï¼Œå°±è¿›è¡Œé™æµæ§åˆ¶ </p><p><strong>3.</strong> æç¤º**:** ä¸Šé¢çš„ <strong>QPS</strong> æ˜¯ä¸ºäº†æ–¹ä¾¿çœ‹æ•ˆæœ**,** è®¾ç½®çš„å¾ˆå°</p><h4 id="10-7-5-2-é…ç½®å®ç°æ­¥éª¤"><a href="#10-7-5-2-é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.7.5.2 é…ç½®å®ç°æ­¥éª¤"></a>10.7.5.2 é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> å¢åŠ å…¥å£ <strong>QPS</strong> ç³»ç»Ÿè§„åˆ™</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230624110601568.png" alt="image-20230624110601568"></p><h4 id="10-7-5-3-æµ‹è¯•"><a href="#10-7-5-3-æµ‹è¯•" class="headerlink" title="10.7.5.3 æµ‹è¯•"></a>10.7.5.3 æµ‹è¯•</h4><h5 id="10-7-5-3-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-7-5-3-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.7.5.3.1 å¯åŠ¨ Nacos Server 8848"></a>10.7.5.3.1 å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-7-5-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-7-5-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.7.5.3.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°&#x2F;Sentinel dashboard"></a>10.7.5.3.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°&#x2F;Sentinel dashboard</h5><h5 id="10-7-5-3-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-7-5-3-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.7.5.3.3 å¯åŠ¨ member-service-nacos-provider-10004"></a>10.7.5.3.3 å¯åŠ¨ member-service-nacos-provider-10004</h5><h5 id="10-7-5-3-4-æµè§ˆå™¨-http-localhost-10004-t1"><a href="#10-7-5-3-4-æµè§ˆå™¨-http-localhost-10004-t1" class="headerlink" title="10.7.5.3.4 æµè§ˆå™¨: http://localhost:10004/t1"></a>10.7.5.3.4 æµè§ˆå™¨: <a href="http://localhost:10004/t1">http://localhost:10004/t1</a></h5><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost:10004/t1">http://localhost:10004/t1</a> ,** å¦‚æœ <strong>QPS</strong> è¶…è¿‡ <strong>2,</strong> æ‰“å¼€æ–­è·¯å™¨ï¼Œè¿”å›æµæ§ä¿¡æ¯</p><p><strong>2.</strong> æµè§ˆå™¨è¾“å…¥: <a href="http://localhost:10004/news?id=1&type=%E6%95%99%E8%82%B2">http://localhost:10004/news?id=1&amp;type=%E6%95%99%E8%82%B2</a> , å¦‚æœQPS è¶…è¿‡2, æ‰“å¼€æ–­è·¯å™¨ï¼Œè¿”å›æµæ§ä¿¡æ¯(è¯´æ˜: é¡¹ç›®çš„ &#x2F;t2 èµ„æºå¯¹åº”æ–¹æ³•æœ‰ä¼‘çœ ä»£ç ï¼Œæ‰€ä»¥ä½¿ç”¨ &#x2F;news?id&#x3D;x&amp;type&#x3D;x æµ‹è¯•)</p><h2 id="10-8-SentinelResource"><a href="#10-8-SentinelResource" class="headerlink" title="10.8 @SentinelResource"></a>10.8 @SentinelResource</h2><h3 id="10-8-1-è‡ªå®šä¹‰å…¨å±€é™æµå¤„ç†ç±»"><a href="#10-8-1-è‡ªå®šä¹‰å…¨å±€é™æµå¤„ç†ç±»" class="headerlink" title="10.8.1 è‡ªå®šä¹‰å…¨å±€é™æµå¤„ç†ç±»"></a><strong>10.8.1</strong> è‡ªå®šä¹‰å…¨å±€é™æµå¤„ç†ç±»</h3><h4 id="10-8-1-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-8-1-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.8.1.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.8.1.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> å…ˆçœ‹å‰é¢çš„ä¸€æ®µä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/news&quot;)</span></span><br><span class="line"><span class="meta">@SentinelResource(value = &quot;news&quot;,blockHandler = &quot;newsBlockHandler&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">queryNews</span><span class="params">(<span class="meta">@RequestParam(value = &quot;id&quot;,required = false)</span> String id,</span></span><br><span class="line"><span class="params">                        <span class="meta">@RequestParam(value = &quot;type&quot;,required = false)</span> String type)</span></span><br><span class="line">&#123;</span><br><span class="line">    log.info(<span class="string">&quot;åˆ° DB æŸ¥è¯¢æ•°æ®åº“.... &quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;è¿”å› id= &quot;</span> + id + <span class="string">&quot; æ–°é—» fromDB&quot;</span>); &#125;</span><br><span class="line"><span class="comment">//çƒ­ç‚¹ key é™åˆ¶å¼‚å¸¸å¤„ç†æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">newsBlockHandler</span><span class="params">(String id, String type, BlockException exception)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;æŸ¥è¯¢ id= &quot;</span> + id</span><br><span class="line">            + <span class="string">&quot; æ–°é—» è§¦å‘çƒ­ç‚¹ key é™åˆ¶ä¿æŠ¤.. sorry&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong>: <strong>å½“é…ç½®çš„èµ„æºå</strong> news <strong>è§¦å‘é™æµæœºåˆ¶æ—¶ï¼Œä¼šè°ƒç”¨</strong> newsBlockHandler <strong>æ–¹æ³•</strong></p><p><strong>2.</strong> <strong>ä¸Šé¢çš„å¤„ç†æ–¹æ¡ˆå­˜åœ¨ä¸€äº›é—®é¢˜</strong></p><ul><li><p><strong>æ¯ä¸ª</strong>@SentinelResource <strong>å¯¹åº”ä¸€ä¸ªå¼‚å¸¸å¤„ç†æ–¹æ³•ï¼Œä¼šé€ æˆæ–¹æ³•å¾ˆå¤š</strong> </p></li><li><p>å¼‚å¸¸å¤„ç†æ–¹æ³•å’Œèµ„æºè¯·æ±‚æ–¹æ³•åœ¨ä¸€èµ·ï¼Œä¸åˆ©äºä¸šåŠ¡é€»è¾‘çš„åˆ†ç¦»</p></li></ul><ul><li><strong>è§£å†³æ–¹æ¡ˆ</strong>-&gt; è‡ªå®šä¹‰å…¨å±€é™æµå¤„ç†ç±»</li></ul><p><strong>3.</strong> <strong>éœ€æ±‚</strong>: <strong>è¯·ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰å…¨å±€é™æµå¤„ç†ç±»ï¼Œå®Œæˆå¯¹å¼‚å¸¸å¤„ç†</strong>.</p><h4 id="10-8-1-2-ä»£ç å®ç°"><a href="#10-8-1-2-ä»£ç å®ç°" class="headerlink" title="10.8.1.2 ä»£ç å®ç°"></a>10.8.1.2 ä»£ç å®ç°</h4><p><strong>1.</strong> ä¿®æ”¹ <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberController.java</strong> å¢åŠ æ–¹æ³• <strong>t6()</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§£è¯»ï¼š</span></span><br><span class="line"><span class="comment"> * value = &quot;t6&quot;: SentinelResource èµ„æºå</span></span><br><span class="line"><span class="comment"> * blockHandlerClass = CustomGlobalBlockHandler.class: å…¨å±€é™æµå¤„ç†ç±» * blockHandler = &quot;handlerMethod1&quot;: å…¨å±€é™æµå¤„ç†ç±»çš„å“ªä¸ªæ–¹æ³•,å¯ä»¥æŒ‡å®š. */</span></span><br><span class="line"><span class="meta">@GetMapping(value = &quot;/t6&quot;)</span></span><br><span class="line"><span class="meta">@SentinelResource(</span></span><br><span class="line"><span class="meta">        value = &quot;t6&quot;,</span></span><br><span class="line"><span class="meta">        blockHandlerClass = CustomGlobalBlockHandler.class, blockHandler = &quot;handlerMethod1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">t6</span><span class="params">()</span> &#123;</span><br><span class="line">    log.info(<span class="string">&quot;æ‰§è¡Œ t6() çº¿ç¨‹ id= &quot;</span> + Thread.currentThread().getId()); <span class="keyword">return</span> Result.success(<span class="string">&quot;200&quot;</span>, <span class="string">&quot;t6()æ‰§è¡ŒæˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>åˆ›å»º</strong> com&#x2F;hspedu&#x2F;springcloud&#x2F;handler&#x2F;CustomGlobalBlockHandler.java </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.csp.sentinel.slots.block.BlockException;</span><br><span class="line"><span class="keyword">import</span> com.study.springcloud.entity.Result;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/6/24</span></span><br><span class="line"><span class="comment"> * 13:54</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºçš„å¼‚å¸¸å¤„ç†æ–¹æ³•éœ€è¦æ˜¯ static</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomGlobalBlockHandler</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">handlerMethod1</span> <span class="params">(BlockException exception)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;400&quot;</span>, <span class="string">&quot;å®¢æˆ·è‡ªå®šä¹‰å¼‚å¸¸å¤„ç† handlerm1()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">handlerMethod2</span> <span class="params">(BlockException exception)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;401&quot;</span>, <span class="string">&quot;å®¢æˆ·è‡ªå®šä¹‰å¼‚å¸¸å¤„ç† handlerm2()&quot;</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-8-1-3-é…ç½®å®ç°æ­¥éª¤"><a href="#10-8-1-3-é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.8.1.3 é…ç½®å®ç°æ­¥éª¤"></a>10.8.1.3 é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> ä¸ºèµ„æº <strong>&#x2F;t6</strong> å¢åŠ æµæ§è§„åˆ™**,**æ–¹ä¾¿æµ‹è¯•</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230624135913223.png" alt="image-20230624135913223" style="zoom:50%;" /><p><strong>2.</strong> <strong>åœ¨æµæ§è§„åˆ™èœå•ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢è§„åˆ™</strong></p><h4 id="10-8-1-4-æµ‹è¯•"><a href="#10-8-1-4-æµ‹è¯•" class="headerlink" title="10.8.1.4 æµ‹è¯•"></a>10.8.1.4 æµ‹è¯•</h4><h5 id="10-8-1-4-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-8-1-4-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.8.1.4.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.8.1.4.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-8-1-4-2-å¯åŠ¨-Sentinel8080æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-8-1-4-2-å¯åŠ¨-Sentinel8080æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.8.1.4.2 å¯åŠ¨ Sentinel8080æ§åˆ¶å°&#x2F;Sentinel dashboard"></a>10.8.1.4.2 å¯åŠ¨ Sentinel8080æ§åˆ¶å°&#x2F;Sentinel dashboard</h5><h5 id="10-8-1-4-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-8-1-4-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.8.1.4.3 å¯åŠ¨ member-service-nacos-provider-10004"></a>10.8.1.4.3 å¯åŠ¨ member-service-nacos-provider-10004</h5><h5 id="10-8-1-4-4-æµè§ˆå™¨-http-localhost-10004-t6"><a href="#10-8-1-4-4-æµè§ˆå™¨-http-localhost-10004-t6" class="headerlink" title="10.8.1.4.4 æµè§ˆå™¨: http://localhost:10004/t6"></a>10.8.1.4.4 æµè§ˆå™¨: <a href="http://localhost:10004/t6">http://localhost:10004/t6</a></h5><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost:10004/t6">http://localhost:10004/t6</a> ,** å¦‚æœ <strong>QPS</strong> æ²¡æœ‰è¶…è¿‡ <strong>1,</strong> è¿”å›æ­£å¸¸ç»“æœ</p><p><strong>2.</strong> æµè§ˆå™¨è¾“å…¥: <a href="http://localhost:10004/t6">http://localhost:10004/t6</a> ,å¦‚æœQPS è¶…è¿‡ 1, æ–­è·¯å™¨æ‰“å¼€ï¼Œè¿”å›è‡ªå®šä¹‰é™æµå¤„ç†æ–¹æ³•ä¿¡æ¯</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230624140131429.png" alt="image-20230624140131429" style="zoom:50%;" /><h3 id="10-8-2-fallbackè‡ªå®šä¹‰ç¨‹åºé”™è¯¯å¤„ç†"><a href="#10-8-2-fallbackè‡ªå®šä¹‰ç¨‹åºé”™è¯¯å¤„ç†" class="headerlink" title="10.8.2 fallbackè‡ªå®šä¹‰ç¨‹åºé”™è¯¯å¤„ç†"></a>10.8.2 fallbackè‡ªå®šä¹‰ç¨‹åºé”™è¯¯å¤„ç†</h3><h4 id="10-8-2-1-çœ‹ä¸€æ®µä»£ç -å¼•å‡º-fallback"><a href="#10-8-2-1-çœ‹ä¸€æ®µä»£ç -å¼•å‡º-fallback" class="headerlink" title="10.8.2.1 çœ‹ä¸€æ®µä»£ç -å¼•å‡º fallback"></a>10.8.2.1 çœ‹ä¸€æ®µä»£ç -å¼•å‡º fallback</h4><p><strong>1.</strong> ä¿® æ”¹ <strong>member-service-nacos-provider-10004</strong> çš„<strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberController.java</strong> å¢åŠ ä¸€æ®µä»£ç **.**</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(value = &quot;/t6&quot;)</span></span><br><span class="line"><span class="meta">@SentinelResource(</span></span><br><span class="line"><span class="meta">        value = &quot;t6&quot;,</span></span><br><span class="line"><span class="meta">        blockHandlerClass = CustomGlobalBlockHandler.class, blockHandler = &quot;handlerMethod1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">t6</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//å‡å®š: å½“è®¿é—® t6 èµ„æºæ¬¡æ•°æ˜¯ 5 çš„å€æ•°æ—¶ï¼Œå°±å‡ºç°äº†ä¸€ä¸ª java çš„å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span> (++num % <span class="number">5</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;num çš„å€¼å¼‚å¸¸ num= &quot;</span> + num); &#125;</span><br><span class="line">        log.info(<span class="string">&quot;æ‰§è¡Œ t6() çº¿ç¨‹ id= &quot;</span> + Thread.currentThread().getId());</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;200&quot;</span>, <span class="string">&quot;t6()æ‰§è¡ŒæˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> æµè§ˆå™¨: <a href="http://localhost:10004/t6">http://localhost:10004/t6</a> , çœ‹æ•ˆæœå½“numä¸º 5çš„æ•´æ•°æ—¶ï¼Œè¿”å›çš„æ˜¯erroré¡µé¢ï¼Œä¸å‹å¥½.</p><p><strong>3.</strong> æ€ä¹ˆè§£å†³&#x3D;&gt; ä½¿ç”¨ fallback</p><h4 id="10-8-2-2-åŸºæœ¬ä»‹ç»"><a href="#10-8-2-2-åŸºæœ¬ä»‹ç»" class="headerlink" title="10.8.2.2 åŸºæœ¬ä»‹ç»"></a>10.8.2.2 åŸºæœ¬ä»‹ç»</h4><h5 id="10-8-2-2-1-blockHandleråªè´Ÿè´£sentinelæ§åˆ¶å°é…ç½®è¿è§„"><a href="#10-8-2-2-1-blockHandleråªè´Ÿè´£sentinelæ§åˆ¶å°é…ç½®è¿è§„" class="headerlink" title="10.8.2.2.1 blockHandleråªè´Ÿè´£sentinelæ§åˆ¶å°é…ç½®è¿è§„"></a>10.8.2.2.1 blockHandleråªè´Ÿè´£sentinelæ§åˆ¶å°é…ç½®è¿è§„</h5><h5 id="10-8-2-2-2-fallbackè´Ÿè´£Javaå¼‚å¸¸-x2F-ä¸šåŠ¡å¼‚å¸¸"><a href="#10-8-2-2-2-fallbackè´Ÿè´£Javaå¼‚å¸¸-x2F-ä¸šåŠ¡å¼‚å¸¸" class="headerlink" title="10.8.2.2.2 fallbackè´Ÿè´£Javaå¼‚å¸¸&#x2F;ä¸šåŠ¡å¼‚å¸¸"></a>10.8.2.2.2 fallback<strong>è´Ÿè´£</strong>Java<strong>å¼‚å¸¸</strong>&#x2F;ä¸šåŠ¡å¼‚å¸¸</h5><h4 id="10-8-2-3-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-8-2-3-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.8.2.3 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.8.2.3 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> éœ€æ±‚**:** è¯·ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰å…¨å±€ <strong>fallback</strong> å¤„ç†ç±»**,** å¤„ç† <strong>java</strong> å¼‚å¸¸**&#x2F;**ä¸šåŠ¡å¼‚å¸¸ </p><p><strong>2.</strong> ä¹Ÿå°±æ˜¯è§£å†³å‰é¢æˆ‘ä»¬æå‡ºçš„é—®é¢˜</p><h4 id="10-8-2-4-ä»£ç å®ç°"><a href="#10-8-2-4-ä»£ç å®ç°" class="headerlink" title="10.8.2.4 ä»£ç å®ç°"></a>10.8.2.4 ä»£ç å®ç°</h4><p><strong>1.</strong> åœ¨ <strong>member-service-nacos-provider-10004</strong> åˆ›å»º<strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;handler&#x2F;CustomGlobalFallbackHandler.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomGlobalFallbackHandler</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">fallBackHandlerMethod1</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;400&quot;</span>, <span class="string">&quot;java å¼‚å¸¸ä¿¡æ¯= &quot;</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">fallBackHandlerMethod2</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;401&quot;</span>, <span class="string">&quot;java å¼‚å¸¸ä¿¡æ¯= &quot;</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.<strong>åœ¨ member-service-nacos-provider-10004ä¿®æ”¹</strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;MemberController.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§£è¯»</span></span><br><span class="line"><span class="comment"> * value = &quot;t6&quot;: SentinelResource èµ„æºå</span></span><br><span class="line"><span class="comment"> * blockHandlerClass = CustomGlobalBlockHandler.class: å…¨å±€é™æµå¤„ç†ç±» * blockHandler = &quot;handlerMethod1&quot;: å…¨å±€é™æµå¤„ç†ç±»çš„å“ªä¸ªæ–¹æ³•,å¯ä»¥æŒ‡å®š. */</span></span><br><span class="line"><span class="meta">@GetMapping(value = &quot;/t6&quot;)</span></span><br><span class="line"><span class="meta">@SentinelResource(</span></span><br><span class="line"><span class="meta">        value = &quot;t6&quot;,</span></span><br><span class="line"><span class="meta">        fallbackClass = CustomGlobalFallbackHandler.class,</span></span><br><span class="line"><span class="meta">        fallback = &quot;fallBackHandlerMethod1&quot;,</span></span><br><span class="line"><span class="meta">        blockHandlerClass = CustomGlobalBlockHandler.class,</span></span><br><span class="line"><span class="meta">        blockHandler = &quot;handlerMethod1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">t6</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//å‡å®š: å½“è®¿é—® t6 èµ„æºæ¬¡æ•°æ˜¯ 5 çš„å€æ•°æ—¶ï¼Œå°±å‡ºç°äº†ä¸€ä¸ª java çš„å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span> (++num % <span class="number">5</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;num çš„å€¼å¼‚å¸¸ num= &quot;</span> + num); &#125;</span><br><span class="line">        log.info(<span class="string">&quot;æ‰§è¡Œ t6() çº¿ç¨‹ id= &quot;</span> + Thread.currentThread().getId());</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;200&quot;</span>, <span class="string">&quot;t6()æ‰§è¡ŒæˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-8-2-5-æµ‹è¯•"><a href="#10-8-2-5-æµ‹è¯•" class="headerlink" title="10.8.2.5 æµ‹è¯•"></a>10.8.2.5 æµ‹è¯•</h4><h5 id="10-8-2-5-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-8-2-5-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.8.2.5.1 å¯åŠ¨ Nacos Server 8848"></a>10.8.2.5.1 å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-8-2-5-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-8-2-5-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.8.2.5.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°&#x2F;Sentinel dashboard"></a>10.8.2.5.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°&#x2F;Sentinel dashboard</h5><h5 id="10-8-2-5-3-å¯åŠ¨-member-service-nacos-provider-10004"><a href="#10-8-2-5-3-å¯åŠ¨-member-service-nacos-provider-10004" class="headerlink" title="10.8.2.5.3 å¯åŠ¨ member-service-nacos-provider-10004"></a>10.8.2.5.3 å¯åŠ¨ member-service-nacos-provider-10004</h5><h5 id="10-8-2-5-4-æµè§ˆå™¨-http-localhost-10004-t6"><a href="#10-8-2-5-4-æµè§ˆå™¨-http-localhost-10004-t6" class="headerlink" title="10.8.2.5.4 æµè§ˆå™¨: http://localhost:10004/t6"></a>10.8.2.5.4 æµè§ˆå™¨: <a href="http://localhost:10004/t6">http://localhost:10004/t6</a></h5><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost:10004/t6">http://localhost:10004/t6</a> ,** è®¿é—®æ¬¡æ•°ä¸æ˜¯ <strong>5</strong> çš„å€æ•°**,** è¿”å›æ­£å¸¸ç»“æœ</p><p><strong>2.</strong> æµè§ˆå™¨è¾“å…¥: <a href="http://localhost:10004/t6">http://localhost:10004/t6</a> , è®¿é—®æ¬¡æ•°æ˜¯ 5 çš„å€æ•°, è¿”å› fallbackæŒ‡å®šæ–¹æ³•ä¿¡æ¯</p><p><strong>3.</strong> <strong>ä¸ºèµ„æº</strong> <strong>&#x2F;t6</strong> <strong>å¢åŠ æµæ§è§„åˆ™</strong>,æ–¹ä¾¿æµ‹è¯•</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230624142029799.png" alt="image-20230624142029799" style="zoom:50%;" /><p><strong>4.</strong> <strong>åœ¨æµæ§è§„åˆ™èœå•ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢è§„åˆ™</strong></p><p><strong>5.</strong> æµè§ˆå™¨è¾“å…¥: <a href="http://localhost:10004/t6">http://localhost:10004/t6</a> , <strong>å¦‚æœè®¿é—® QPS å¤§äº1 , ç”±blockHandleræŒ‡å®šçš„æ–¹æ³•å¤„ç†,è®¿é—®æ¬¡æ•°æ˜¯ 5 çš„å€æ•°, ç”±fallbackæŒ‡å®šæ–¹æ³•å¤„ç†,å…¶å®ƒæƒ…å†µè¿”å›æ­£å¸¸çš„ç»“æœ.</strong></p><h3 id="10-8-3-exceptionsToIgnore-å¸Œæœ›å¿½ç•¥æŸä¸ªå¼‚å¸¸"><a href="#10-8-3-exceptionsToIgnore-å¸Œæœ›å¿½ç•¥æŸä¸ªå¼‚å¸¸" class="headerlink" title="10.8.3 exceptionsToIgnore  å¸Œæœ›å¿½ç•¥æŸä¸ªå¼‚å¸¸"></a>10.8.3 exceptionsToIgnore  å¸Œæœ›å¿½ç•¥æŸä¸ªå¼‚å¸¸</h3><h4 id="10-8-3-1-å¦‚æœå¸Œæœ›å¿½ç•¥æŸä¸ªå¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨-exceptionsToIgnore"><a href="#10-8-3-1-å¦‚æœå¸Œæœ›å¿½ç•¥æŸä¸ªå¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨-exceptionsToIgnore" class="headerlink" title="10.8.3.1 å¦‚æœå¸Œæœ›å¿½ç•¥æŸä¸ªå¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨ exceptionsToIgnore"></a>10.8.3.1 å¦‚æœå¸Œæœ›å¿½ç•¥æŸä¸ªå¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨ exceptionsToIgnore</h4><h4 id="10-8-3-2-åº”ç”¨å®ä¾‹"><a href="#10-8-3-2-åº”ç”¨å®ä¾‹" class="headerlink" title="10.8.3.2 åº”ç”¨å®ä¾‹"></a>10.8.3.2 åº”ç”¨å®ä¾‹</h4><p><strong>1.</strong> å¦‚æœå¸Œæœ›å¿½ç•¥æŸä¸ªå¼‚å¸¸**(<strong>æ”¯æŒæ•°ç»„</strong>)**ï¼Œå¯ä»¥ä½¿ç”¨ <strong>exceptionsToIgnore</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(value = &quot;/t6&quot;)</span></span><br><span class="line"><span class="meta">@SentinelResource(</span></span><br><span class="line"><span class="meta">        value = &quot;t6&quot;,</span></span><br><span class="line"><span class="meta">        fallbackClass = CustomGlobalFallbackHandler.class,</span></span><br><span class="line"><span class="meta">        fallback = &quot;fallBackHandlerMethod1&quot;,</span></span><br><span class="line"><span class="meta">        blockHandlerClass = CustomGlobalBlockHandler.class,</span></span><br><span class="line"><span class="meta">        blockHandler = &quot;handlerMethod1&quot;,</span></span><br><span class="line"><span class="meta">        exceptionsToIgnore = &#123;RuntimeException.class&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">t6</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//å‡å®š: å½“è®¿é—® t6 èµ„æºæ¬¡æ•°æ˜¯ 5 çš„å€æ•°æ—¶ï¼Œå°±å‡ºç°äº†ä¸€ä¸ª java çš„å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span> (++num % <span class="number">5</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;num çš„å€¼å¼‚å¸¸ num= &quot;</span> + num);</span><br><span class="line">    &#125;</span><br><span class="line">    log.info(<span class="string">&quot;æ‰§è¡Œ t6() çº¿ç¨‹ id= &quot;</span> + Thread.currentThread().getId());</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;200&quot;</span>, <span class="string">&quot;t6()æ‰§è¡ŒæˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> æµè§ˆå™¨è¾“å…¥: <a href="http://localhost:10004/t6">http://localhost:10004/t6</a> , ä½ ä¼šå‘ç°è®¿é—®æ¬¡æ•°ä¸º 5 çš„å€æ•°æ—¶ï¼Œä¸å†è°ƒç”¨ fallback æŒ‡å®šæ–¹æ³•å¤„ç†</p><p>â€‹è€Œæ˜¯ä½¿ç”¨RuntimeException.classä¸­çš„æ–¹å¼(å³é»˜è®¤æ–¹å¼)å¤„ç†</p><h3 id="10-8-4-æ¥å…¥-Sentinel-çš„æ–¹å¼"><a href="#10-8-4-æ¥å…¥-Sentinel-çš„æ–¹å¼" class="headerlink" title="10.8.4 æ¥å…¥ Sentinel çš„æ–¹å¼"></a>10.8.4 æ¥å…¥ Sentinel çš„æ–¹å¼</h3><p><u>å³(ä¸è¿›å…¥sentinelæ§åˆ¶å°ç½‘é¡µè€Œä½¿ç”¨sentinel)</u></p><h4 id="10-8-4-1-ä»£ç æ–¹å¼-ç¡¬ç¼–ç ï¼Œä¾µå…¥æ€§å¼º-ä¸æ¨è"><a href="#10-8-4-1-ä»£ç æ–¹å¼-ç¡¬ç¼–ç ï¼Œä¾µå…¥æ€§å¼º-ä¸æ¨è" class="headerlink" title="10.8.4.1 ä»£ç æ–¹å¼(ç¡¬ç¼–ç ï¼Œä¾µå…¥æ€§å¼º, ä¸æ¨è)"></a>10.8.4.1 ä»£ç æ–¹å¼(ç¡¬ç¼–ç ï¼Œä¾µå…¥æ€§å¼º, ä¸æ¨è)</h4><p><strong>1.</strong> æ–‡æ¡£åœ°å€**:** <strong><a href="https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D">https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D</a></strong></p><p><strong>2.</strong> åŸºæœ¬ä½¿ç”¨</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230629202935657.png" alt="image-20230629202935657" style="zoom:50%;" /><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230629203105770.png" alt="image-20230629203105770"></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230629203336858.png" alt="image-20230629203336858"></p><h4 id="10-8-4-2-æ³¨è§£æ–¹å¼-ä½ä¾µå…¥æ€§-å‰é¢ç”¨è¿‡-æ¨è"><a href="#10-8-4-2-æ³¨è§£æ–¹å¼-ä½ä¾µå…¥æ€§-å‰é¢ç”¨è¿‡-æ¨è" class="headerlink" title="10.8.4.2 æ³¨è§£æ–¹å¼(ä½ä¾µå…¥æ€§, å‰é¢ç”¨è¿‡, æ¨è)"></a>10.8.4.2 æ³¨è§£æ–¹å¼(ä½ä¾µå…¥æ€§, å‰é¢ç”¨è¿‡, æ¨è)</h4><p><strong>1.</strong> æ³¨è§£æ–¹å¼åŸ‹ç‚¹ä¸æ”¯æŒ <strong>private</strong> æ–¹æ³•</p><p><a href="https://xue.baidu.com/okam/pages/strategy-tp/index?strategyId=136707206360879&source=natural">https://xue.baidu.com/okam/pages/strategy-tp/index?strategyId=136707206360879&amp;source=natural</a></p><p><strong>2.</strong> @SentinelResource ç”¨äºå®šä¹‰èµ„æºï¼Œå¹¶æä¾›å¯é€‰çš„å¼‚å¸¸å¤„ç†å’Œfallbacké…ç½®é¡¹ã€‚</p><p><strong>3. @SentinelResource</strong> <strong>æ³¨è§£åŒ…å«ä»¥ä¸‹å±æ€§</strong>(æˆ‘ä»¬å†æ¢³ç†ä¸€ä¸‹)</p><ul><li><p><strong>value</strong>:èµ„æºåç§°ï¼Œå¿…éœ€é¡¹(ä¸èƒ½ä¸ºç©º)</p></li><li><p><strong>entryType</strong>:entry ç±»å‹ï¼Œå¯é€‰é¡¹(é»˜è®¤ä¸ºEntryType.OUT)</p></li><li><p><strong>blockHandler &#x2F; blockHandlerClass</strong>: blockHandler <strong>å¯¹åº”å¤„ç†</strong> <strong>BlockException</strong> çš„å‡½æ•°åç§°ï¼Œå¯é€‰é¡¹blockHandler<u>å‡½æ•°è®¿é—®èŒƒå›´éœ€è¦æ˜¯public</u>ï¼Œè¿”å›ç±»å‹éœ€è¦ä¸åŸæ–¹æ³•ç›¸åŒ¹é…ï¼Œå‚æ•°ç±»å‹éœ€è¦å’ŒåŸæ–¹æ³•ç›¸åŒ¹é…å¹¶ä¸”æœ€ååŠ ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼Œç±»å‹ä¸ºBlockExceptionã€‚blockHandler å‡½æ•°é»˜è®¤éœ€è¦å’ŒåŸæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­ã€‚è‹¥å¸Œæœ›ä½¿ç”¨å…¶ ä»–ç±»çš„å‡½æ•°ï¼Œåˆ™å¯ä»¥æŒ‡å®šblockHandlerClassä¸ºå¯¹åº”çš„ç±»çš„Classå¯¹è±¡ï¼Œæ³¨æ„å¯¹åº”çš„å‡½æ•°å¿…éœ€ä¸º static å‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚</p></li><li><p><strong>fallback &#x2F; fallbackClass</strong>:fallback å‡½æ•°åç§°ï¼Œå¯é€‰é¡¹ï¼Œ<u>ç”¨äºåœ¨æŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™æä¾›fallbackå¤„ç†é€»è¾‘</u>ã€‚fallbackå‡½æ•°å¯ä»¥é’ˆå¯¹æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸(é™¤äº†exceptionsToIgnoreé‡Œé¢æ’é™¤æ‰çš„å¼‚å¸¸ç±»å‹)è¿›è¡Œå¤„ç†ã€‚fallback å‡½æ•°ç­¾åå’Œä½ç½®è¦æ±‚:</p></li></ul><ol><li>è¿”å›å€¼ç±»å‹å¿…é¡»ä¸åŸå‡½æ•°è¿”å›å€¼ç±»å‹ä¸€è‡´;</li><li>æ–¹æ³•å‚æ•°åˆ—è¡¨éœ€è¦å’ŒåŸå‡½æ•°ä¸€è‡´ï¼Œæˆ–è€…å¯ä»¥é¢å¤–å¤šä¸€ä¸ªThrowableç±»å‹çš„å‚æ•°ç”¨äºæ¥æ”¶å¯¹åº”çš„å¼‚å¸¸ã€‚</li><li>fallbackå‡½æ•°é»˜è®¤éœ€è¦å’ŒåŸæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­ã€‚è‹¥å¸Œæœ›ä½¿ç”¨å…¶ä»–ç±»çš„å‡½æ•°ï¼Œåˆ™å¯ä»¥æŒ‡å®š<u>fallbackClass</u>ä¸ºå¯¹åº”çš„ç±»çš„Classå¯¹è±¡ï¼Œæ³¨æ„å¯¹åº”çš„å‡½æ•°å¿…éœ€ä¸ºstaticå‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚</li></ol><ul><li><strong>defaultFallback(since 1.6.0</strong>):é»˜è®¤çš„ fallbackå‡½æ•°åç§°ï¼Œå¯é€‰é¡¹ï¼Œé€šå¸¸ç”¨äºé€šç”¨çš„fallbacké€»è¾‘(å³å¯ä»¥ç”¨äºå¾ˆå¤šæœåŠ¡æˆ–æ–¹æ³•)ã€‚é»˜è®¤fallbackå‡½æ•°å¯ä»¥é’ˆå¯¹æ‰€æœ‰ç±»å‹ çš„å¼‚å¸¸(é™¤äº†exceptionsToIgnoreé‡Œé¢æ’é™¤æ‰çš„å¼‚å¸¸ç±»å‹)è¿›è¡Œå¤„ç†ã€‚è‹¥åŒæ—¶é…ç½®äº†fallbackå’ŒdefaultFallbackï¼Œåˆ™åªæœ‰fallbackä¼šç”Ÿæ•ˆã€‚defaultFallback å‡½æ•°ç­¾åè¦æ±‚:</li></ul><ol><li>è¿”å›å€¼ç±»å‹å¿…é¡»ä¸åŸå‡½æ•°è¿”å›å€¼ç±»å‹ä¸€è‡´;</li><li>æ–¹æ³•å‚æ•°åˆ—è¡¨éœ€è¦ä¸ºç©ºï¼Œæˆ–è€…å¯ä»¥é¢å¤–å¤šä¸€ä¸ªThrowableç±»å‹çš„å‚æ•°ç”¨äºæ¥æ”¶å¯¹åº”çš„å¼‚å¸¸ã€‚</li><li>defaultFallbackå‡½æ•°é»˜è®¤éœ€è¦å’ŒåŸæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­ã€‚è‹¥å¸Œæœ›ä½¿ç”¨å…¶ä»–ç±»çš„å‡½æ•°ï¼Œ åˆ™å¯ä»¥æŒ‡å®šfallbackClassä¸ºå¯¹åº”çš„ç±»çš„Classå¯¹è±¡ï¼Œæ³¨æ„å¯¹åº”çš„å‡½æ•°å¿…éœ€ä¸ºstaticå‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚</li></ol><ul><li>exceptionsToIgnore(since 1.6.0)ï¼šç”¨äºæŒ‡å®šå“ªäº›å¼‚å¸¸è¢«æ’é™¤æ‰ï¼Œä¸ä¼šè¿›å…¥å¼‚å¸¸ç»Ÿè®¡ä¸­ï¼Œä¹Ÿä¸ä¼šè¿›å…¥fallbacké€»è¾‘ä¸­ï¼Œè€Œæ˜¯ä¼šåŸæ ·æŠ›å‡ºã€‚</li></ul><h2 id="10-9-openFeign-sentinel-å¯¹è¿œç¨‹è°ƒç”¨ç†”æ–­é™çº§"><a href="#10-9-openFeign-sentinel-å¯¹è¿œç¨‹è°ƒç”¨ç†”æ–­é™çº§" class="headerlink" title="10.9 openFeign+sentinel å¯¹è¿œç¨‹è°ƒç”¨ç†”æ–­é™çº§"></a>10.9 openFeign+sentinel å¯¹è¿œç¨‹è°ƒç”¨ç†”æ–­é™çº§</h2><h3 id="10-9-1-å½“å‰å¾®æœåŠ¡åŸºç¡€ç¯å¢ƒ"><a href="#10-9-1-å½“å‰å¾®æœåŠ¡åŸºç¡€ç¯å¢ƒ" class="headerlink" title="10.9.1 å½“å‰å¾®æœåŠ¡åŸºç¡€ç¯å¢ƒ"></a><strong>10.9.1</strong> å½“å‰å¾®æœåŠ¡åŸºç¡€ç¯å¢ƒ</h3><h4 id="10-9-1-1-å½“å‰å¾®æœåŠ¡ç¯å¢ƒæ¶æ„å›¾"><a href="#10-9-1-1-å½“å‰å¾®æœåŠ¡ç¯å¢ƒæ¶æ„å›¾" class="headerlink" title="10.9.1.1 å½“å‰å¾®æœåŠ¡ç¯å¢ƒæ¶æ„å›¾"></a>10.9.1.1 å½“å‰å¾®æœåŠ¡ç¯å¢ƒæ¶æ„å›¾</h4><p>â€“ ç¤ºæ„å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230629205804092.png" alt="image-20230629205804092"></p><h4 id="10-9-1-2-æµ‹è¯•"><a href="#10-9-1-2-æµ‹è¯•" class="headerlink" title="10.9.1.2 æµ‹è¯•"></a>10.9.1.2 æµ‹è¯•</h4><h5 id="10-9-1-2-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-9-1-2-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.9.1.2.1 å¯åŠ¨ Nacos Server 8848"></a>10.9.1.2.1 å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-9-1-2-2-å¯åŠ¨-member-service-nacos-provider-10004-x2F-10006"><a href="#10-9-1-2-2-å¯åŠ¨-member-service-nacos-provider-10004-x2F-10006" class="headerlink" title="10.9.1.2.2 å¯åŠ¨ member-service-nacos-provider-10004&#x2F;10006"></a>10.9.1.2.2 å¯åŠ¨ member-service-nacos-provider-10004&#x2F;10006</h5><h5 id="10-9-1-2-3-å¯åŠ¨-member-service-nacos-consumer-80"><a href="#10-9-1-2-3-å¯åŠ¨-member-service-nacos-consumer-80" class="headerlink" title="10.9.1.2.3 å¯åŠ¨ member-service-nacos-consumer-80"></a>10.9.1.2.3 å¯åŠ¨ member-service-nacos-consumer-80</h5><h5 id="10-9-1-2-4-æµè§ˆå™¨-http-localhost-member-nacos-consumer-get-1"><a href="#10-9-1-2-4-æµè§ˆå™¨-http-localhost-member-nacos-consumer-get-1" class="headerlink" title="10.9.1.2.4 æµè§ˆå™¨**: http://localhost/member/nacos/consumer/get/1**"></a>10.9.1.2.4 æµè§ˆå™¨**: <a href="http://localhost/member/nacos/consumer/get/1">http://localhost/member/nacos/consumer/get/1</a>**</h5><p><strong>1.</strong> æµ è§ˆ å™¨ è¾“ å…¥ <strong>: <a href="http://localhost/member/nacos/consumer/get/1">http://localhost/member/nacos/consumer/get/1</a> ,</strong> ç›® å‰ æ˜¯ <strong>Ribbon+RestTemplate</strong></p><h3 id="10-9-2-æœåŠ¡æ¶ˆè´¹è€…æ•´åˆ-Openfeign"><a href="#10-9-2-æœåŠ¡æ¶ˆè´¹è€…æ•´åˆ-Openfeign" class="headerlink" title="10.9.2 æœåŠ¡æ¶ˆè´¹è€…æ•´åˆ Openfeign"></a><strong>10.9.2</strong> æœåŠ¡æ¶ˆè´¹è€…æ•´åˆ Openfeign</h3><p><strong>1.</strong> éœ€æ±‚:åœ¨ <strong>member-service-nacos-consumer-80</strong> æ•´åˆ <strong>Openfeign</strong> å®ç°è¿œç¨‹è°ƒç”¨</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230629210226986.png" alt="image-20230629210226986"></p><h4 id="10-9-2-2-ä»£ç -é…ç½®å®ç°æ­¥éª¤"><a href="#10-9-2-2-ä»£ç -é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.9.2.2 ä»£ç +é…ç½®å®ç°æ­¥éª¤"></a>10.9.2.2 ä»£ç +é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> ä¿®æ”¹ <strong>member-service-nacos-consumer-80</strong> çš„ <strong>pom.xml</strong> åŠ å…¥ <strong>openfeign</strong> ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼•å…¥openfeign-startï¼Œå³åœºæ™¯å¯åŠ¨å™¨    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>åœ¨</strong> <strong>member-service-nacos-consumer-80</strong> <strong>åˆ› å»º</strong>com&#x2F;study&#x2F;springcloud&#x2F;service&#x2F;MemberOpenFeignService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.springcloud.entity.Member;</span><br><span class="line"><span class="keyword">import</span> com.study.springcloud.entity.Result;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/6/29</span></span><br><span class="line"><span class="comment"> * 21:07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;member-service-nacos-provider&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MemberOpenFeignService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è€éŸ©è§£è¯»</span></span><br><span class="line"><span class="comment">     * 1. è¿œç¨‹è°ƒç”¨çš„æ–¹å¼ä¸º get</span></span><br><span class="line"><span class="comment">     * 2. è¿œç¨‹è°ƒç”¨çš„ url ä¸º http://member-service-nacos-provider/member/get/&#123;id&#125;</span></span><br><span class="line"><span class="comment">     * 3. member-service-nacos-provider æ˜¯ nacos æ³¨å†Œä¸­å¿ƒæœåŠ¡ member-service-nacos-provider:10004/10006 </span></span><br><span class="line"><span class="comment">     * 4. ä¼šæ ¹æ® OpenFeign çš„å‡è¡¡ç®—æ³•æ¥å†³å®šæ˜¯è°ƒç”¨ 10004 è¿˜æ˜¯ 10006</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/member/get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;Member&gt; <span class="title function_">getMembertById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3.</strong> <strong>åœ¨</strong> <strong>member-service-nacos-consumer-80</strong> <strong>ä¿®æ”¹</strong> <strong>com&#x2F;study&#x2F;springcloud&#x2F;controller&#x2F;MemberNacosConsumerController.java</strong> å¢åŠ æ–¹æ³•getMemberOpenfeignById()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/member/openfeign/consumer/get/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;Member&gt; <span class="title function_">getMemberOpenfeignById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">    <span class="comment">//è¿™é‡Œä½¿ç”¨ Openfeign æ¥å£æ–¹å¼è¿œç¨‹è°ƒç”¨æœåŠ¡</span></span><br><span class="line">    System.out.println(<span class="string">&quot;é€šè¿‡ openfeignd+è´Ÿè½½å‡è¡¡ è°ƒç”¨æœåŠ¡&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> memberOpenFeignService.getMemberById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4.</strong> <strong>å†åœ¨</strong> <strong>member-service-nacos-consumer-80</strong> <strong>çš„ä¸»å¯åŠ¨ç±»åŠ å…¥æ³¨è§£</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;MemberNacosConsumerApplication80.java</strong></p><p>ã€Œ@EnableFeignClientsã€</p><h4 id="10-9-2-3-æµ‹è¯•"><a href="#10-9-2-3-æµ‹è¯•" class="headerlink" title="10.9.2.3 æµ‹è¯•"></a>10.9.2.3 æµ‹è¯•</h4><h5 id="10-9-2-3-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-9-2-3-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.9.2.3.1 å¯åŠ¨ Nacos Server 8848"></a>10.9.2.3.1 å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-9-2-3-2-å¯åŠ¨-member-service-nacos-provider-10004-x2F-10006"><a href="#10-9-2-3-2-å¯åŠ¨-member-service-nacos-provider-10004-x2F-10006" class="headerlink" title="10.9.2.3.2 å¯åŠ¨ **member-service-nacos-provider-10004&#x2F;10006 **"></a>10.9.2.3.2 å¯åŠ¨ **member-service-nacos-provider-10004&#x2F;10006 **</h5><h5 id="10-9-2-3-3-å¯åŠ¨-member-service-nacos-consumer-80"><a href="#10-9-2-3-3-å¯åŠ¨-member-service-nacos-consumer-80" class="headerlink" title="10.9.2.3.3 å¯åŠ¨ member-service-nacos-consumer-80"></a><strong>10.9.2.3.3</strong> å¯åŠ¨ member-service-nacos-consumer-80</h5><h5 id="10-9-2-3-4-æµè§ˆå™¨-http-localhost-member-openfeign-consumer-get-1"><a href="#10-9-2-3-4-æµè§ˆå™¨-http-localhost-member-openfeign-consumer-get-1" class="headerlink" title="10.9.2.3.4 æµè§ˆå™¨**: http://localhost/member/openfeign/consumer/get/1**"></a>10.9.2.3.4 æµè§ˆå™¨**: <a href="http://localhost/member/openfeign/consumer/get/1">http://localhost/member/openfeign/consumer/get/1</a>**</h5><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost/member/openfeign/consumer/get/1">http://localhost/member/openfeign/consumer/get/1</a> , ç›®å‰æ˜¯ <strong>Openfeign è°ƒç”¨</strong>(<strong>è´Ÿè½½å‡è¡¡</strong>)**</p><h3 id="10-9-3-æœåŠ¡æ¶ˆè´¹è€…æ•´åˆ-Sentinel"><a href="#10-9-3-æœåŠ¡æ¶ˆè´¹è€…æ•´åˆ-Sentinel" class="headerlink" title="10.9.3 æœåŠ¡æ¶ˆè´¹è€…æ•´åˆ Sentinel"></a>10.9.3 æœåŠ¡æ¶ˆè´¹è€…æ•´åˆ Sentinel</h3><h4 id="10-9-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-9-3-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.9.3.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.9.3.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> éœ€æ±‚:åœ¨ <strong>member-service-nacos-consumer-80</strong> æ•´åˆ <strong>Sentinel</strong> èƒ½è¢« <strong>Sentinel</strong> ç›‘æ§</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630165412038.png" alt="image-20230630165412038" style="zoom:50%;" /><h4 id="10-9-3-2-ä»£ç -é…ç½®å®ç°æ­¥éª¤"><a href="#10-9-3-2-ä»£ç -é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.9.3.2 ä»£ç +é…ç½®å®ç°æ­¥éª¤"></a>10.9.3.2 ä»£ç +é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> ä¿®æ”¹ <strong>member-service-nacos-consumer-80</strong> çš„ <strong>pom.xml</strong> åŠ å…¥ <strong>sentinel</strong> ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥ alibaba-sentinel --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-sentinel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2.</strong> ä¿®æ”¹ <strong>member-service-nacos-consumer-80</strong> çš„ <strong>application.yml</strong> é…ç½® <strong>sentinel</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">member-service-consumer-80</span></span><br><span class="line">    <span class="comment">#é…ç½®nacos</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="comment">#å¯åŠ¨nacosæœåŠ¡çš„ipä»¥åŠç«¯å£</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">    <span class="attr">sentinel:</span></span><br><span class="line">      <span class="attr">transport:</span></span><br><span class="line">        <span class="attr">dashboard:</span> <span class="string">localhost:8080</span> <span class="comment">#è¿™ä¸ªæ˜¯ sentinel æ§åˆ¶å°(sentinel dashboard)çš„åœ°å€</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8719</span> <span class="comment">#é»˜è®¤ 8719ï¼Œå‡å¦‚è¢«å ç”¨äº†, ä¼šè‡ªåŠ¨ä» 8719 å¼€å§‹ä¾æ¬¡+1 æ‰«æã€‚ç›´è‡³æ‰¾åˆ°æœªè¢«å ç”¨çš„ç«¯å£</span></span><br><span class="line"><span class="attr">management:</span> <span class="comment">#æš´éœ²æ‰€æœ‰ç›‘æ§ç‚¹</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&#x27;*&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="10-9-3-3-æµ‹è¯•"><a href="#10-9-3-3-æµ‹è¯•" class="headerlink" title="10.9.3.3 æµ‹è¯•"></a>10.9.3.3 æµ‹è¯•</h4><h5 id="10-9-3-3-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-9-3-3-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.9.3.3.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.9.3.3.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-9-3-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-9-3-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.9.3.3.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°&#x2F;Sentinel dashboard"></a>10.9.3.3.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°&#x2F;Sentinel dashboard</h5><h5 id="10-9-3-3-3-å¯åŠ¨-member-service-nacos-provider-10004-x2F-10006"><a href="#10-9-3-3-3-å¯åŠ¨-member-service-nacos-provider-10004-x2F-10006" class="headerlink" title="10.9.3.3.3 å¯åŠ¨ **member-service-nacos-provider-10004&#x2F;10006 **"></a>10.9.3.3.3 å¯åŠ¨ **member-service-nacos-provider-10004&#x2F;10006 **</h5><h5 id="10-9-3-3-4-å¯åŠ¨-member-service-nacos-consumer-80"><a href="#10-9-3-3-4-å¯åŠ¨-member-service-nacos-consumer-80" class="headerlink" title="10.9.3.3.4 å¯åŠ¨ member-service-nacos-consumer-80"></a><strong>10.9.3.3.4</strong> å¯åŠ¨ member-service-nacos-consumer-80</h5><h5 id="10-9-3-3-5-æµè§ˆå™¨-http-localhost-member-openfeign-consumer-get-1"><a href="#10-9-3-3-5-æµè§ˆå™¨-http-localhost-member-openfeign-consumer-get-1" class="headerlink" title="10.9.3.3.5 æµè§ˆå™¨**: http://localhost/member/openfeign/consumer/get/1**"></a>10.9.3.3.5 æµè§ˆå™¨**: <a href="http://localhost/member/openfeign/consumer/get/1">http://localhost/member/openfeign/consumer/get/1</a>**</h5><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost/member/openfeign/consumer/get/1">http://localhost/member/openfeign/consumer/get/1</a> ,** ç›®å‰æ˜¯ <strong>Openfeign</strong> è°ƒç”¨**(<strong>è´Ÿè½½å‡è¡¡</strong>)**</p><p><strong>2.</strong> <strong>ç™»å½•</strong> <strong>sentinel</strong> <strong>æ§åˆ¶å°</strong>: <strong>å¯ä»¥çœ‹åˆ°å·²ç»ç›‘æ§åˆ°</strong> <strong>member-service-nacos-consumer</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630170804677.png" alt="image-20230630170804677"></p><h3 id="10-9-4-openFeign-sentinel-å¯¹è¿œç¨‹è°ƒç”¨ç†”æ–­é™çº§"><a href="#10-9-4-openFeign-sentinel-å¯¹è¿œç¨‹è°ƒç”¨ç†”æ–­é™çº§" class="headerlink" title="10.9.4 openFeign+sentinel å¯¹è¿œç¨‹è°ƒç”¨ç†”æ–­é™çº§"></a>10.9.4 openFeign+sentinel å¯¹è¿œç¨‹è°ƒç”¨ç†”æ–­é™çº§</h3><h4 id="10-9-4-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-9-4-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.9.4.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.9.4.1 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> éœ€æ±‚**&#x2F;<strong>å¦‚å›¾:åœ¨ <strong>member-service-nacos-consumer-80</strong> è°ƒç”¨æŸä¸ªæ— æ•ˆæœåŠ¡æ—¶ï¼Œå¯åŠ¨ Sentinel çš„ç†”æ–­é™çº§æœºåˆ¶ <strong>,</strong> èƒ½å¤Ÿå¿«é€Ÿè¿”å›å“åº”ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é»˜è®¤çš„è¶…æ—¶æœºåˆ¶(å› ä¸ºè¶…æ—¶æœºåˆ¶å®¹æ˜“çº¿ç¨‹å †ç§¯</strong>,** ä»è€Œå¯¼è‡´é›ªå´©)</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630170956206.png" alt="image-20230630170956206"></p><p><strong>2.</strong> <strong>å…ˆæµ‹è¯•ä¸€ä¸‹ï¼Œå…³é—­</strong> <strong>10004&#x2F;10006,</strong> <strong>è¿™æ—¶</strong> <strong>openfeign</strong> <strong>å»è°ƒç”¨ä¼šæ€ä¹ˆæ ·</strong>? (è¿”å› <strong>time out)</strong></p><p><strong>3.</strong> <strong>è¿˜å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼Œè®©</strong> <strong>10004</strong> <strong>æœåŠ¡å¯¹åº”çš„</strong> <strong>API</strong> <strong>æ‰§è¡Œæ—¶é—´å¾ˆé•¿</strong>(æ¯”å¦‚ä¼‘çœ  <strong>2</strong> <strong>ç§’</strong>), <strong>è¿™ æ—¶</strong> <strong>openfeign</strong> <strong>å»è°ƒç”¨ä¼šæ€ä¹ˆæ ·</strong>?</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630171235813.png" alt="image-20230630171235813"></p><h4 id="10-9-4-2-ä»£ç -é…ç½®å®ç°æ­¥éª¤"><a href="#10-9-4-2-ä»£ç -é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.9.4.2 ä»£ç +é…ç½®å®ç°æ­¥éª¤"></a>10.9.4.2 ä»£ç +é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> ä¿® æ”¹ <strong>member-service-nacos-consumer-80</strong> çš„</p><p><strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;service&#x2F;MemberOpenFeignService.java,</strong> åŠ å…¥ <strong>fallback</strong> çš„å¤„ç†ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.springcloud.entity.Member;</span><br><span class="line"><span class="keyword">import</span> com.study.springcloud.entity.Result;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/6/29</span></span><br><span class="line"><span class="comment"> * 21:07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;member-service-nacos-provider&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MemberOpenFeignService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è€éŸ©è§£è¯»</span></span><br><span class="line"><span class="comment">     * 1. è¿œç¨‹è°ƒç”¨çš„æ–¹å¼ä¸º get</span></span><br><span class="line"><span class="comment">     * 2. è¿œç¨‹è°ƒç”¨çš„ url ä¸º http://member-service-nacos-provider/member/get/&#123;id&#125;</span></span><br><span class="line"><span class="comment">     * 3. member-service-nacos-provider æ˜¯</span></span><br><span class="line"><span class="comment">     * nacos æ³¨å†Œä¸­å¿ƒæœåŠ¡ member-service-nacos-provider:10004/10006 </span></span><br><span class="line"><span class="comment">     * 4. ä¼šæ ¹æ® OpenFeign çš„å‡è¡¡ç®—æ³•æ¥å†³å®šæ˜¯è°ƒç”¨ 10004 è¿˜æ˜¯ 10006</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/member/get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;Member&gt; <span class="title function_">getMemberById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> åˆ›å»º <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;service&#x2F;MemberFeignFallbackService.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.springcloud.entity.Member;</span><br><span class="line"><span class="keyword">import</span> com.study.springcloud.entity.Result;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/6/30</span></span><br><span class="line"><span class="comment"> * 17:15</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemberFeignFallbackService</span> <span class="keyword">implements</span> <span class="title class_">MemberOpenFeignService</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;Member&gt; <span class="title function_">getMemberById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;500&quot;</span>, <span class="string">&quot;è¢«è°ƒç”¨æœåŠ¡å¼‚å¸¸, ç†”æ–­é™çº§ï¼Œå¿«é€Ÿè¿”å›ç»“æœ, é˜²æ­¢çº¿ç¨‹å † ç§¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3.</strong> ä¿®æ”¹ <strong>member-service-nacos-consumer-80</strong> çš„ <strong>application.yml ,</strong> åŠ å…¥ <strong>openfeign</strong> å’Œ <strong>sentinel</strong> æ•´åˆé…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">æœ«å°¾æ·»åŠ ä»¥ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">#openfeign å’Œ sentinel æ•´åˆï¼Œå¿…é¡»é…</span></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">sentinel:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h4 id="10-9-4-3-æµ‹è¯•"><a href="#10-9-4-3-æµ‹è¯•" class="headerlink" title="10.9.4.3 æµ‹è¯•"></a>10.9.4.3 æµ‹è¯•</h4><h5 id="10-9-4-3-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-9-4-3-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.9.4.3.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.9.4.3.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-9-4-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-9-4-3-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.9.4.3.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°&#x2F;Sentinel dashboard"></a>10.9.4.3.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°&#x2F;Sentinel dashboard</h5><h5 id="10-9-4-3-3-å…³é—­-member-service-nacos-provider-10004-x2F-10006"><a href="#10-9-4-3-3-å…³é—­-member-service-nacos-provider-10004-x2F-10006" class="headerlink" title="10.9.4.3.3 å…³é—­ **member-service-nacos-provider-10004&#x2F;10006 **"></a>10.9.4.3.3 å…³é—­ **member-service-nacos-provider-10004&#x2F;10006 **</h5><h5 id="10-9-4-3-4-å¯åŠ¨-member-service-nacos-consumer-80"><a href="#10-9-4-3-4-å¯åŠ¨-member-service-nacos-consumer-80" class="headerlink" title="10.9.4.3.4 å¯åŠ¨ member-service-nacos-consumer-80"></a><strong>10.9.4.3.4</strong> å¯åŠ¨ member-service-nacos-consumer-80</h5><h5 id="10-9-4-3-5-æµè§ˆå™¨-http-localhost-member-openfeign-consumer-get-1"><a href="#10-9-4-3-5-æµè§ˆå™¨-http-localhost-member-openfeign-consumer-get-1" class="headerlink" title="10.9.4.3.5 æµè§ˆå™¨**: http://localhost/member/openfeign/consumer/get/1**"></a>10.9.4.3.5 æµè§ˆå™¨**: <a href="http://localhost/member/openfeign/consumer/get/1">http://localhost/member/openfeign/consumer/get/1</a>**</h5><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost/member/openfeign/consumer/get/1">http://localhost/member/openfeign/consumer/get/1</a> ,** ç›®å‰æ˜¯ <strong>Openfeign</strong> è°ƒç”¨**(<strong>è´Ÿè½½å‡è¡¡</strong>)**</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630172238879.png" alt="image-20230630172238879" style="zoom:50%;" /><h4 id="10-9-4-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜"><a href="#10-9-4-4-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜" class="headerlink" title="10.9.4.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜"></a>10.9.4.4 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜</h4><p><strong>1.</strong> å› ä¸º <strong>member-service-nacos-consumer-80</strong> å·²ç»è¢« <strong>sentinel</strong> ç›‘æ§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŠ å…¥ç›¸</p><p>å…³çš„æµæ§è§„åˆ™**,** æ¯”å¦‚ä¸º <strong>&#x2F;member&#x2F;openfeign&#x2F;consumer&#x2F;get&#x2F;1</strong> åŠ å…¥æµæ§è§„åˆ™ <strong>qps &#x3D; 1</strong></p><p><strong>æµ‹è¯•</strong>: <strong>å¦‚æœ</strong>&#x2F;member&#x2F;openfeign&#x2F;consumer&#x2F;get&#x2F;1 <strong>è¯·æ±‚</strong> <strong>QPS</strong> <strong>è¶…è¿‡</strong> <strong>1,</strong> <strong>ä¼šè¾“å‡ºBlocked by Sentinel (flow limiting)</strong></p><p><strong>QPS</strong> <strong>æ²¡æœ‰è¶…è¿‡</strong> <strong>1,</strong> <strong>ä¼šè¢«</strong> <strong>fallback</strong> <strong>å¤„ç†</strong></p><p><strong>2.</strong> <strong>å¦‚æœè¿œç¨‹æœåŠ¡æ¢å¤æ­£å¸¸</strong>, <strong>åˆä¼šæ­£å¸¸è°ƒç”¨</strong>.</p><h2 id="10-10-è§„åˆ™æŒä¹…åŒ–"><a href="#10-10-è§„åˆ™æŒä¹…åŒ–" class="headerlink" title="10.10 è§„åˆ™æŒä¹…åŒ–"></a>10.10 è§„åˆ™æŒä¹…åŒ–</h2><h3 id="10-10-1-è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–çš„é—®é¢˜"><a href="#10-10-1-è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–çš„é—®é¢˜" class="headerlink" title="10.10.1 è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–çš„é—®é¢˜"></a><strong>10.10.1</strong> è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–çš„é—®é¢˜</h3><h4 id="10-10-1-1-å¦‚æœ-sentinel-æµæ§è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–ï¼Œå½“é‡å¯è°ƒç”¨-API-x2F-æ¥å£-æ‰€åœ¨å¾®æœåŠ¡åï¼Œè§„åˆ™å°±ä¼šä¸¢å¤±ï¼Œéœ€è¦-é‡æ–°åŠ å…¥"><a href="#10-10-1-1-å¦‚æœ-sentinel-æµæ§è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–ï¼Œå½“é‡å¯è°ƒç”¨-API-x2F-æ¥å£-æ‰€åœ¨å¾®æœåŠ¡åï¼Œè§„åˆ™å°±ä¼šä¸¢å¤±ï¼Œéœ€è¦-é‡æ–°åŠ å…¥" class="headerlink" title="10.10.1.1 å¦‚æœ sentinel æµæ§è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–ï¼Œå½“é‡å¯è°ƒç”¨ API&#x2F;æ¥å£ æ‰€åœ¨å¾®æœåŠ¡åï¼Œè§„åˆ™å°±ä¼šä¸¢å¤±ï¼Œéœ€è¦ é‡æ–°åŠ å…¥"></a>10.10.1.1 å¦‚æœ sentinel æµæ§è§„åˆ™æ²¡æœ‰æŒä¹…åŒ–ï¼Œå½“é‡å¯è°ƒç”¨ API&#x2F;æ¥å£ æ‰€åœ¨å¾®æœåŠ¡åï¼Œè§„åˆ™å°±ä¼šä¸¢å¤±ï¼Œéœ€è¦ é‡æ–°åŠ å…¥</h4><h4 id="10-10-1-2-è§£å†³æ–¹æ¡ˆ-é€šè¿‡-Nacos-è¿›è¡ŒæŒä¹…åŒ–"><a href="#10-10-1-2-è§£å†³æ–¹æ¡ˆ-é€šè¿‡-Nacos-è¿›è¡ŒæŒä¹…åŒ–" class="headerlink" title="10.10.1.2 è§£å†³æ–¹æ¡ˆ:é€šè¿‡ Nacos è¿›è¡ŒæŒä¹…åŒ–"></a>10.10.1.2 è§£å†³æ–¹æ¡ˆ:é€šè¿‡ Nacos è¿›è¡ŒæŒä¹…åŒ–</h4><h3 id="10-10-2-è§„åˆ™æŒä¹…åŒ–æ–¹æ¡ˆ"><a href="#10-10-2-è§„åˆ™æŒä¹…åŒ–æ–¹æ¡ˆ" class="headerlink" title="10.10.2 è§„åˆ™æŒä¹…åŒ–æ–¹æ¡ˆ"></a><strong>10.10.2</strong> è§„åˆ™æŒä¹…åŒ–æ–¹æ¡ˆ</h3><h4 id="10-10-2-1-é˜¿é‡Œäº‘-Ahas-æœ€æ–¹ä¾¿-x2F-ä»˜è´¹"><a href="#10-10-2-1-é˜¿é‡Œäº‘-Ahas-æœ€æ–¹ä¾¿-x2F-ä»˜è´¹" class="headerlink" title="10.10.2.1 é˜¿é‡Œäº‘ Ahas[æœ€æ–¹ä¾¿&#x2F;ä»˜è´¹]"></a>10.10.2.1 é˜¿é‡Œäº‘ Ahas[æœ€æ–¹ä¾¿&#x2F;ä»˜è´¹]</h4><p><strong>1.</strong> å®˜æ–¹æ–‡æ¡£ <strong>: <a href="https://help.aliyun.com/product/87450.html?spm=5176.cnahas.0.0.78034bb7ef0y86">https://help.aliyun.com/product/87450.html?spm=5176.cnahas.0.0.78034bb7ef0y86</a></strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630190919413.png" alt="image-20230630190919413" style="zoom:50%;" /><h4 id="10-10-2-2-ğŸŒŸåœ¨-Nacos-Server-é…ç½®è§„åˆ™-å®ŒæˆæŒä¹…åŒ–-å®˜æ–¹æ¨è"><a href="#10-10-2-2-ğŸŒŸåœ¨-Nacos-Server-é…ç½®è§„åˆ™-å®ŒæˆæŒä¹…åŒ–-å®˜æ–¹æ¨è" class="headerlink" title="10.10.2.2 ğŸŒŸåœ¨ Nacos Server é…ç½®è§„åˆ™, å®ŒæˆæŒä¹…åŒ– -å®˜æ–¹æ¨è"></a>10.10.2.2 ğŸŒŸåœ¨ Nacos Server é…ç½®è§„åˆ™, å®ŒæˆæŒä¹…åŒ– -å®˜æ–¹æ¨è</h4><h4 id="10-10-2-3-å°†è§„åˆ™æŒä¹…åŒ–åˆ°æœ¬åœ°æ–‡ä»¶-å®šæ—¶åŒæ­¥"><a href="#10-10-2-3-å°†è§„åˆ™æŒä¹…åŒ–åˆ°æœ¬åœ°æ–‡ä»¶-å®šæ—¶åŒæ­¥" class="headerlink" title="10.10.2.3 å°†è§„åˆ™æŒä¹…åŒ–åˆ°æœ¬åœ°æ–‡ä»¶, å®šæ—¶åŒæ­¥"></a>10.10.2.3 å°†è§„åˆ™æŒä¹…åŒ–åˆ°æœ¬åœ°æ–‡ä»¶, å®šæ—¶åŒæ­¥</h4><h4 id="10-10-2-4-å…¶å®ƒâ€¦"><a href="#10-10-2-4-å…¶å®ƒâ€¦" class="headerlink" title="10.10.2.4 å…¶å®ƒâ€¦"></a>10.10.2.4 å…¶å®ƒâ€¦</h4><h3 id="10-10-3-Nacos-Server-é…ç½®ä¸­å¿ƒ-è§„åˆ™æŒä¹…åŒ–å®ä¾‹"><a href="#10-10-3-Nacos-Server-é…ç½®ä¸­å¿ƒ-è§„åˆ™æŒä¹…åŒ–å®ä¾‹" class="headerlink" title="10.10.3 Nacos Server é…ç½®ä¸­å¿ƒ**-**è§„åˆ™æŒä¹…åŒ–å®ä¾‹"></a><strong>10.10.3 Nacos Server</strong> é…ç½®ä¸­å¿ƒ**-**è§„åˆ™æŒä¹…åŒ–å®ä¾‹</h3><h4 id="10-10-3-1-å·¥ä½œåŸç†ç¤ºæ„å›¾"><a href="#10-10-3-1-å·¥ä½œåŸç†ç¤ºæ„å›¾" class="headerlink" title="10.10.3.1 å·¥ä½œåŸç†ç¤ºæ„å›¾"></a>10.10.3.1 å·¥ä½œåŸç†ç¤ºæ„å›¾</h4><p>å…¶å®å°±æ˜¯é æŠŠè§„åˆ™ä¿å­˜åˆ°nacosä¸­ï¼Œä¸‹æ¬¡é‡å¯æœåŠ¡æ—¶å†ä»nacosä¸­è·å–å…ˆå‰è®¾ç½®çš„è§„åˆ™ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630191350485.png" alt="image-20230630191350485"></p><h4 id="10-10-3-2-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#10-10-3-2-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="10.10.3.2 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£"></a>10.10.3.2 éœ€æ±‚åˆ†æ&#x2F;å›¾è§£</h4><p><strong>1.</strong> éœ€ æ±‚ <strong>:</strong> ä¸º <strong>member-service-nacos-consumer-80</strong> å¾®æœåŠ¡çš„**&#x2F;member&#x2F;openfeign&#x2F;consumer&#x2F;get&#x2F;1 API** æ¥å£æ·»åŠ æµæ§è§„åˆ™ **QPS&#x3D;1&#x2F;**å¿«é€Ÿå¤±è´¥ <strong>.</strong></p><p><strong>2.</strong> <strong>è¦æ±‚å°†è¯¥æµæ§è§„åˆ™åŠ å…¥åˆ°</strong> <strong>nacos server</strong> <strong>é…ç½®ä¸­å¿ƒï¼Œå®ç°æŒä¹…åŒ–</strong></p><h4 id="10-10-3-3-ä»£ç -é…ç½®å®ç°æ­¥éª¤"><a href="#10-10-3-3-ä»£ç -é…ç½®å®ç°æ­¥éª¤" class="headerlink" title="10.10.3.3 ä»£ç +é…ç½®å®ç°æ­¥éª¤"></a>10.10.3.3 ä»£ç +é…ç½®å®ç°æ­¥éª¤</h4><p><strong>1.</strong> åœ¨ <strong>Nacos Server</strong> é…ç½®ä¸­å¿ƒå¢åŠ  <strong>Sentinel</strong> å®¢æˆ·ç«¯**&#x2F;**å¾®æœåŠ¡æ¨¡å—çš„æµæ§è§„åˆ™</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630191715975.png" alt="image-20230630191715975" style="zoom:50%;" /><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">&quot;resource&quot;</span><span class="punctuation">:</span><span class="string">&quot;/member/openfeign/consumer/get/1&quot;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;limitApp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;default&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;grade&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strategy&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;controlBehavior&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clusterMode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630192956899.png" alt="image-20230630192956899"></p><p><strong>2.</strong> <strong>åœ¨</strong> <strong>Nacos Server</strong> <strong>é…ç½®ä¸­å¿ƒå¢åŠ </strong> <strong>Sentinel</strong> <strong>å®¢æˆ·ç«¯</strong>&#x2F;å¾®æœåŠ¡æ¨¡å—çš„æµæ§è§„åˆ™å‚æ•°è¯´æ˜</p><ul><li><strong>resource</strong> âˆ¶ èµ„æºåç§°;</li><li><strong>limlitApp</strong> âˆ¶  æ¥æºåº”ç”¨;</li><li>**grade **âˆ¶ é˜ˆå€¼ç±»å‹ï¼Œ0 è¡¨ç¤ºçº¿ç¨‹æ•°ï¼Œ1 è¡¨ç¤ºQPS;</li><li><strong>count</strong> âˆ¶ å•æœºé˜ˆå€¼;</li><li>**strategy **âˆ¶ æµæ§æ¨¡å¼ï¼Œ0 è¡¨ç¤ºç›´æ¥ï¼Œ1 è¡¨ç¤ºå…³è”ï¼Œ2 è¡¨ç¤ºé“¾è·¯;</li><li>**controlBehavior **âˆ¶ æµæ§æ•ˆæœï¼Œ0 è¡¨ç¤ºå¿«é€Ÿå¤±è´¥ï¼Œ1 è¡¨ç¤ºWarm Upï¼Œ2 è¡¨ç¤ºæ’é˜Ÿç­‰å¾…;</li><li>**clusterMode **âˆ¶ æ˜¯å¦é›†ç¾¤</li></ul><p><strong>3.</strong> <strong>ä¿®æ”¹</strong> <strong>member-service-nacos-consumer-80</strong> <strong>çš„</strong> <strong>pom.xml,</strong> <strong>åŠ å…¥</strong> <strong>sentinel</strong> <strong>å’Œ</strong> <strong>nacos</strong> <strong>æŒä¹…åŒ–æ•´åˆä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åŠ å…¥ sentinel å’Œ nacos æŒä¹…åŒ–æ•´åˆä¾èµ– --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.csp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sentinel-datasource-nacos<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>4.</strong> <strong>ä¿®æ”¹</strong> <strong>member-service-nacos-consumer-80</strong>çš„application.yml , é…ç½®è¯¥å¾®æœåŠ¡ä»Nacos  Serverè·å–æµæ§è§„åˆ™</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨åŸæœ¬çš„åŸºç¡€ä¸Šæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">sentinel:</span></span><br><span class="line">    <span class="comment"># é…ç½®è¯¥å¾®æœåŠ¡ä» Nacos Server è·å–æµæ§è§„åˆ™</span></span><br><span class="line">      <span class="attr">datasource:</span></span><br><span class="line">        <span class="attr">ds1:</span></span><br><span class="line">          <span class="attr">nacos:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">        <span class="attr">dataId:</span> <span class="string">member-service-nacos-consumer</span></span><br><span class="line">        <span class="attr">groupId:</span> <span class="string">DEFAULT_GROUP</span></span><br><span class="line">        <span class="attr">data-type:</span> <span class="string">json</span></span><br><span class="line">        <span class="attr">rule-type:</span> <span class="string">flow</span></span><br></pre></td></tr></table></figure><h4 id="10-10-3-4-æµ‹è¯•"><a href="#10-10-3-4-æµ‹è¯•" class="headerlink" title="10.10.3.4 æµ‹è¯•"></a>10.10.3.4 æµ‹è¯•</h4><h5 id="10-10-3-4-1-å¯åŠ¨-Nacos-Server-8848"><a href="#10-10-3-4-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="10.10.3.4.1 å¯åŠ¨ Nacos Server 8848"></a><strong>10.10.3.4.1</strong> å¯åŠ¨ Nacos Server 8848</h5><h5 id="10-10-3-4-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard"><a href="#10-10-3-4-2-å¯åŠ¨-Sentinel8080-æ§åˆ¶å°-x2F-Sentinel-dashboard" class="headerlink" title="10.10.3.4.2 å¯åŠ¨ Sentinel8080 æ§åˆ¶å°&#x2F;Sentinel dashboard"></a>10.10.3.4.2 å¯åŠ¨ <strong>Sentinel8080</strong> æ§åˆ¶å°&#x2F;Sentinel dashboard</h5><h5 id="10-10-3-4-3-å¯åŠ¨-member-service-nacos-provider-10004-x2F-10006"><a href="#10-10-3-4-3-å¯åŠ¨-member-service-nacos-provider-10004-x2F-10006" class="headerlink" title="10.10.3.4.3 å¯åŠ¨ **member-service-nacos-provider-10004&#x2F;10006 **"></a>10.10.3.4.3 å¯åŠ¨ **member-service-nacos-provider-10004&#x2F;10006 **</h5><h5 id="10-10-3-4-4-å¯åŠ¨-member-service-nacos-consumer-80"><a href="#10-10-3-4-4-å¯åŠ¨-member-service-nacos-consumer-80" class="headerlink" title="10.10.3.4.4 å¯åŠ¨ member-service-nacos-consumer-80"></a><strong>10.10.3.4.4</strong> å¯åŠ¨ member-service-nacos-consumer-80</h5><h5 id="10-10-3-4-5-æµè§ˆå™¨-http-localhost-member-openfeign-consumer-get-1"><a href="#10-10-3-4-5-æµè§ˆå™¨-http-localhost-member-openfeign-consumer-get-1" class="headerlink" title="10.10.3.4.5 æµè§ˆå™¨**: http://localhost/member/openfeign/consumer/get/1**"></a>10.10.3.4.5 æµè§ˆå™¨**: <a href="http://localhost/member/openfeign/consumer/get/1">http://localhost/member/openfeign/consumer/get/1</a>**</h5><p><strong>1.</strong> æµè§ˆå™¨è¾“å…¥**: <a href="http://localhost/member/openfeign/consumer/get/1">http://localhost/member/openfeign/consumer/get/1</a> ,** ç›®å‰æ˜¯ <strong>Openfeign</strong> è°ƒç”¨**(<strong>è´Ÿè½½å‡è¡¡</strong>),** <u><em><strong>è€Œä¸”æµæ§è§„åˆ™å·²ç»ç”Ÿæ•ˆäº†.</strong></em></u></p><p><strong>2.</strong> <strong>æŸ¥çœ‹</strong> <strong>Sentinel</strong> <strong>æ§åˆ¶å°</strong>,<strong>å‘ç°å·²ç»åŒæ­¥äº†æµæ§è§„åˆ™</strong></p><h4 id="10-10-3-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#10-10-3-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="10.10.3.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>10.10.3.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><p><strong>1.</strong> åœ¨ <strong>nacos server</strong> é…ç½® <strong>sentinel</strong> æµæ§è§„åˆ™çš„ <strong>Data ID</strong> ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šï¼Œæ¯”å¦‚å†™æˆ <strong>hsp-id,</strong> åªè¦åœ¨ **sentinel client&#x2F;**å¾®æœåŠ¡ çš„ <strong>applicaion.yml</strong> çš„ <strong>datasource.ds1.nacos.dataId</strong> çš„å€¼ä¿æŒä¸€è‡´å³å¯</p><p><strong>2.</strong> <strong>å¦‚å›¾æ‰€ç¤º</strong></p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630194533516.png" alt="image-20230630194533516" style="zoom:50%;" /><h1 id="11-SpringCloud-Alibaba-Seataå…¨å±€äº‹åŠ¡"><a href="#11-SpringCloud-Alibaba-Seataå…¨å±€äº‹åŠ¡" class="headerlink" title="11 SpringCloud Alibaba Seataå…¨å±€äº‹åŠ¡"></a>11 SpringCloud Alibaba Seataå…¨å±€äº‹åŠ¡</h1><p><strong>å…¨å±€äº‹åŠ¡</strong>â€”â€”ä¿è¯ä¸€ä¸ªç‰µæ‰¯ä¿®æ”¹å¤šä¸ªæ•°æ®åº“çš„æ“ä½œç”±äºæ„å¤–æƒ…å†µå¯¼è‡´æ•°æ®åº“ä¸­æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ</p><h2 id="11-1-SeataåŸºç¡€"><a href="#11-1-SeataåŸºç¡€" class="headerlink" title="11.1 SeataåŸºç¡€"></a>11.1 SeataåŸºç¡€</h2><h3 id="11-1-1-å…ˆçœ‹ä¸€ä¸ªé—®é¢˜ï¼Œå¼•å‡º-Seata"><a href="#11-1-1-å…ˆçœ‹ä¸€ä¸ªé—®é¢˜ï¼Œå¼•å‡º-Seata" class="headerlink" title="11.1.1 å…ˆçœ‹ä¸€ä¸ªé—®é¢˜ï¼Œå¼•å‡º Seata"></a><strong>11.1.1</strong> å…ˆçœ‹ä¸€ä¸ªé—®é¢˜ï¼Œå¼•å‡º <strong>Seata</strong></h3><p><strong>1.</strong> å•æœºå•åº“**(<strong>å¤šè¡¨</strong>)**å¤„ç†äº‹åŠ¡ç¤ºæ„å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630203651434.png" alt="image-20230630203651434"></p><p><strong>2.</strong> <strong>åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ä¸‹çš„æ•°æ®åº“äº‹åŠ¡ç¤ºæ„å›¾</strong>ï¼ˆRPCï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230630204333902.png" alt="image-20230630204333902" style="zoom:50%;" /><p><strong>3.</strong> <strong>æ¢³ç†ä¸Šå›¾</strong></p><p>ç”¨æˆ·è´­ä¹°å•†å“çš„ä¸šåŠ¡é€»è¾‘ã€‚æ•´ä¸ªä¸šåŠ¡é€»è¾‘ç”±3ä¸ªå¾®æœåŠ¡æä¾›æ”¯æŒâˆ¶</p><ul><li><strong>ä»“å‚¨æœåŠ¡âˆ¶å¯¹ç»™å®šçš„å•†å“æ‰£é™¤ä»“åº“&#x2F;å•†å“æ•°é‡</strong></li><li><strong>è®¢å•æœåŠ¡;æ ¹æ®é‡‡è´­éœ€æ±‚åˆ›å»ºè®¢å•</strong></li><li><strong>å¸æˆ·æœåŠ¡âˆ¶ä»ç”¨æˆ·å¸æˆ·ä¸­æ‰£é™¤ä½™é¢</strong></li></ul><p><strong>4.</strong> <strong>é—®é¢˜åˆ†æ</strong></p><ul><li><p><strong>å•ä½“åº”ç”¨è¢«æ‹†åˆ†æˆå¾®æœåŠ¡åº”ç”¨ï¼ŒåŸæ¥çš„ä¸‰ä¸ªæ¨¡å—è¢«æ‹†åˆ†æˆä¸‰ä¸ªç‹¬ç«‹çš„åº”ç”¨ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸‰ä¸ªç‹¬ç«‹çš„æ•°æ®æº</strong></p></li><li><p>ä¸šåŠ¡æ“ä½œéœ€è¦è°ƒç”¨ä¸‰ä¸ªæœåŠ¡æ¥å®Œæˆã€‚æ­¤æ—¶<strong>æ¯ä¸ªæœåŠ¡å†…éƒ¨çš„æ•°æ®ä¸€è‡´æ€§ç”±æœ¬åœ°äº‹åŠ¡æ¥ä¿è¯</strong></p></li><li><p><strong>ä½†æ˜¯å…¨å±€çš„æ•°æ®â€”è‡´æ€§é—®é¢˜æ²¡æ³•ä¿è¯</strong></p></li><li><p>ç®€å•çš„è¯´: <u>ä¸€æ¬¡ä¸šåŠ¡æ“ä½œéœ€è¦è·¨å¤šä¸ªæ•°æ®æºæˆ–éœ€è¦è·¨å¤šä¸ªç³»ç»Ÿè¿›è¡Œè¿œç¨‹è°ƒç”¨</u>ï¼Œå°±ä¼š<strong>äº§ç”Ÿåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜</strong>â€”â€“</p><p>â€”â€”-&gt;seata</p></li></ul><h3 id="11-1-2-åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜-amp-è§£å†³æ–¹æ¡ˆ"><a href="#11-1-2-åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜-amp-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="11.1.2 åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜**&amp;**è§£å†³æ–¹æ¡ˆ"></a><strong>11.1.2</strong> åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜**&amp;**è§£å†³æ–¹æ¡ˆ</h3><h4 id="11-1-2-1-åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ä¸‹çš„å…¨å±€æ•°æ®ä¸€è‡´æ€§é—®é¢˜-å³-åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜"><a href="#11-1-2-1-åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ä¸‹çš„å…¨å±€æ•°æ®ä¸€è‡´æ€§é—®é¢˜-å³-åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜" class="headerlink" title="11.1.2.1 åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ä¸‹çš„å…¨å±€æ•°æ®ä¸€è‡´æ€§é—®é¢˜ [å³: åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜]"></a>11.1.2.1 åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ä¸‹çš„å…¨å±€æ•°æ®ä¸€è‡´æ€§é—®é¢˜ [å³: åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜]</h4><h4 id="11-1-2-2-è§£å†³æ–¹æ¡ˆ-Seata"><a href="#11-1-2-2-è§£å†³æ–¹æ¡ˆ-Seata" class="headerlink" title="11.1.2.2 è§£å†³æ–¹æ¡ˆ: Seata"></a>11.1.2.2 è§£å†³æ–¹æ¡ˆ: Seata</h4><h3 id="11-1-3-å®˜ç½‘"><a href="#11-1-3-å®˜ç½‘" class="headerlink" title="11.1.3 å®˜ç½‘"></a><strong>11.1.3</strong> å®˜ç½‘</h3><h4 id="11-1-3-1-http-seata-io-zh-cn"><a href="#11-1-3-1-http-seata-io-zh-cn" class="headerlink" title="11.1.3.1 http://seata.io/zh-cn/"></a>11.1.3.1 <a href="http://seata.io/zh-cn/">http://seata.io/zh-cn/</a></h4><h4 id="11-1-3-2-ä½¿ç”¨æ‰‹å†Œ-https-seata-io-zh-cn-docs-overview-what-is-seata-html"><a href="#11-1-3-2-ä½¿ç”¨æ‰‹å†Œ-https-seata-io-zh-cn-docs-overview-what-is-seata-html" class="headerlink" title="11.1.3.2 ä½¿ç”¨æ‰‹å†Œ: https://seata.io/zh-cn/docs/overview/what-is-seata.html"></a>11.1.3.2 ä½¿ç”¨æ‰‹å†Œ: <a href="https://seata.io/zh-cn/docs/overview/what-is-seata.html">https://seata.io/zh-cn/docs/overview/what-is-seata.html</a></h4><h3 id="11-1-4-Seataæ˜¯ä»€ä¹ˆ"><a href="#11-1-4-Seataæ˜¯ä»€ä¹ˆ" class="headerlink" title="11.1.4 Seataæ˜¯ä»€ä¹ˆ?"></a>11.1.4 Seataæ˜¯ä»€ä¹ˆ?</h3><p>Seata æ˜¯ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œè‡´åŠ›äº<strong>åœ¨å¾®æœåŠ¡æ¶æ„ä¸‹æä¾›<u>é«˜æ€§èƒ½å’Œç®€å•æ˜“ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æœåŠ¡</u></strong></p><h2 id="11-2-ğŸŒŸSeata-å·¥ä½œæœºåˆ¶-x2F-è¿”è®²"><a href="#11-2-ğŸŒŸSeata-å·¥ä½œæœºåˆ¶-x2F-è¿”è®²" class="headerlink" title="11.2 ğŸŒŸSeata å·¥ä½œæœºåˆ¶&#x2F;è¿”è®²"></a>11.2 ğŸŒŸSeata å·¥ä½œæœºåˆ¶&#x2F;è¿”è®²</h2><h3 id="11-2-1-åˆ†å¸ƒå¼äº‹åŠ¡è¿‡ç¨‹åˆ†æ"><a href="#11-2-1-åˆ†å¸ƒå¼äº‹åŠ¡è¿‡ç¨‹åˆ†æ" class="headerlink" title="11.2.1 åˆ†å¸ƒå¼äº‹åŠ¡è¿‡ç¨‹åˆ†æ"></a><strong>11.2.1</strong> åˆ†å¸ƒå¼äº‹åŠ¡è¿‡ç¨‹åˆ†æ</h3><p><strong>1. Seata</strong> åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†è¿‡ç¨‹-ID+ä¸‰ç»„ä»¶æ¨¡å‹</p><p><strong>2.</strong> ä¸€å›¾èƒœåƒè¨€</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703150121800.png" alt="image-20230703150121800"></p><p>ä¸Šå›¾å±•ç¤ºäº†ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡åœ¨Seataçš„å¤„ç†è¿‡ç¨‹</p><ul><li>Transaction ID <strong>XID</strong>:å…¨å±€å”¯ä¸€çš„äº‹åŠ¡ID</li><li>Transaction Coordinator(<strong>TC</strong>): äº‹åŠ¡åè°ƒå™¨ï¼Œ<u>ç»´æŠ¤å…¨å±€äº‹åŠ¡çš„è¿è¡ŒçŠ¶æ€</u>ï¼Œè´Ÿè´£<u>åè°ƒå¹¶é©±åŠ¨å…¨å±€äº‹åŠ¡çš„æäº¤æˆ–å›æ»š</u></li><li>Transaction Manager(<strong>TM</strong>): æ§åˆ¶<u>å…¨å±€äº‹åŠ¡</u>çš„è¾¹ç•Œï¼Œè´Ÿè´£å¼€å¯ä¸€ä¸ªå…¨å±€äº‹åŠ¡ï¼Œå¹¶æœ€ç»ˆå‘èµ·å…¨å±€æäº¤æˆ–å…¨å±€å›æ»šçš„å†³è®®;</li><li>Resource Manager(<strong>RM</strong>):æ§åˆ¶<u>åˆ†æ”¯äº‹åŠ¡</u>ï¼Œè´Ÿè´£åˆ†æ”¯æ³¨å†Œï¼ŒçŠ¶æ€æ±‡æŠ¥ï¼Œå¹¶æ¥æ”¶äº‹åŠ¡åè°ƒå™¨çš„æŒ‡ä»¤ï¼Œé©±åŠ¨åˆ†æ”¯ (æœ¬åœ°)äº‹åŠ¡çš„<strong>æäº¤å’Œå›æ»š</strong></li></ul><p>æ‰§è¡Œè¿‡ç¨‹</p><ul><li>TMå‘ TCç”³è¯·å¼€å¯ä¸€ä¸ªå…¨å±€äº‹åŠ¡ï¼Œå…¨å±€äº‹åŠ¡åˆ›å»ºæˆåŠŸå¹¶ç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ XID</li><li>XIDåœ¨å¾®æœåŠ¡è°ƒç”¨é“¾è·¯çš„ä¸Šä¸‹æ–‡ä¸­ä¼ æ’­</li><li>RM å‘ TCæ³¨å†Œåˆ†æ”¯äº‹åŠ¡ï¼Œå°†å…¶çº³å…¥ XID å¯¹åº”å…¨å±€äº‹åŠ¡çš„ç®¡è¾–</li><li>TM å‘ TC å‘èµ·é’ˆå¯¹ XID çš„å…¨å±€æäº¤æˆ–å›æ»šå†³è®®ã€‚</li><li>TC è°ƒåº¦ XIDä¸‹ç®¡è¾–çš„å…¨éƒ¨åˆ†æ”¯äº‹åŠ¡å®Œæˆæäº¤æˆ–å›æ»šè¯·æ±‚</li></ul><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703152243363.png" alt="image-20230703152243363" style="zoom:150%;" /><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703152337277.png" alt="image-20230703152337277"></p><h3 id="11-2-2-Seata-äº‹åŠ¡æ¨¡å¼"><a href="#11-2-2-Seata-äº‹åŠ¡æ¨¡å¼" class="headerlink" title="11.2.2 Seata äº‹åŠ¡æ¨¡å¼"></a>11.2.2 Seata äº‹åŠ¡æ¨¡å¼</h3><p><strong>1.</strong> <strong>åœ°å€</strong>: <a href="https://seata.io/zh-cn/docs/overview/what-is-seata.html">https://seata.io/zh-cn/docs/overview/what-is-seata.html</a></p><h4 id="11-2-2-1-AT-é»˜è®¤æ¨¡å¼"><a href="#11-2-2-1-AT-é»˜è®¤æ¨¡å¼" class="headerlink" title="11.2.2.1 AT(é»˜è®¤æ¨¡å¼)"></a>11.2.2.1 AT(é»˜è®¤æ¨¡å¼)</h4><h4 id="11-2-2-2-TCC"><a href="#11-2-2-2-TCC" class="headerlink" title="11.2.2.2 TCC"></a>11.2.2.2 TCC</h4><h4 id="11-2-2-3-SAGA"><a href="#11-2-2-3-SAGA" class="headerlink" title="11.2.2.3 SAGA"></a>11.2.2.3 SAGA</h4><h4 id="11-2-2-4-XA"><a href="#11-2-2-4-XA" class="headerlink" title="11.2.2.4 XA"></a>11.2.2.4 XA</h4><h3 id="11-2-3-ATæ— ä¾µå…¥æ¨¡å¼"><a href="#11-2-3-ATæ— ä¾µå…¥æ¨¡å¼" class="headerlink" title="11.2.3 ATæ— ä¾µå…¥æ¨¡å¼"></a>11.2.3 ATæ— ä¾µå…¥æ¨¡å¼</h3><h4 id="11-2-3-1-æ–‡æ¡£-https-seata-io-zh-cn-docs-overview-what-is-seata-html"><a href="#11-2-3-1-æ–‡æ¡£-https-seata-io-zh-cn-docs-overview-what-is-seata-html" class="headerlink" title="11.2.3.1 æ–‡æ¡£: https://seata.io/zh-cn/docs/overview/what-is-seata.html"></a>11.2.3.1 æ–‡æ¡£: <a href="https://seata.io/zh-cn/docs/overview/what-is-seata.html">https://seata.io/zh-cn/docs/overview/what-is-seata.html</a></h4><h4 id="11-2-3-2-ä¸€é˜¶æ®µåŠ è½½"><a href="#11-2-3-2-ä¸€é˜¶æ®µåŠ è½½" class="headerlink" title="11.2.3.2 ä¸€é˜¶æ®µåŠ è½½"></a>11.2.3.2 ä¸€é˜¶æ®µåŠ è½½</h4><p>åœ¨ä¸€é˜¶æ®µï¼Œ<strong>Seata</strong> ä¼šæ‹¦æˆª**â€**ä¸šåŠ¡ <strong>SQLâ€</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703161643439.png" alt="image-20230703161643439"></p><ol><li><p>è§£æ SQL è¯­ä¹‰ï¼Œæ‰¾åˆ°â€œä¸šåŠ¡SQLâ€è¦æ›´æ–°çš„ä¸šåŠ¡æ•°æ®ï¼Œåœ¨ä¸šåŠ¡æ•°æ®è¢«æ›´æ–°å‰ï¼Œå°†å…¶ä¿å­˜æˆâ€before imageâ€(å‰ç½é•œåƒï¼‰</p></li><li><p>æ‰§è¡Œâ€ä¸šåŠ¡ SQLâ€æ›´æ–°ä¸šåŠ¡æ•°æ®ï¼Œåœ¨ä¸šåŠ¡æ•°æ®æ›´æ–°ä¹‹åï¼Œå…¶ä¿å­˜æˆâ€after imageâ€ &#x2F;åç½®é•œåƒ</p></li><li><p>æœ€åç”Ÿæˆè¡Œé”</p></li><li><p>ä»¥ä¸Šæ“ä½œå…¨éƒ¨åœ¨ä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡å†…å®Œæˆï¼Œè¿™æ ·ä¿è¯äº†ä¸€é˜¶æ®µæ“ä½œçš„åŸå­æ€§</p></li></ol><p>å…¶ä¸­ï¼Œ<strong>å‰åƒä¸ååƒå­˜äºundo_logæ•°æ®è¡¨ä¸­</strong></p><h4 id="11-2-3-3-äºŒé˜¶æ®µæäº¤"><a href="#11-2-3-3-äºŒé˜¶æ®µæäº¤" class="headerlink" title="11.2.3.3 äºŒé˜¶æ®µæäº¤"></a>11.2.3.3 äºŒé˜¶æ®µæäº¤</h4><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703162629147.png" alt="image-20230703162629147" style="zoom: 40%;" /><p><strong>1.</strong> <strong>äºŒé˜¶æ®µå¦‚æœæ˜¯é¡ºåˆ©æäº¤</strong></p><p><strong>2.</strong> <strong>å› ä¸ºâ€ä¸šåŠ¡ SQLâ€åœ¨ä¸€é˜¶æ®µå·²ç»æäº¤è‡³æ•°æ®åº“ï¼Œæ‰€ä»¥ Seata æ¡†æ¶åªéœ€å°†ä¸€é˜¶æ®µä¿å­˜çš„å¿«ç…§æ•°æ®å’Œè¡Œé”åˆ æ‰ï¼Œå®Œæˆæ•°æ®æ¸…ç†å³å¯</strong></p><h4 id="11-2-3-4-äºŒé˜¶æ®µå›æ»š"><a href="#11-2-3-4-äºŒé˜¶æ®µå›æ»š" class="headerlink" title="11.2.3.4 äºŒé˜¶æ®µå›æ»š"></a>11.2.3.4 äºŒé˜¶æ®µå›æ»š</h4><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703162812449.png" alt="image-20230703162812449"></p><ol><li><p>äºŒé˜¶æ®µå¦‚æœæ˜¯å›æ»šçš„è¯ï¼Œseata å°±éœ€è¦<strong>å›æ»šä¸€é˜¶æ®µå·±ç»æ‰§è¡Œçš„â€œä¸šåŠ¡ SQLâ€â€˜ï¼Œè¿˜åŸä¸šåŠ¡æ•°æ®</strong>ã€‚</p></li><li><p>å›æ»šæ–¹å¼ä¾¿æ˜¯ç”¨â€before imageâ€è¿˜åŸä¸šåŠ¡æ•°æ®;ä½†åœ¨è¿˜åŸå‰è¦é¦–å…ˆè¦æ ¡éªŒè„å·ï¼Œå¯¹æ¯”â€æ•°æ®åº“å½“å‰ä¸šåŠ¡æ•°æ®â€å’Œâ€after image å¦‚æœä¸¤ä»½æ•°æ®å®Œå…¨ä¸€è‡´å°±è¯´æ˜æ²¡æœ‰è„å†™ï¼Œå¯ä»¥è¿˜åŸä¸šåŠ¡æ•°æ®</p></li><li><p>å¦‚æœä¸ä¸€è‡´å°±è¯´æ˜æœ‰è„å†™ï¼Œå‡ºç°è„å†™å°±éœ€è¦è½¬äººå·¥å¤„ç†</p></li></ol><h3 id="11-2-4-ATäº‹åŠ¡æ¨¡å¼DebugéªŒè¯"><a href="#11-2-4-ATäº‹åŠ¡æ¨¡å¼DebugéªŒè¯" class="headerlink" title="11.2.4 ATäº‹åŠ¡æ¨¡å¼DebugéªŒè¯"></a>11.2.4 AT<strong>äº‹åŠ¡æ¨¡å¼</strong>DebugéªŒè¯</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703163149523.png" alt="image-20230703163149523"></p><h3 id="11-2-5-SEATAçš„åˆ†å¸ƒå¼äº¤æ˜“è§£å†³æ–¹æ¡ˆ"><a href="#11-2-5-SEATAçš„åˆ†å¸ƒå¼äº¤æ˜“è§£å†³æ–¹æ¡ˆ" class="headerlink" title="11.2.5 SEATAçš„åˆ†å¸ƒå¼äº¤æ˜“è§£å†³æ–¹æ¡ˆ"></a>11.2.5 SEATAçš„åˆ†å¸ƒå¼äº¤æ˜“è§£å†³æ–¹æ¡ˆ</h3><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703163341180.png" alt="image-20230703163341180"></p><h2 id="11-3-SeataServerå®‰è£…"><a href="#11-3-SeataServerå®‰è£…" class="headerlink" title="11.3 SeataServerå®‰è£…"></a>11.3 SeataServerå®‰è£…</h2><h3 id="11-3-1-ä¸‹è½½"><a href="#11-3-1-ä¸‹è½½" class="headerlink" title="11.3.1 ä¸‹è½½"></a><strong>11.3.1</strong> ä¸‹è½½</h3><h4 id="11-3-1-1-https-github-com-seata-seata-releases-tag-v0-9-0"><a href="#11-3-1-1-https-github-com-seata-seata-releases-tag-v0-9-0" class="headerlink" title="11.3.1.1 https://github.com/seata/seata/releases/tag/v0.9.0"></a>11.3.1.1 <a href="https://github.com/seata/seata/releases/tag/v0.9.0">https://github.com/seata/seata/releases/tag/v0.9.0</a></h4><h3 id="11-3-2-å®‰è£…å’Œé…ç½®"><a href="#11-3-2-å®‰è£…å’Œé…ç½®" class="headerlink" title="11.3.2 å®‰è£…å’Œé…ç½®"></a><strong>11.3.2</strong> å®‰è£…å’Œé…ç½®</h3><p><strong>1.</strong> å°† <strong>seata-server-0.9.0.zip</strong> è§£å‹åˆ° æŒ‡å®šç›®å½•ï¼Œæ¯”å¦‚ <strong>d:\program</strong></p><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>conf\file.conf</strong> <strong>æ–‡ä»¶</strong>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">transport &#123;</span><br><span class="line">  # tcp udt unix-domain-socket</span><br><span class="line">  type = <span class="string">&quot;TCP&quot;</span></span><br><span class="line">  #<span class="variable constant_">NIO</span> <span class="variable constant_">NATIVE</span></span><br><span class="line">  server = <span class="string">&quot;NIO&quot;</span></span><br><span class="line">  #enable heartbeat</span><br><span class="line">  heartbeat = <span class="literal">true</span></span><br><span class="line">  #thread factory <span class="keyword">for</span> netty</span><br><span class="line">  thread-factory &#123;</span><br><span class="line">    boss-thread-prefix = <span class="string">&quot;NettyBoss&quot;</span></span><br><span class="line">    worker-thread-prefix = <span class="string">&quot;NettyServerNIOWorker&quot;</span></span><br><span class="line">    server-executor-thread-prefix = <span class="string">&quot;NettyServerBizHandler&quot;</span></span><br><span class="line">    share-boss-worker = <span class="literal">false</span></span><br><span class="line">    client-selector-thread-prefix = <span class="string">&quot;NettyClientSelector&quot;</span></span><br><span class="line">    client-selector-thread-size = <span class="number">1</span></span><br><span class="line">    client-worker-thread-prefix = <span class="string">&quot;NettyClientWorkerThread&quot;</span></span><br><span class="line">    # netty boss thread size,will not be used <span class="keyword">for</span> <span class="variable constant_">UDT</span></span><br><span class="line">    boss-thread-size = <span class="number">1</span></span><br><span class="line">    #auto <span class="keyword">default</span> pin or <span class="number">8</span></span><br><span class="line">    worker-thread-size = <span class="number">8</span></span><br><span class="line">  &#125;</span><br><span class="line">  shutdown &#123;</span><br><span class="line">    # when destroy server, wait seconds</span><br><span class="line">    wait = <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">  serialization = <span class="string">&quot;seata&quot;</span></span><br><span class="line">  compressor = <span class="string">&quot;none&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">service &#123;</span><br><span class="line">  #vgroup-&gt;rgroup</span><br><span class="line">  #vgroup_mapping.<span class="property">my_test_tx_group</span> = <span class="string">&quot;default&quot;</span></span><br><span class="line">  vgroup_mapping.<span class="property">my_test_tx_group</span> = <span class="string">&quot;hspedu_order_tx_group&quot;</span></span><br><span class="line">  #only support single node</span><br><span class="line">  <span class="keyword">default</span>.<span class="property">grouplist</span> = <span class="string">&quot;127.0.0.1:8091&quot;</span></span><br><span class="line">  #degrade current not support</span><br><span class="line">  enableDegrade = <span class="literal">false</span></span><br><span class="line">  #disable</span><br><span class="line">  disable = <span class="literal">false</span></span><br><span class="line">  #unit ms,s,m,h,d represents milliseconds, seconds, minutes, hours, days, <span class="keyword">default</span> permanent</span><br><span class="line">  max.<span class="property">commit</span>.<span class="property">retry</span>.<span class="property">timeout</span> = <span class="string">&quot;-1&quot;</span></span><br><span class="line">  max.<span class="property">rollback</span>.<span class="property">retry</span>.<span class="property">timeout</span> = <span class="string">&quot;-1&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">client &#123;</span><br><span class="line">  <span class="keyword">async</span>.<span class="property">commit</span>.<span class="property">buffer</span>.<span class="property">limit</span> = <span class="number">10000</span></span><br><span class="line">  lock &#123;</span><br><span class="line">    retry.<span class="property">internal</span> = <span class="number">10</span></span><br><span class="line">    retry.<span class="property">times</span> = <span class="number">30</span></span><br><span class="line">  &#125;</span><br><span class="line">  report.<span class="property">retry</span>.<span class="property">count</span> = <span class="number">5</span></span><br><span class="line">  tm.<span class="property">commit</span>.<span class="property">retry</span>.<span class="property">count</span> = <span class="number">1</span></span><br><span class="line">  tm.<span class="property">rollback</span>.<span class="property">retry</span>.<span class="property">count</span> = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">## transaction log store</span><br><span class="line">store &#123;</span><br><span class="line">  ## store <span class="attr">mode</span>: fileã€db</span><br><span class="line">  ##mode = <span class="string">&quot;file&quot;</span></span><br><span class="line">  mode = <span class="string">&quot;db&quot;</span></span><br><span class="line"></span><br><span class="line">  ## file store</span><br><span class="line">  file &#123;</span><br><span class="line">    dir = <span class="string">&quot;sessionStore&quot;</span></span><br><span class="line"></span><br><span class="line">    # branch session size , <span class="keyword">if</span> exceeded first <span class="keyword">try</span> compress lockkey, still exceeded throws exceptions</span><br><span class="line">    max-branch-session-size = <span class="number">16384</span></span><br><span class="line">    # globe session size , <span class="keyword">if</span> exceeded throws exceptions</span><br><span class="line">    max-<span class="variable language_">global</span>-session-size = <span class="number">512</span></span><br><span class="line">    # file buffer size , <span class="keyword">if</span> exceeded allocate <span class="keyword">new</span> buffer</span><br><span class="line">    file-write-buffer-cache-size = <span class="number">16384</span></span><br><span class="line">    # when recover batch read size</span><br><span class="line">    session.<span class="property">reload</span>.<span class="property">read_size</span> = <span class="number">100</span></span><br><span class="line">    # <span class="keyword">async</span>, sync</span><br><span class="line">    flush-disk-mode = <span class="keyword">async</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ## database store</span><br><span class="line">  db &#123;</span><br><span class="line">    ## the implement <span class="keyword">of</span> javax.<span class="property">sql</span>.<span class="property">DataSource</span>, such <span class="keyword">as</span> <span class="title class_">DruidDataSource</span>(druid)/<span class="title class_">BasicDataSource</span>(dbcp) etc.</span><br><span class="line">    datasource = <span class="string">&quot;dbcp&quot;</span></span><br><span class="line">    ## mysql/oracle/h2/oceanbase etc.</span><br><span class="line">    db-type = <span class="string">&quot;mysql&quot;</span></span><br><span class="line">    driver-<span class="keyword">class</span>-name = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span><br><span class="line">    url = <span class="string">&quot;jdbc:mysql://127.0.0.1:3306/seata&quot;</span></span><br><span class="line">    ##user = <span class="string">&quot;mysql&quot;</span></span><br><span class="line">    user = <span class="string">&quot;root&quot;</span></span><br><span class="line">    ##password = <span class="string">&quot;mysql&quot;</span></span><br><span class="line">    password = <span class="string">&quot;QWEASDzxc123&quot;</span></span><br><span class="line">    min-conn = <span class="number">1</span></span><br><span class="line">    max-conn = <span class="number">3</span></span><br><span class="line">    <span class="variable language_">global</span>.<span class="property">table</span> = <span class="string">&quot;global_table&quot;</span></span><br><span class="line">    branch.<span class="property">table</span> = <span class="string">&quot;branch_table&quot;</span></span><br><span class="line">    lock-table = <span class="string">&quot;lock_table&quot;</span></span><br><span class="line">    query-limit = <span class="number">100</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">lock &#123;</span><br><span class="line">  ## the lock store <span class="attr">mode</span>: localã€remote</span><br><span class="line">  mode = <span class="string">&quot;remote&quot;</span></span><br><span class="line"></span><br><span class="line">  local &#123;</span><br><span class="line">    ## store locks <span class="keyword">in</span> user<span class="string">&#x27;s database</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  remote &#123;</span></span><br><span class="line"><span class="string">    ## store locks in the seata&#x27;</span>s server</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">recovery &#123;</span><br><span class="line">  #schedule committing retry period <span class="keyword">in</span> milliseconds</span><br><span class="line">  committing-retry-period = <span class="number">1000</span></span><br><span class="line">  #schedule asyn committing retry period <span class="keyword">in</span> milliseconds</span><br><span class="line">  asyn-committing-retry-period = <span class="number">1000</span></span><br><span class="line">  #schedule rollbacking retry period <span class="keyword">in</span> milliseconds</span><br><span class="line">  rollbacking-retry-period = <span class="number">1000</span></span><br><span class="line">  #schedule timeout retry period <span class="keyword">in</span> milliseconds</span><br><span class="line">  timeout-retry-period = <span class="number">1000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">transaction &#123;</span><br><span class="line">  undo.<span class="property">data</span>.<span class="property">validation</span> = <span class="literal">true</span></span><br><span class="line">  undo.<span class="property">log</span>.<span class="property">serialization</span> = <span class="string">&quot;jackson&quot;</span></span><br><span class="line">  undo.<span class="property">log</span>.<span class="property">save</span>.<span class="property">days</span> = <span class="number">7</span></span><br><span class="line">  #schedule <span class="keyword">delete</span> expired undo_log <span class="keyword">in</span> milliseconds</span><br><span class="line">  undo.<span class="property">log</span>.<span class="property">delete</span>.<span class="property">period</span> = <span class="number">86400000</span></span><br><span class="line">  undo.<span class="property">log</span>.<span class="property">table</span> = <span class="string">&quot;undo_log&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">## metrics settings</span><br><span class="line">metrics &#123;</span><br><span class="line">  enabled = <span class="literal">false</span></span><br><span class="line">  registry-type = <span class="string">&quot;compact&quot;</span></span><br><span class="line">  # multi exporters use comma divided</span><br><span class="line">  exporter-list = <span class="string">&quot;prometheus&quot;</span></span><br><span class="line">  exporter-prometheus-port = <span class="number">9898</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">support &#123;</span><br><span class="line">  ## spring</span><br><span class="line">  spring &#123;</span><br><span class="line">    # auto proxy the <span class="title class_">DataSource</span> bean</span><br><span class="line">    datasource.<span class="property">autoproxy</span> = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3.</strong> <strong>åœ¨</strong> <strong>mysql5.7</strong> <strong>åˆ›å»º</strong> <strong>seata</strong> <strong>æ•°æ®åº“</strong></p><p><strong>4.</strong> <strong>ä¿®æ”¹</strong> <strong>seata</strong> <strong>çš„</strong> <strong>\conf\registry.conf ,</strong> <strong>é…ç½®æ³¨å†Œä¸­å¿ƒ</strong> <strong>nacos server</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">registry &#123;</span><br><span class="line">  # file ã€nacos ã€eurekaã€redisã€zkã€consulã€etcd3ã€sofa</span><br><span class="line">  # type = <span class="string">&quot;file&quot;</span></span><br><span class="line">  type = <span class="string">&quot;nacos&quot;</span></span><br><span class="line"></span><br><span class="line">  nacos &#123;</span><br><span class="line">    # serverAddr = <span class="string">&quot;localhost&quot;</span></span><br><span class="line">    serverAddr = <span class="string">&quot;localhost:8848&quot;</span></span><br><span class="line">    namespace = <span class="string">&quot;&quot;</span></span><br><span class="line">    cluster = <span class="string">&quot;default&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  eureka &#123;</span><br><span class="line">    serviceUrl = <span class="string">&quot;http://localhost:8761/eureka&quot;</span></span><br><span class="line">    application = <span class="string">&quot;default&quot;</span></span><br><span class="line">    weight = <span class="string">&quot;1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  redis &#123;</span><br><span class="line">    serverAddr = <span class="string">&quot;localhost:6379&quot;</span></span><br><span class="line">    db = <span class="string">&quot;0&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  zk &#123;</span><br><span class="line">    cluster = <span class="string">&quot;default&quot;</span></span><br><span class="line">    serverAddr = <span class="string">&quot;127.0.0.1:2181&quot;</span></span><br><span class="line">    session.<span class="property">timeout</span> = <span class="number">6000</span></span><br><span class="line">    connect.<span class="property">timeout</span> = <span class="number">2000</span></span><br><span class="line">  &#125;</span><br><span class="line">  consul &#123;</span><br><span class="line">    cluster = <span class="string">&quot;default&quot;</span></span><br><span class="line">    serverAddr = <span class="string">&quot;127.0.0.1:8500&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  etcd3 &#123;</span><br><span class="line">    cluster = <span class="string">&quot;default&quot;</span></span><br><span class="line">    serverAddr = <span class="string">&quot;http://localhost:2379&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  sofa &#123;</span><br><span class="line">    serverAddr = <span class="string">&quot;127.0.0.1:9603&quot;</span></span><br><span class="line">    application = <span class="string">&quot;default&quot;</span></span><br><span class="line">    region = <span class="string">&quot;DEFAULT_ZONE&quot;</span></span><br><span class="line">    datacenter = <span class="string">&quot;DefaultDataCenter&quot;</span></span><br><span class="line">    cluster = <span class="string">&quot;default&quot;</span></span><br><span class="line">    group = <span class="string">&quot;SEATA_GROUP&quot;</span></span><br><span class="line">    addressWaitTime = <span class="string">&quot;3000&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  file &#123;</span><br><span class="line">    name = <span class="string">&quot;file.conf&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">config &#123;</span><br><span class="line">  # fileã€nacos ã€apolloã€zkã€consulã€etcd3</span><br><span class="line">  type = <span class="string">&quot;file&quot;</span></span><br><span class="line"></span><br><span class="line">  nacos &#123;</span><br><span class="line">    serverAddr = <span class="string">&quot;localhost&quot;</span></span><br><span class="line">    namespace = <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  consul &#123;</span><br><span class="line">    serverAddr = <span class="string">&quot;127.0.0.1:8500&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  apollo &#123;</span><br><span class="line">    app.<span class="property">id</span> = <span class="string">&quot;seata-server&quot;</span></span><br><span class="line">    apollo.<span class="property">meta</span> = <span class="string">&quot;http://192.168.1.204:8801&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  zk &#123;</span><br><span class="line">    serverAddr = <span class="string">&quot;127.0.0.1:2181&quot;</span></span><br><span class="line">    session.<span class="property">timeout</span> = <span class="number">6000</span></span><br><span class="line">    connect.<span class="property">timeout</span> = <span class="number">2000</span></span><br><span class="line">  &#125;</span><br><span class="line">  etcd3 &#123;</span><br><span class="line">    serverAddr = <span class="string">&quot;http://localhost:2379&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  file &#123;</span><br><span class="line">    name = <span class="string">&quot;file.conf&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="11-3-3-å¯åŠ¨"><a href="#11-3-3-å¯åŠ¨" class="headerlink" title="11.3.3 å¯åŠ¨"></a><strong>11.3.3</strong> å¯åŠ¨</h3><h4 id="11-3-3-1-å¯åŠ¨-Nacos-Server-8848"><a href="#11-3-3-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="11.3.3.1 å¯åŠ¨ Nacos Server 8848"></a>11.3.3.1 å¯åŠ¨ Nacos Server 8848</h4><h4 id="11-3-3-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server"><a href="#11-3-3-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server" class="headerlink" title="11.3.3.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server"></a>11.3.3.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server</h4><p><strong>1.</strong> å¯åŠ¨ <strong>seata-server.bat ,</strong> çœ‹åˆ°å¦‚ä¸‹ç•Œé¢è¯´æ˜æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /Applications/seata/bin</span><br><span class="line">./seata-server.sh -h 127.0.0.1 -p 8848 -m db -n 1 </span><br></pre></td></tr></table></figure><h4 id="11-3-3-3-ç™»å½•-Nacos-Server-æŸ¥çœ‹-Seata-Server-æ˜¯å¦æ³¨å†ŒæˆåŠŸ"><a href="#11-3-3-3-ç™»å½•-Nacos-Server-æŸ¥çœ‹-Seata-Server-æ˜¯å¦æ³¨å†ŒæˆåŠŸ" class="headerlink" title="11.3.3.3 ç™»å½• Nacos Server , æŸ¥çœ‹ Seata Server æ˜¯å¦æ³¨å†ŒæˆåŠŸ"></a>11.3.3.3 ç™»å½• Nacos Server , æŸ¥çœ‹ Seata Server æ˜¯å¦æ³¨å†ŒæˆåŠŸ</h4><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230702162714540.png" alt="image-20230702162714540"></p><h2 id="11-4-Seata-åˆ†å¸ƒå¼äº‹åŠ¡-åº”ç”¨å®ä¾‹"><a href="#11-4-Seata-åˆ†å¸ƒå¼äº‹åŠ¡-åº”ç”¨å®ä¾‹" class="headerlink" title="11.4 Seata åˆ†å¸ƒå¼äº‹åŠ¡-åº”ç”¨å®ä¾‹"></a>11.4 Seata åˆ†å¸ƒå¼äº‹åŠ¡-åº”ç”¨å®ä¾‹</h2><h3 id="11-4-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£"><a href="#11-4-1-éœ€æ±‚åˆ†æ-x2F-å›¾è§£" class="headerlink" title="11.4.1 éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£"></a><strong>11.4.1</strong> éœ€æ±‚åˆ†æ**&#x2F;**å›¾è§£</h3><p><strong>1.</strong> éœ€æ±‚:å®Œæˆä¸‹è®¢å•åŠŸèƒ½ï¼Œç”±ä¸‰ä¸ªå¾®æœåŠ¡æ¨¡å—ååŒå®Œæˆ**,** æ¶‰åŠåˆ°å¤šæ•°æ®åº“**,** å¤šå¼ è¡¨</p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230702164527518.png" alt="image-20230702164527518" style="zoom:50%;" /><h3 id="11-4-2-åˆ›å»ºæ•°æ®åº“å’Œè¡¨"><a href="#11-4-2-åˆ›å»ºæ•°æ®åº“å’Œè¡¨" class="headerlink" title="11.4.2 åˆ›å»ºæ•°æ®åº“å’Œè¡¨"></a>11.4.2 åˆ›å»ºæ•°æ®åº“å’Œè¡¨</h3><p><strong>1.</strong> åˆ›å»ºä¸šåŠ¡æ•°æ®åº“å’Œè¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è®¢å•å¾®æœåŠ¡çš„æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE order_micro_service </span><br><span class="line">USE order_micro_service</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">order</span>`(</span><br><span class="line">id <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">user_id <span class="type">BIGINT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> ,</span><br><span class="line">product_id <span class="type">BIGINT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> ,</span><br><span class="line">nums <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> ,</span><br><span class="line">money <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`status` <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;0:åˆ›å»ºä¸­; 1:å·²å®Œç»“&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `<span class="keyword">order</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åº“å­˜å¾®æœåŠ¡çš„æ•°æ®åº“`storage``order` </span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE storage_micro_service </span><br><span class="line">USE storage_micro_service</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `storage`(</span><br><span class="line">id <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY, </span><br><span class="line">  product_id <span class="type">BIGINT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> ,</span><br><span class="line">amount <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åº“å­˜é‡&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆå§‹åŒ–åº“å­˜è¡¨</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `storage` <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>, <span class="number">1</span>, <span class="number">10</span>); </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `storage`</span><br><span class="line"><span class="comment">-- è´¦å·å¾®æœåŠ¡çš„æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE account_micro_service </span><br><span class="line">USE account_micro_service</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `account`(</span><br><span class="line">id <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY , </span><br><span class="line">  user_id <span class="type">BIGINT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> ,</span><br><span class="line">money <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è´¦æˆ·é‡‘é¢&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆå§‹åŒ–è´¦æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `account` <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>, <span class="number">666</span>, <span class="number">10000</span>);</span><br></pre></td></tr></table></figure><p><strong>2.</strong> åˆ†åˆ«ä¸º <strong>3</strong> åº“åˆ›å»ºå¯¹åº”çš„å›æ»šæ—¥å¿—è¡¨**,** è¯´æ˜å›æ»šæ—¥å¿—è¡¨åœ¨ <strong>seata</strong> çš„ <strong>\conf\db_undo_log.sql</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">use order_micro_service </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `undo_log` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT, </span><br><span class="line">  `branch_id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`xid` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`context` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `rollback_info` longblob <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `log_status` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`log_created` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `log_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `ext` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line"><span class="keyword">UNIQUE</span> KEY `ux_undo_log` (`xid`,`branch_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">1</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">use storage_micro_service </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `undo_log` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT, </span><br><span class="line">  `branch_id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`xid` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`context` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `rollback_info` longblob <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `log_status` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`log_created` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `log_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `ext` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line"><span class="keyword">UNIQUE</span> KEY `ux_undo_log` (`xid`,`branch_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">1</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">use account_micro_service </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `undo_log` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT, </span><br><span class="line">  `branch_id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`xid` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`context` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `rollback_info` longblob <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `log_status` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`log_created` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `log_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  `ext` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>, </span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line"><span class="keyword">UNIQUE</span> KEY `ux_undo_log` (`xid`,`branch_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">1</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="11-4-3-å¼€å‘-seata-storage-micro-service-10010-å¾®æœåŠ¡"><a href="#11-4-3-å¼€å‘-seata-storage-micro-service-10010-å¾®æœåŠ¡" class="headerlink" title="11.4.3 å¼€å‘ seata_storage_micro_service-10010 å¾®æœåŠ¡"></a>11.4.3 å¼€å‘ seata_storage_micro_service-10010 å¾®æœåŠ¡</h3><p><strong>1.</strong> å‚è€ƒä»¥å‰çš„æ–¹å¼ï¼Œåˆ›å»º <strong>seata_storage_micro_service-10010</strong> å¾®æœåŠ¡æ¨¡å—</p><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>pom.xml,</strong> <strong>æ·»åŠ ç›¸å…³çš„</strong> <strong>jar</strong> <strong>ä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æç¤º application.yml --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥ openfeignï¼Œå› ä¸ºå¯èƒ½éœ€è¦ç”¨åˆ°è¿œç¨‹è°ƒç”¨ --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- åœ¨å¾®æœåŠ¡æ¨¡å—å¼•å…¥ nacos-discovery starter --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--seata--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-seata<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ’é™¤è‡ªå¸¦çš„ seata-all --&gt;</span> </span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>seata-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.seata<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å¼•å…¥æŒ‡å®šç‰ˆæœ¬çš„ io.seata --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.seata<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>seata-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å¼•å…¥ e_commerce_center-common-api --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hspedu.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>e_commerce_center-common-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!-- è¿™é‡Œæˆ‘ä»¬é‡æ–°æŒ‡å®šä¸€ä¸‹ version --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3.</strong> <strong>åˆ›å»º</strong> <strong>application.yml,</strong> <strong>è¿›è¡Œç›¸å…³çš„é…ç½®</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10010</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">seata_storage_micor_service</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">alibaba:</span></span><br><span class="line">      <span class="attr">seata:</span></span><br><span class="line">        <span class="comment">#è‡ªå®šä¹‰äº‹åŠ¡ç»„åç§°éœ€è¦ä¸ seata-server ä¸­çš„å¯¹åº”,çœ‹ \conf\file.conf</span></span><br><span class="line">        <span class="attr">tx-service-group:</span> <span class="string">hspedu_order_tx_group</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#é…ç½® Nacos Server</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/storage_micro_service</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">QWEASDzxc123</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">io:</span></span><br><span class="line">      <span class="attr">seata:</span> <span class="string">info</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapperLocations:</span> <span class="string">classpath:mapper/*.xml</span></span><br></pre></td></tr></table></figure><p><strong>4.</strong> <strong>åˆ›å»º</strong> <strong>file.conf,</strong> <strong>è¿›è¡Œç›¸å…³çš„é…ç½®</strong>, <strong>è¯´æ˜:è¯¥æ–‡ä»¶ä»</strong> <strong>seata</strong> <strong>çš„</strong>\conf\file.conf <strong>æ‹·è´ï¼Œè¿›è¡Œä¿®æ”¹å³å¯</strong></p><p><strong>5.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;entity&#x2F;Storage.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/7/2</span></span><br><span class="line"><span class="comment"> * 20:33</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Storage</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> Long productId;</span><br><span class="line">    <span class="keyword">private</span> Integer amount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>6.</strong> <strong>åˆ›å»º</strong> com&#x2F;hspedu&#x2F;springcloud&#x2F;dao&#x2F;StorageDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StorageDao</span> &#123;</span><br><span class="line">    <span class="comment">//æ‰£å‡åº“å­˜ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">reduce</span><span class="params">(<span class="meta">@Param(&quot;productId&quot;)</span> Long productId, <span class="meta">@Param(&quot;nums&quot;)</span> Integer nums)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>7.</strong> <strong>åˆ›å»º</strong> **resources&#x2F;**mapper&#x2F;StorageMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.hspedu.springcloud.dao.StorageDao&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.hspedu.springcloud.entity.Storage&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;BIGINT&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;product_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;productId&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;BIGINT&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;amount&quot;</span> <span class="attr">property</span>=<span class="string">&quot;amount&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡å°‘åº“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;reduce&quot;</span>&gt;</span></span><br><span class="line">        UPDATE</span><br><span class="line">            storage</span><br><span class="line">        SET</span><br><span class="line">            amount = amount - #&#123;nums&#125;</span><br><span class="line">        WHERE</span><br><span class="line">            product_id = #&#123;productId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>8.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;service&#x2F;StorageService.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StorageService</span> &#123;</span><br><span class="line">    <span class="comment">// æ‰£å‡åº“å­˜</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">reduce</span><span class="params">(Long productId, Integer nums)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>9.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;service&#x2F;impl&#x2F;StorageServiceImpl.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StorageServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">StorageService</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    private static final Logger LOGGER = LoggerFactory.getLogger(StorageServiceImpl.class);</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> StorageDao storageDao;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reduce</span><span class="params">(Long productId, Integer nums)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;==========seata_storage_micro_service-10010 æ‰£ å‡ åº“ å­˜ start==========&quot;</span>);</span><br><span class="line">        storageDao.reduce(productId, nums);</span><br><span class="line">        log.info(<span class="string">&quot;==========seata_storage_micro_service-10010 æ‰£ å‡ åº“ å­˜ end==========&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>10.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;StorageController.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StorageController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StorageService storageService;</span><br><span class="line">    <span class="comment">//æ‰£å‡åº“å­˜</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/storage/reduce&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">reduce</span><span class="params">(Long productId, Integer nums)</span> &#123;</span><br><span class="line">        storageService.reduce(productId, nums);</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;æ‰£å‡åº“å­˜æˆåŠŸ ok&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>11.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;MyBatisConfig.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&#123;&quot;com.hspedu.springcloud.dao&quot;&#125;)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>12.</strong> <strong>åˆ›å»ºcom&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;DataSourceProxyConfig.java ,å¸¸è§„é…ç½®(æ‹¿æ¥ä½¿ç”¨å³å¯)</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> io.seata.rm.datasource.DataSourceProxy;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.SqlSessionFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.transaction.SpringManagedTransactionFactory; <span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.support.PathMatchingResourcePatternResolver;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/7/3</span></span><br><span class="line"><span class="comment"> * 11:28</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataSourceProxyConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;mybatis.mapperLocations&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String mapperLocations;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">druidDataSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSourceProxy <span class="title function_">dataSourceProxy</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DataSourceProxy</span>(dataSource);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactory <span class="title function_">sqlSessionFactoryBean</span><span class="params">(DataSourceProxy dataSourceProxy)</span></span><br><span class="line">            <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">sqlSessionFactoryBean</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>(); sqlSessionFactoryBean.setDataSource(dataSourceProxy);</span><br><span class="line">                sqlSessionFactoryBean.setMapperLocations(<span class="keyword">new</span> <span class="title class_">PathMatchingResourcePatternResolver</span>().getResources(mapperLocations));</span><br><span class="line">        sqlSessionFactoryBean.setTransactionFactory(<span class="keyword">new</span> <span class="title class_">SpringManagedTransactionFactory</span>()); <span class="keyword">return</span> sqlSessionFactoryBean.getObject();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>13.</strong> <strong>åˆ› å»º ä¸» å¯ åŠ¨ ç±»</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;SeataStorageMicroServiceApplication10010.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springcloud;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æµ¦åŸ</span></span><br><span class="line"><span class="comment"> * 2023/7/3</span></span><br><span class="line"><span class="comment"> * 12:24</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SeataStorageMicroServiceApplication10010</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SeataStorageMicroServiceApplication10010.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="11-4-4-æµ‹è¯•-seata-storage-micro-service-10010-å¾®æœåŠ¡"><a href="#11-4-4-æµ‹è¯•-seata-storage-micro-service-10010-å¾®æœåŠ¡" class="headerlink" title="11.4.4 æµ‹è¯• seata_storage_micro_service-10010 å¾®æœåŠ¡"></a><strong>11.4.4</strong> æµ‹è¯• <strong>seata_storage_micro_service-10010</strong> å¾®æœåŠ¡</h3><h4 id="11-4-4-1-å¯åŠ¨-Nacos-Server-8848"><a href="#11-4-4-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="11.4.4.1 å¯åŠ¨ Nacos Server 8848"></a>11.4.4.1 å¯åŠ¨ Nacos Server 8848</h4><h4 id="11-4-4-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server"><a href="#11-4-4-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server" class="headerlink" title="11.4.4.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server"></a>11.4.4.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server</h4><h4 id="11-4-4-3-å¯åŠ¨-seata-storage-micro-service-10010"><a href="#11-4-4-3-å¯åŠ¨-seata-storage-micro-service-10010" class="headerlink" title="11.4.4.3 å¯åŠ¨ seata_storage_micro_service-10010"></a>11.4.4.3 å¯åŠ¨ seata_storage_micro_service-10010</h4><h4 id="11-4-4-4-ç™»å½•-Nacos-Server-æŸ¥çœ‹-10010-å¾®æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ"><a href="#11-4-4-4-ç™»å½•-Nacos-Server-æŸ¥çœ‹-10010-å¾®æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ" class="headerlink" title="11.4.4.4 ç™»å½• Nacos Server , æŸ¥çœ‹ 10010 å¾®æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ"></a>11.4.4.4 ç™»å½• Nacos Server , æŸ¥çœ‹ 10010 å¾®æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ</h4><p><strong>1.</strong> ç™»å½• <strong>Nacos Server,</strong> æŸ¥çœ‹ <strong>10010</strong> æ˜¯å¦æ³¨å†ŒæˆåŠŸ</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703125536604.png" alt="image-20230703125536604"></p><h3 id="11-4-5-å¼€å‘-seata-account-micro-service-10012-å¾®æœåŠ¡"><a href="#11-4-5-å¼€å‘-seata-account-micro-service-10012-å¾®æœåŠ¡" class="headerlink" title="11.4.5 å¼€å‘ seata_account_micro_service-10012 å¾®æœåŠ¡"></a><strong>11.4.5</strong> å¼€å‘ <strong>seata_account_micro_service-10012</strong> å¾®æœåŠ¡</h3><p>(accountæ¨¡å—ï¼Œå‚ç…§ä¸Šé¢storageæ¨¡å—çš„åˆ›å»ºè¿‡ç¨‹å³å¯)</p><p><strong>1.</strong> å‚è€ƒä»¥å‰çš„æ–¹å¼ï¼Œåˆ›å»º <strong>seata_account_micro_service-10012</strong> å¾®æœåŠ¡æ¨¡å—</p><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>pom.xml,</strong> <strong>æ·»åŠ ç›¸å…³çš„</strong> <strong>jar</strong> <strong>ä¾èµ–</strong></p><p><strong>3.</strong> <strong>åˆ›å»º</strong> <strong>application.yml,</strong> <strong>è¿›è¡Œç›¸å…³çš„é…ç½®</strong></p><p><strong>4.1</strong> <strong>åˆ›å»º</strong> <strong>file.conf,</strong> <strong>è¿›è¡Œç›¸å…³çš„é…ç½®</strong>, <strong>è¯´æ˜:è¯¥æ–‡ä»¶ä»</strong> <strong>seata</strong> <strong>çš„</strong>\conf\file.conf <strong>æ‹·è´ï¼Œè¿›è¡Œä¿® æ”¹å³å¯</strong></p><p><strong>4.2</strong> <strong>åˆ›å»º</strong> <strong>registry.conf,</strong> <strong>è¿›è¡Œç›¸å…³çš„é…ç½®</strong>, <strong>è¯´æ˜:è¯¥æ–‡ä»¶ä»</strong> <strong>seata</strong> <strong>çš„</strong>\conf\registry.conf <strong>æ‹·è´ï¼Œ è¿›è¡Œä¿®æ”¹å³å¯</strong></p><p><strong>5.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;entity&#x2F;Account.java</strong></p><p><strong>6.</strong> <strong>åˆ›å»º</strong> com&#x2F;hspedu&#x2F;springcloud&#x2F;dao&#x2F;AccountDao.java</p><p><strong>7.</strong> <strong>åˆ›å»º</strong> **resources&#x2F;**mapper&#x2F;AccountMapper.xml</p><p><strong>8.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;service&#x2F;AccountService.java</strong></p><p><strong>9.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;service&#x2F;impl&#x2F;AccountServiceImpl.java</strong></p><p><strong>10.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;AccountController.java</strong></p><p><strong>11.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;MyBatisConfig.java</strong></p><p><strong>12.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;DataSourceProxyConfig.java ,</strong> <strong>å¸¸è§„é…ç½®</strong>(æ‹¿æ¥ä½¿ç”¨å³å¯)</p><p><strong>13.</strong> <strong>åˆ› å»º ä¸» å¯ åŠ¨ ç±»</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;SeataAccountMicroServiceApplication10012.java</strong></p><h3 id="11-4-6-æµ‹è¯•-seata-account-micro-service-10012-å¾®æœåŠ¡"><a href="#11-4-6-æµ‹è¯•-seata-account-micro-service-10012-å¾®æœåŠ¡" class="headerlink" title="11.4.6 æµ‹è¯• seata_account_micro_service-10012 å¾®æœåŠ¡"></a><strong>11.4.6</strong> æµ‹è¯• <strong>seata_account_micro_service-10012</strong> å¾®æœåŠ¡</h3><h4 id="11-4-6-1-å¯åŠ¨-Nacos-Server-8848"><a href="#11-4-6-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="11.4.6.1 å¯åŠ¨ Nacos Server 8848"></a>11.4.6.1 å¯åŠ¨ Nacos Server 8848</h4><h4 id="11-4-6-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server"><a href="#11-4-6-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server" class="headerlink" title="11.4.6.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server"></a>11.4.6.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server</h4><h4 id="11-4-6-3-å¯åŠ¨-seata-account-micro-service-10012"><a href="#11-4-6-3-å¯åŠ¨-seata-account-micro-service-10012" class="headerlink" title="11.4.6.3 å¯åŠ¨ seata_account_micro_service-10012"></a>11.4.6.3 å¯åŠ¨ seata_account_micro_service-10012</h4><h4 id="11-4-6-4-ç™»å½•-Nacos-Server-æŸ¥çœ‹-10012-å¾®æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ"><a href="#11-4-6-4-ç™»å½•-Nacos-Server-æŸ¥çœ‹-10012-å¾®æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ" class="headerlink" title="11.4.6.4 ç™»å½• Nacos Server , æŸ¥çœ‹ 10012 å¾®æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ"></a>11.4.6.4 ç™»å½• Nacos Server , æŸ¥çœ‹ 10012 å¾®æœåŠ¡æ˜¯å¦æ³¨å†ŒæˆåŠŸ</h4><p><strong>1.</strong> ç™»å½• <strong>Nacos Server,</strong> æŸ¥çœ‹ <strong>10012</strong> æ˜¯å¦æ³¨å†ŒæˆåŠŸ</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703143135194.png" alt="image-20230703143135194"></p><p><strong>11.4.7</strong> å¼€å‘ <strong>seata-order-micro-service-10008</strong> å¾®æœåŠ¡</p><p>(Orderæ¨¡å—ï¼Œå‚ç…§ä¸Šé¢storageæ¨¡å—çš„åˆ›å»ºè¿‡ç¨‹å³å¯)</p><p><strong>1.</strong> å‚è€ƒä»¥å‰çš„æ–¹å¼ï¼Œåˆ›å»º <strong>seata-order-micro-service-10008</strong> å¾®æœåŠ¡æ¨¡å—</p><p><strong>2.</strong> <strong>ä¿®æ”¹</strong> <strong>pom.xml,</strong> <strong>æ·»åŠ ç›¸å…³çš„</strong> <strong>jar</strong> <strong>ä¾èµ–</strong></p><p><strong>3.</strong> <strong>åˆ›å»º</strong> <strong>application.yml,</strong> <strong>è¿›è¡Œç›¸å…³çš„é…ç½®</strong></p><p><strong>4.1</strong> <strong>åˆ›å»º</strong> <strong>file.conf,</strong> <strong>è¿›è¡Œç›¸å…³çš„é…ç½®</strong>, <strong>è¯´æ˜:è¯¥æ–‡ä»¶ä»</strong> <strong>seata</strong> <strong>çš„</strong>\conf\file.conf <strong>æ‹·è´ï¼Œè¿›è¡Œä¿® æ”¹å³å¯</strong></p><p><strong>4.2</strong> <strong>åˆ›å»º</strong> <strong>registry.conf,</strong> <strong>è¿›è¡Œç›¸å…³çš„é…ç½®</strong>, <strong>è¯´æ˜:è¯¥æ–‡ä»¶ä»</strong> <strong>seata</strong> <strong>çš„</strong>\conf\registry.conf <strong>æ‹·è´ï¼Œ è¿›è¡Œä¿®æ”¹å³å¯</strong></p><p><strong>5.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;entity&#x2F;Order.java</strong></p><p><strong>6.</strong> <strong>åˆ›å»º</strong> com&#x2F;hspedu&#x2F;springcloud&#x2F;dao&#x2F;OrderDao.java</p><p><strong>7.</strong> <strong>åˆ›å»º</strong> **resources&#x2F;**mapper&#x2F;OrderMapper.xml</p><p><strong>8.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;service&#x2F;OrderService.java</strong></p><p><strong>9.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;service&#x2F;AccountService.java</strong></p><p><strong>10.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;service&#x2F;impl&#x2F;OrderServiceImpl.java</strong></p><p><strong>11.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;OrderController.java</strong></p><p><strong>12.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;MyBatisConfig.java</strong></p><p><strong>13.</strong> <strong>åˆ›å»º</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;config&#x2F;DataSourceProxyConfig.java ,</strong> <strong>å¸¸è§„é…ç½®</strong>(æ‹¿æ¥ä½¿ç”¨å³å¯)</p><p><strong>14.</strong> <strong>åˆ› å»º ä¸» å¯ åŠ¨ ç±»</strong> <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;SeataOrderMicroServiceApplication10008.java</strong></p><h3 id="11-4-8-æµ‹è¯•-seata-order-micro-service-10008-å¾®æœåŠ¡"><a href="#11-4-8-æµ‹è¯•-seata-order-micro-service-10008-å¾®æœåŠ¡" class="headerlink" title="11.4.8 æµ‹è¯• seata-order-micro-service-10008 å¾®æœåŠ¡"></a><strong>11.4.8</strong> æµ‹è¯• <strong>seata-order-micro-service-10008</strong> å¾®æœåŠ¡</h3><p>â€¦â€¦</p><h3 id="11-4-9-é›†æˆæµ‹è¯•-1-ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ-æ­£å¸¸ä¸‹å•"><a href="#11-4-9-é›†æˆæµ‹è¯•-1-ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ-æ­£å¸¸ä¸‹å•" class="headerlink" title="11.4.9 é›†æˆæµ‹è¯•**(1)** ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ**-**æ­£å¸¸ä¸‹å•"></a><strong>11.4.9</strong> é›†æˆæµ‹è¯•**(1)** ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ**-**æ­£å¸¸ä¸‹å•</h3><h4 id="11-4-9-1-å¯åŠ¨-Nacos-Server-8848"><a href="#11-4-9-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="11.4.9.1 å¯åŠ¨ Nacos Server 8848"></a>11.4.9.1 å¯åŠ¨ Nacos Server 8848</h4><h4 id="11-4-9-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server"><a href="#11-4-9-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server" class="headerlink" title="11.4.9.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server"></a>11.4.9.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server</h4><h4 id="11-4-9-3-å¯åŠ¨-seata-order-micro-service-10010-x2F-10012-x2F-10008-ä¸‰ä¸ªå¾®æœåŠ¡"><a href="#11-4-9-3-å¯åŠ¨-seata-order-micro-service-10010-x2F-10012-x2F-10008-ä¸‰ä¸ªå¾®æœåŠ¡" class="headerlink" title="11.4.9.3 å¯åŠ¨ seata-order-micro-service-10010 &#x2F;10012&#x2F;10008 ä¸‰ä¸ªå¾®æœåŠ¡"></a>11.4.9.3 å¯åŠ¨ seata-order-micro-service-10010 &#x2F;10012&#x2F;10008 ä¸‰ä¸ªå¾®æœåŠ¡</h4><h4 id="11-4-9-4-æµè§ˆå™¨-http-localhost-10008-order-save-userId-666-amp-productId-1-amp-nums-1-amp-money-100"><a href="#11-4-9-4-æµè§ˆå™¨-http-localhost-10008-order-save-userId-666-amp-productId-1-amp-nums-1-amp-money-100" class="headerlink" title="11.4.9.4 æµè§ˆå™¨ : http://localhost:10008/order/save?userId=666&amp;productId=1&amp;nums=1&amp;money=100"></a>11.4.9.4 æµè§ˆå™¨ : <a href="http://localhost:10008/order/save?userId=666&productId=1&nums=1&money=100">http://localhost:10008/order/save?userId=666&amp;productId=1&amp;nums=1&amp;money=100</a></h4><p><strong>1.</strong> æµ è§ˆ å™¨ <strong>: <a href="http://localhost:10008/order/save?userId=666&productId=1&nums=1&money=100">http://localhost:10008/order/save?userId=666&amp;productId=1&amp;nums=1&amp;money=100</a></strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703143712667.png" alt="image-20230703143712667"></p><p><strong>2.</strong> <strong>æŸ¥çœ‹æ•°æ®åº“&#x2F;è¡¨çš„æƒ…å†µæ˜¯å¦æ­£å¸¸,ç»“è®º:å¦‚æœæ²¡æœ‰å¼‚å¸¸å‡ºç°ï¼Œæ­£å¸¸ä¸‹å•ï¼Œæ•°æ®åº“ä¸‰å¼ è¡¨ æ•°æ®ä¸€è‡´æ€§æ˜¯OKçš„</strong></p><h4 id="11-4-9-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#11-4-9-5-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="11.4.9.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a>11.4.9.5 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h4><p><strong>1. MySQL</strong> å‡ºç° <strong>too many connections</strong>(<strong>1040</strong>)é”™è¯¯è§£å†³æ–¹æ³•ï¼š</p><p>åœ¨ <strong>my.ini</strong> è®¾ç½® </p><p><strong>max_connections&#x3D;1000</strong></p><p><strong>2.</strong> å¦‚æœå‡ºç°**: service id not legal hostname<br>** æŠ¥é”™ <strong>Service id not legal hostname</strong> çš„åŸå› æ˜¯æœåŠ¡åç§°ä¸èƒ½å¸¦æœ‰ä¸‹åˆ’çº¿ï¼Œå¯ä»¥ä½¿ç”¨ä¸­åˆ’çº¿**,**</p><p><strong>springcloud</strong> æ— æ³•è¯†åˆ«ä¸‹åˆ’çº¿ï¼ŒæŠŠä¸‹åˆ’çº¿æ”¹æˆä¸­åˆ’çº¿å°±å¥½</p><h3 id="11-4-10-é›†æˆæµ‹è¯•-2-ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ-æ¨¡æ‹Ÿå¼‚å¸¸"><a href="#11-4-10-é›†æˆæµ‹è¯•-2-ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ-æ¨¡æ‹Ÿå¼‚å¸¸" class="headerlink" title="11.4.10 é›†æˆæµ‹è¯•**(2)** ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ**-**æ¨¡æ‹Ÿå¼‚å¸¸"></a><strong>11.4.10</strong> é›†æˆæµ‹è¯•**(2)** ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ**-**æ¨¡æ‹Ÿå¼‚å¸¸</h3><h4 id="11-4-10-1-å¯åŠ¨-Nacos-Server-8848"><a href="#11-4-10-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="11.4.10.1 å¯åŠ¨ Nacos Server 8848"></a>11.4.10.1 å¯åŠ¨ Nacos Server 8848</h4><h4 id="11-4-10-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server"><a href="#11-4-10-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server" class="headerlink" title="11.4.10.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server"></a>11.4.10.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server</h4><h4 id="11-4-10-3-å¯åŠ¨-seata-order-micro-service-100010-x2F-10012-x2F-10008-ä¸‰ä¸ªå¾®æœåŠ¡"><a href="#11-4-10-3-å¯åŠ¨-seata-order-micro-service-100010-x2F-10012-x2F-10008-ä¸‰ä¸ªå¾®æœåŠ¡" class="headerlink" title="11.4.10.3 å¯åŠ¨ seata-order-micro-service-100010 &#x2F;10012&#x2F;10008 ä¸‰ä¸ªå¾®æœåŠ¡"></a>11.4.10.3 å¯åŠ¨ seata-order-micro-service-100010 &#x2F;10012&#x2F;10008 ä¸‰ä¸ªå¾®æœåŠ¡</h4><h4 id="11-4-10-4-æµè§ˆå™¨-http-localhost-10008-order-save-userId-666-amp-productId-1-amp-nums-1-amp-money-100"><a href="#11-4-10-4-æµè§ˆå™¨-http-localhost-10008-order-save-userId-666-amp-productId-1-amp-nums-1-amp-money-100" class="headerlink" title="11.4.10.4 æµè§ˆå™¨ : http://localhost:10008/order/save?userId=666&amp;productId=1&amp;nums=1&amp;money=100"></a>11.4.10.4 æµè§ˆå™¨ : <a href="http://localhost:10008/order/save?userId=666&productId=1&nums=1&money=100">http://localhost:10008/order/save?userId=666&amp;productId=1&amp;nums=1&amp;money=100</a></h4><p><strong>1.</strong> ä¿® æ”¹ <strong>seata_account_micro_service-10012</strong> çš„<strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;AccountController.java</strong>ï¼Œ æ¨¡æ‹Ÿå¼‚å¸¸å‡ºç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/account/reduce&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">result</span><span class="params">(<span class="meta">@RequestParam(&quot;userId&quot;)</span> Long userId, <span class="meta">@RequestParam(&quot;money&quot;)</span> Integer money)</span>&#123;</span><br><span class="line"><span class="comment">//æ¨¡æ‹Ÿå¼‚å¸¸, è¶…æ—¶</span></span><br><span class="line"><span class="comment">//openfeign æ¥å£è°ƒç”¨é»˜è®¤è¶…æ—¶æ—¶é—´ä¸º 1s try &#123;</span></span><br><span class="line">TimeUnit.SECONDS.sleep(<span class="number">12</span>); &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace(); &#125;</span><br><span class="line">accountService.reduce(userId,money);</span><br><span class="line"><span class="keyword">return</span> Result.success(<span class="string">&quot;200&quot;</span>, <span class="string">&quot;æ‰£å‡è´¦æˆ·ä½™é¢ OK&quot;</span>); &#125;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>æµ è§ˆ å™¨</strong> <strong>: <a href="http://localhost:10008/order/save?userId=666&productId=1&nums=1&money=100">http://localhost:10008/order/save?userId=666&amp;productId=1&amp;nums=1&amp;money=100</a></strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703143951841.png" alt="image-20230703143951841"></p><p><strong>3.</strong> <strong>æŸ¥çœ‹æ•°æ®åº“&#x2F;è¡¨çš„æƒ…å†µæ˜¯å¦æ­£å¸¸</strong></p><p><strong>ç»“è®º</strong>:è¿™æ—¶æ•°æ®åº“&#x2F;è¡¨ï¼Œå‡ºç°æ•°æ®ä¸ä¸€è‡´ç°è±¡, è®¢å•æ˜¯<u>æœªæ”¯ä»˜</u>ï¼Œä½†æ˜¯<u>åº“å­˜å‡å°‘äº†</u>ï¼Œè´¦å·<u>é’±ä¹Ÿæ‰£äº†</u>(æç¤º:ç­‰ä¼‘çœ æ—¶é—´å®Œæˆåï¼Œå†æŸ¥çœ‹accountè¡¨ï¼Œä¼šçœ‹åˆ°æ•°æ®ä¸ä¸€è‡´)</p><h3 id="11-4-11-é›†æˆæµ‹è¯•-3-ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ-ä½¿ç”¨-GlobalTransactional-å®Œæˆåˆ†å¸ƒå¼äº‹åŠ¡æ§åˆ¶-å‡ºç°å¼‚å¸¸ï¼Œä¹Ÿèƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§"><a href="#11-4-11-é›†æˆæµ‹è¯•-3-ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ-ä½¿ç”¨-GlobalTransactional-å®Œæˆåˆ†å¸ƒå¼äº‹åŠ¡æ§åˆ¶-å‡ºç°å¼‚å¸¸ï¼Œä¹Ÿèƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§" class="headerlink" title="11.4.11 é›†æˆæµ‹è¯•**(3)** ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ**-ä½¿ç”¨@GlobalTransactional** å®Œæˆåˆ†å¸ƒå¼äº‹åŠ¡æ§åˆ¶(å‡ºç°å¼‚å¸¸ï¼Œä¹Ÿèƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§)"></a><strong>11.4.11</strong> é›†æˆæµ‹è¯•**(3)** ä¸‰ä¸ªå¾®æœåŠ¡ååŒå®Œæˆ**-<strong>ä½¿ç”¨</strong>@GlobalTransactional** å®Œæˆåˆ†å¸ƒå¼äº‹åŠ¡æ§åˆ¶(å‡ºç°å¼‚å¸¸ï¼Œä¹Ÿèƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§)</h3><h4 id="11-4-11-1-å¯åŠ¨-Nacos-Server-8848"><a href="#11-4-11-1-å¯åŠ¨-Nacos-Server-8848" class="headerlink" title="11.4.11.1 å¯åŠ¨ Nacos Server 8848"></a>11.4.11.1 å¯åŠ¨ Nacos Server 8848</h4><h4 id="11-4-11-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server"><a href="#11-4-11-2-åŒå‡»-Seata-çš„-bin-seata-server-bat-å¯åŠ¨-Seata-Server" class="headerlink" title="11.4.11.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server"></a>11.4.11.2 åŒå‡» Seata çš„\bin\seata-server.bat , å¯åŠ¨ Seata Server</h4><h4 id="11-4-11-3-å¯åŠ¨-seata-order-micro-service-10008-x2F-10010-x2F-10012-ä¸‰ä¸ªå¾®æœåŠ¡"><a href="#11-4-11-3-å¯åŠ¨-seata-order-micro-service-10008-x2F-10010-x2F-10012-ä¸‰ä¸ªå¾®æœåŠ¡" class="headerlink" title="11.4.11.3 å¯åŠ¨ seata-order-micro-service-10008 &#x2F;10010&#x2F;10012 ä¸‰ä¸ªå¾®æœåŠ¡"></a>11.4.11.3 å¯åŠ¨ seata-order-micro-service-10008 &#x2F;10010&#x2F;10012 ä¸‰ä¸ªå¾®æœåŠ¡</h4><h4 id="11-4-11-4-æµè§ˆå™¨-http-localhost-10008-order-save-userId-666-amp-productId-1-amp-nums-1-amp-money-100"><a href="#11-4-11-4-æµè§ˆå™¨-http-localhost-10008-order-save-userId-666-amp-productId-1-amp-nums-1-amp-money-100" class="headerlink" title="11.4.11.4 æµè§ˆå™¨ : http://localhost:10008/order/save?userId=666&amp;productId=1&amp;nums=1&amp;money=100"></a>11.4.11.4 æµè§ˆå™¨ : <a href="http://localhost:10008/order/save?userId=666&productId=1&nums=1&money=100">http://localhost:10008/order/save?userId=666&amp;productId=1&amp;nums=1&amp;money=100</a></h4><p><strong>1.</strong> ä¿® æ”¹ <strong>seata_account_micro_service-10012</strong> çš„ <strong>com&#x2F;hspedu&#x2F;springcloud&#x2F;controller&#x2F;AccountController.java</strong>ï¼Œ æ¨¡æ‹Ÿå¼‚å¸¸å‡ºç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line">AccountService accountService; </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ‰£å‡è´¦æˆ·ä½™é¢</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/account/reduce&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">result</span><span class="params">(<span class="meta">@RequestParam(&quot;userId&quot;)</span> Long userId, <span class="meta">@RequestParam(&quot;money&quot;)</span> Integer money)</span>&#123;</span><br><span class="line"><span class="comment">//æ¨¡æ‹Ÿå¼‚å¸¸, è¶…æ—¶ï¼Œæˆ–è€… int i = 9 / 0; </span></span><br><span class="line">  <span class="comment">//openfeign æ¥å£è°ƒç”¨é»˜è®¤è¶…æ—¶æ—¶é—´ä¸º 1s</span></span><br><span class="line">  <span class="comment">//è¯´æ˜ 1. ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒæ–¹å¼æ¨¡æ‹Ÿå¼‚å¸¸, ä½†åœ¨ Debug çœ‹ Seata åˆ†å¸ƒå¼äº‹åŠ¡æœºåˆ¶ä¸æ–¹ä¾¿, ä¸å¥½çœ‹æ•ˆæœ , æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è¶…æ—¶å¼‚å¸¸</span></span><br><span class="line"><span class="comment">//è¯´æ˜ 2. å› ä¸ºæ˜¯è¶…æ—¶å¼‚å¸¸, æ‰€ä»¥åœ¨ Debug åˆ†æ Seata æœºåˆ¶æ—¶, å¯èƒ½ä¼šå‘ç°æŸå¼ è¡¨ è¢«é”å‡ æ¡è®°å½•, å› ä¸º seata ä¼šåšæœ€ç»ˆä¸€è‡´æ€§æ“ä½œ(å³å°è¯•å†æäº¤ä¸Šæ¬¡è¶…æ—¶çš„äº‹åŠ¡).</span></span><br><span class="line"><span class="keyword">try</span> &#123; </span><br><span class="line">    TimeUnit.SECONDS.sleep(<span class="number">12</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123; </span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">accountService.reduce(userId,money);</span><br><span class="line"><span class="keyword">return</span> Result.success(<span class="string">&quot;200&quot;</span>, <span class="string">&quot;æ‰£å‡è´¦æˆ·ä½™é¢ OK&quot;</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**2.**ä¿® æ”¹ <strong>seata-order-micro-service-10008</strong> <strong>çš„</strong>com&#x2F;study&#x2F;springcloud&#x2F;service&#x2F;impl&#x2F;OrderServicelmpl.java</p><p><strong>ä½¿ç”¨<u>@GlobalTransactional</u>æ§åˆ¶åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºè®¢å•-&gt;è°ƒç”¨åº“å­˜æœåŠ¡æ‰£å‡åº“å­˜-&gt;è°ƒç”¨è´¦æˆ·æœåŠ¡æ‰£å‡è´¦æˆ·ä½™é¢-&gt;ä¿®æ”¹è®¢å•çŠ¶æ€ </span></span><br><span class="line"><span class="comment">* è§£è¯»</span></span><br><span class="line"><span class="comment">* 1. <span class="doctag">@GlobalTransactional</span>: åˆ†å¸ƒå¼å…¨å±€äº‹åŠ¡æ§åˆ¶</span></span><br><span class="line"><span class="comment">* 2. name = &quot;hspedu-save-order&quot; åç§°è‡ªå·±å†™ï¼Œä¿è¯å”¯ä¸€å³å¯</span></span><br><span class="line"><span class="comment">* 3. rollbackFor = Exception.class æŒ‡å®šå‘ç”Ÿä»€ä¹ˆå¼‚å¸¸å°±å›æ»šï¼Œ</span></span><br><span class="line"><span class="comment">* è¿™é‡ŒæŒ‡å®šåªè¦å‘ç”Ÿå¼‚å¸¸å°±å›æ»š</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="comment">//ä¸‹é¢è¿™å¥è¯æ˜¯åšå…¨å±€äº‹åŠ¡æ§åˆ¶çš„, å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ²¡æœ‰åˆ†å¸ƒå¼å…¨å±€äº‹åŠ¡æ§åˆ¶ </span></span><br><span class="line"><span class="meta">@GlobalTransactional(name = &quot;hspedu-save-order&quot;, rollbackFor = Exception.class)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Order order)</span> &#123;</span><br><span class="line">log.info(<span class="string">&quot;=========å¼€å§‹æ–°å»ºè®¢å• start ==========&quot;</span>); </span><br><span class="line">  <span class="comment">//æ–°å»ºè®¢å•</span></span><br><span class="line">orderDao.save(order);</span><br><span class="line">System.out.println(<span class="string">&quot;order=&quot;</span> + order); </span><br><span class="line">  log.info(<span class="string">&quot;=========å‡åº“å­˜ start ==========&quot;</span>); </span><br><span class="line">  storageService.reduce(order.getProductId(), order.getNums()); </span><br><span class="line">  log.info(<span class="string">&quot;=========å‡åº“å­˜ end ==========&quot;</span>);</span><br><span class="line">log.info(<span class="string">&quot;=========å‡è´¦æˆ·é‡‘é¢ start ==========&quot;</span>); </span><br><span class="line">  accountService.reduce(order.getUserId(), order.getMoney()); </span><br><span class="line">  log.info(<span class="string">&quot;=========å‡è´¦æˆ·é‡‘é¢ end ==========&quot;</span>);</span><br><span class="line">log.info(<span class="string">&quot;=========ä¿®æ”¹è®¢å•çŠ¶æ€ start ==========&quot;</span>); </span><br><span class="line">  orderDao.update(order.getUserId(), <span class="number">0</span>); </span><br><span class="line">  log.info(<span class="string">&quot;=========ä¿®æ”¹è®¢å•çŠ¶æ€ end ==========&quot;</span>); </span><br><span class="line">  log.info(<span class="string">&quot;=========ä¸‹è®¢å• end==========&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>3.</strong> <strong>é‡å¯</strong> <strong>seata-order-micro-service-10008</strong></p><p><strong>4.</strong> <strong>æµ è§ˆ å™¨</strong> <strong>: <a href="http://localhost:10008/order/save?userId=666&productId=1&nums=1&money=100">http://localhost:10008/order/save?userId=666&amp;productId=1&amp;nums=1&amp;money=100</a></strong></p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230703143951841.png" alt="image-20230703143951841"></p><p><strong>5.</strong> æŸ¥çœ‹æ•°æ®åº“&#x2F;è¡¨çš„æƒ…å†µæ˜¯å¦æ­£å¸¸, ç»“è®º:è¿™æ—¶æ•°æ®åº“&#x2F;è¡¨ï¼Œæ•°æ®ä¸ä¸€è‡´æ€§å¾—åˆ°ä¿è¯.</p><h3 id="11-4-12-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a href="#11-4-12-æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚" class="headerlink" title="11.4.12 æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a><strong>11.4.12</strong> æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3><h4 id="11-4-12-1-å¦‚æœæ•°æ®åº“-x2F-è¡¨ä½¿ç”¨åˆ°å…³é”®å­—ï¼Œéœ€è¦ä½¿ç”¨åå¼•å·"><a href="#11-4-12-1-å¦‚æœæ•°æ®åº“-x2F-è¡¨ä½¿ç”¨åˆ°å…³é”®å­—ï¼Œéœ€è¦ä½¿ç”¨åå¼•å·" class="headerlink" title="11.4.12.1 å¦‚æœæ•°æ®åº“&#x2F;è¡¨ä½¿ç”¨åˆ°å…³é”®å­—ï¼Œéœ€è¦ä½¿ç”¨åå¼•å·"></a>11.4.12.1 å¦‚æœæ•°æ®åº“&#x2F;è¡¨ä½¿ç”¨åˆ°å…³é”®å­—ï¼Œéœ€è¦ä½¿ç”¨åå¼•å·</h4><ul><li>ä¸¾ä¾‹è¯´æ˜**:** æ¯”å¦‚<strong>mapper&#x2F;OrderMapper.xml ,</strong> è¿™é‡Œçš„ <strong>order</strong> å°±è¦ä½¿ç”¨**&#96;&#96;,** å¦åˆ™ä¼šæŠ¥é”™</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span>&gt;</span></span><br><span class="line">insert into `order` (id,user_id,product_id,nums,money,status) </span><br><span class="line">  values (null,#&#123;userId&#125;,#&#123;productId&#125;,#&#123;nums&#125;,#&#123;money&#125;,0);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line">update `order` set status = 1</span><br><span class="line">where user_id=#&#123;userId&#125; and status = #&#123;status&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="11-4-12-2-openfeignåœ¨è¿œç¨‹è°ƒç”¨apiæ¥å£æ—¶ï¼Œé»˜è®¤è¶…æ—¶æ—¶é—´ä¸º1s"><a href="#11-4-12-2-openfeignåœ¨è¿œç¨‹è°ƒç”¨apiæ¥å£æ—¶ï¼Œé»˜è®¤è¶…æ—¶æ—¶é—´ä¸º1s" class="headerlink" title="11.4.12.2 openfeignåœ¨è¿œç¨‹è°ƒç”¨apiæ¥å£æ—¶ï¼Œé»˜è®¤è¶…æ—¶æ—¶é—´ä¸º1s"></a>11.4.12.2 openfeignåœ¨è¿œç¨‹è°ƒç”¨apiæ¥å£æ—¶ï¼Œé»˜è®¤è¶…æ—¶æ—¶é—´ä¸º1s</h4>]]></content>
      
      
      <categories>
          
          <category> Springå¼€å‘æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo å†™æ–‡ç« æ­¥éª¤</title>
      <link href="/2023/06/02/hexo-%E5%86%99%E6%96%87%E7%AB%A0%E6%AD%A5%E9%AA%A4/"/>
      <url>/2023/06/02/hexo-%E5%86%99%E6%96%87%E7%AB%A0%E6%AD%A5%E9%AA%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="hexoæ­å»ºåšå®¢é…ç½®æ³¨æ„äº‹é¡¹ï¼š"><a href="#hexoæ­å»ºåšå®¢é…ç½®æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="hexoæ­å»ºåšå®¢é…ç½®æ³¨æ„äº‹é¡¹ï¼š"></a>hexoæ­å»ºåšå®¢é…ç½®æ³¨æ„äº‹é¡¹ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¹æ–‡ä»¶å¤¹è¿›è¡Œé…ç½®</span></span><br><span class="line">hexo init</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ–°æ–‡ç« </span></span><br><span class="line">hexo <span class="keyword">new</span> <span class="string">&quot;æ–‡ç« åç§°&quot;</span></span><br><span class="line">hexo n <span class="string">&quot;æ–‡ç« åç§°&quot;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//æ¸…ç†hexoç¼“å­˜</span></span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡æ–°ç”Ÿæˆåšå®¢çš„é™æ€æ–‡ä»¶</span></span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ¬åœ°è¿è¡Œåšå®¢è‹¥æ— æ³•è¿è¡Œéœ€è¦å®‰è£…ä¾èµ–ï¼šnpm install hexo-server --save</span></span><br><span class="line">hexo s</span><br><span class="line"></span><br><span class="line"><span class="comment">//éƒ¨ç½²åšå®¢åˆ°githubä»“åº“</span></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>åœ¨blogçš„package.jsonä¸­ä¿®æ”¹ï¼š</p><p>â€œserverâ€: â€œhexo serverâ€ ğŸ‘‰ â€œserverâ€: â€œhexo clean &amp;&amp; hexo generate &amp;&amp; hexo serverâ€</p><p>æ­¤å æ‰§è¡Œnpm run server &#x3D; åŒæ—¶æ‰§è¡Œä»¥ä¸Šä¸‰ä¸ªå‘½ä»¤</p><h2 id="åšå®¢é…ç½®æ³¨æ„äº‹é¡¹ï¼š"><a href="#åšå®¢é…ç½®æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="åšå®¢é…ç½®æ³¨æ„äº‹é¡¹ï¼š"></a>åšå®¢é…ç½®æ³¨æ„äº‹é¡¹ï¼š</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ç« å¤´éƒ¨ï¼š</span><br><span class="line">title: æ–‡ç« æ ‡é¢˜</span><br><span class="line">date: 2023-06-02 12:04:52</span><br><span class="line">tags: åšå®¢åˆ›å»º</span><br><span class="line">categories: åšå®¢åˆ›å»º</span><br><span class="line">cover: https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">titleã€å¿…éœ€ã€‘æ–‡ç« æ ‡é¢˜</span><br><span class="line">dateã€å¿…éœ€ã€‘æ–‡ç« åˆ›å»ºæ—¥æœŸ</span><br><span class="line">updatedã€å¯é€‰ã€‘æ–‡ç« æ›´æ–°æ—¥æœŸ</span><br><span class="line">tagsã€å¯é€‰ã€‘æ–‡ç« æ ‡ç­¾</span><br><span class="line">categoriesã€å¯é€‰ã€‘æ–‡ç« åˆ†ç±»</span><br><span class="line">keywordsã€å¯é€‰ã€‘æ–‡ç« å…³é”®å­—</span><br><span class="line">descriptionã€å¯é€‰ã€‘æ–‡ç« æè¿°</span><br><span class="line">top_imgã€å¯é€‰ã€‘æ–‡ç« é¡¶éƒ¨å›¾ç‰‡</span><br><span class="line">coverã€å¯é€‰ã€‘æ–‡ç« ç¼©ç•¥å›¾(å¦‚æœæ²¡æœ‰è®¾ç½®top_img,æ–‡ç« é¡µé¡¶éƒ¨å°†æ˜¾ç¤ºç¼©ç•¥å›¾ï¼Œå¯è®¾ä¸ºfalse/å›¾ç‰‡åœ°å€/ç•™ç©º)</span><br><span class="line">commentsã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« è¯„è®ºæ¨¡å—(é»˜è®¤ true)</span><br><span class="line">tocã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« TOC(é»˜è®¤ä¸ºè®¾ç½®ä¸­tocçš„enableé…ç½®)</span><br><span class="line">toc_numberã€å¯é€‰ã€‘æ˜¾ç¤ºtoc_number(é»˜è®¤ä¸ºè®¾ç½®ä¸­tocçš„numberé…ç½®)</span><br><span class="line">toc_style_simpleã€å¯é€‰ã€‘æ˜¾ç¤º toc ç®€æ´æ¨¡å¼</span><br><span class="line">copyrightã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« ç‰ˆæƒæ¨¡å—(é»˜è®¤ä¸ºè®¾ç½®ä¸­post_copyrightçš„enableé…ç½®)</span><br><span class="line">copyright_authorã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…</span><br><span class="line">copyright_author_hrefã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…é“¾æ¥</span><br><span class="line">copyright_urlã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« è¿ç»“é“¾æ¥</span><br><span class="line">copyright_infoã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„ç‰ˆæƒå£°æ˜æ–‡å­—</span><br><span class="line">mathjaxã€å¯é€‰ã€‘æ˜¾ç¤ºmathjax(å½“è®¾ç½® mathjax çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false )</span><br><span class="line">katexã€å¯é€‰ã€‘æ˜¾ç¤º katex (å½“è®¾ç½® katex çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false )</span><br><span class="line">aplayerã€å¯é€‰ã€‘åœ¨éœ€è¦çš„é¡µé¢åŠ è½½ aplayer çš„ js å’Œ css,è¯·å‚è€ƒæ–‡ç« ä¸‹é¢çš„éŸ³ä¹ é…ç½®</span><br><span class="line">highlight_shrinkã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€(true/false)(é»˜è®¤ä¸ºè®¾ç½®ä¸­ highlight_shrink çš„é…ç½®)</span><br><span class="line">asideã€å¯é€‰ã€‘æ˜¾ç¤ºä¾§è¾¹æ  (é»˜è®¤ true)</span><br><span class="line">abcjsã€å¯é€‰ã€‘åŠ è½½ abcjs (å½“è®¾ç½® abcjs çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä½œè€…: Jerry</span><br><span class="line">é€£çµ: https://butterfly.js.org/posts/dc584b87/#Post-Front-matter</span><br><span class="line">ä¾†æº: Butterfly</span><br><span class="line">è‘—ä½œæ¬Šæ­¸ä½œè€…æ‰€æœ‰ã€‚å•†æ¥­è½‰è¼‰è«‹è¯çµ¡ä½œè€…ç²å¾—æˆæ¬Šï¼Œéå•†æ¥­è½‰è¼‰è«‹è¨»æ˜å‡ºè™•ã€‚</span><br></pre></td></tr></table></figure><h2 id="å¯¹åšå®¢è¿›è¡Œgitç‰ˆæœ¬æ§åˆ¶ï¼š"><a href="#å¯¹åšå®¢è¿›è¡Œgitç‰ˆæœ¬æ§åˆ¶ï¼š" class="headerlink" title="å¯¹åšå®¢è¿›è¡Œgitç‰ˆæœ¬æ§åˆ¶ï¼š"></a>å¯¹åšå®¢è¿›è¡Œgitç‰ˆæœ¬æ§åˆ¶ï¼š</h2><p>å°†æœ¬åœ°blogæ–‡ä»¶å¤¹æ¨é€åˆ°ä»“åº“</p><p>å½“éœ€è¦é‡æ–°æ‹‰å–blogæ–‡ä»¶å¤¹æ—¶ï¼Œåªéœ€è¦ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//è¿›å…¥æƒ³è¦æ”¾ç½®blogçš„ç»ˆç«¯</span><br><span class="line">git clone ä»“åº“é“¾æ¥</span><br><span class="line">//å®‰è£…ä¾èµ–</span><br><span class="line">cd blog</span><br><span class="line">npm install</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>å°†æœ¬åœ°ä»£ç æ›´æ–°åˆ°ä»“åº“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åœ¨blogç›®å½•ä¸‹ä¸­ç«¯æ‰§è¡Œï¼š</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;commitçš„åç§°(ä¸ªäººä¹ æƒ¯ï¼š20230604commit01)&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h2 id="hexo-å†™æ–‡ç« æ­¥éª¤ï¼š"><a href="#hexo-å†™æ–‡ç« æ­¥éª¤ï¼š" class="headerlink" title="hexo å†™æ–‡ç« æ­¥éª¤ï¼š"></a>hexo å†™æ–‡ç« æ­¥éª¤ï¼š</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">donn@Macc blog % hexo new &quot;ç®—æ³•å°ç»“&quot;</span><br><span class="line"></span><br><span class="line">INFO Validating config</span><br><span class="line"></span><br><span class="line">INFO Created: /opt/blog/source/_posts/ç®—æ³•å°ç»“.md</span><br></pre></td></tr></table></figure><ol><li><p>hexo new â€œæ–‡ç« åç§°â€</p></li><li><p>åœ¨å¯¹åº”æ–‡ä»¶ä¸­å†™å†…å®¹</p></li><li><p>å®Œæˆéƒ¨ç½²ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g -c</span><br><span class="line">hexo s</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure></li></ol><p>ğŸŒŸpushåˆ°githubä»“åº“æ—¶å‡ºç°è¶…æ—¶æŠ¥é”™çš„è§£å†³æ–¹æ¡ˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fatal: unable to access &#x27;https://github.com/Tangjiayang/Tangjiayang.github.io.git/&#x27;: Failed to connect to github.com port 443 after 75012 ms: Couldn&#x27;t connect to server</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">Error: Spawn failed</span><br><span class="line">    at ChildProcess.&lt;anonymous&gt; (/opt/blog/node_modules/hexo-util/lib/spawn.js:51:21)</span><br><span class="line">    at ChildProcess.emit (node:events:511:28)</span><br><span class="line">    at ChildProcess._handle.onexit (node:internal/child_process:293:12)</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å–æ¶ˆå…¨å±€ä»£ç†ï¼š</span><br><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¦‚æœè¿˜ä¸èƒ½è§£å†³ï¼š</span><br><span class="line">å°è¯•åˆ·æ–°DNSç¼“å­˜</span><br><span class="line">macç”¨æˆ·åˆ·æ–°DNSç¼“å­˜æŒ‡ä»¤ï¼š</span><br><span class="line">sudo killall -HUP mDNSResponder</span><br><span class="line">åˆ·æ–°åå°±å¯ä»¥å•¦ï½</span><br></pre></td></tr></table></figure><p>æ–‡ç« æ“ä½œï¼š</p><p>â€‹æ–‡ç« ç½®é¡¶ï¼š</p><p>â€‹æ·»åŠ é…ç½®      sticky: 1</p><h3 id="ä½¿ç”¨picgo-githubæ­å»ºå…è´¹ä¸ªäººå›¾åºŠï¼"><a href="#ä½¿ç”¨picgo-githubæ­å»ºå…è´¹ä¸ªäººå›¾åºŠï¼" class="headerlink" title="ä½¿ç”¨picgo+githubæ­å»ºå…è´¹ä¸ªäººå›¾åºŠï¼"></a>ä½¿ç”¨picgo+githubæ­å»ºå…è´¹ä¸ªäººå›¾åºŠï¼</h3><p>gitä½¿ç”¨ï¼š<a href="https://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html">https://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> åšå®¢åˆ›å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis-Plus</title>
      <link href="/2023/06/02/MyBatis-Plus/"/>
      <url>/2023/06/02/MyBatis-Plus/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€MyBatis-Plus"><a href="#ä¸€ã€MyBatis-Plus" class="headerlink" title="ä¸€ã€MyBatis-Plus"></a>ä¸€ã€MyBatis-Plus</h1><h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h2><p><a href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus (opens new window)</a>ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª <a href="https://www.mybatis.org/mybatis-3/">MyBatis (opens new window)</a>çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p><blockquote><p>æˆ‘ä»¬çš„æ„¿æ™¯æ˜¯æˆä¸º MyBatis æœ€å¥½çš„æ­æ¡£ï¼Œå°±åƒ <a href="https://baomidou.com/img/contra.jpg">é­‚æ–—ç½—</a> ä¸­çš„ 1Pã€2Pï¼ŒåŸºå‹æ­é…ï¼Œæ•ˆç‡ç¿»å€ã€‚</p></blockquote><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/relationship-with-mybatis.png" alt="img"></p><h2 id="2-ç‰¹æ€§"><a href="#2-ç‰¹æ€§" class="headerlink" title="2.ç‰¹æ€§"></a>2.ç‰¹æ€§</h2><ul><li><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</li><li><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ</li><li><strong>å¼ºå¤§çš„ CRUD æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† CRUD æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚</li><li><strong>æ”¯æŒ Lambda å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</li><li><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequenceï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</li><li><strong>æ”¯æŒ ActiveRecord æ¨¡å¼</strong>ï¼šæ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ</li><li><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ Write once, use anywhere ï¼‰</li><li><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€ Controller å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</li><li><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢</li><li><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€Postgreã€SQLServer ç­‰å¤šç§æ•°æ®åº“</li><li><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º SQL è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢</li><li><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ</li></ul><h2 id="3-æ”¯æŒæ•°æ®åº“"><a href="#3-æ”¯æŒæ•°æ®åº“" class="headerlink" title="3.æ”¯æŒæ•°æ®åº“"></a>3.æ”¯æŒæ•°æ®åº“</h2><blockquote><p>ä»»ä½•èƒ½ä½¿ç”¨ <code>MyBatis</code> è¿›è¡Œ CRUD, å¹¶ä¸”æ”¯æŒæ ‡å‡† SQL çš„æ•°æ®åº“ï¼Œå…·ä½“æ”¯æŒæƒ…å†µå¦‚ä¸‹ï¼Œå¦‚æœä¸åœ¨ä¸‹åˆ—è¡¨æŸ¥çœ‹åˆ†é¡µéƒ¨åˆ†æ•™ç¨‹ PR æ‚¨çš„æ”¯æŒã€‚</p></blockquote><ul><li>MySQLï¼ŒOracleï¼ŒDB2ï¼ŒH2ï¼ŒHSQLï¼ŒSQLiteï¼ŒPostgreSQLï¼ŒSQLServerï¼ŒPhoenixï¼ŒGauss ï¼ŒClickHouseï¼ŒSybaseï¼ŒOceanBaseï¼ŒFirebirdï¼ŒCubridï¼ŒGoldilocksï¼Œcsiidb</li><li>è¾¾æ¢¦æ•°æ®åº“ï¼Œè™šè°·æ•°æ®åº“ï¼Œäººå¤§é‡‘ä»“æ•°æ®åº“ï¼Œå—å¤§é€šç”¨(ååº“)æ•°æ®åº“ï¼Œå—å¤§é€šç”¨æ•°æ®åº“ï¼Œç¥é€šæ•°æ®åº“ï¼Œç€šé«˜æ•°æ®åº“</li></ul><h2 id="4-æ¡†æ¶ç»“æ„"><a href="#4-æ¡†æ¶ç»“æ„" class="headerlink" title="4.æ¡†æ¶ç»“æ„"></a>4.æ¡†æ¶ç»“æ„</h2><p>![image-20230517103049072](&#x2F;Users&#x2F;donn&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230517103049072.png)</p><h2 id="5-å®˜æ–¹åœ°å€"><a href="#5-å®˜æ–¹åœ°å€" class="headerlink" title="5.å®˜æ–¹åœ°å€"></a>5.å®˜æ–¹åœ°å€</h2><blockquote><p><strong>å®˜æ–¹ç½‘ç«™ï¼š</strong><a href="https://baomidou.com/">https://baomidou.com/</a></p><p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong><a href="https://baomidou.com/pages/24112f/">https://baomidou.com/pages/24112f/</a></p></blockquote><h1 id="äºŒã€å…¥é—¨æ¡ˆä¾‹"><a href="#äºŒã€å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="äºŒã€å…¥é—¨æ¡ˆä¾‹"></a>äºŒã€å…¥é—¨æ¡ˆä¾‹</h1><h2 id="1-å¼€å‘ç¯å¢ƒ"><a href="#1-å¼€å‘ç¯å¢ƒ" class="headerlink" title="1.å¼€å‘ç¯å¢ƒ"></a>1.å¼€å‘ç¯å¢ƒ</h2><ul><li><strong>IDEï¼šIDEA 2019.3.5</strong></li><li><strong>JDKï¼šJDK8+</strong></li><li><strong>æ„å»ºå·¥å…·ï¼šMaven 3.5.4</strong></li><li><strong>MySQLï¼šMySQL 8.0.24</strong></li><li><strong>Navicatï¼šNavicat Premium 15</strong></li><li><strong>Spring Bootï¼š2.6.7</strong></li><li><strong>MyBatis-Plusï¼š3.5.1</strong></li></ul><h2 id="2-å»ºåº“å»ºè¡¨"><a href="#2-å»ºåº“å»ºè¡¨" class="headerlink" title="2.å»ºåº“å»ºè¡¨"></a>2.å»ºåº“å»ºè¡¨</h2><ul><li><p><strong>æ‰“å¼€Navicatè¿è¡Œä»¥ä¸‹SQLè„šæœ¬è¿›è¡Œå»ºåº“å»ºè¡¨</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE `mybatis_plus` <span class="comment">/*!40100 DEFAULT CHARACTER SET utf8mb4 */</span>; </span><br><span class="line">use `mybatis_plus`; </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` ( </span><br><span class="line">    `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>, </span><br><span class="line">    `name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å§“å&#x27;</span>, </span><br><span class="line">    `age` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¹´é¾„&#x27;</span>, </span><br><span class="line">    `email` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é‚®ç®±&#x27;</span>, </span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`) </span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ’å…¥å‡ æ¡æµ‹è¯•æ•°æ®</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> (id, name, age, email) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;Jone&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;test1@baomidou.com&#x27;</span>), </span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;Jack&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;test2@baomidou.com&#x27;</span>), </span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;Tom&#x27;</span>, <span class="number">28</span>, <span class="string">&#x27;test3@baomidou.com&#x27;</span>), </span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;Sandy&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>), </span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;Billie&#x27;</span>, <span class="number">24</span>, <span class="string">&#x27;test5@baomidou.com&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-åˆ›å»ºå·¥ç¨‹"><a href="#3-åˆ›å»ºå·¥ç¨‹" class="headerlink" title="3.åˆ›å»ºå·¥ç¨‹"></a>3.åˆ›å»ºå·¥ç¨‹</h2><ul><li><p><strong>ä½¿ç”¨<code>Spring Initializer</code>å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ª Spring Boot å·¥ç¨‹</strong></p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519140839640.png" alt="image-20220519140839640" style="zoom:80%;" /><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519141335981.png" alt="image-20220519141335981" style="zoom:80%;" /><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519141737405.png" alt="image-20220519141737405" style="zoom:80%;" /><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519141849937.png" alt="image-20220519141849937" style="zoom:80%;" /></li><li><p><strong>å¼•å…¥<code>MyBatis-Plus</code>çš„ä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å…¶ä»–ç›¸å…³ä¾èµ–ï¼š</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>å®‰è£…<code>Lombok</code>æ’ä»¶</strong></p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519143257305.png" alt="image-20220519143257305" style="zoom:80%;" /></li></ul><h2 id="4-é…ç½®ç¼–ç "><a href="#4-é…ç½®ç¼–ç " class="headerlink" title="4.é…ç½®ç¼–ç "></a>4.é…ç½®ç¼–ç </h2><ul><li><p><strong>é…ç½®<code>application.yml</code>æ–‡ä»¶</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®ç«¯å£</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment">#é…ç½®æ•°æ®æº</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment">#é…ç½®æ•°æ®æºç±»å‹</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="comment">#é…ç½®è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> &#123;<span class="string">username</span>&#125;</span><br><span class="line">    <span class="attr">password:</span> &#123;<span class="string">password</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#MyBatis-Plusç›¸å…³é…ç½®</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment">#é…ç½®æ—¥å¿—</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨ Spring Boot å¯åŠ¨ç±»ä¸­æ·»åŠ  <code>@MapperScan</code> æ³¨è§£ï¼Œæ‰«æ Mapper æ–‡ä»¶å¤¹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;æŒ‡å®šMapperæ¥å£æ‰€åœ¨çš„åŒ…&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusDemoApplication</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">SpringApplication.run(MybatisPlusDemoApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ç¼–å†™å®ä½“ç±» <code>User.java</code>ï¼ˆæ­¤å¤„ä½¿ç”¨äº† Lombok ç®€åŒ–ä»£ç ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ç¼–å†™ Mapper åŒ…ä¸‹çš„ <code>UserMapper</code>æ¥å£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-æµ‹è¯•æŸ¥è¯¢"><a href="#5-æµ‹è¯•æŸ¥è¯¢" class="headerlink" title="5.æµ‹è¯•æŸ¥è¯¢"></a>5.æµ‹è¯•æŸ¥è¯¢</h2><ul><li><p><strong>ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç±»<code>MyBatisPlusTest.java</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusTest</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSelectList</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡æ¡ä»¶æ„é€ å™¨æŸ¥è¯¢ä¸€ä¸ªlisté›†åˆï¼Œè‹¥æ²¡æœ‰æ¡ä»¶ï¼Œåˆ™å¯ä»¥è®¾ç½®nullä¸ºå‚æ•°</span></span><br><span class="line">        List&lt;User&gt; users = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        users.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ§åˆ¶å°æ‰“å°æŸ¥è¯¢ç»“æœ</strong></p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519150454211.png" alt="image-20220519150454211"></p></li></ul><h1 id="ä¸‰ã€å¢åˆ æ”¹æŸ¥"><a href="#ä¸‰ã€å¢åˆ æ”¹æŸ¥" class="headerlink" title="ä¸‰ã€å¢åˆ æ”¹æŸ¥"></a>ä¸‰ã€å¢åˆ æ”¹æŸ¥</h1><h2 id="1-BaseMapper-lt-T-gt"><a href="#1-BaseMapper-lt-T-gt" class="headerlink" title="1.BaseMapper&lt;T&gt;"></a>1.BaseMapper&lt;T&gt;</h2><blockquote><p>è¯´æ˜:</p><ul><li>é€šç”¨ CRUD å°è£…BaseMapper æ¥å£ï¼Œä¸º <code>Mybatis-Plus</code> å¯åŠ¨æ—¶è‡ªåŠ¨è§£æå®ä½“è¡¨å…³ç³»æ˜ å°„è½¬æ¢ä¸º <code>Mybatis</code> å†…éƒ¨å¯¹è±¡æ³¨å…¥å®¹å™¨</li><li>æ³›å‹ <code>T</code> ä¸ºä»»æ„å®ä½“å¯¹è±¡</li><li>å‚æ•° <code>Serializable</code> ä¸ºä»»æ„ç±»å‹ä¸»é”® <code>Mybatis-Plus</code> ä¸æ¨èä½¿ç”¨å¤åˆä¸»é”®çº¦å®šæ¯ä¸€å¼ è¡¨éƒ½æœ‰è‡ªå·±çš„å”¯ä¸€ <code>id</code> ä¸»é”®</li><li>å¯¹è±¡ <code>Wrapper</code> ä¸ºæ¡ä»¶æ„é€ å™¨</li></ul></blockquote><p>MyBatis-Plusä¸­çš„åŸºæœ¬CRUDåœ¨å†…ç½®çš„BaseMapperä¸­éƒ½å·²å¾—åˆ°äº†å®ç°ï¼Œå› æ­¤æˆ‘ä»¬ç»§æ‰¿è¯¥æ¥å£ä»¥åå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><p>æœ¬æ¬¡æ¼”ç¤ºçš„CRUDæ“ä½œä¸åŒ…å«å‚æ•°å¸¦æœ‰æ¡ä»¶æ„é€ å™¨çš„æ–¹æ³•ï¼Œå…³äºæ¡ä»¶æ„é€ å™¨å°†å•ç‹¬åœ¨ä¸€ä¸ªç« èŠ‚è¿›è¡Œæ¼”ç¤ºã€‚</p><hr><blockquote><p><strong>BaseMapperä¸­æä¾›çš„CRUDæ–¹æ³•ï¼š</strong></p></blockquote><ul><li><p><strong>å¢åŠ ï¼šInsert</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’å…¥ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insert</span><span class="params">(T entity)</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤ï¼šDelete</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® entity æ¡ä»¶ï¼Œåˆ é™¤è®°å½•</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">delete</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; wrapper)</span>;</span><br><span class="line"><span class="comment">// åˆ é™¤ï¼ˆæ ¹æ®ID æ‰¹é‡åˆ é™¤ï¼‰</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® ID åˆ é™¤</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteByMap</span><span class="params">(<span class="meta">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¿®æ”¹ï¼šUpdate</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® whereWrapper æ¡ä»¶ï¼Œæ›´æ–°è®°å½•</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">update</span><span class="params">(<span class="meta">@Param(Constants.ENTITY)</span> T updateEntity, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; whereWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® ID ä¿®æ”¹</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">updateById</span><span class="params">(<span class="meta">@Param(Constants.ENTITY)</span> T entity)</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥è¯¢ï¼šSelete</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® ID æŸ¥è¯¢</span></span><br><span class="line">T <span class="title function_">selectById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line">T <span class="title function_">selectOne</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">selectBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">selectList</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢ï¼ˆæ ¹æ® columnMap æ¡ä»¶ï¼‰</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">selectByMap</span><span class="params">(<span class="meta">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">selectMaps</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ã€‚æ³¨æ„ï¼š åªè¿”å›ç¬¬ä¸€ä¸ªå­—æ®µçš„å€¼</span></span><br><span class="line">List&lt;Object&gt; <span class="title function_">selectObjs</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰</span></span><br><span class="line">IPage&lt;T&gt; <span class="title function_">selectPage</span><span class="params">(IPage&lt;T&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰</span></span><br><span class="line">IPage&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">selectMapsPage</span><span class="params">(IPage&lt;T&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line">Integer <span class="title function_">selectCount</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br></pre></td></tr></table></figure></li></ul><h2 id="2-è°ƒç”¨Mapperå±‚å®ç°CRUD"><a href="#2-è°ƒç”¨Mapperå±‚å®ç°CRUD" class="headerlink" title="2.è°ƒç”¨Mapperå±‚å®ç°CRUD"></a>2.è°ƒç”¨Mapperå±‚å®ç°CRUD</h2><h3 id="2-1æ’å…¥"><a href="#2-1æ’å…¥" class="headerlink" title="2.1æ’å…¥"></a>2.1æ’å…¥</h3><hr><blockquote><p><strong>æœ€ç»ˆæ‰§è¡Œçš„ç»“æœï¼Œæ‰€è·å–çš„idä¸º1527206783590903810</strong></p><p><strong>è¿™æ˜¯å› ä¸ºMyBatis-Plusåœ¨å®ç°æ’å…¥æ•°æ®æ—¶ï¼Œä¼šé»˜è®¤åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆid</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æµ‹è¯•æ’å…¥ä¸€æ¡æ•°æ®</span></span><br><span class="line"><span class="comment">  * MyBatis-Plusåœ¨å®ç°æ’å…¥æ•°æ®æ—¶ï¼Œä¼šé»˜è®¤åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆid</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;Vz&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">21</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;vz@oz6.cn&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.insert(user);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;æ·»åŠ æˆåŠŸï¼&quot;</span> : <span class="string">&quot;æ·»åŠ å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸ºï¼š&quot;</span> + result);</span><br><span class="line">    <span class="comment">//1527206783590903810ï¼ˆå½“å‰ id ä¸ºé›ªèŠ±ç®—æ³•è‡ªåŠ¨ç”Ÿæˆçš„idï¼‰</span></span><br><span class="line">    System.out.println(<span class="string">&quot;idè‡ªåŠ¨è·å–&quot;</span> + user.getId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2åˆ é™¤"><a href="#2-2åˆ é™¤" class="headerlink" title="2.2åˆ é™¤"></a>2.2åˆ é™¤</h3><hr><h4 id="aã€æ ¹æ®IDåˆ é™¤æ•°æ®"><a href="#aã€æ ¹æ®IDåˆ é™¤æ•°æ®" class="headerlink" title="aã€æ ¹æ®IDåˆ é™¤æ•°æ®"></a>aã€æ ¹æ®IDåˆ é™¤æ•°æ®</h4><blockquote><p><strong>è°ƒç”¨æ–¹æ³•ï¼šint deleteById(Serializable id);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æµ‹è¯•æ ¹æ®idåˆ é™¤ä¸€æ¡æ•°æ®</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.deleteById(<span class="number">1527206783590903810L</span>);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;åˆ é™¤æˆåŠŸï¼&quot;</span> : <span class="string">&quot;åˆ é™¤å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸ºï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="bã€æ ¹æ®IDæ‰¹é‡åˆ é™¤æ•°æ®"><a href="#bã€æ ¹æ®IDæ‰¹é‡åˆ é™¤æ•°æ®" class="headerlink" title="bã€æ ¹æ®IDæ‰¹é‡åˆ é™¤æ•°æ®"></a>bã€æ ¹æ®IDæ‰¹é‡åˆ é™¤æ•°æ®</h4><blockquote><p><strong>è°ƒç”¨æ–¹æ³•ï¼šint deleteBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æµ‹è¯•é€šè¿‡idæ‰¹é‡åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatchIds</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;Long&gt; ids = Arrays.asList(<span class="number">6L</span>,<span class="number">7L</span>,<span class="number">8L</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.deleteBatchIds(ids);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;åˆ é™¤æˆåŠŸï¼&quot;</span> : <span class="string">&quot;åˆ é™¤å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸ºï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="cã€æ ¹æ®Mapæ¡ä»¶åˆ é™¤æ•°æ®"><a href="#cã€æ ¹æ®Mapæ¡ä»¶åˆ é™¤æ•°æ®" class="headerlink" title="cã€æ ¹æ®Mapæ¡ä»¶åˆ é™¤æ•°æ®"></a>cã€æ ¹æ®Mapæ¡ä»¶åˆ é™¤æ•°æ®</h4><blockquote><p><strong>è°ƒç”¨æ–¹æ³•ï¼šint deleteByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æµ‹è¯•æ ¹æ®Mapé›†åˆä¸­æ‰€è®¾ç½®çš„æ¡ä»¶åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteByMap</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å½“å‰æ¼”ç¤ºä¸ºæ ¹æ®nameå’Œageåˆ é™¤æ•°æ®</span></span><br><span class="line">    <span class="comment">//æ‰§è¡ŒSQLä¸ºï¼šDELETE FROM user WHERE name = ? AND age = ?</span></span><br><span class="line">    Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;Vz&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;age&quot;</span>,<span class="number">21</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.deleteByMap(map);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;åˆ é™¤æˆåŠŸï¼&quot;</span> : <span class="string">&quot;åˆ é™¤å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸ºï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3ä¿®æ”¹"><a href="#2-3ä¿®æ”¹" class="headerlink" title="2.3ä¿®æ”¹"></a>2.3ä¿®æ”¹</h3><blockquote><p><strong>è°ƒç”¨æ–¹æ³•ï¼šint updateById(@Param(Constants.ENTITY) T entity);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æµ‹è¯•æ ¹æ®idä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æ‰§è¡ŒSQLä¸ºï¼š UPDATE user SET name=?, age=?, email=? WHERE id=?</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">6L</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;VzUpdate&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;Vz@sina.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.updateById(user);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;ä¿®æ”¹æˆåŠŸï¼&quot;</span> : <span class="string">&quot;ä¿®æ”¹å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸ºï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4æŸ¥è¯¢"><a href="#2-4æŸ¥è¯¢" class="headerlink" title="2.4æŸ¥è¯¢"></a>2.4æŸ¥è¯¢</h3><hr><h4 id="aã€æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"><a href="#aã€æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="aã€æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"></a>aã€æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</h4><blockquote><p><strong>è°ƒç”¨æ–¹æ³•ï¼šT selectById(Serializable id);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æµ‹è¯•æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·æ•°æ®</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="bã€æ ¹æ®å¤šä¸ªIDæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ä¿¡æ¯"><a href="#bã€æ ¹æ®å¤šä¸ªIDæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ä¿¡æ¯" class="headerlink" title="bã€æ ¹æ®å¤šä¸ªIDæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ä¿¡æ¯"></a>bã€æ ¹æ®å¤šä¸ªIDæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ä¿¡æ¯</h4><blockquote><p><strong>è°ƒç”¨æ–¹æ³•ï¼šList<T> selectBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ ¹æ®å¤šä¸ªidæŸ¥è¯¢ç”¨æˆ·æ•°æ®</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectBatchIds</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æ‰§è¡ŒSQLä¸ºï¼šSELECT id,name,age,email FROM user WHERE id IN ( ? , ? , ? )</span></span><br><span class="line">    List&lt;Long&gt; ids = Arrays.asList(<span class="number">1L</span>,<span class="number">2L</span>,<span class="number">3L</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectBatchIds(ids);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="cã€æ ¹æ®Mapæ¡ä»¶æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"><a href="#cã€æ ¹æ®Mapæ¡ä»¶æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="cã€æ ¹æ®Mapæ¡ä»¶æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"></a>cã€æ ¹æ®Mapæ¡ä»¶æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</h4><blockquote><p><strong>è°ƒç”¨æ–¹æ³•ï¼šList<T> selectByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ ¹æ®Mapæ‰€è®¾ç½®çš„æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByMap</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æ‰§è¡ŒSQLä¸ºï¼šSELECT id,name,age,email FROM user WHERE age = ?</span></span><br><span class="line">    Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;age&quot;</span>,<span class="number">18</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectByMap(map);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="dã€æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯"><a href="#dã€æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="dã€æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯"></a>dã€æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</h4><blockquote><p><strong>è°ƒç”¨æ–¹æ³•ï¼šList<T> selectList(@Param(Constants.WRAPPER) Wrapper<T> queryWrapper);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSelectList</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-é€šç”¨Service"><a href="#3-é€šç”¨Service" class="headerlink" title="3.é€šç”¨Service"></a>3.é€šç”¨Service</h2><blockquote><p>è¯´æ˜:</p><ul><li>é€šç”¨ Service CRUD å°è£…<code>IService</code>æ¥å£ï¼Œè¿›ä¸€æ­¥å°è£… CRUD é‡‡ç”¨ <code>get æŸ¥è¯¢å•è¡Œ</code> <code>remove åˆ é™¤</code> <code>list æŸ¥è¯¢é›†åˆ</code> <code>page åˆ†é¡µ</code> å‰ç¼€å‘½åæ–¹å¼åŒºåˆ† <code>Mapper</code> å±‚é¿å…æ··æ·†ï¼Œ</li><li>æ³›å‹ <code>T</code> ä¸ºä»»æ„å®ä½“å¯¹è±¡</li><li>å»ºè®®å¦‚æœå­˜åœ¨è‡ªå®šä¹‰é€šç”¨ Service æ–¹æ³•çš„å¯èƒ½ï¼Œè¯·åˆ›å»ºè‡ªå·±çš„ <code>IBaseService</code> ç»§æ‰¿ <code>Mybatis-Plus</code> æä¾›çš„åŸºç±»</li><li>å¯¹è±¡ <code>Wrapper</code> ä¸º æ¡ä»¶æ„é€ å™¨</li></ul></blockquote><p>MyBatis-Plusä¸­æœ‰ä¸€ä¸ªæ¥å£ **<code>IService</code>**å’Œå…¶å®ç°ç±» **<code>ServiceImpl</code>**ï¼Œå°è£…äº†å¸¸è§çš„ä¸šåŠ¡å±‚é€»è¾‘ï¼Œè¯¦æƒ…æŸ¥çœ‹æºç IServiceå’ŒServiceImpl</p><p>å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ä»…éœ€åœ¨è‡ªå·±å®šä¹‰çš„**<code>Service</code><strong>æ¥å£ä¸­ç»§æ‰¿</strong><code>IService</code><strong>æ¥å£ï¼Œåœ¨è‡ªå·±çš„å®ç°ç±»ä¸­å®ç°è‡ªå·±çš„Serviceå¹¶ç»§æ‰¿</strong><code>ServiceImpl</code>**å³å¯</p><hr><blockquote><p><strong>IServiceä¸­çš„CRUDæ–¹æ³•</strong></p></blockquote><ul><li><p><strong>å¢åŠ ï¼šSaveã€SaveOrUpdate</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’å…¥ä¸€æ¡è®°å½•ï¼ˆé€‰æ‹©å­—æ®µï¼Œç­–ç•¥æ’å…¥ï¼‰</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">save</span><span class="params">(T entity)</span>;</span><br><span class="line"><span class="comment">// æ’å…¥ï¼ˆæ‰¹é‡ï¼‰</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span>;</span><br><span class="line"><span class="comment">// æ’å…¥ï¼ˆæ‰¹é‡ï¼‰</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TableId æ³¨è§£å­˜åœ¨æ›´æ–°è®°å½•ï¼Œå¦æ’å…¥ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdate</span><span class="params">(T entity)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ®updateWrapperå°è¯•æ›´æ–°ï¼Œå¦ç»§ç»­æ‰§è¡ŒsaveOrUpdate(T)æ–¹æ³•</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdate</span><span class="params">(T entity, Wrapper&lt;T&gt; updateWrapper)</span>;</span><br><span class="line"><span class="comment">// æ‰¹é‡ä¿®æ”¹æ’å…¥</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span>;</span><br><span class="line"><span class="comment">// æ‰¹é‡ä¿®æ”¹æ’å…¥</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤ï¼šRemove</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® entity æ¡ä»¶ï¼Œåˆ é™¤è®°å½•</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® ID åˆ é™¤</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">removeByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"><span class="comment">// åˆ é™¤ï¼ˆæ ¹æ®ID æ‰¹é‡åˆ é™¤ï¼‰</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">removeByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; idList)</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¿®æ”¹ï¼šUpdate</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® UpdateWrapper æ¡ä»¶ï¼Œæ›´æ–°è®°å½• éœ€è¦è®¾ç½®sqlset</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">update</span><span class="params">(Wrapper&lt;T&gt; updateWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® whereWrapper æ¡ä»¶ï¼Œæ›´æ–°è®°å½•</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">update</span><span class="params">(T updateEntity, Wrapper&lt;T&gt; whereWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® ID é€‰æ‹©ä¿®æ”¹</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">updateById</span><span class="params">(T entity)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ®ID æ‰¹é‡æ›´æ–°</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ®ID æ‰¹é‡æ›´æ–°</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥è¯¢ï¼šGetã€Listã€Count</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® ID æŸ¥è¯¢</span></span><br><span class="line">T <span class="title function_">getById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•ã€‚ç»“æœé›†ï¼Œå¦‚æœæ˜¯å¤šä¸ªä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéšæœºå–ä¸€æ¡åŠ ä¸Šé™åˆ¶æ¡ä»¶ wrapper.last(&quot;LIMIT 1&quot;)</span></span><br><span class="line">T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line">T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, <span class="type">boolean</span> throwEx)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">getMap</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line">&lt;V&gt; V <span class="title function_">getObj</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">list</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢åˆ—è¡¨</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">list</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰</span></span><br><span class="line">Collection&lt;T&gt; <span class="title function_">listByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢ï¼ˆæ ¹æ® columnMap æ¡ä»¶ï¼‰</span></span><br><span class="line">Collection&lt;T&gt; <span class="title function_">listByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ‰€æœ‰åˆ—è¡¨</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢åˆ—è¡¨</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line">List&lt;Object&gt; <span class="title function_">listObjs</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line">&lt;V&gt; List&lt;V&gt; <span class="title function_">listObjs</span><span class="params">(Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line">List&lt;Object&gt; <span class="title function_">listObjs</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line">&lt;V&gt; List&lt;V&gt; <span class="title function_">listObjs</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">count</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">count</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ†é¡µï¼šPage</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® ID æŸ¥è¯¢</span></span><br><span class="line">T <span class="title function_">getById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•ã€‚ç»“æœé›†ï¼Œå¦‚æœæ˜¯å¤šä¸ªä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéšæœºå–ä¸€æ¡åŠ ä¸Šé™åˆ¶æ¡ä»¶ wrapper.last(&quot;LIMIT 1&quot;)</span></span><br><span class="line">T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line">T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, <span class="type">boolean</span> throwEx)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">getMap</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line">&lt;V&gt; V <span class="title function_">getObj</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-è°ƒç”¨Serviceå±‚æ“ä½œæ•°æ®"><a href="#4-è°ƒç”¨Serviceå±‚æ“ä½œæ•°æ®" class="headerlink" title="4.è°ƒç”¨Serviceå±‚æ“ä½œæ•°æ®"></a>4.è°ƒç”¨Serviceå±‚æ“ä½œæ•°æ®</h2><blockquote><p>æˆ‘ä»¬åœ¨è‡ªå·±çš„Serviceæ¥å£ä¸­é€šè¿‡ç»§æ‰¿MyBatis-Plusæä¾›çš„IServiceæ¥å£ï¼Œä¸ä»…å¯ä»¥è·å¾—å…¶æä¾›çš„CRUDæ–¹æ³•ï¼Œè€Œä¸”è¿˜å¯ä»¥ä½¿ç”¨è‡ªèº«å®šä¹‰çš„æ–¹æ³•ã€‚</p></blockquote><ul><li><p><strong>åˆ›å»º<code>UserService</code>å¹¶ç»§æ‰¿<code>IService</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * UserServiceç»§æ‰¿IServiceæ¨¡æ¿æä¾›çš„åŸºç¡€åŠŸèƒ½ </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»º<code>UserService</code>çš„å®ç°ç±»å¹¶ç»§æ‰¿<code>ServiceImpl</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ServiceImplå®ç°äº†IServiceï¼Œæä¾›äº†IServiceä¸­åŸºç¡€åŠŸèƒ½çš„å®ç° </span></span><br><span class="line"><span class="comment">  * è‹¥ServiceImplæ— æ³•æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è‡ªå®šçš„UserServiceå®šä¹‰æ–¹æ³•ï¼Œå¹¶åœ¨å®ç°ç±»ä¸­å®ç°</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper,User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•æŸ¥è¯¢è®°å½•æ•°</strong></p><blockquote><p><strong>è°ƒç”¨æ–¹æ³•ï¼šint count();</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetCount</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line">    <span class="comment">//æ‰§è¡Œçš„SQLä¸ºï¼šSELECT COUNT( * ) FROM user</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> userService.count();</span><br><span class="line">    System.out.println(<span class="string">&quot;æ€»è®°å½•æ•°ï¼š&quot;</span> + count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•æ‰¹é‡æ’å…¥æ•°æ®</strong></p><blockquote><p><strong>è°ƒç”¨æ–¹æ³•ï¼šboolean saveBatch(Collection<T> entityList);</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;Vz&quot;</span>+i);</span><br><span class="line">        user.setAge(<span class="number">20</span>+i);</span><br><span class="line">        list.add(user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> userService.saveBatch(list);</span><br><span class="line">    System.out.println(b ? <span class="string">&quot;æ·»åŠ æˆåŠŸï¼&quot;</span> : <span class="string">&quot;æ·»åŠ å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="å››ã€å¸¸ç”¨æ³¨è§£"><a href="#å››ã€å¸¸ç”¨æ³¨è§£" class="headerlink" title="å››ã€å¸¸ç”¨æ³¨è§£"></a>å››ã€å¸¸ç”¨æ³¨è§£</h1><blockquote><p>MyBatis-Plusæä¾›çš„æ³¨è§£å¯ä»¥å¸®æˆ‘ä»¬è§£å†³ä¸€äº›æ•°æ®åº“ä¸å®ä½“ä¹‹é—´ç›¸äº’æ˜ å°„çš„é—®é¢˜ã€‚</p></blockquote><h2 id="1-TableName"><a href="#1-TableName" class="headerlink" title="1.@TableName"></a>1.@TableName</h2><blockquote><p>ç»è¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼Œåœ¨ä½¿ç”¨MyBatis-Pluså®ç°åŸºæœ¬çš„CRUDæ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‡å®šè¦æ“ä½œçš„è¡¨ï¼Œåªæ˜¯åœ¨Mapperæ¥å£ç»§æ‰¿BaseMapperæ—¶ï¼Œè®¾ç½®äº†æ³›å‹Userï¼Œè€Œæ“ä½œçš„è¡¨ä¸ºuserè¡¨ï¼Œç”±æ­¤å¾—å‡ºç»“è®ºï¼ŒMyBatis-Plusåœ¨ç¡®å®šæ“ä½œçš„è¡¨æ—¶ï¼Œç”±BaseMapperçš„æ³›å‹å†³å®šï¼Œå³å®ä½“ç±»å‹å†³å®šï¼Œä¸”é»˜è®¤æ“ä½œçš„è¡¨åå’Œå®ä½“ç±»å‹çš„ç±»åä¸€è‡´ã€‚</p></blockquote><h3 id="1-1å¼•å‡ºé—®é¢˜"><a href="#1-1å¼•å‡ºé—®é¢˜" class="headerlink" title="1.1å¼•å‡ºé—®é¢˜"></a>1.1å¼•å‡ºé—®é¢˜</h3><hr><blockquote><p><strong>è‹¥å®ä½“ç±»ç±»å‹çš„ç±»åå’Œè¦æ“ä½œçš„è¡¨çš„è¡¨åä¸ä¸€è‡´ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></p></blockquote><ul><li><p>æˆ‘ä»¬å°†è¡¨<code>user</code>æ›´åä¸º<code>t_user</code>ï¼Œæµ‹è¯•æŸ¥è¯¢åŠŸèƒ½</p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520093844842.png" alt="image-20220520093844842"></p></li><li><p>ç¨‹åºæŠ›å‡ºå¼‚å¸¸ï¼Œ<strong>Table â€˜mybatis_plus.userâ€™ doesnâ€™t exist</strong>ï¼Œå› ä¸ºç°åœ¨çš„è¡¨åä¸º<code>t_user</code>ï¼Œè€Œé»˜è®¤æ“ä½œçš„è¡¨åå’Œå®ä½“ç±»å‹çš„ç±»åä¸€è‡´ï¼Œå³<code>user</code>è¡¨</p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520094126411.png" alt="image-20220520094126411"></p></li></ul><h3 id="1-2è§£å†³é—®é¢˜"><a href="#1-2è§£å†³é—®é¢˜" class="headerlink" title="1.2è§£å†³é—®é¢˜"></a>1.2è§£å†³é—®é¢˜</h3><hr><h4 id="aã€ä½¿ç”¨æ³¨è§£è§£å†³é—®é¢˜"><a href="#aã€ä½¿ç”¨æ³¨è§£è§£å†³é—®é¢˜" class="headerlink" title="aã€ä½¿ç”¨æ³¨è§£è§£å†³é—®é¢˜"></a>aã€ä½¿ç”¨æ³¨è§£è§£å†³é—®é¢˜</h4><blockquote><p><strong>åœ¨å®ä½“ç±»ç±»å‹ä¸Šæ·»åŠ <code>@TableName(&quot;t_user&quot;)</code>ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨ï¼Œå³å¯æˆåŠŸæ‰§è¡ŒSQLè¯­å¥</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="bã€ä½¿ç”¨å…¨å±€é…ç½®è§£å†³é—®é¢˜"><a href="#bã€ä½¿ç”¨å…¨å±€é…ç½®è§£å†³é—®é¢˜" class="headerlink" title="bã€ä½¿ç”¨å…¨å±€é…ç½®è§£å†³é—®é¢˜"></a>bã€ä½¿ç”¨å…¨å±€é…ç½®è§£å†³é—®é¢˜</h4><blockquote><p><strong>åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä»¥ä¸Šçš„é—®é¢˜ï¼Œå³å®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨éƒ½æœ‰å›ºå®šçš„å‰ç¼€ï¼Œä¾‹å¦‚ <code>t_</code> æˆ– <code>tbl_</code> æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨MyBatis-Plusæä¾›çš„å…¨å±€é…ç½®ï¼Œä¸ºå®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨åè®¾ç½®é»˜è®¤çš„å‰ç¼€ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦åœ¨æ¯ä¸ªå®ä½“ç±»ä¸Šé€šè¿‡@TableNameæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨</strong></p></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment"># è®¾ç½®å®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨çš„ç»Ÿä¸€å‰ç¼€</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">t_</span></span><br></pre></td></tr></table></figure><h2 id="2-TableId"><a href="#2-TableId" class="headerlink" title="2.@TableId"></a>2.@TableId</h2><blockquote><p><strong>ç»è¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼ŒMyBatis-Plusåœ¨å®ç°CRUDæ—¶ï¼Œä¼šé»˜è®¤å°†idä½œä¸ºä¸»é”®åˆ—ï¼Œå¹¶åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œé»˜è®¤åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆid</strong></p></blockquote><h3 id="2-1å¼•å‡ºé—®é¢˜"><a href="#2-1å¼•å‡ºé—®é¢˜" class="headerlink" title="2.1å¼•å‡ºé—®é¢˜"></a>2.1å¼•å‡ºé—®é¢˜</h3><hr><blockquote><p><strong>è‹¥å®ä½“ç±»å’Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„ä¸æ˜¯idï¼Œè€Œæ˜¯å…¶ä»–å­—æ®µï¼Œä¾‹å¦‚uidï¼ŒMyBatis-Plusä¼šè‡ªåŠ¨è¯†åˆ«uidä¸ºä¸»é”®åˆ—å—ï¼Ÿ</strong></p></blockquote><ul><li><p>æˆ‘ä»¬å®ä½“ç±»ä¸­çš„å±æ€§<code>id</code>æ”¹ä¸º<code>uid</code>ï¼Œå°†è¡¨ä¸­çš„å­—æ®µ<code>id</code>ä¹Ÿæ”¹ä¸º<code>uid</code>ï¼Œæµ‹è¯•æ·»åŠ åŠŸèƒ½</p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520100939157.png" alt="image-20220520100939157"></p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520100715109.png" alt="image-20220520100715109"></p></li><li><p>ç¨‹åºæŠ›å‡ºå¼‚å¸¸ï¼Œ<strong>Field â€˜uidâ€™ doesnâ€™t have a default value</strong>ï¼Œè¯´æ˜MyBatis-Plusæ²¡æœ‰å°†<code>uid</code>ä½œä¸ºä¸»é”®èµ‹å€¼</p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520101317761.png" alt="image-20220520101317761"></p></li></ul><h3 id="2-2è§£å†³é—®é¢˜"><a href="#2-2è§£å†³é—®é¢˜" class="headerlink" title="2.2è§£å†³é—®é¢˜"></a>2.2è§£å†³é—®é¢˜</h3><hr><blockquote><p><strong>åœ¨å®ä½“ç±»ä¸­uidå±æ€§ä¸Šé€šè¿‡<code>@TableId</code>å°†å…¶æ ‡è¯†ä¸ºä¸»é”®ï¼Œå³å¯æˆåŠŸæ‰§è¡ŒSQLè¯­å¥</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Date</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long uid;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-TableIdçš„valueå±æ€§"><a href="#2-3-TableIdçš„valueå±æ€§" class="headerlink" title="2.3@TableIdçš„valueå±æ€§"></a>2.3@TableIdçš„valueå±æ€§</h3><hr><blockquote><p>è‹¥å®ä½“ç±»ä¸­ä¸»é”®å¯¹åº”çš„å±æ€§ä¸ºidï¼Œè€Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„å­—æ®µä¸ºuidï¼Œæ­¤æ—¶è‹¥åªåœ¨å±æ€§idä¸Šæ·»åŠ æ³¨è§£@TableIdï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸**Unknown column â€˜idâ€™ in â€˜field listâ€™**ï¼Œå³MyBatis-Plusä»ç„¶ä¼šå°†idä½œä¸ºè¡¨çš„ä¸»é”®æ“ä½œï¼Œè€Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„æ˜¯å­—æ®µuidæ­¤æ—¶éœ€è¦é€šè¿‡@TableIdæ³¨è§£çš„valueå±æ€§ï¼ŒæŒ‡å®šè¡¨ä¸­çš„ä¸»é”®å­—æ®µï¼Œ<code>@TableId(&quot;uid&quot;)</code>æˆ–<code>@TableId(value=&quot;uid&quot;)</code></p></blockquote><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520103030977.png" alt="image-20220520103030977"></p><h3 id="2-4-TableIdçš„typeå±æ€§"><a href="#2-4-TableIdçš„typeå±æ€§" class="headerlink" title="2.4@TableIdçš„typeå±æ€§"></a>2.4@TableIdçš„typeå±æ€§</h3><hr><blockquote><p><strong>typeå±æ€§ç”¨æ¥å®šä¹‰ä¸»é”®ç­–ç•¥ï¼šé»˜è®¤é›ªèŠ±ç®—æ³•</strong></p></blockquote><p><strong>å¸¸ç”¨çš„ä¸»é”®ç­–ç•¥ï¼š</strong></p><table><thead><tr><th align="center">å€¼</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">IdType.ASSIGN_IDï¼ˆé»˜è®¤ï¼‰</td><td align="center">åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆæ•°æ®idï¼Œä¸æ•°æ®åº“idæ˜¯å¦è®¾ç½®è‡ªå¢æ— å…³</td></tr><tr><td align="center">IdType.AUTO</td><td align="center">ä½¿ç”¨æ•°æ®åº“çš„è‡ªå¢ç­–ç•¥ï¼Œæ³¨æ„ï¼Œè¯¥ç±»å‹è¯·ç¡®ä¿æ•°æ®åº“è®¾ç½®äº†idè‡ªå¢ï¼Œ</td></tr></tbody></table><p><strong>é…ç½®å…¨å±€ä¸»é”®ç­–ç•¥ï¼š</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#MyBatis-Plusç›¸å…³é…ç½®</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment">#é…ç½®æ—¥å¿—</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment">#é…ç½®mpçš„ä¸»é”®ç­–ç•¥ä¸ºè‡ªå¢</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">      <span class="comment"># è®¾ç½®å®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨çš„ç»Ÿä¸€å‰ç¼€</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">t_</span></span><br></pre></td></tr></table></figure><h2 id="3-TbaleField"><a href="#3-TbaleField" class="headerlink" title="3.@TbaleField"></a>3.@TbaleField</h2><blockquote><p>ç»è¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒMyBatis-Plusåœ¨æ‰§è¡ŒSQLè¯­å¥æ—¶ï¼Œè¦ä¿è¯å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸€è‡´</p><p>å¦‚æœå®ä½“ç±»ä¸­çš„å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„æƒ…å†µï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p></blockquote><h3 id="3-1æƒ…å†µä¸€"><a href="#3-1æƒ…å†µä¸€" class="headerlink" title="3.1æƒ…å†µä¸€"></a>3.1æƒ…å†µä¸€</h3><hr><p>è‹¥å®ä½“ç±»ä¸­çš„å±æ€§ä½¿ç”¨çš„æ˜¯é©¼å³°å‘½åé£æ ¼ï¼Œè€Œè¡¨ä¸­çš„å­—æ®µä½¿ç”¨çš„æ˜¯ä¸‹åˆ’çº¿å‘½åé£æ ¼</p><p>ä¾‹å¦‚å®ä½“ç±»å±æ€§<code>userName</code>ï¼Œè¡¨ä¸­å­—æ®µ<code>user_name</code></p><p>æ­¤æ—¶MyBatis-Plusä¼š<strong>è‡ªåŠ¨</strong>å°†ä¸‹åˆ’çº¿å‘½åé£æ ¼è½¬åŒ–ä¸ºé©¼å³°å‘½åé£æ ¼</p><p>ç›¸å½“äºåœ¨MyBatisä¸­é…ç½®</p><h3 id="3-2æƒ…å†µäºŒ"><a href="#3-2æƒ…å†µäºŒ" class="headerlink" title="3.2æƒ…å†µäºŒ"></a>3.2æƒ…å†µäºŒ</h3><hr><blockquote><p>è‹¥å®ä½“ç±»ä¸­çš„å±æ€§å’Œè¡¨ä¸­çš„å­—æ®µä¸æ»¡è¶³æƒ…å†µ1</p><p>ä¾‹å¦‚å®ä½“ç±»å±æ€§<code>name</code>ï¼Œè¡¨ä¸­å­—æ®µ<code>username</code></p><p>æ­¤æ—¶éœ€è¦åœ¨å®ä½“ç±»å±æ€§ä¸Šä½¿ç”¨<code>@TableField(&quot;username&quot;)</code>è®¾ç½®å±æ€§æ‰€å¯¹åº”çš„å­—æ®µå</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(&quot;uid&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@TableField(&quot;username&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-TableLogic"><a href="#4-TableLogic" class="headerlink" title="4.@TableLogic"></a>4.@TableLogic</h2><h3 id="4-1é€»è¾‘åˆ é™¤"><a href="#4-1é€»è¾‘åˆ é™¤" class="headerlink" title="4.1é€»è¾‘åˆ é™¤"></a>4.1é€»è¾‘åˆ é™¤</h3><hr><blockquote><p>ç‰©ç†åˆ é™¤ï¼šçœŸå®åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œä¹‹åæŸ¥è¯¢ä¸åˆ°æ­¤æ¡è¢«åˆ é™¤çš„æ•°æ®</p><p>é€»è¾‘åˆ é™¤ï¼šå‡åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä¸­ä»£è¡¨æ˜¯å¦è¢«åˆ é™¤å­—æ®µçš„çŠ¶æ€ä¿®æ”¹ä¸ºâ€œè¢«åˆ é™¤çŠ¶æ€â€ï¼Œä¹‹ååœ¨æ•°æ®åº“ä¸­ä»æ—§èƒ½çœ‹åˆ°æ­¤æ¡æ•°æ®è®°å½•</p><p>ä½¿ç”¨åœºæ™¯ï¼šå¯ä»¥è¿›è¡Œæ•°æ®æ¢å¤</p></blockquote><h3 id="4-2å®ç°é€»è¾‘åˆ é™¤"><a href="#4-2å®ç°é€»è¾‘åˆ é™¤" class="headerlink" title="4.2å®ç°é€»è¾‘åˆ é™¤"></a>4.2å®ç°é€»è¾‘åˆ é™¤</h3><hr><ul><li><p><strong>æ•°æ®åº“ä¸­åˆ›å»ºé€»è¾‘åˆ é™¤çŠ¶æ€åˆ—ï¼Œè®¾ç½®é»˜è®¤å€¼ä¸º0</strong></p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520134529809.png" alt="image-20220520134529809"></p></li><li><p><strong>å®ä½“ç±»ä¸­æ·»åŠ é€»è¾‘åˆ é™¤å±æ€§</strong></p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520134636112.png" alt="image-20220520134636112"></p></li><li><p><strong>æµ‹è¯•åˆ é™¤åŠŸèƒ½ï¼ŒçœŸæ­£æ‰§è¡Œçš„æ˜¯ä¿®æ”¹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.deleteById(<span class="number">1527472864163348482L</span>);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;åˆ é™¤æˆåŠŸï¼&quot;</span> : <span class="string">&quot;åˆ é™¤å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸ºï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520135637388.png" alt="image-20220520135637388"></p></li><li><p><strong>æ­¤æ—¶æ‰§è¡ŒæŸ¥è¯¢æ–¹æ³•ï¼ŒæŸ¥è¯¢çš„ç»“æœä¸ºè‡ªåŠ¨æ·»åŠ æ¡ä»¶<code>is_deleted=0</code></strong></p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520140036445.png" alt="image-20220520140036445"></p></li></ul><h1 id="äº”ã€æ¡ä»¶æ„é€ å™¨"><a href="#äº”ã€æ¡ä»¶æ„é€ å™¨" class="headerlink" title="äº”ã€æ¡ä»¶æ„é€ å™¨"></a>äº”ã€æ¡ä»¶æ„é€ å™¨</h1><h2 id="1-Wrapperä»‹ç»"><a href="#1-Wrapperä»‹ç»" class="headerlink" title="1.Wrapperä»‹ç»"></a>1.Wrapperä»‹ç»</h2><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521092812125.png" alt="image-20220521092812125"></p><ul><li><p><code>Wrapper</code> ï¼š æ¡ä»¶æ„é€ æŠ½è±¡ç±»ï¼Œæœ€é¡¶ç«¯çˆ¶ç±»</p><ul><li><p><code>AbstractWrapper </code>ï¼š ç”¨äºæŸ¥è¯¢æ¡ä»¶å°è£…ï¼Œç”Ÿæˆ sql çš„ where æ¡ä»¶</p><ul><li><p><code>QueryWrapper </code>ï¼š æŸ¥è¯¢æ¡ä»¶å°è£…</p></li><li><p><code>UpdateWrapper </code>ï¼š Update æ¡ä»¶å°è£…</p></li><li><p><code>AbstractLambdaWrapper </code>ï¼š ä½¿ç”¨Lambda è¯­æ³•</p><ul><li><p><code>LambdaQueryWrapper </code>ï¼šç”¨äºLambdaè¯­æ³•ä½¿ç”¨çš„æŸ¥è¯¢Wrapper</p></li><li><p><code>LambdaUpdateWrapper </code>ï¼š Lambda æ›´æ–°å°è£…Wrapper</p></li></ul></li></ul></li></ul></li></ul><h2 id="2-QueryWrapper"><a href="#2-QueryWrapper" class="headerlink" title="2.QueryWrapper"></a>2.QueryWrapper</h2><ul><li><p><strong>ç»„è£…æŸ¥è¯¢æ¡ä»¶</strong></p><blockquote><p><strong>æ‰§è¡ŒSQLï¼š</strong>SELECT uid AS id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted&#x3D;0 AND (username LIKE ? AND age BETWEEN ? AND ? AND email IS NOT NULL)</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç”¨æˆ·ååŒ…å«aï¼Œå¹´é¾„åœ¨20åˆ°30ä¹‹é—´ï¼Œé‚®ç®±ä¿¡æ¯ä¸ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;a&quot;</span>).between(<span class="string">&quot;age&quot;</span>,<span class="number">20</span>,<span class="number">30</span>).isNotNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ç»„è£…æ’åºæ¡ä»¶</strong></p><blockquote><p><strong>æ‰§è¡ŒSQLï¼š</strong>SELECT uid AS id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted&#x3D;0 ORDER BY age DESC,id ASC</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ŒæŒ‰ç…§å¹´é¾„çš„é™åºæ’åºï¼Œè‹¥å¹´é¾„ç›¸åŒï¼Œåˆ™æŒ‰ç…§idå‡åºæ’åº</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.orderByDesc(<span class="string">&quot;age&quot;</span>).orderByAsc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ç»„è£…åˆ é™¤æ¡ä»¶</strong></p><blockquote><p><strong>æ‰§è¡ŒSQLï¼š</strong>UPDATE t_user SET is_deleted&#x3D;1 WHERE is_deleted&#x3D;0 AND (email IS NULL)</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test03</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ é™¤é‚®ç®±åœ°å€ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.isNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.delete(queryWrapper);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;åˆ é™¤æˆåŠŸï¼&quot;</span> : <span class="string">&quot;åˆ é™¤å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸ºï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ¡ä»¶çš„ä¼˜å…ˆçº§</strong></p><blockquote><p><strong>æ‰§è¡ŒSQLï¼š</strong>UPDATE t_user SET user_name&#x3D;?, email&#x3D;? WHERE is_deleted&#x3D;0 AND (age &gt; ? AND user_name LIKE ? OR email IS NULL)</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å°†ï¼ˆå¹´é¾„å¤§äº20å¹¶ä¸”ç”¨æˆ·åä¸­åŒ…å«æœ‰aï¼‰æˆ–é‚®ç®±ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    updateWrapper.gt(<span class="string">&quot;age&quot;</span>,<span class="number">20</span>).like(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;a&quot;</span>).or().isNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;Oz&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;test@oz6.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(user, updateWrapper);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;ä¿®æ”¹æˆåŠŸï¼&quot;</span> : <span class="string">&quot;ä¿®æ”¹å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸ºï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ‰§è¡ŒSQLï¼š</strong>UPDATE t_user SET username&#x3D;?, email&#x3D;? WHERE is_deleted&#x3D;0 AND (username LIKE ? AND (age &gt; ? OR email IS NULL))</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test05</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å°†ç”¨æˆ·åä¸­åŒ…å«æœ‰aå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰çš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    updateWrapper.like(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;a&quot;</span>).and(i-&gt;i.gt(<span class="string">&quot;age&quot;</span>,<span class="number">20</span>).or().isNull(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;Vz7797&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;test@ss8o.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(user, updateWrapper);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;ä¿®æ”¹æˆåŠŸï¼&quot;</span> : <span class="string">&quot;ä¿®æ”¹å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸ºï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ç»„è£…selectå­å¥</strong></p><blockquote><p><strong>æ‰§è¡ŒSQLï¼š</strong>SELECT username,age,email FROM t_user WHERE is_deleted&#x3D;0</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test06</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç”¨æˆ·çš„ç”¨æˆ·åã€å¹´é¾„ã€é‚®ç®±ä¿¡æ¯</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.select(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;age&quot;</span>,<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);</span><br><span class="line">    maps.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>å®ç°å­æŸ¥è¯¢</strong></p><blockquote><p><strong>æ‰§è¡ŒSQLï¼š</strong>SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted&#x3D;0 AND (uid IN (select uid from t_user where uid &lt;&#x3D; 100))</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test07</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢idå°äºç­‰äº100çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.inSql(<span class="string">&quot;uid&quot;</span>, <span class="string">&quot;select uid from t_user where uid &lt;= 100&quot;</span>);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-UpdateWrapper"><a href="#3-UpdateWrapper" class="headerlink" title="3.UpdateWrapper"></a>3.UpdateWrapper</h2><blockquote><p>UpdateWrapperä¸ä»…æ‹¥æœ‰QueryWrapperçš„ç»„è£…æ¡ä»¶åŠŸèƒ½ï¼Œè¿˜æä¾›äº†setæ–¹æ³•è¿›è¡Œä¿®æ”¹å¯¹åº”æ¡ä»¶çš„æ•°æ®åº“ä¿¡æ¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test08</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å°†ç”¨æˆ·åä¸­åŒ…å«æœ‰aå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰çš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    updateWrapper.like(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;a&quot;</span>).and( i -&gt; i.gt(<span class="string">&quot;age&quot;</span>,<span class="number">20</span>).or().isNull(<span class="string">&quot;email&quot;</span>)).set(<span class="string">&quot;email&quot;</span>,<span class="string">&quot;svip@qq.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;ä¿®æ”¹æˆåŠŸï¼&quot;</span> : <span class="string">&quot;ä¿®æ”¹å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ä¸ºï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-condition"><a href="#4-condition" class="headerlink" title="4.condition"></a>4.condition</h2><blockquote><p>åœ¨çœŸæ­£å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç»„è£…æ¡ä»¶æ˜¯å¸¸è§çš„åŠŸèƒ½ï¼Œè€Œè¿™äº›æ¡ä»¶æ•°æ®æ¥æºäºç”¨æˆ·è¾“å…¥ï¼Œæ˜¯å¯é€‰çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ç»„è£…è¿™äº›æ¡ä»¶æ—¶ï¼Œ<strong>å¿…é¡»å…ˆåˆ¤æ–­ç”¨æˆ·æ˜¯å¦é€‰æ‹©äº†è¿™äº›æ¡ä»¶ï¼Œè‹¥é€‰æ‹©åˆ™éœ€è¦ç»„è£…è¯¥æ¡ä»¶</strong>ï¼Œè‹¥æ²¡æœ‰é€‰æ‹©åˆ™ä¸€å®šä¸èƒ½ç»„è£…ï¼Œä»¥å…å½±å“SQLæ‰§è¡Œçš„ç»“æœ</p></blockquote><ul><li><p><strong>æ€è·¯ä¸€</strong></p><blockquote><p><strong>æ‰§è¡ŒSQLï¼š</strong>SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted&#x3D;0 AND (user_name LIKE ? AND age &lt;&#x3D; ?)</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test09</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span>(StringUtils.isNotBlank(username))&#123;</span><br><span class="line">        <span class="comment">//isNotBlankåˆ¤æ–­æŸä¸ªå­—ç¬¦åˆ›æ˜¯å¦ä¸ä¸ºç©ºå­—ç¬¦ä¸²ã€ä¸ä¸ºnullã€ä¸ä¸ºç©ºç™½ç¬¦</span></span><br><span class="line">        queryWrapper.like(<span class="string">&quot;user_name&quot;</span>, username);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ageBegin != <span class="literal">null</span>)&#123;</span><br><span class="line">        queryWrapper.ge(<span class="string">&quot;age&quot;</span>, ageBegin);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ageEnd != <span class="literal">null</span>)&#123;</span><br><span class="line">        queryWrapper.le(<span class="string">&quot;age&quot;</span>, ageEnd);</span><br><span class="line">    &#125;</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ€è·¯äºŒ</strong></p><blockquote><p>ä¸Šé¢çš„å®ç°æ–¹æ¡ˆæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä»£ç æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¦conditionå‚æ•°çš„é‡è½½æ–¹æ³•æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œç®€åŒ–ä»£ç çš„ç¼–å†™</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test10</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(StringUtils.isNotBlank(username), <span class="string">&quot;user_name&quot;</span>, username)</span><br><span class="line">        .ge(ageBegin != <span class="literal">null</span>, <span class="string">&quot;age&quot;</span>, ageBegin)</span><br><span class="line">        .le(ageEnd != <span class="literal">null</span>, <span class="string">&quot;age&quot;</span>, ageEnd);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-LambdaQueryWrapper"><a href="#5-LambdaQueryWrapper" class="headerlink" title="5.LambdaQueryWrapper"></a>5.LambdaQueryWrapper</h2><blockquote><p>åŠŸèƒ½ç­‰åŒäºQueryWrapperï¼Œæä¾›äº†Lambdaè¡¨è¾¾å¼çš„è¯­æ³•å¯ä»¥é¿å…å¡«é”™åˆ—åã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test11</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">    LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(StringUtils.isNotBlank(username), User::getName, username)</span><br><span class="line">        .ge(ageBegin != <span class="literal">null</span>, User::getAge, ageBegin)</span><br><span class="line">        .le(ageEnd != <span class="literal">null</span>, User::getAge, ageEnd);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-LambdaUpdateWrapper"><a href="#6-LambdaUpdateWrapper" class="headerlink" title="6.LambdaUpdateWrapper"></a>6.LambdaUpdateWrapper</h2><blockquote><p>åŠŸèƒ½ç­‰åŒäºUpdateWrapperï¼Œæä¾›äº†Lambdaè¡¨è¾¾å¼çš„è¯­æ³•å¯ä»¥é¿å…å¡«é”™åˆ—åã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test12</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å°†ç”¨æˆ·åä¸­åŒ…å«æœ‰aå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰çš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line">    LambdaUpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">LambdaUpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    updateWrapper.like(User::getName, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">        .and(i -&gt; i.gt(User::getAge, <span class="number">20</span>).or().isNull(User::getEmail));</span><br><span class="line">    updateWrapper.set(User::getName, <span class="string">&quot;å°é»‘&quot;</span>).set(User::getEmail,<span class="string">&quot;abc@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    System.out.println(<span class="string">&quot;resultï¼š&quot;</span>+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å…­ã€å¸¸ç”¨æ’ä»¶"><a href="#å…­ã€å¸¸ç”¨æ’ä»¶" class="headerlink" title="å…­ã€å¸¸ç”¨æ’ä»¶"></a>å…­ã€å¸¸ç”¨æ’ä»¶</h1><h2 id="1-åˆ†é¡µæ’ä»¶"><a href="#1-åˆ†é¡µæ’ä»¶" class="headerlink" title="1.åˆ†é¡µæ’ä»¶"></a>1.åˆ†é¡µæ’ä»¶</h2><blockquote><p>MyBatis Plusè‡ªå¸¦åˆ†é¡µæ’ä»¶ï¼Œåªè¦ç®€å•çš„é…ç½®å³å¯å®ç°åˆ†é¡µåŠŸèƒ½</p></blockquote><ul><li><p><strong>æ·»åŠ é…ç½®ç±»<code>MyBatisPlusConfig</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">//æ·»åŠ åˆ†é¡µæ’ä»¶</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ç¼–å†™æµ‹è¯•æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//new Page()ä¸­çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯å½“å‰é¡µç ï¼Œæ¯é¡µæ˜¾ç¤ºæ•°é‡</span></span><br><span class="line">    Page&lt;User&gt; page = userMapper.selectPage(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">1</span>, <span class="number">2</span>), <span class="literal">null</span>);</span><br><span class="line">    List&lt;User&gt; users = page.getRecords();</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="2-è‡ªå®šä¹‰åˆ†é¡µ"><a href="#2-è‡ªå®šä¹‰åˆ†é¡µ" class="headerlink" title="2.è‡ªå®šä¹‰åˆ†é¡µ"></a>2.è‡ªå®šä¹‰åˆ†é¡µ</h2><blockquote><p>ä¸Šé¢è°ƒç”¨çš„æ˜¯MyBatis-Plusæä¾›çš„å¸¦æœ‰åˆ†é¡µçš„æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æ–¹æ³•å¦‚ä½•å®ç°åˆ†é¡µå‘¢ï¼Ÿ</p></blockquote><ul><li><p><strong>åœ¨<code>UserMapper</code>æ¥å£ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ ¹æ®å¹´é¾„æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼Œåˆ†é¡µæ˜¾ç¤º </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> page åˆ†é¡µå¯¹è±¡,xmlä¸­å¯ä»¥ä»é‡Œé¢è¿›è¡Œå–å€¼,ä¼ é€’å‚æ•° Page å³è‡ªåŠ¨åˆ†é¡µ,å¿…é¡»æ”¾åœ¨ç¬¬ä¸€ä½ </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> age å¹´é¾„ </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">Page&lt;User&gt; <span class="title function_">selectPageVo</span><span class="params">(<span class="meta">@Param(&quot;page&quot;)</span> Page&lt;User&gt; page,<span class="meta">@Param(&quot;age&quot;)</span> Integer age)</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨<code>UserMapper.xml</code>ä¸­ç¼–å†™SQLå®ç°è¯¥æ–¹æ³•</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectPageVo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    select id,username as name,age,email from t_user where age &gt; #&#123;age&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>ç¼–å†™æµ‹è¯•æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPageVo</span><span class="params">()</span>&#123;</span><br><span class="line">    Page&lt;User&gt; page = userMapper.selectPageVo(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;User&gt;(<span class="number">1</span>,<span class="number">2</span>), <span class="number">20</span>);</span><br><span class="line">    List&lt;User&gt; users = page.getRecords();</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-ä¹è§‚é”"><a href="#3-ä¹è§‚é”" class="headerlink" title="3.ä¹è§‚é”"></a>3.ä¹è§‚é”</h2><blockquote><p><strong>ä½œç”¨ï¼šå½“è¦æ›´æ–°ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¸Œæœ›è¿™æ¡è®°å½•æ²¡æœ‰è¢«åˆ«äººæ›´æ–°</strong></p></blockquote><p>ä¹è§‚é”çš„å®ç°æ–¹å¼ï¼š</p><ul><li>å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰ version</li><li>æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šè¿™ä¸ª version</li><li>æ‰§è¡Œæ›´æ–°æ—¶ï¼Œ set version &#x3D; newVersion where version &#x3D; oldVersion</li><li>å¦‚æœ version ä¸å¯¹ï¼Œå°±æ›´æ–°å¤±è´¥</li></ul><h3 id="3-1åœºæ™¯"><a href="#3-1åœºæ™¯" class="headerlink" title="3.1åœºæ™¯"></a>3.1åœºæ™¯</h3><hr><ul><li>ä¸€ä»¶å•†å“ï¼Œæˆæœ¬ä»·æ˜¯80å…ƒï¼Œå”®ä»·æ˜¯100å…ƒã€‚è€æ¿å…ˆæ˜¯é€šçŸ¥å°æï¼Œè¯´ä½ å»æŠŠå•†å“ä»·æ ¼å¢åŠ 50å…ƒã€‚å°ææ­£åœ¨ç©æ¸¸æˆï¼Œè€½æäº†ä¸€ä¸ªå°æ—¶ã€‚æ­£å¥½ä¸€ä¸ªå°æ—¶åï¼Œè€æ¿è§‰å¾—å•†å“ä»·æ ¼å¢åŠ åˆ°150å…ƒï¼Œä»·æ ¼å¤ªé«˜ï¼Œå¯èƒ½ä¼šå½±å“é”€é‡ã€‚åˆé€šçŸ¥å°ç‹ï¼Œä½ æŠŠå•†å“ä»·æ ¼é™ä½30å…ƒã€‚</li><li>æ­¤æ—¶ï¼Œå°æå’Œå°ç‹åŒæ—¶æ“ä½œå•†å“åå°ç³»ç»Ÿã€‚å°ææ“ä½œçš„æ—¶å€™ï¼Œç³»ç»Ÿå…ˆå–å‡ºå•†å“ä»·æ ¼100å…ƒï¼›å°ç‹ä¹Ÿåœ¨æ“ä½œï¼Œå–å‡ºçš„å•†å“ä»·æ ¼ä¹Ÿæ˜¯100å…ƒã€‚å°æå°†ä»·æ ¼åŠ äº†50å…ƒï¼Œå¹¶å°†100+50&#x3D;150å…ƒå­˜å…¥äº†æ•°æ®åº“ï¼›å°ç‹å°†å•†å“å‡äº†30å…ƒï¼Œå¹¶å°†100-30&#x3D;70å…ƒå­˜å…¥äº†æ•°æ®åº“ã€‚æ˜¯çš„ï¼Œå¦‚æœæ²¡æœ‰é”ï¼Œå°æçš„æ“ä½œå°±å®Œå…¨è¢«å°ç‹çš„è¦†ç›–äº†ã€‚</li><li>ç°åœ¨å•†å“ä»·æ ¼æ˜¯70å…ƒï¼Œæ¯”æˆæœ¬ä»·ä½10å…ƒã€‚å‡ åˆ†é’Ÿåï¼Œè¿™ä¸ªå•†å“å¾ˆå¿«å‡ºå”®äº†1åƒå¤šä»¶å•†å“ï¼Œè€æ¿äº1ä¸‡å¤šã€‚</li></ul><h3 id="3-2ä¹è§‚é”ä¸æ‚²è§‚é”"><a href="#3-2ä¹è§‚é”ä¸æ‚²è§‚é”" class="headerlink" title="3.2ä¹è§‚é”ä¸æ‚²è§‚é”"></a>3.2ä¹è§‚é”ä¸æ‚²è§‚é”</h3><hr><ul><li>ä¸Šé¢çš„æ•…äº‹ï¼Œå¦‚æœæ˜¯ä¹è§‚é”ï¼Œå°ç‹ä¿å­˜ä»·æ ¼å‰ï¼Œä¼šæ£€æŸ¥ä¸‹ä»·æ ¼æ˜¯å¦è¢«äººä¿®æ”¹è¿‡äº†ã€‚å¦‚æœè¢«ä¿®æ”¹è¿‡äº†ï¼Œåˆ™é‡æ–°å–å‡ºçš„è¢«ä¿®æ”¹åçš„ä»·æ ¼ï¼Œ150å…ƒï¼Œè¿™æ ·ä»–ä¼šå°†120å…ƒå­˜å…¥æ•°æ®åº“ã€‚</li><li>å¦‚æœæ˜¯æ‚²è§‚é”ï¼Œå°æå–å‡ºæ•°æ®åï¼Œå°ç‹åªèƒ½ç­‰å°ææ“ä½œå®Œä¹‹åï¼Œæ‰èƒ½å¯¹ä»·æ ¼è¿›è¡Œæ“ä½œï¼Œä¹Ÿä¼šä¿è¯æœ€ç»ˆçš„ä»·æ ¼æ˜¯120å…ƒã€‚</li></ul><h3 id="3-3æ¨¡æ‹Ÿä¿®æ”¹å†²çª"><a href="#3-3æ¨¡æ‹Ÿä¿®æ”¹å†²çª" class="headerlink" title="3.3æ¨¡æ‹Ÿä¿®æ”¹å†²çª"></a>3.3æ¨¡æ‹Ÿä¿®æ”¹å†²çª</h3><hr><ul><li><p><strong>æ•°æ®åº“ä¸­å¢åŠ å•†å“è¡¨</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_product ( </span><br><span class="line">    id <span class="type">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>, </span><br><span class="line">    NAME <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å•†å“åç§°&#x27;</span>, </span><br><span class="line">    price <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;ä»·æ ¼&#x27;</span>, </span><br><span class="line">    VERSION <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>, </span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ ä¸€æ¡æ•°æ®</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_product (id, NAME, price) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;å¤–æ˜Ÿäººç¬”è®°æœ¬&#x27;</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ ä¸€ä¸ªå®ä½“ç±»<code>Product</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ ä¸€ä¸ªMapperæ¥å£<code>ProductMapper</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Product&gt; &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testProduct01</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1.å°æè·å–å•†å“ä»·æ ¼</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productLi</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å°æè·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š&quot;</span> + productLi.getPrice());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.å°ç‹è·å–å•†å“ä»·æ ¼</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productWang</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å°æè·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š&quot;</span> + productWang.getPrice());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.å°æä¿®æ”¹å•†å“ä»·æ ¼+50</span></span><br><span class="line">    productLi.setPrice(productLi.getPrice()+<span class="number">50</span>);</span><br><span class="line">    productMapper.updateById(productLi);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.å°ç‹ä¿®æ”¹å•†å“ä»·æ ¼-30</span></span><br><span class="line">    productWang.setPrice(productWang.getPrice()-<span class="number">30</span>);</span><br><span class="line">    productMapper.updateById(productWang);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5.è€æ¿æŸ¥è¯¢å•†å“ä»·æ ¼</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productBoss</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;è€æ¿è·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š&quot;</span> + productBoss.getPrice());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ‰§è¡Œç»“æœ</strong></p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521225803162.png" alt="image-20220521225803162"></p></li></ul><h3 id="3-4ä¹è§‚é”è§£å†³é—®é¢˜"><a href="#3-4ä¹è§‚é”è§£å†³é—®é¢˜" class="headerlink" title="3.4ä¹è§‚é”è§£å†³é—®é¢˜"></a>3.4ä¹è§‚é”è§£å†³é—®é¢˜</h3><hr><ul><li><p><strong>å®ä½“ç±»<code>version</code>å­—æ®µæ·»åŠ æ³¨è§£<code>@Version</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="meta">@Version</span></span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ ä¹è§‚é”æ’ä»¶é…ç½®</strong>(åœ¨é…ç½®ç±»ä¸­æ·»åŠ )</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">    <span class="comment">//æ·»åŠ åˆ†é¡µæ’ä»¶</span></span><br><span class="line">    interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">    <span class="comment">//æ·»åŠ ä¹è§‚é”æ’ä»¶</span></span><br><span class="line">    interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">OptimisticLockerInnerInterceptor</span>());</span><br><span class="line">    <span class="keyword">return</span> interceptor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>å†æ¬¡æ‰§è¡Œæµ‹è¯•æ–¹æ³•</strong></p><blockquote><p>å°ææŸ¥è¯¢å•†å“ä¿¡æ¯ï¼š</p><p>â€‹SELECT id,name,price,version FROM t_product WHERE id&#x3D;?</p><p>å°ç‹æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼š</p><p>â€‹SELECT id,name,price,version FROM t_product WHERE id&#x3D;?</p><p>å°æä¿®æ”¹å•†å“ä»·æ ¼ï¼Œè‡ªåŠ¨å°†version+1</p><p>â€‹UPDATE t_product SET name&#x3D;?, price&#x3D;?, version&#x3D;? WHERE id&#x3D;? AND version&#x3D;?</p><p>â€‹Parameters: å¤–æ˜Ÿäººç¬”è®°æœ¬(String), 150(Integer), 1(Integer), 1(Long), 0(Integer)</p><p>å°ç‹ä¿®æ”¹å•†å“ä»·æ ¼ï¼Œæ­¤æ—¶versionå·²æ›´æ–°ï¼Œæ¡ä»¶ä¸æˆç«‹ï¼Œä¿®æ”¹å¤±è´¥</p><p>â€‹UPDATE t_product SET name&#x3D;?, price&#x3D;?, version&#x3D;? WHERE id&#x3D;? AND version&#x3D;?</p><p>â€‹Parameters: å¤–æ˜Ÿäººç¬”è®°æœ¬(String), 70(Integer), 1(Integer), 1(Long), 0(Integer)</p><p>æœ€ç»ˆï¼Œå°ç‹ä¿®æ”¹å¤±è´¥ï¼ŒæŸ¥è¯¢ä»·æ ¼ï¼š150</p><p>â€‹SELECT id,name,price,version FROM t_product WHERE id&#x3D;?</p></blockquote></li><li><p><strong>ä¼˜åŒ–æ‰§è¡Œæµç¨‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testProduct01</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1.å°æè·å–å•†å“ä»·æ ¼</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productLi</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å°æè·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š&quot;</span> + productLi.getPrice());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.å°ç‹è·å–å•†å“ä»·æ ¼</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productWang</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å°æè·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š&quot;</span> + productWang.getPrice());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.å°æä¿®æ”¹å•†å“ä»·æ ¼+50</span></span><br><span class="line">    productLi.setPrice(productLi.getPrice()+<span class="number">50</span>);</span><br><span class="line">    productMapper.updateById(productLi);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.å°ç‹ä¿®æ”¹å•†å“ä»·æ ¼-30</span></span><br><span class="line">    productWang.setPrice(productWang.getPrice()-<span class="number">30</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> productMapper.updateById(productWang);</span><br><span class="line">    <span class="keyword">if</span>(result == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">//æ“ä½œå¤±è´¥ï¼Œé‡è¯•</span></span><br><span class="line">        <span class="type">Product</span> <span class="variable">productNew</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">        productNew.setPrice(productNew.getPrice()-<span class="number">30</span>);</span><br><span class="line">        productMapper.updateById(productNew);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5.è€æ¿æŸ¥è¯¢å•†å“ä»·æ ¼</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productBoss</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;è€æ¿è·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š&quot;</span> + productBoss.getPrice());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521230448577.png" alt="image-20220521230448577"></p></li></ul><h1 id="ä¸ƒã€é€šç”¨æšä¸¾"><a href="#ä¸ƒã€é€šç”¨æšä¸¾" class="headerlink" title="ä¸ƒã€é€šç”¨æšä¸¾"></a>ä¸ƒã€é€šç”¨æšä¸¾</h1><blockquote><p>è¡¨ä¸­çš„æœ‰äº›å­—æ®µå€¼æ˜¯å›ºå®šçš„ï¼Œä¾‹å¦‚æ€§åˆ«ï¼ˆç”·æˆ–å¥³ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨MyBatis-Plusçš„é€šç”¨æšä¸¾æ¥å®ç°</p></blockquote><ul><li><p><strong>æ•°æ®åº“è¡¨æ·»åŠ å­—æ®µ<code>sex</code></strong></p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521231317777.png" alt="image-20220521231317777"></p></li><li><p><strong>åˆ›å»ºé€šç”¨æšä¸¾ç±»å‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">SexEnum</span> &#123;</span><br><span class="line">    MALE(<span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>),</span><br><span class="line">    FEMALE(<span class="number">2</span>, <span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EnumValue</span> <span class="comment">//å°†æ³¨è§£æ‰€æ ‡è¯†çš„å±æ€§çš„å€¼å­˜å‚¨åˆ°æ•°æ®åº“ä¸­</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sex;</span><br><span class="line">    <span class="keyword">private</span> String sexName;</span><br><span class="line"></span><br><span class="line">    SexEnum(Integer sex, String sexName) &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">        <span class="built_in">this</span>.sexName = sexName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>Userå®ä½“ç±»ä¸­æ·»åŠ å±æ€§sex</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@TableField(&quot;username&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableLogic</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> isDeleted;  <span class="comment">//é€»è¾‘åˆ é™¤</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SexEnum sex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>é…ç½®æ‰«æé€šç”¨æšä¸¾</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#MyBatis-Plusç›¸å…³é…ç½®</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment">#æŒ‡å®šmapperæ–‡ä»¶æ‰€åœ¨çš„åœ°å€</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment">#é…ç½®æ—¥å¿—</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">banner:</span> <span class="string">off</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment">#é…ç½®mpçš„ä¸»é”®ç­–ç•¥ä¸ºè‡ªå¢</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">      <span class="comment"># è®¾ç½®å®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨çš„ç»Ÿä¸€å‰ç¼€</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">t_</span></span><br><span class="line">  <span class="comment">#é…ç½®ç±»å‹åˆ«åæ‰€å¯¹åº”çš„åŒ…</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.atguigu.mybatisplus.pojo</span></span><br><span class="line">  <span class="comment"># æ‰«æé€šç”¨æšä¸¾çš„åŒ…</span></span><br><span class="line">  <span class="attr">type-enums-package:</span> <span class="string">com.atguigu.mybatisplus.enums</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ‰§è¡Œæµ‹è¯•æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">33</span>);</span><br><span class="line">    user.setSex(SexEnum.MALE);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.insert(user);</span><br><span class="line">    System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="å…«ã€å¤šæ•°æ®æº"><a href="#å…«ã€å¤šæ•°æ®æº" class="headerlink" title="å…«ã€å¤šæ•°æ®æº"></a>å…«ã€å¤šæ•°æ®æº</h1><blockquote><p>é€‚ç”¨äºå¤šç§åœºæ™¯ï¼šçº¯ç²¹å¤šåº“ã€ è¯»å†™åˆ†ç¦»ã€ ä¸€ä¸»å¤šä»ã€ æ··åˆæ¨¡å¼ç­‰</p></blockquote><p>åœºæ™¯è¯´æ˜ï¼š</p><p>æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªåº“ï¼Œåˆ†åˆ«ä¸ºï¼š<code>mybatis_plus</code>ï¼ˆä»¥å‰çš„åº“ä¸åŠ¨ï¼‰ä¸<code>mybatis_plus_1</code>ï¼ˆæ–°å»ºï¼‰ï¼Œå°†mybatis_plusåº“çš„<code>product</code>è¡¨ç§»åŠ¨åˆ°mybatis_plus_1åº“ï¼Œè¿™æ ·æ¯ä¸ªåº“ä¸€å¼ è¡¨ï¼Œé€šè¿‡ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹åˆ†åˆ«è·å–ç”¨æˆ·æ•°æ®ä¸å•†å“æ•°æ®ï¼Œå¦‚æœè·å–åˆ°è¯´æ˜å¤šåº“æ¨¡æ‹ŸæˆåŠŸ</p><h2 id="1-åˆ›å»ºæ•°æ®åº“åŠè¡¨"><a href="#1-åˆ›å»ºæ•°æ®åº“åŠè¡¨" class="headerlink" title="1.åˆ›å»ºæ•°æ®åº“åŠè¡¨"></a>1.åˆ›å»ºæ•°æ®åº“åŠè¡¨</h2><ul><li><p><strong>åˆ›å»ºæ•°æ®åº“<code>mybatis_plus_1</code>å’Œè¡¨&#96;product</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE `mybatis_plus_1` <span class="comment">/*!40100 DEFAULT CHARACTER SET utf8mb4 */</span>;</span><br><span class="line">use `mybatis_plus_1`; </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> product ( </span><br><span class="line">    id <span class="type">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>, </span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å•†å“åç§°&#x27;</span>, </span><br><span class="line">    price <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;ä»·æ ¼&#x27;</span>, </span><br><span class="line">    version <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>, </span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ æµ‹è¯•æ•°æ®</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> product (id, NAME, price) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;å¤–æ˜Ÿäººç¬”è®°æœ¬&#x27;</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤<code>mybatis_plus</code>åº“ä¸­çš„<code>product</code>è¡¨</strong> </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use mybatis_plus; </span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> product;</span><br></pre></td></tr></table></figure></li></ul><h2 id="2-æ–°å»ºå·¥ç¨‹å¼•å…¥ä¾èµ–"><a href="#2-æ–°å»ºå·¥ç¨‹å¼•å…¥ä¾èµ–" class="headerlink" title="2.æ–°å»ºå·¥ç¨‹å¼•å…¥ä¾èµ–"></a>2.æ–°å»ºå·¥ç¨‹å¼•å…¥ä¾èµ–</h2><blockquote><p><strong>è‡ªè¡Œæ–°å»ºä¸€ä¸ªSpring Bootå·¥ç¨‹å¹¶é€‰æ‹©MySQLé©±åŠ¨åŠLombokä¾èµ–</strong></p></blockquote><p><strong>å¼•å…¥MyBaits-Plusçš„ä¾èµ–åŠå¤šæ•°æ®æºçš„ä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#3-ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="3.ç¼–å†™é…ç½®æ–‡ä»¶"></a>3.ç¼–å†™é…ç½®æ–‡ä»¶</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># é…ç½®æ•°æ®æºä¿¡æ¯</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">dynamic:</span></span><br><span class="line">      <span class="comment"># è®¾ç½®é»˜è®¤çš„æ•°æ®æºæˆ–è€…æ•°æ®æºç»„,é»˜è®¤å€¼å³ä¸ºmaster</span></span><br><span class="line">      <span class="attr">primary:</span> <span class="string">master</span></span><br><span class="line">      <span class="comment"># ä¸¥æ ¼åŒ¹é…æ•°æ®æº,é»˜è®¤false.trueæœªåŒ¹é…åˆ°æŒ‡å®šæ•°æ®æºæ—¶æŠ›å¼‚å¸¸,falseä½¿ç”¨é»˜è®¤æ•°æ®æº</span></span><br><span class="line">      <span class="attr">strict:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">datasource:</span></span><br><span class="line">        <span class="attr">master:</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">          <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">          <span class="attr">password:</span> <span class="number">132537</span></span><br><span class="line">        <span class="attr">slave_1:</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus_1?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">          <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">          <span class="attr">password:</span> <span class="number">132537</span></span><br></pre></td></tr></table></figure><h2 id="4-åˆ›å»ºå®ä½“ç±»"><a href="#4-åˆ›å»ºå®ä½“ç±»" class="headerlink" title="4.åˆ›å»ºå®ä½“ç±»"></a>4.åˆ›å»ºå®ä½“ç±»</h2><ul><li><p>æ–°å»ºä¸€ä¸ª<code>User</code>å®ä½“ç±»ï¼ˆå¦‚æœæ•°æ®åº“è¡¨åæœ‰t_å‰ç¼€è®°å¾—é…ç½®ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ–°å»ºä¸€ä¸ªå®ä½“ç±»<code>Product</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="5-åˆ›å»ºMapperåŠService"><a href="#5-åˆ›å»ºMapperåŠService" class="headerlink" title="5.åˆ›å»ºMapperåŠService"></a>5.åˆ›å»ºMapperåŠService</h2><ul><li><p>æ–°å»ºæ¥å£<code>UserMapper</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ–°å»ºæ¥å£<code>ProductMapper</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Product&gt; &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ–°å»ºServiceæ¥å£<code>UserService</code>æŒ‡å®šæ“ä½œçš„æ•°æ®æº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DS(&quot;master&quot;)</span> <span class="comment">//æŒ‡å®šæ“ä½œçš„æ•°æ®æºï¼Œmasterä¸ºuserè¡¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ–°å»ºServiceæ¥å£<code>ProductService</code>æŒ‡å®šæ“ä½œçš„æ•°æ®æº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DS(&quot;slave_1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;Product&gt; &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>è‡ªè¡Œå»ºç«‹Serviceçš„å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure></li></ul><h2 id="6-ç¼–å†™æµ‹è¯•æ–¹æ³•"><a href="#6-ç¼–å†™æµ‹è¯•æ–¹æ³•" class="headerlink" title="6.ç¼–å†™æµ‹è¯•æ–¹æ³•"></a>6.ç¼–å†™æµ‹è¯•æ–¹æ³•</h2><blockquote><p><strong>è®°å¾—åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ æ³¨è§£<code>@MapperScan()</code></strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TestDatasourceApplicationTests</span> &#123;</span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line">UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line">ProductService productService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(<span class="number">1L</span>);</span><br><span class="line"><span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> productService.getById(<span class="number">1L</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;User = &quot;</span> + user);</span><br><span class="line">System.out.println(<span class="string">&quot;Product = &quot;</span> + product);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522113049945.png" alt="image-20220522113049945"></p><h1 id="ä¹ã€MyBatisXæ’ä»¶"><a href="#ä¹ã€MyBatisXæ’ä»¶" class="headerlink" title="ä¹ã€MyBatisXæ’ä»¶"></a>ä¹ã€MyBatisXæ’ä»¶</h1><blockquote><p>MyBatis-Plusä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„mapperå’Œserviceæ¨¡æ¿ï¼Œèƒ½å¤Ÿå¤§å¤§çš„æé«˜å¼€å‘æ•ˆç‡ã€‚</p><p>ä½†æ˜¯åœ¨çœŸæ­£å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒMyBatis-Pluså¹¶ä¸èƒ½ä¸ºæˆ‘ä»¬è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œä¾‹å¦‚ä¸€äº›å¤æ‚çš„SQLï¼Œå¤šè¡¨è”æŸ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦è‡ªå·±å»ç¼–å†™ä»£ç å’ŒSQLè¯­å¥ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•å¿«é€Ÿçš„è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨MyBatisXæ’ä»¶ã€‚</p><p>MyBatisXä¸€æ¬¾åŸºäº IDEA çš„å¿«é€Ÿå¼€å‘æ’ä»¶ï¼Œä¸ºæ•ˆç‡è€Œç”Ÿã€‚</p></blockquote><h2 id="1-å®‰è£…MyBatisXæ’ä»¶"><a href="#1-å®‰è£…MyBatisXæ’ä»¶" class="headerlink" title="1.å®‰è£…MyBatisXæ’ä»¶"></a>1.å®‰è£…MyBatisXæ’ä»¶</h2><blockquote><p><strong>æ‰“å¼€IDEAï¼ŒFile-&gt; Setteings-&gt;Plugins-&gt;MyBatisXï¼Œæœç´¢æ æœç´¢MyBatisXç„¶åå®‰è£…ã€‚</strong></p></blockquote><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522115718361.png" alt="image-20220522115718361"></p><h2 id="2-å¿«é€Ÿç”Ÿæˆä»£ç "><a href="#2-å¿«é€Ÿç”Ÿæˆä»£ç " class="headerlink" title="2.å¿«é€Ÿç”Ÿæˆä»£ç "></a>2.å¿«é€Ÿç”Ÿæˆä»£ç </h2><ul><li><p>æ–°å»ºä¸€ä¸ªSpring Booté¡¹ç›®å¼•å…¥ä¾èµ–ï¼ˆåˆ›å»ºå·¥ç¨‹æ—¶è®°å¾—å‹¾é€‰lombokåŠmysqlé©±åŠ¨ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®æ•°æ®æºä¿¡æ¯</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">132537</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨IDEAä¸­ä¸æ•°æ®åº“å»ºç«‹é“¾æ¥</p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522120758740.png" alt="image-20220522120758740"></p></li><li><p>å¡«å†™æ•°æ®åº“ä¿¡æ¯å¹¶ä¿å­˜</p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522121434468.png" alt="image-20220522121434468"></p></li><li><p>æ‰¾åˆ°æˆ‘ä»¬éœ€è¦ç”Ÿæˆçš„è¡¨ç‚¹å‡»å³é”®</p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522121613909.png" alt="image-20220522121613909"></p></li><li><p>å¡«å†™å®Œä¿¡æ¯ä»¥åä¸‹ä¸€æ­¥</p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522122127649.png" alt="image-20220522122127649"></p></li><li><p>ç»§ç»­å¡«å†™ä¿¡æ¯</p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522122525598.png" alt="image-20220522122525598"></p></li><li><p><strong>å¤§åŠŸå‘Šæˆï¼ˆçœŸç‰¹ä¹ˆå¥½ç”¨yydsï¼‰</strong></p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522122612334.png" alt="image-20220522122612334"></p></li></ul><h2 id="3-å¿«é€Ÿç”ŸæˆCRUD"><a href="#3-å¿«é€Ÿç”ŸæˆCRUD" class="headerlink" title="3.å¿«é€Ÿç”ŸæˆCRUD"></a>3.å¿«é€Ÿç”ŸæˆCRUD</h2><blockquote><p>MyBaitsXå¯ä»¥æ ¹æ®æˆ‘ä»¬åœ¨Mapperæ¥å£ä¸­è¾“å…¥çš„æ–¹æ³•åå¿«é€Ÿå¸®æˆ‘ä»¬ç”Ÿæˆå¯¹åº”çš„sqlè¯­å¥</p></blockquote><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522123143852.png" alt="image-20220522123143852"></p><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522123202310.png" alt="image-20220522123202310"></p><h1 id="åã€è‡´è°¢"><a href="#åã€è‡´è°¢" class="headerlink" title="åã€è‡´è°¢"></a>åã€è‡´è°¢</h1><p>æ„Ÿè°¢å°šç¡…è°·æ¨åšè¶…è€å¸ˆï¼š<a href="https://www.bilibili.com/video/BV12R4y157Be?p=1">https://www.bilibili.com/video/BV12R4y157Be?p=1</a></p><p>æ„Ÿè°¢MyBatis-Plusä½œè€…è‹ç±³è±†ï¼š<a href="https://baomidou.com/">https://baomidou.com/</a></p><p>æ„Ÿè°¢è‡ªå·±åˆåšæŒå­¦ä¹ äº†ä¸€é—¨è¯¾ç¨‹ï¼š<a href="https://www.oz6.cn/">https://www.oz6.cn/</a></p><h1 id="ä»£ç ç”Ÿæˆå™¨ï¼š"><a href="#ä»£ç ç”Ÿæˆå™¨ï¼š" class="headerlink" title="ä»£ç ç”Ÿæˆå™¨ï¼š"></a>ä»£ç ç”Ÿæˆå™¨ï¼š</h1><h2 id="MyBatis-Plus-é€†å‘ç¨‹ä¾èµ–ï¼š"><a href="#MyBatis-Plus-é€†å‘ç¨‹ä¾èµ–ï¼š" class="headerlink" title="MyBatis-Plus é€†å‘ç¨‹ä¾èµ–ï¼š"></a>MyBatis-Plus é€†å‘ç¨‹ä¾èµ–ï¼š</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--MyBatis-Plus é€†å‘å·¥ç¨‹ä¾èµ–ä»£ç ç”Ÿæˆå™¨çš„æ ¸å¿ƒä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¸€ä¸ªæ¨¡æ¿çš„ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.freemarker<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆä»£ç ï¼š"><a href="#ç”Ÿæˆä»£ç ï¼š" class="headerlink" title="ç”Ÿæˆä»£ç ï¼š"></a>ç”Ÿæˆä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FastAutoGeneratorTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®æˆ‘ä»¬éœ€è¦åˆ›å»ºåœ¨å“ªçš„è·¯å¾„</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;/Users/luxiaogen/Documents/RoadTo2w/Java/å°šç¡…è°·/MyBatisPlus-2022/demo&quot;</span>;</span><br><span class="line">        <span class="comment">// è¿™é‡Œæˆ‘æ˜¯mysql8 5ç‰ˆæœ¬å¯ä»¥æ¢æˆ jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">        FastAutoGenerator.create(<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis_plus?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>)</span><br><span class="line">                .globalConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.author(<span class="string">&quot;atguigu&quot;</span>) <span class="comment">// è®¾ç½®ä½œè€…</span></span><br><span class="line">                    <span class="comment">// .enableSwagger() // å¼€å¯ swagger æ¨¡å¼</span></span><br><span class="line">                    .fileOverride() <span class="comment">// è¦†ç›–å·²ç”Ÿæˆæ–‡ä»¶</span></span><br><span class="line">                    .outputDir(path); <span class="comment">// æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .packageConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.parent(<span class="string">&quot;com.atguigu&quot;</span>) <span class="comment">// è®¾ç½®çˆ¶åŒ…å</span></span><br><span class="line">                            .moduleName(<span class="string">&quot;mybatisplus&quot;</span>) <span class="comment">// è®¾ç½®çˆ¶åŒ…æ¨¡å—å</span></span><br><span class="line">                            .pathInfo(Collections.singletonMap(OutputFile.mapperXml, path)); <span class="comment">// è®¾ç½®mapperXmlç”Ÿæˆè·¯å¾„</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .strategyConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.addInclude(<span class="string">&quot;t_user&quot;</span>) <span class="comment">// è®¾ç½®éœ€è¦ç”Ÿæˆçš„è¡¨å</span></span><br><span class="line">                            .addTablePrefix(<span class="string">&quot;t_&quot;</span>, <span class="string">&quot;c_&quot;</span>); <span class="comment">// è®¾ç½®è¿‡æ»¤è¡¨å‰ç¼€</span></span><br><span class="line">                &#125;).templateEngine(<span class="keyword">new</span> <span class="title class_">FreemarkerTemplateEngine</span>()) <span class="comment">// ä½¿ç”¨Freemarker å¼•æ“æ¨¡æ¿ï¼Œé»˜è®¤çš„æ˜¯Velocityå¼•æ“æ¨¡æ¿</span></span><br><span class="line">                .execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h1><h4 id="MyBatisPlus-æ·»åŠ æ–°çš„å®ä½“ï¼š"><a href="#MyBatisPlus-æ·»åŠ æ–°çš„å®ä½“ï¼š" class="headerlink" title="MyBatisPlus æ·»åŠ æ–°çš„å®ä½“ï¼š"></a>MyBatisPlus æ·»åŠ æ–°çš„å®ä½“ï¼š</h4><p>â€‹1.åœ¨entityåŒ…ä¸­ç¼–å†™å®ä½“ç±»ï¼Œæ·»åŠ @Dateæ³¨è§£</p><p>â€‹2.åœ¨mapperåŒ…ä¸­æ·»åŠ å¯¹åº”çš„mapperæ¥å£</p><p>â€‹éœ€è¦ç»§æ‰¿BaseMapperï¼šextends BaseMapper&lt;å®ä½“ç±»å&gt;</p><p>å› ä¸ºåœ¨éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œå®ä½“ç±»ç›¸åº”çš„è¡¨çš„æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°xxMapperçš„å®ç°ç±»ï¼Œ</p><p>ç„¶è€ŒxxMapperæ˜¯æ¥å£ï¼Œæ²¡æœ‰å®ç°ç±»ï¼Œå› æ­¤æˆ‘ä»¬åœ¨@Autowiredå®šä¹‰çš„å®ç°ç±»åä¼šæŠ¥é”™ï¼Œ</p><p>å› æ­¤æˆ‘ä»¬éœ€è¦<strong>åœ¨Mapperæ¥å£ä¸­æ·»åŠ @Repositoryæ³¨è§£</strong></p><p>â€‹3.</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis-Plus </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaæ ¸å¿ƒå·ç ”è¯»</title>
      <link href="/2023/05/26/java%E6%A0%B8%E5%BF%83%E5%8D%B7%E7%A0%94%E8%AF%BB/"/>
      <url>/2023/05/26/java%E6%A0%B8%E5%BF%83%E5%8D%B7%E7%A0%94%E8%AF%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="javaæ ¸å¿ƒå·ç ”è¯»ï¼š"><a href="#javaæ ¸å¿ƒå·ç ”è¯»ï¼š" class="headerlink" title="javaæ ¸å¿ƒå·ç ”è¯»ï¼š"></a>javaæ ¸å¿ƒå·ç ”è¯»ï¼š</h1><h2 id="https-docs-oracle-com-en-java-javase-17-docs-api"><a href="#https-docs-oracle-com-en-java-javase-17-docs-api" class="headerlink" title="https://docs.oracle.com/en/java/javase/17/docs/api/"></a><a href="https://docs.oracle.com/en/java/javase/17/docs/api/">https://docs.oracle.com/en/java/javase/17/docs/api/</a></h2><h2 id="chapter3â€”â€”Javaçš„åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„"><a href="#chapter3â€”â€”Javaçš„åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„" class="headerlink" title="chapter3â€”â€”Javaçš„åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„"></a>chapter3â€”â€”Javaçš„åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„</h2><h3 id="3-1ä¸€ä¸ªç®€å•çš„javaç¨‹åº"><a href="#3-1ä¸€ä¸ªç®€å•çš„javaç¨‹åº" class="headerlink" title="3.1ä¸€ä¸ªç®€å•çš„javaç¨‹åº"></a>3.1ä¸€ä¸ªç®€å•çš„javaç¨‹åº</h3><p>â€‹javaç¼–è¯‘å™¨å¯¹.javaæ–‡ä»¶è¿›è¡Œç¼–è¯‘(javac ç±»å.java)ï¼Œç”Ÿæˆå¯¹åº”çš„.classæ–‡ä»¶ï¼›&#x2F;&#x2F;é€šè¿‡javacå·¥å…·ç¼–è¯‘  .classæ–‡ä»¶ä¸­å­˜çš„æ˜¯å­—èŠ‚ç </p><p>â€‹ä½¿ç”¨javaå‘½ä»¤è¿è¡Œ.classæ–‡ä»¶(java ç±»å)*æ— åç¼€åï¼ï¼  &#x2F;&#x2F;jvmåªèƒ½ç†è§£.classæ–‡ä»¶ä¸­çš„å†…å®¹ å³å­—èŠ‚ç </p><p>.java -&gt; .class è¿™ä¸ªè¿‡ç¨‹ä½¿ç”¨ javac æ˜¯<strong>ç¼–è¯‘</strong>(ä¸€æ¬¡æ€§å°†ä»£ç è½¬æ¢ä¸ºå­—èŠ‚ç )</p><p>.class -&gt; æœºå™¨ç (ç›´æ¥è¢«cpuæ‰§è¡Œ) è¿™ä¸ªè¿‡ç¨‹ç”±JVMé€å¥<strong>è§£é‡Š</strong></p><p>â€‹javaä¸­ä½¿ç”¨æ–¹æ³•çš„è¯­æ³•ä¸ºï¼š</p><ul><li>object.method.(parametersâ€¦);</li></ul><h3 id="3-2æ³¨é‡Š"><a href="#3-2æ³¨é‡Š" class="headerlink" title="3.2æ³¨é‡Š"></a>3.2æ³¨é‡Š</h3><ul><li><ol><li>&#x2F;&#x2F;</li></ol></li><li><ol start="2"><li>&#x2F;*    *&#x2F;</li></ol></li><li><ol start="3"><li>&#x2F;**</li></ol></li><li>â€‹          *</li><li>â€‹          *</li><li>â€‹          *&#x2F;</li></ul><h3 id="3-3æ•°æ®ç±»å‹"><a href="#3-3æ•°æ®ç±»å‹" class="headerlink" title="3.3æ•°æ®ç±»å‹"></a>3.3æ•°æ®ç±»å‹</h3><h4 id="å…«å¤§åŸºæœ¬æ•°æ®ç±»å‹"><a href="#å…«å¤§åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="å…«å¤§åŸºæœ¬æ•°æ®ç±»å‹"></a>å…«å¤§åŸºæœ¬æ•°æ®ç±»å‹</h4><table><thead><tr><th align="center">ç±»å‹</th><th align="center">å­˜å‚¨éœ€æ±‚</th><th align="center">å–å€¼èŒƒå›´</th></tr></thead><tbody><tr><td align="center">int</td><td align="center">4å­—èŠ‚</td><td align="center">-2147483648ï½2147483647(ç•¥é«˜äº20äº¿)</td></tr><tr><td align="center">short</td><td align="center">2å­—èŠ‚</td><td align="center">-32768ï½32767</td></tr><tr><td align="center">long</td><td align="center">8å­—èŠ‚</td><td align="center">-9223372036854775808ï½9223372036854775807</td></tr><tr><td align="center">byte</td><td align="center">1å­—èŠ‚</td><td align="center">-128ï½127</td></tr><tr><td align="center">float</td><td align="center">4å­—èŠ‚</td><td align="center">æ­£è´Ÿ3.4*10^38       6~7ä½æœ‰æ•ˆæ•°å­—</td></tr><tr><td align="center">double</td><td align="center">8å­—èŠ‚</td><td align="center">æ­£è´Ÿ1.79*10^308     15ä½æœ‰æ•ˆæ•°å­—</td></tr><tr><td align="center">char</td><td align="center">2å­—èŠ‚</td><td align="center">0ï½65535</td></tr><tr><td align="center">boolean</td><td align="center">booleanå˜é‡ï¼š4å­—èŠ‚(åº•å±‚ä½¿ç”¨int)<br />booleanæ•°ç»„ä¸­ï¼š1å­—èŠ‚(åº•å±‚ä½¿ç”¨Byte)</td><td align="center">trueã€fasle</td></tr></tbody></table><p>*æˆ‘ä»¬å¯ä»¥ä¸ºæ•°å­—å­—é¢é‡æ·»åŠ ä¸‹åˆ’çº¿(æ–¹ä¾¿çœ‹) å¦‚ï¼š1_000_000 è¡¨ç¤º100ä¸‡  â€”-&gt;  ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å»é™¤ä¸‹åˆ’çº¿</p><ul><li><p>javaä¸­æ²¡æœ‰æ— ç¬¦å·æ•°çš„è¯´æ³•â€”â€”éƒ½æ˜¯(æ­£)(è´Ÿ+1)å‚åŠ</p></li><li><p>é»˜è®¤çš„å°æ•°ä¸ºdoubleç±»å‹</p></li><li><p>æµ®ç‚¹ç±»å‹çš„æ•°æ®è¿ç®—ä¸€å®šä¼šå¸¦æ¥è¯¯å·® (æˆ‘ä»¬éœ€è¦è°¨æ…å¯¹æµ®ç‚¹æ•°è¿›è¡Œ &#x3D;&#x3D; ã€ !&#x3D; æ“ä½œ) </p><p>â€”â€”æ ¹æœ¬åŸå› æ˜¯æµ®ç‚¹æ•°é‡‡ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼ŒäºŒè¿›åˆ¶ç³»ç»Ÿä¸­æ— æ³•ç²¾ç¡®åœ°è¡¨ç¤ºåˆ†æ•°1&#x2F;10ï¼Œå› æ­¤é™¤äº†äºŒè¿›åˆ¶èƒ½å®Œå…¨è¡¨ç¤ºçš„æ•°å­—ï¼Œéƒ½ä¼šäº§ç”Ÿè¯¯å·®</p><p><strong>ğŸŒŸåŒæ ·ï¼Œæˆ‘ä»¬ä¸è¦åœ¨forå¾ªç¯ã€whileå¾ªç¯ä¸­ä½¿ç”¨æµ®ç‚¹æ•°ä½œä¸ºæˆ‘ä»¬çš„è®¡æ•°å™¨ï¼Œå¦‚æœä»¥ &#x3D;&#x3D; ä¸ºç»ˆæ­¢æ¡ä»¶çš„è¯ï¼Œä¼šå¯¼è‡´å¾ªç¯æ— æ³•ç»ˆæ­¢ğŸŒŸ</strong></p></li></ul><h4 id="Unicodeè½¬ä¹‰åºåˆ—ï¼š"><a href="#Unicodeè½¬ä¹‰åºåˆ—ï¼š" class="headerlink" title="Unicodeè½¬ä¹‰åºåˆ—ï¼š"></a>Unicodeè½¬ä¹‰åºåˆ—ï¼š</h4><p>â€‹\uxxxx (\u+Unicodeåºå·ï¼Œ4ä½16è¿›åˆ¶æ•°)å¯ä»¥ç”¨è¿™ç§å½¢å¼æ¥è¡¨ç¤ºå­—ç¬¦</p><p><strong>Unicodeè½¬ä¹‰åºåˆ—ä¼šåœ¨è§£æä»£ç ä¹‹å‰å¤„ç†ï¼š</strong>ç¼–è¯‘å™¨ä¼š<strong>å…ˆ</strong>å°†è½¬ä¹‰åºåˆ—å˜ä¸ºå¯¹åº”çš„å­—ç¬¦ï¼Œå†è¿›è¡Œç¼–è¯‘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">javaä¸­ä¸å»ºè®®ä½¿ç”¨charç±»å‹æ•°æ®ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</span><br><span class="line"></span><br><span class="line">å…¶å®ï¼Œ1ä¸ªjavaçš„charå­—ç¬¦å¹¶ä¸å®Œå…¨ç­‰äºä¸€ä¸ªunicodeçš„å­—ç¬¦ã€‚charé‡‡ç”¨çš„UCS-2ç¼–ç ï¼Œæ˜¯ä¸€ç§æ·˜æ±°çš„UTF-16ç¼–ç ï¼Œç¼–ç æ–¹å¼æœ€å¤šæœ‰65536ç§ï¼Œè¿œè¿œå°‘äºå½“ä»ŠUnicodeæ‹¥æœ‰11ä¸‡å­—ç¬¦çš„éœ€æ±‚ã€‚javaåªå¥½å¯¹åæ¥æ–°å¢çš„Unicodeå­—ç¬¦ç”¨2ä¸ªcharæ‹¼å‡º1ä¸ªUnicodeå­—ç¬¦ã€‚å¯¼è‡´Stringä¸­charçš„æ•°é‡ä¸ç­‰äºunicodeå­—ç¬¦çš„æ•°é‡ã€‚Â </span><br><span class="line">ç„¶è€Œï¼Œå¤§å®¶éƒ½çŸ¥é“ï¼Œcharåœ¨Oracleä¸­ï¼Œæ˜¯å›ºå®šå®½åº¦çš„å­—ç¬¦ä¸²ç±»å‹ï¼ˆå³æ‰€è°“çš„å®šé•¿å­—ç¬¦ä¸²ç±»å‹ï¼‰ï¼Œé•¿åº¦ä¸å¤Ÿçš„å°±ä¼šè‡ªåŠ¨ä½¿ç”¨ç©ºæ ¼è¡¥å…¨ã€‚å› æ­¤ï¼Œåœ¨ä¸€äº›ç‰¹æ®Šçš„æŸ¥è¯¢ä¸­ï¼Œå°±ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œè€Œä¸”è¿™ç§é—®é¢˜è¿˜æ˜¯å¾ˆéšè”½çš„ï¼Œå¾ˆéš¾è¢«å¼€å‘äººå‘˜å‘ç°ã€‚ä¸€æ—¦å‘ç°é—®é¢˜çš„æ‰€åœ¨ï¼Œå°±æ„å‘³ç€æ•°æ®ç»“æ„éœ€è¦å˜æ›´ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œè¿™æ˜¯å¤šä¹ˆå¤§çš„ç¾éš¾å•Šã€‚Â </span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p>Java åŸºæœ¬æ•°æ®ç±»å‹çš„**<u>åŒ…è£…ç±»å‹</u><strong>çš„å¤§éƒ¨åˆ†éƒ½ç”¨åˆ°äº†</strong><u>ç¼“å­˜æœºåˆ¶</u>**æ¥æå‡æ€§èƒ½ã€‚</p><p><code>Byte</code>,<code>Short</code>,<code>Integer</code>,<code>Long</code> è¿™ 4 ç§åŒ…è£…ç±»é»˜è®¤åˆ›å»ºäº†æ•°å€¼ <u><strong>[-128ï¼Œ127]</strong></u> çš„ç›¸åº”ç±»å‹çš„ç¼“å­˜æ•°æ®ï¼Œ<code>Character</code> åˆ›å»ºäº†æ•°å€¼åœ¨ <strong><u>[0,127]</u></strong> èŒƒå›´çš„ç¼“å­˜æ•°æ®ï¼Œ<code>Boolean</code> ç›´æ¥è¿”å› <code>True</code> or <code>False</code>ã€‚</p><hr><h3 id="3-4å˜é‡ä¸å¸¸é‡"><a href="#3-4å˜é‡ä¸å¸¸é‡" class="headerlink" title="3.4å˜é‡ä¸å¸¸é‡"></a>3.4å˜é‡ä¸å¸¸é‡</h3><h4 id="å˜é‡å‘½åè¦æ±‚ï¼š"><a href="#å˜é‡å‘½åè¦æ±‚ï¼š" class="headerlink" title="å˜é‡å‘½åè¦æ±‚ï¼š"></a>å˜é‡å‘½åè¦æ±‚ï¼š</h4><p>â€‹ç”±å­—æ¯ã€æ•°å­—ã€_ã€å„ç§è´§å¸ç¬¦å·($ ä¸€èˆ¬ç”¨äºç³»ç»Ÿå·¥å…·ç”Ÿæˆå˜é‡çš„å)</p><p>â€‹ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸èƒ½æ˜¯æ•°å­—</p><p>â€‹ä¸èƒ½ä½¿ç”¨å…³é”®å­—ã€ä¿ç•™å­—ä½œä¸ºå˜é‡å</p><p>â€‹ä¸èƒ½å«ç©ºæ ¼</p><ul><li><strong>java10å¼€å§‹ï¼Œå¦‚æœå¯ä»¥ä»å˜é‡çš„åˆå§‹å€¼æ¨æ–­å‡ºå®ƒçš„ç±»å‹ï¼Œå°±ä¸éœ€è¦å£°æ˜ç±»å‹ï¼Œä½¿ç”¨     var   å³å¯ã€‚</strong></li></ul><h4 id="å¸¸é‡ï¼š"><a href="#å¸¸é‡ï¼š" class="headerlink" title="å¸¸é‡ï¼š"></a>å¸¸é‡ï¼š</h4><p>â€‹è¢«finalä¿®é¥°çš„å˜é‡ï¼Œè¡¨ç¤ºå˜é‡<strong>åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡</strong>ï¼Œä¸€æ—¦èµ‹å€¼å°±ä¸èƒ½å†æ›´æ”¹äº†ã€‚</p><p>â€‹å¸¸é‡å‘½åè§„èŒƒï¼šå¸¸é‡åå…¨éƒ¨å¤§å†™ï¼</p><p>æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªå¸¸é‡(ç±»å¸¸é‡)ä»¥ä¾¿åœ¨ç±»ä¸­å¤šä¸ªæ–¹æ³•ä¸­ä½¿ç”¨   å¦‚ï¼šstatic final int CONSTANT &#x3D; 1ï¼›<br>å¦‚æœç±»å¸¸é‡ä¸º public é‚£ä¹ˆå¸¸é‡ä¹Ÿå¯ä»¥è¢«å…¶ä»–ç±»ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¼€å‘ä¸­å•ç‹¬åˆ›å»ºä¸€ä¸ªç±»æ¥å­˜æ”¾æ ¼ä¸­å¸¸é‡ï¼</p><p>â€‹æšä¸¾ç±»å‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Size</span> &#123;</span><br><span class="line">    SMALL,</span><br><span class="line">    MEDIUM,</span><br><span class="line">    LARGE</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Size</span> <span class="variable">size</span> <span class="operator">=</span> Size.MEDIUM;</span><br><span class="line">        System.out.println(size);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="3-5è¿ç®—ç¬¦"><a href="#3-5è¿ç®—ç¬¦" class="headerlink" title="3.5è¿ç®—ç¬¦"></a>3.5è¿ç®—ç¬¦</h3><p>â€‹åœ¨æºæ–‡ä»¶å¼€å¤´åŠ å…¥ <strong>import static java.lang.Math.</strong>* ä¹‹åå°±èƒ½ç›´æ¥ä½¿ç”¨Mathå·¥å…·ç±»ä¸­çš„å¸¸é‡ä¸æ–¹æ³•äº†(æ— éœ€å‰ç¼€Math.)</p><h4 id="æ•°æ®ç±»å‹è½¬æ¢ï¼š"><a href="#æ•°æ®ç±»å‹è½¬æ¢ï¼š" class="headerlink" title="æ•°æ®ç±»å‹è½¬æ¢ï¼š"></a>æ•°æ®ç±»å‹è½¬æ¢ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">æ— ç²¾åº¦æŸå¤±çš„è½¬æ¢ï¼š</span><br><span class="line"><span class="comment">//byte -&gt; short -&gt; int -&gt; long</span></span><br><span class="line"><span class="comment">//float -&gt; double</span></span><br><span class="line"><span class="comment">//int -&gt; double</span></span><br><span class="line"><span class="comment">//char -&gt; int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æœ‰ç²¾åº¦æŸå¤±çš„è½¬æ¢ï¼š</span><br><span class="line"><span class="comment">//int -&gt; float</span></span><br><span class="line"><span class="comment">//long -&gt; float</span></span><br><span class="line"><span class="comment">//long -&gt; double</span></span><br></pre></td></tr></table></figure><p>!!!! intç±»å‹å˜é‡ <strong>ä¸èƒ½</strong> è½¬æˆ char</p><p>æ•°æ®ç±»å‹è½¬æ¢æœ‰ç²¾åº¦æŸå¤±æ˜¯å› ä¸ºï¼šæµ®ç‚¹å‹æ•°æ®çš„å­˜å‚¨æ–¹å¼ä¸ºï¼šç¬¦å·+æŒ‡æ•°éƒ¨åˆ†+æ•°å€¼éƒ¨åˆ†ï¼Œ</p><p><strong>intã€longçš„æ•°å€¼éƒ¨åˆ†å¤šäºfloatä¸­èƒ½å¤Ÿè¡¨ç¤ºçš„ä½æ•°ï¼Œå› æ­¤é€ æˆç²¾åº¦æŸå¤±</strong>(å› ä¸ºfloatå­˜å‚¨æ—¶ä¼šæŠŠæ•°å­—å˜ä¸º1.xxx âœ–ï¸2çš„xxæ¬¡æ–¹çš„å½¢å¼)</p><ul><li>è¿ç®—æ—¶ï¼Œå¦‚æœè¿ç®—ç¬¦ä¸¤è¾¹çš„ç±»å‹ä¸åŒï¼Œåˆ™ æœ‰æµ®ç‚¹æ•°ï¼Œåˆ™ä¼šè½¬æˆå‡ºç°è¿‡çš„ç²¾åº¦æœ€å¤§çš„æµ®ç‚¹æ•°ï¼Œæ²¡æœ‰æµ®ç‚¹æ•°ï¼Œä¼˜å…ˆlongï¼Œlongä¹Ÿæ²¡å‡ºç°è¿‡ï¼Œåˆ™é»˜è®¤éƒ½è½¬ä¸ºint(å³ä½¿æ˜¯byte + short)</li></ul><p>int x +&#x3D; 1.45 â€”â€”â€”&gt; æ­£ç¡®ï¼Œå› ä¸ºåŸå¼ï¼š x&#x3D;(int)(x + 1.45)</p><p>int x &#x3D; x + 1.45 â€”â€”&gt; é”™è¯¯</p><p>javaä¸­ï¼Œèµ‹å€¼æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œèµ‹å€¼è¯­å¥çš„å€¼ä¸ºå˜é‡è¢«èµ‹çš„é‚£ä¸ªå€¼ </p><p>â€‹å¦‚ï¼šint y &#x3D; x &#x3D; 5;  â€”â€“&gt;  ç»“æœæ˜¯ï¼šy &#x3D; 5;</p><p>+&#x3D;ç­‰æœ‰â€˜&#x3D;â€˜çš„è¿ç®—ç¬¦éƒ½æ˜¯å³ç»“åˆè¿ç®—ç¬¦ï¼Œ</p><p>â€‹    å³ a+&#x3D;b+&#x3D;c  &lt;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt; a+&#x3D;(b+&#x3D;c)</p><h3 id="3-6å­—ç¬¦ä¸²"><a href="#3-6å­—ç¬¦ä¸²" class="headerlink" title="3.6å­—ç¬¦ä¸²"></a>3.6å­—ç¬¦ä¸²</h3><h4 id="å­—ç¬¦ä¸²ä¸å¯å˜ï¼š"><a href="#å­—ç¬¦ä¸²ä¸å¯å˜ï¼š" class="headerlink" title="å­—ç¬¦ä¸²ä¸å¯å˜ï¼š"></a>å­—ç¬¦ä¸²ä¸å¯å˜ï¼š</h4><p>â€‹æˆ‘ä»¬ä¸èƒ½ä¿®æ”¹Stringå¯¹è±¡ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œåªèƒ½å°†æŒ‡å‘æŸä¸ªStringå¯¹è±¡çš„å¼•ç”¨æŒ‡å‘æ–°çš„Stringå¯¹è±¡æ¥å®ç°å¯¹ç”¨æˆ·è€Œè¨€çš„ä¿®æ”¹å­—ç¬¦ä¸²ã€‚</p><p>â€‹ç”±äºjavaä¸­ä¿®æ”¹å­—ç¬¦ä¸²éœ€è¦é‡æ–°åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœä¿®æ”¹åçš„å­—ç¬¦ä¸²ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆéœ€è¦é‡æ–°åˆ›å»º(æ•ˆç‡å¾ˆä½)ï¼Œ</p><p>ä½†æ˜¯ä¸å¯å˜å­—ç¬¦ä¸²æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜ç‚¹ï¼š<strong>ç¼–è¯‘å™¨å¯ä»¥è®©å­—ç¬¦ä¸²å…±äº«</strong>ï¼</p><p>â€‹javaè®¾è®¡è€…è®¤ä¸ºï¼šå…±äº«å¸¦æ¥çš„é«˜æ•ˆç‡è¿œè¶…è¿‡ç¼–è¾‘å­—ç¬¦ä¸²å¸¦æ¥çš„ä½æ•ˆç‡</p><h4 id="æ£€æµ‹å­—ç¬¦ä¸²ç›¸ç­‰ï¼š"><a href="#æ£€æµ‹å­—ç¬¦ä¸²ç›¸ç­‰ï¼š" class="headerlink" title="æ£€æµ‹å­—ç¬¦ä¸²ç›¸ç­‰ï¼š"></a>æ£€æµ‹å­—ç¬¦ä¸²ç›¸ç­‰ï¼š</h4><p>â€‹javaä¸­ ä»…ä»…æ˜¯å­—ç¬¦ä¸²å­—é¢é‡æ‰å®ç°äº†å…±äº« (è€Œ+æˆ–substringå¾—åˆ°çš„å­—ç¬¦ä¸²å¹¶ä¸å…±äº«)ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç»ç”±Stringç±»é‡å†™çš„equals()æ–¹æ³•åˆ¤æ–­å­—ç¬¦ä¸²ç›¸ç­‰ï¼Œè€Œä¸æ˜¯â€˜&#x3D;&#x3D;â€™</p><h4 id="String-APIï¼š"><a href="#String-APIï¼š" class="headerlink" title="String APIï¼š"></a>String APIï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨java.lang.StringåŒ…ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(String other)</span>;<span class="comment">//å¦‚æœå­—ç¬¦ä¸²ä½äºother(å°äºother),åˆ™è¿”å›ä¸€ä¸ªè´Ÿæ•°ï¼Œç›¸ç­‰è¿”å›0,...</span></span><br><span class="line"></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>;<span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²â€œâ€</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isBlank</span><span class="params">()</span>;<span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸² æˆ– åªç”±ç©ºæ ¼ç»„æˆï¼</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure><h4 id="æ„å»ºå­—ç¬¦ä¸²ï¼š"><a href="#æ„å»ºå­—ç¬¦ä¸²ï¼š" class="headerlink" title="æ„å»ºå­—ç¬¦ä¸²ï¼š"></a>æ„å»ºå­—ç¬¦ä¸²ï¼š</h4><p>â€‹å¦‚æœéœ€è¦ä½¿ç”¨è®¸å¤šçŸ­å­—ç¬¦ä¸²æ„å»ºä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œå¦‚æœä½¿ç”¨Stringç±»å‹ï¼Œä¼šå¯¼è‡´æ¯æ¬¡æ‹¼æ¥å­—ç¬¦ä¸²éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„Stringå¯¹è±¡â€”â€“è€—æ—¶+è€—ç©ºé—´(åŸç†æ˜¯ä¼šåˆ›å»ºä¸€ä¸ªStringBuilderï¼Œä½¿ç”¨appendï¼Œå†ä½¿ç”¨toStringï¼Œåœ¨java9ä¹‹åè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥å°½æƒ…ä½¿ç”¨+äº†)</p><p>â€‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨StringBuilder&#x2F;Buffer(å­—ç¬¦ä¸²æ„é€ å™¨)ç±»é¿å…æ­¤ç±»é—®é¢˜ï¼</p><p>ä»¥ä¸‹ä¸¤ä¸ªAPIä½œç”¨ç›¸åŒ</p><p>â€‹Â· StringBuilderåªé€‚åˆå•çº¿ç¨‹æƒ…å†µï¼Œä½†æ•ˆç‡é«˜</p><p>â€‹Â· StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„</p><h4 id="æ–‡æœ¬å—ï¼š"><a href="#æ–‡æœ¬å—ï¼š" class="headerlink" title="æ–‡æœ¬å—ï¼š"></a>æ–‡æœ¬å—ï¼š</h4><p>â€‹å¯ä»¥å®¹æ˜“åœ°æä¾›è·¨å¤šè¡Œçš„å­—ç¬¦ä¸²å­—é¢é‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¼å¼ï¼š</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">hello</span></span><br><span class="line"><span class="string">world!</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment">//æ–‡æœ¬å—é€‚åˆåŒ…å«ç”¨å…¶ä»–è¯­è¨€ç¼–å†™çš„ä»£ç ï¼Œå¦‚ SQL å’Œ HTML ä»£ç </span></span><br></pre></td></tr></table></figure><hr><h4 id="String-s1-x3D-new-String-â€œabcâ€-è¿™å¥è¯åˆ›å»ºäº†å‡ ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Ÿ"><a href="#String-s1-x3D-new-String-â€œabcâ€-è¿™å¥è¯åˆ›å»ºäº†å‡ ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Ÿ" class="headerlink" title="String s1 &#x3D; new String(â€œabcâ€);è¿™å¥è¯åˆ›å»ºäº†å‡ ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Ÿ"></a>String s1 &#x3D; new String(â€œabcâ€);è¿™å¥è¯åˆ›å»ºäº†å‡ ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Ÿ</h4><p>â€‹1ã€å¦‚æœå­—ç¬¦ä¸²**å¸¸é‡æ± ä¸­ä¸å­˜åœ¨å­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€<u>çš„å¼•ç”¨</u>**ï¼Œé‚£ä¹ˆä¼šåœ¨å †ä¸­åˆ›å»º 2 ä¸ªå­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€ã€‚</p><p>â€‹2ã€å¦‚æœå­—ç¬¦ä¸²**å¸¸é‡æ± ä¸­å·²å­˜åœ¨å­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€<u>çš„å¼•ç”¨</u>**ï¼Œåˆ™åªä¼šåœ¨å †ä¸­åˆ›å»º 1 ä¸ªå­—ç¬¦ä¸²å¯¹è±¡â€œabcâ€ã€‚</p><hr><h3 id="String-intern-æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨"><a href="#String-intern-æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="String#intern æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨?"></a>String#intern æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨?</h3><p>â€‹<code>String.intern()</code> æ˜¯ä¸€ä¸ª nativeï¼ˆæœ¬åœ°ï¼‰æ–¹æ³•ï¼Œå…¶ä½œç”¨æ˜¯å°†æŒ‡å®šçš„å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œå¯ä»¥ç®€å•åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p><ul><li>å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ä¿å­˜äº†å¯¹åº”çš„å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨ï¼Œå°±ç›´æ¥è¿”å›è¯¥å¼•ç”¨ã€‚</li><li>å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ²¡æœ‰ä¿å­˜å¯¹åº”çš„å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£å°±åœ¨<strong>å¸¸é‡æ± ä¸­åˆ›å»ºä¸€ä¸ª</strong>æŒ‡å‘è¯¥å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨å¹¶è¿”å›ã€‚</li></ul><hr><p><strong>å¯¹äºç¼–è¯‘æœŸå¯ä»¥ç¡®å®šå€¼çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯å¸¸é‡å­—ç¬¦ä¸² ï¼Œjvm ä¼šå°†å…¶å­˜å…¥å­—ç¬¦ä¸²å¸¸é‡æ± ã€‚å¹¶ä¸”ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ‹¼æ¥å¾—åˆ°çš„å­—ç¬¦ä¸²å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µå°±å·²ç»è¢«å­˜æ”¾å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œè¿™ä¸ªå¾—ç›Šäºç¼–è¯‘å™¨çš„ä¼˜åŒ–ã€‚</strong></p><h3 id="3-7è¾“å…¥ä¸è¾“å‡º"><a href="#3-7è¾“å…¥ä¸è¾“å‡º" class="headerlink" title="3.7è¾“å…¥ä¸è¾“å‡º"></a>3.7è¾“å…¥ä¸è¾“å‡º</h3><h4 id="è¯»å–è¾“å…¥ï¼š"><a href="#è¯»å–è¾“å…¥ï¼š" class="headerlink" title="è¯»å–è¾“å…¥ï¼š"></a>è¯»å–è¾“å…¥ï¼š</h4><p>â€‹1.æ„é€ ä¸â€æ ‡å‡†è¾“å…¥æµâ€ System.in å…³è”çš„Scannerå¯¹è±¡</p><p>â€‹Scanner in &#x3D; new Scanner(System.in);</p><p>â€‹2.ç°åœ¨ï¼Œå¯ä»¥ä½¿ç”¨Scannerç±»çš„inå¯¹è±¡æ¥è°ƒç”¨Scannerç±»ä¸­çš„å„ç§APIæ¥è¯»å–è¾“å…¥äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// in java.util.Scanner</span></span><br><span class="line">nextLine() <span class="comment">//read hole line</span></span><br><span class="line">next()     <span class="comment">//read a word </span></span><br><span class="line">nextInt()  <span class="comment">//read an Integer</span></span><br><span class="line"><span class="comment">//so as nextDouble() and so on...</span></span><br></pre></td></tr></table></figure><h4 id="æ ¼å¼åŒ–è¾“å‡ºï¼š"><a href="#æ ¼å¼åŒ–è¾“å‡ºï¼š" class="headerlink" title="æ ¼å¼åŒ–è¾“å‡ºï¼š"></a>æ ¼å¼åŒ–è¾“å‡ºï¼š</h4><p>â€‹é€šè¿‡ System.out.<strong>printf</strong>() æ–¹æ³• æ¥è‡ªè¡Œå®šåˆ¶è¾“å‡ºçš„ç‰¹æ®Šéœ€æ±‚</p><h4 id="æ–‡ä»¶è¾“å…¥ä¸è¾“å‡ºï¼š"><a href="#æ–‡ä»¶è¾“å…¥ä¸è¾“å‡ºï¼š" class="headerlink" title="æ–‡ä»¶è¾“å…¥ä¸è¾“å‡ºï¼š"></a>æ–‡ä»¶è¾“å…¥ä¸è¾“å‡ºï¼š</h4><p>â€‹<strong>itâ€™s wise to æ ¹æ®æ–‡ä»¶çš„ç¼–ç ç±»å‹é€‰æ‹©å“åº”çš„ç¼–ç æ–¹å¼ï¼Œå¦‚æœä¸å¡«ä¼šä½¿ç”¨ä¸»æœºçš„é»˜è®¤ç¼–ç ï¼Œè¿™å¯èƒ½å¯¼è‡´é”™è¯¯</strong></p><h5 id="æ–‡ä»¶è¾“å…¥ï¼š"><a href="#æ–‡ä»¶è¾“å…¥ï¼š" class="headerlink" title="æ–‡ä»¶è¾“å…¥ï¼š"></a>æ–‡ä»¶è¾“å…¥ï¼š</h5><p>â€‹Scanner in &#x3D; new Scanner(Path.of(â€œthe path of fileâ€), StandardCharsets.UTF_8);</p><h5 id="æ–‡ä»¶å†™å…¥ï¼š"><a href="#æ–‡ä»¶å†™å…¥ï¼š" class="headerlink" title="æ–‡ä»¶å†™å…¥ï¼š"></a>æ–‡ä»¶å†™å…¥ï¼š</h5><p>â€‹æˆ‘ä»¬éœ€è¦æ„é€ PrintWriterå¯¹è±¡ï¼š</p><p>â€‹PrintWriter out &#x3D; new PrintWriter(â€œmyfile.txtâ€, StandardCharsets.UTF_8);&#x2F;&#x2F;æ²¡æœ‰è¯¥æ–‡ä»¶å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªåå­—çš„æ–‡ä»¶<br>â€‹è¾“å‡ºå°±out.println(â€œâ€)è¿™ç§å°±å¯ä»¥äº†ï¼</p><ul><li><p>å¦‚æœä½¿ç”¨äº†ç›¸å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆæ–‡ä»¶å°†ç›¸å¯¹äº<strong>å¯åŠ¨javaè™šæ‹Ÿæœºçš„é‚£ä¸ªç›®å½•æ”¾ç½®</strong>ï¼Œ</p><p>â€”â€”â€”â€”â€”â€”æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤æ‰¾åˆ°è¿™ä¸ªç›®å½•çš„ä½ç½®ï¼šString dir &#x3D; System.getProperty(â€œuser.dirâ€);</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java.util.Scanner</span></span><br><span class="line">Scanner(Path p, String encoding);<span class="comment">//æ„é€ ä¸€ä¸ªScannerï¼Œå…¶ä½¿ç”¨ç»™å®šçš„ç¼–ç æ–¹å¼ä»ç»™å®šè·¯å¾„è¯»å–æ•°æ®</span></span><br><span class="line"></span><br><span class="line">Scanner(String data);<span class="comment">//ä»ç»™å®šçš„å­—ç¬¦ä¸²ä¸­è¯»å–æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//java.io.PrintWriter</span></span><br><span class="line">PrintWriter(String fileName);<span class="comment">//æ„é€ ä¸€ä¸ªPrintWriterï¼Œå°†æ•°æ®å†™å…¥æŒ‡å®šæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//java.nio.file.Path</span></span><br><span class="line"><span class="keyword">static</span> Path <span class="title function_">of</span><span class="params">(String pathname)</span>;<span class="comment">//ç”±ç»™å®šè·¯å¾„æ„é€ ä¸€ä¸ªPathå¯¹è±¡</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="3-8æ§åˆ¶æµç¨‹"><a href="#3-8æ§åˆ¶æµç¨‹" class="headerlink" title="3.8æ§åˆ¶æµç¨‹"></a>3.8æ§åˆ¶æµç¨‹</h3><p>â€‹switchè¯­å¥ä¼šä»ä¸é€‰é¡¹å€¼ç›¸åŒ¹é…çš„caseæ ‡ç­¾å¼€å§‹æ‰§è¡Œï¼Œ<strong>ç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªbreakè¯­å¥ç»“æŸ</strong>ã€‚â€”â€”â€“ç©¿é€æ€§ï¼</p><p>â€‹switchè¡¨è¾¾å¼ä¸­ 1.caseåä»¥ï¼šç»“å°¾ï¼Œåˆ™ä¸ºç›´é€šå¼switch  2.caseåä»¥-&gt;ç»“å°¾ï¼Œåˆ™ä¸ºéç›´é€šå¼switch</p><p>â€‹switchæœ‰<strong>è¯­å¥å½¢å¼</strong>(å¦‚æœæ€ä¹ˆæ ·ï¼Œå°±åšä»€ä¹ˆæ“ä½œ)å’Œ<strong>è¡¨è¾¾å¼å½¢å¼</strong>(å¦‚æœæ€ä¹ˆæ ·ï¼Œå°±è¿”å›ä»€ä¹ˆå€¼)</p><p>â€‹æ€§èƒ½æ¯”è¾ƒï¼šå®ç°åŒæ ·çš„åŠŸèƒ½æ—¶ï¼Œ<strong>switchè¡¨è¾¾å¼çš„æ€§èƒ½ä¼˜äºswitchè¯­å¥</strong></p><h3 id="3-9å¤§æ•°"><a href="#3-9å¤§æ•°" class="headerlink" title="3.9å¤§æ•°"></a>3.9å¤§æ•°</h3><p>BigIntegerå’ŒBigDecimalç±»å¯ä»¥å¤„ç†ä»»æ„é•¿åº¦çš„æ•°å­—æ•°åˆ—çš„æ•°å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java.math.BigInteger</span></span><br><span class="line"><span class="comment">//â¬‡ï¸å®ç°å¤§æ•°çš„åŸºæœ¬æ“ä½œï¼ŒåŒ…æ‹¬å¼€æ–¹ã€å–æ¨¡ã€æ¯”è¾ƒç­‰æ“ä½œ</span></span><br><span class="line">BigInteger add/subtract/multiply/divide/mod/sqrt/compareTo(BigInteger other);</span><br><span class="line"><span class="keyword">static</span> BigInteger <span class="title function_">valueOf</span><span class="params">(<span class="type">long</span> x)</span>; å°†æ•´æ•°ç±»å‹è½¬æ¢ä¸ºå¤§æ•°</span><br><span class="line">  <span class="keyword">static</span> BigInteger <span class="title function_">valueOf</span><span class="params">(String str)</span>; å°†Stringç±»å‹è½¬æ¢ä¸ºå¤§æ•°</span><br><span class="line"></span><br><span class="line"><span class="comment">//java.math.BigDecimal</span></span><br><span class="line">  <span class="keyword">static</span> BigDecimal <span class="title function_">valueOf</span><span class="params">(String str)</span>; å°†Stringç±»å‹è½¬æ¢ä¸ºå¤§æ•°</span><br><span class="line">    ğŸŒŸä½¿ç”¨BigDecimalç±»æ—¶ï¼Œæˆ‘ä»¬åº”å½“æ€»æ˜¯ä½¿ç”¨ å¸¦å­—ç¬¦ä¸²çš„æ„é€ å™¨ç”Ÿæˆå¤§æ•°</span><br></pre></td></tr></table></figure><h3 id="3-10æ•°ç»„"><a href="#3-10æ•°ç»„" class="headerlink" title="3.10æ•°ç»„"></a>3.10æ•°ç»„</h3><h4 id="å£°æ˜æ•°ç»„"><a href="#å£°æ˜æ•°ç»„" class="headerlink" title="å£°æ˜æ•°ç»„:"></a>å£°æ˜æ•°ç»„:</h4><p>â€‹å¯ä»¥ä½¿ç”¨ int[] arr &#x3D; {1,2,3,4};</p><p>â€‹è€Œä¸å¿… int[]arr &#x3D; new int[] {1,2,3,4};</p><h4 id="æ•°ç»„æ‹·è´ï¼š"><a href="#æ•°ç»„æ‹·è´ï¼š" class="headerlink" title="æ•°ç»„æ‹·è´ï¼š"></a>æ•°ç»„æ‹·è´ï¼š</h4><h5 id="Arrays-copy-çš„ä½¿ç”¨"><a href="#Arrays-copy-çš„ä½¿ç”¨" class="headerlink" title="Arrays.copy()çš„ä½¿ç”¨"></a><strong>Arrays.copy()çš„ä½¿ç”¨</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.ä½¿ç”¨Arrays.copy(åŸæ•°ç»„ï¼ŒåŸæ•°ç»„çš„å‰nä½ å¦‚æœn &gt; åŸæ•°ç»„é•¿åº¦ï¼Œåˆ™ä¸å¤Ÿçš„è¡¥é»˜è®¤å€¼)è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„</span></span><br></pre></td></tr></table></figure><h5 id="System-arraycopy-çš„ä½¿ç”¨"><a href="#System-arraycopy-çš„ä½¿ç”¨" class="headerlink" title="System.arraycopy()çš„ä½¿ç”¨"></a>System.arraycopy()çš„ä½¿ç”¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span>      src      the source array. æºæ•°ç»„</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span>      srcPos   starting position in the source array. æºæ•°ç»„çš„èµ·å§‹ä½ç½®</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span>      dest     the destination array. ç›®æ ‡æ•°ç»„</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span>      destPos  starting position in the destination data. ç›®æ ‡æ•°ç»„çš„èµ·å§‹ä½ç½®</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span>      length   the number of array elements to be copied. å¤åˆ¶çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">arraycopy(Object src,<span class="type">int</span> srcPos,Object dest, <span class="type">int</span> destPos, <span class="type">int</span> length)ï¼›</span><br></pre></td></tr></table></figure><ul><li>å¤šç»´æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› è€Œå¤šç»´æ•°ç»„çš„å„ä¸ªå…ƒç´ çš„ç»“æ„ä¸å¿…ç›¸åŒï¼Œä¾‹å¦‚äºŒç»´æ•°ç»„æ¯è¡Œçš„é•¿åº¦å¯ä»¥ä¸ç›¸åŒï¼</li></ul><p>â€‹</p><h2 id="Chapter4â€”â€”å¯¹è±¡ä¸ç±»"><a href="#Chapter4â€”â€”å¯¹è±¡ä¸ç±»" class="headerlink" title="Chapter4â€”â€”å¯¹è±¡ä¸ç±»"></a>Chapter4â€”â€”å¯¹è±¡ä¸ç±»</h2><h3 id="4-1é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ¦‚è¿°"><a href="#4-1é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ¦‚è¿°" class="headerlink" title="4.1é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ¦‚è¿°"></a>4.1é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ¦‚è¿°</h3><h4 id="OOPä¸‰å¤§ç‰¹æ€§ï¼š"><a href="#OOPä¸‰å¤§ç‰¹æ€§ï¼š" class="headerlink" title="OOPä¸‰å¤§ç‰¹æ€§ï¼š"></a>OOPä¸‰å¤§ç‰¹æ€§ï¼š</h4><h5 id="å°è£…ï¼š"><a href="#å°è£…ï¼š" class="headerlink" title="å°è£…ï¼š"></a>å°è£…ï¼š</h5><p>â€‹å°†æ•°æ®å’Œè¡Œä¸ºç»„åˆåœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œå¹¶å¯¹å¯¹è±¡çš„ä½¿ç”¨è€…éšè—å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</p><h5 id="ç»§æ‰¿ï¼š"><a href="#ç»§æ‰¿ï¼š" class="headerlink" title="ç»§æ‰¿ï¼š"></a>ç»§æ‰¿ï¼š</h5><p>â€‹é€šè¿‡æ‰©å±•ä¸€ä¸ªç±»æ¥å¾—åˆ°å¦å¤–ä¸€ä¸ªç±»</p><h5 id="å¤šæ€ï¼š"><a href="#å¤šæ€ï¼š" class="headerlink" title="å¤šæ€ï¼š"></a>å¤šæ€ï¼š</h5><p>â€‹</p><h4 id="å¯¹è±¡çš„ä¸‰ä¸ªç‰¹æ€§ï¼š"><a href="#å¯¹è±¡çš„ä¸‰ä¸ªç‰¹æ€§ï¼š" class="headerlink" title="å¯¹è±¡çš„ä¸‰ä¸ªç‰¹æ€§ï¼š"></a>å¯¹è±¡çš„ä¸‰ä¸ªç‰¹æ€§ï¼š</h4><ul><li>behaviorï¼šå¯ä»¥å¯¹å¯¹è±¡åšå“ªäº›æ“ä½œ</li><li>stateï¼šå¯¹è±¡ä¿å­˜ç€å½“å‰çŠ¶æ€çš„ä¿¡æ¯ï¼›âš ï¸<strong>å¯¹è±¡çš„çŠ¶æ€åªèƒ½é€šè¿‡è°ƒç”¨æ–¹æ³•è€Œæ”¹å˜</strong>ï¼Œå¦åˆ™å°±è¿èƒŒäº†ç±»çš„<strong>å°è£…æ€§</strong></li><li>identityï¼šç”¨äºåŒºåˆ†å…·æœ‰ç›¸åŒè¡Œä¸ºå’ŒçŠ¶æ€çš„ä¸åŒå¯¹è±¡</li></ul><h3 id="4-2ä½¿ç”¨é¢„å®šä¹‰ç±»"><a href="#4-2ä½¿ç”¨é¢„å®šä¹‰ç±»" class="headerlink" title="4.2ä½¿ç”¨é¢„å®šä¹‰ç±»"></a>4.2ä½¿ç”¨é¢„å®šä¹‰ç±»</h3><p>ä½¿ç”¨ å¯¹è±¡å˜é‡ å¼•ç”¨ å®é™…åˆ›å»ºå¯¹è±¡çš„ç©ºé—´</p><ul><li>javaä¸­<strong>æ‰€æœ‰å¯¹è±¡éƒ½å­˜å‚¨åœ¨å †ä¸­</strong>ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åŒ…å«å¦ä¸€å¯¹è±¡å˜é‡æ—¶ï¼Œå®ƒåªæ˜¯åŒ…å«äº†å¦ä¸€ä¸ªå †ä¸­å¯¹è±¡çš„æŒ‡é’ˆã€‚</li></ul><p><strong><u>è®¿é—®å™¨</u>æ–¹æ³•</strong>ï¼šåªè®¿é—®å¯¹è±¡è€Œä¸ä¿®æ”¹å¯¹è±¡çš„æ–¹æ³•æ¯”å¦‚LocalDateçš„plusDaysæ–¹æ³•ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡è€Œä¸æ˜¯åœ¨åŸå¯¹è±¡ä¸Šä¿®æ”¹</p><p><strong><u>æ›´æ”¹å™¨</u>æ–¹æ³•</strong>ï¼šä¼šä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€çš„æ–¹æ³•</p><h3 id="4-3è‡ªå®šä¹‰ç±»"><a href="#4-3è‡ªå®šä¹‰ç±»" class="headerlink" title="4.3è‡ªå®šä¹‰ç±»"></a>4.3è‡ªå®šä¹‰ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–è¯‘æµç¨‹ï¼šå½“ç¼–è¯‘å™¨å‘ç°EmployeeTest.javaä¸­ä½¿ç”¨äº†Employeeç±»æ—¶ï¼Œå®ƒä¼šæŸ¥æ‰¾åä¸ºEmployee.classçš„.classæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šè‡ªåŠ¨æœç´¢Employee.javaæ–‡ä»¶å¹¶å¯¹å…¶è¿›è¡Œç¼–è¯‘(ç¼–è¯‘æˆ.classæ–‡ä»¶)</span></span><br></pre></td></tr></table></figure><p> Java10 åŠä»¥åï¼Œå¯ä»¥ä½¿ç”¨varå£°æ˜å±€éƒ¨å˜é‡(if ç­‰å·å³è¾¹çš„æ•°æ®ç±»å‹å¾ˆæ˜ç¡®)    è¿™å¾ˆæ–¹ä¾¿(å‡å°‘äº†å†™ç±»åçš„æ¬¡æ•°)</p><h4 id="nullå¼•ç”¨ï¼š"><a href="#nullå¼•ç”¨ï¼š" class="headerlink" title="nullå¼•ç”¨ï¼š"></a>nullå¼•ç”¨ï¼š</h4><p>â€‹å¯¹äºè‡ªå®šä¹‰ç±»ä¸­çš„å‚æ•°ï¼Œå¦‚æœå«æœ‰å¯¹è±¡å¼•ç”¨ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡ç±»æ—¶å°±åº”å½“æ˜ç¡®æ˜¯å¦èƒ½æ¥å—è¯¥å¼•ç”¨å€¼ä¸ºnullçš„æƒ…å†µ(å› ä¸ºè‹¥å¯¹è±¡å¼•ç”¨ä¸ºnullå¯èƒ½é€ æˆNullPointerExceptionå¼‚å¸¸ï¼Œè€Œæˆ‘ä»¬ä¸å®¹æ˜“å¯Ÿè§‰å‡ºé”™çš„åŸå› )ï¼Œå¦‚æœæˆ‘ä»¬æ˜ç¡®åœ°å¸Œæœ›å¯¹è±¡å¼•ç”¨ä¸ä¸ºnullï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š</p><p>ä»¥å¯¹è±¡å¼•ç”¨â€œnameâ€ä¸ºä¾‹ï¼š</p><ul><li>name &#x3D; Objects.requireNonNullElse(n, â€œunknownâ€)&#x2F;&#x2F;nä¸ºæ„é€ å™¨ä¸­å¯¹åº”çš„å½¢å‚ ï¼Œè¿™ç§æ–¹å¼æ„é€ å‡ºçš„å¯¹è±¡çš„nameå¦‚æœä¸ºnullï¼Œä¼šæœ‰é»˜è®¤å€¼â€œunknownâ€</li><li>name &#x3D; Objects.requireNonNull(n, â€œThe name cannot be nullâ€);     &#x2F;&#x2F;è¿™ç§æ–¹å¼åœ¨æ„é€ å‡ºname &#x3D; nullçš„å¯¹è±¡æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ˜ç¡®æŒ‡å‡ºè¯¥é—®é¢˜</li></ul><h4 id="éšå¼å‚æ•°ä¸æ˜¾å¼å‚æ•°ï¼š"><a href="#éšå¼å‚æ•°ä¸æ˜¾å¼å‚æ•°ï¼š" class="headerlink" title="éšå¼å‚æ•°ä¸æ˜¾å¼å‚æ•°ï¼š"></a>éšå¼å‚æ•°ä¸æ˜¾å¼å‚æ•°ï¼š</h4><p>â€‹å¯¹äºç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå«æœ‰éšå¼å‚æ•°å’Œæ˜¾å¼å‚æ•°ä¸¤ç§å‚æ•°ï¼Œæ˜¾å¼å‚æ•°åŠæˆ‘ä»¬å¸¸å†™çš„å½¢å‚ï¼›<strong>éšå¼å‚æ•°</strong>æ˜¯æ–¹æ³•çš„è°ƒç”¨è€…&#x2F;æ¥æ”¶è€…ï¼Œåœ¨æ¯ä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œå…³é”®è¯thisæŒ‡ç¤ºéšå¼å‚æ•°ã€‚</p><h4 id="finalå­—æ®µï¼š"><a href="#finalå­—æ®µï¼š" class="headerlink" title="finalå­—æ®µï¼š"></a>finalå­—æ®µï¼š</h4><p>å¿…é¡»åœ¨æ„é€ å¯¹è±¡æ—¶åˆå§‹åŒ–</p><p><strong>å¦‚æœfinalä¿®é¥°äº†ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œé‚£ä¹ˆè¯¥å˜é‡æŒ‡å‘çš„åœ°å€ä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯è¯¥åœ°å€è¡¨ç¤ºçš„å¯¹è±¡ç©ºé—´ä¸­çš„å†…å®¹æ˜¯å¯ä»¥æ”¹å˜çš„ï¼</strong></p><p>ä¾‹å¦‚final int[] arrï¼› &#x2F;&#x2F;arrçš„åœ°å€ä¸ä¼šå˜äº†ï¼Œä½†æ˜¯arræ•°ç»„ä¸­çš„å†…å®¹ä»å¯å˜</p><h3 id="4-4é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•"><a href="#4-4é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•" class="headerlink" title="4.4é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•"></a>4.4é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•</h3><h4 id="é™æ€å­—æ®µï¼š"><a href="#é™æ€å­—æ®µï¼š" class="headerlink" title="é™æ€å­—æ®µï¼š"></a>é™æ€å­—æ®µï¼š</h4><p>â€‹ç±»ä¸­çš„é™æ€å­—æ®µåªæœ‰ä¸€ä¸ªå‰¯æœ¬</p><p>â€‹<strong>é™æ€å­—æ®µå±äºç±»</strong>è€Œä¸ä¸å¯¹è±¡ç›¸å…³ï¼</p><p>â€‹Systemç±»ä¸­çš„ out å°±æ˜¯ä¸€ä¸ªé™æ€çš„å­—æ®µ(ç±»å‹ä¸º PrintStream )</p><h4 id="é™æ€æ–¹æ³•ï¼š"><a href="#é™æ€æ–¹æ³•ï¼š" class="headerlink" title="é™æ€æ–¹æ³•ï¼š"></a>é™æ€æ–¹æ³•ï¼š</h4><p>â€‹é™æ€æ–¹æ³•æ˜¯<strong>ä¸æ“ä½œå¯¹è±¡</strong>çš„æ–¹æ³•( æ¢å¥è¯è¯´ï¼Œé™æ€æ–¹æ³•ä¸­æ²¡æœ‰éšå¼å‚æ•°ï¼)</p><p>â€‹åªèƒ½è°ƒç”¨é™æ€å­—æ®µ</p><h4 id="å·¥å‚æ–¹æ³•ï¼š"><a href="#å·¥å‚æ–¹æ³•ï¼š" class="headerlink" title="å·¥å‚æ–¹æ³•ï¼š"></a>å·¥å‚æ–¹æ³•ï¼š</h4><p>â€‹å¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³•ä½œä¸ºå·¥å‚æ–¹æ³•â€”-&gt;é€šè¿‡è¯¥æ–¹æ³•è€Œä¸æ˜¯æ„é€ å™¨æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºå¯¹è±¡</p><p>â€‹å¥½å¤„ï¼šå› ä¸ºæˆ‘ä»¬å¯ä»¥æ„é€ å‡ºå…¶å­ç±»(æ„é€ å™¨åªèƒ½åˆ›å»ºæœ¬ç±»çš„å¯¹è±¡)ï¼Œå¹¶ä¸”å¦‚æœä½¿ç”¨é™æ€æ–¹æ³•å°±å¯ä»¥è®¾ç½®åˆé€‚çš„åå­—ä¸è¯¥å­ç±»çš„åŠŸèƒ½ç›¸å»åˆ;</p><h3 id="4-5æ–¹æ³•å‚æ•°"><a href="#4-5æ–¹æ³•å‚æ•°" class="headerlink" title="4.5æ–¹æ³•å‚æ•°"></a>4.5æ–¹æ³•å‚æ•°</h3><h4 id="å€¼è°ƒç”¨-call-by-value"><a href="#å€¼è°ƒç”¨-call-by-value" class="headerlink" title="å€¼è°ƒç”¨(call by value)"></a>å€¼è°ƒç”¨(call by value)</h4><h4 id="å¼•ç”¨è°ƒç”¨-call-by-reference"><a href="#å¼•ç”¨è°ƒç”¨-call-by-reference" class="headerlink" title="å¼•ç”¨è°ƒç”¨(call by reference)"></a>å¼•ç”¨è°ƒç”¨(call by reference)</h4><p>â€‹Â·æ–¹æ³•æ¥æ”¶è°ƒç”¨è€…æä¾›çš„å˜é‡ä½ç½®</p><p>â€‹æœ¬è´¨æ˜¯ï¼šæ–¹æ³•åˆ›å»ºäº†å‰¯æœ¬ï¼Œå‰¯æœ¬ä¿å­˜äº†è°ƒç”¨è€…æä¾›çš„å˜é‡ä½ç½®ï¼Œä¸ä¼ å…¥çš„å®å‚æŒ‡å‘äº†ç›¸åŒçš„ä½ç½®(è¿™é‡ŒæŒ‡çš„æ˜¯å¯¹è±¡çš„ç©ºé—´)</p><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<strong>å› æ­¤ï¼</strong>åœ¨æ–¹æ³•ä¸­äº¤æ¢ä¸¤ä¸ªæ¥æ”¶åˆ°çš„å½¢å‚æ˜¯ä¸èµ·ä½œç”¨çš„(å¯¹è°ƒç”¨è€…æ— å½±å“ï¼)ï¼Œ<strong>å› ä¸ºäº¤æ¢çš„æ˜¯å‰¯æœ¬</strong>ï¼ï¼&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><p>æ€»ç»“ï¼š</p><ul><li>æ–¹æ³•ä¸èƒ½ä¿®æ”¹åŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°(å› ä¸ºæ˜¯å€¼è°ƒç”¨!)</li><li>æ–¹æ³•å¯ä»¥æ”¹å˜å¯¹è±¡å‚æ•°çš„çŠ¶æ€(æ”¹å˜å¯¹è±¡ä¸­çš„å­—æ®µå€¼ å³ æ”¹å˜å¯¹è±¡çŠ¶æ€)</li><li>æ–¹æ³•ä¸èƒ½è®©ä¸€ä¸ªå¯¹è±¡å‚æ•°å¼•ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡(å› ä¸ºæœ¬è´¨æ˜¯å‰¯æœ¬æŒ‡å‘äº†æ–°çš„ä½ç½®ï¼Œè€Œå®å‚å¹¶æœªäº§ç”Ÿæ”¹å˜)</li></ul><h3 id="4-6å¯¹è±¡æ„é€ "><a href="#4-6å¯¹è±¡æ„é€ " class="headerlink" title="4.6å¯¹è±¡æ„é€ "></a>4.6å¯¹è±¡æ„é€ </h3><h4 id="é‡è½½ï¼š"><a href="#é‡è½½ï¼š" class="headerlink" title="é‡è½½ï¼š"></a>é‡è½½ï¼š</h4><p>â€‹æ–¹æ³•å…·æœ‰ç›¸åŒæ–¹æ³•åä½†æ˜¯æœ‰ä¸åŒçš„å‚æ•°</p><p>â€‹åœ¨javaä¸­ï¼Œ(æ–¹æ³•å+æ–¹æ³•ä½¿ç”¨çš„å‚æ•°)&#x3D;&#x3D;ç§°ä¸ºæ–¹æ³•ç­¾åï¼Œå¯ä»¥å”¯ä¸€ç¡®å®šä¸€ä¸ªæ–¹æ³•ã€‚è€Œæ–¹æ³•çš„è¿”å›å€¼ä¸å±äºæ–¹æ³•ç­¾åï¼Œå› æ­¤<strong>é‡è½½ä¸èƒ½åªæ˜¯è¿”å›å€¼ä¸åŒ</strong>(å› ä¸ºç¼–è¯‘å™¨æ— æ³•åˆ†è¾¨åº”å½“ä½¿ç”¨å“ªä¸ªæ–¹æ³•)</p><h4 id="é‡å†™ï¼š"><a href="#é‡å†™ï¼š" class="headerlink" title="é‡å†™ï¼š"></a>é‡å†™ï¼š</h4><p>â€‹é‡å†™å‘ç”Ÿåœ¨è¿è¡ŒæœŸï¼Œæ˜¯å­ç±»å¯¹çˆ¶ç±»çš„<strong>å…è®¸è®¿é—®çš„æ–¹æ³•</strong>çš„å®ç°è¿‡ç¨‹è¿›è¡Œé‡æ–°ç¼–å†™ã€‚</p><ol><li><u>æ–¹æ³•åã€å‚æ•°åˆ—è¡¨å¿…é¡»ç›¸åŒ</u>ï¼Œå­ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹åº”æ¯”çˆ¶ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹<u>æ›´å°æˆ–ç›¸ç­‰</u>ï¼ŒæŠ›å‡ºçš„<u>å¼‚å¸¸èŒƒå›´å°äºç­‰äºçˆ¶ç±»</u>ï¼Œ<u>è®¿é—®ä¿®é¥°ç¬¦èŒƒå›´å¤§äºç­‰äºçˆ¶ç±»</u>ã€‚</li><li>å¦‚æœçˆ¶ç±»æ–¹æ³•è®¿é—®ä¿®é¥°ç¬¦ä¸º <code>private/final/static</code> åˆ™å­ç±»å°±ä¸èƒ½é‡å†™è¯¥æ–¹æ³•ï¼Œä½†æ˜¯è¢« <code>static</code> ä¿®é¥°çš„æ–¹æ³•èƒ½å¤Ÿè¢«å†æ¬¡å£°æ˜ã€‚</li><li>æ„é€ æ–¹æ³•æ— æ³•è¢«é‡å†™</li></ol><h4 id="é»˜è®¤å­—æ®µåˆå§‹åŒ–ï¼š"><a href="#é»˜è®¤å­—æ®µåˆå§‹åŒ–ï¼š" class="headerlink" title="é»˜è®¤å­—æ®µåˆå§‹åŒ–ï¼š"></a>é»˜è®¤å­—æ®µåˆå§‹åŒ–ï¼š</h4><p>â€‹åœ¨å¯¹è±¡åˆ›å»ºæ—¶ï¼Œå¦‚æœæ„é€ å™¨æ²¡æœ‰å¯¹æŸäº›å­—æ®µèµ‹å€¼ï¼Œé‚£ä¹ˆè¿™äº›å­—æ®µå°†ä¼šè¢«èµ‹é»˜è®¤å€¼(0ã€falseã€null)</p><h4 id="æ— å‚æ„é€ å™¨ï¼š"><a href="#æ— å‚æ„é€ å™¨ï¼š" class="headerlink" title="æ— å‚æ„é€ å™¨ï¼š"></a>æ— å‚æ„é€ å™¨ï¼š</h4><p>â€‹å¦‚æœä½ å†™çš„ç±»<strong>æ²¡æœ‰æ„é€ å™¨</strong>ï¼Œç³»ç»Ÿä¼š<strong>æä¾›é»˜è®¤æ— å‚æ„é€ å™¨</strong>ï¼Œä½†æ˜¯ä½†å‡¡ä½ å†™äº†ä¸€ä¸ªæ„é€ å™¨ï¼Œç³»ç»Ÿå°±ä¸ä¼šä¸ºä½ æä¾›é»˜è®¤æ— å·®æ„é€ å™¨ï¼</p><h4 id="æ˜¾å¼å­—æ®µåˆå§‹åŒ–ï¼š"><a href="#æ˜¾å¼å­—æ®µåˆå§‹åŒ–ï¼š" class="headerlink" title="æ˜¾å¼å­—æ®µåˆå§‹åŒ–ï¼š"></a>æ˜¾å¼å­—æ®µåˆå§‹åŒ–ï¼š</h4><p>â€‹å¯ä»¥ç›´æ¥å¯¹ç±»ä¸­çš„å­—ç¬¦æ®µèµ‹å€¼</p><h4 id="è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å™¨ï¼š"><a href="#è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å™¨ï¼š" class="headerlink" title="è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å™¨ï¼š"></a>è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å™¨ï¼š</h4><p>â€‹å¯ä»¥**<u><em>åœ¨æ„é€ å™¨çš„ç¬¬ä¸€è¡Œæ·»åŠ this(å‚æ•°å)æ¥è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å™¨</em></u>**ï¼Œè¿™æ ·å°±å¯ä»¥æå–å…¬å…±æ„é€ ä»£ç ï¼</p><h4 id="åˆå§‹ä»£ç å—ï¼š"><a href="#åˆå§‹ä»£ç å—ï¼š" class="headerlink" title="åˆå§‹ä»£ç å—ï¼š"></a>åˆå§‹ä»£ç å—ï¼š</h4><p>â€‹ä¸åˆå§‹åŒ–ç»™å®šå€¼å¹³çº§ï¼Œè°åœ¨åé¢å¬è°çš„</p><h4 id="å¯¹è±¡çš„åˆå§‹åŒ–æµç¨‹ï¼š"><a href="#å¯¹è±¡çš„åˆå§‹åŒ–æµç¨‹ï¼š" class="headerlink" title="å¯¹è±¡çš„åˆå§‹åŒ–æµç¨‹ï¼š"></a>å¯¹è±¡çš„åˆå§‹åŒ–æµç¨‹ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.åœ¨æ–¹æ³•åŒºåŠ è½½è¯¥ç±»çš„æ¨¡å—(è¯¥ç±»ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶)</span><br><span class="line">2.åœ¨å †ä¸­ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´(è¿™æ—¶å€™ä¼šç»™å±æ€§èµ‹é»˜è®¤å€¼ 0ã€nullç­‰)</span><br><span class="line">3.å…ˆæ˜¾å¼åˆå§‹åŒ–(å®šä¹‰å±æ€§æ—¶ï¼Œç»™å…¶èµ‹çš„å€¼)ï¼Œå†ä½¿ç”¨æ„é€ å™¨åˆå§‹åŒ– (int a = 9;</span><br><span class="line">//å…ˆç­‰äºé»˜è®¤å€¼0ï¼Œå†ç­‰äºæ˜¾å¼é»˜è®¤å€¼9ï¼Œå†ç­‰äºæ„é€ å™¨ä¸­çš„éé»˜è®¤åˆå§‹åŒ–å€¼)</span><br><span class="line">===============æ­¤æ—¶ç­‰å·å³è¾¹çš„newç»“æŸ==================</span><br><span class="line">4.å†åœ¨æ ˆä¸­åˆ›å»ºå¯¹è±¡å(å¯¹è±¡å¼•ç”¨)ï¼Œå¹¶æŒ‡å‘æ ˆä¸­çš„ç©ºé—´ </span><br></pre></td></tr></table></figure><h3 id="4-7è®°å½•"><a href="#4-7è®°å½•" class="headerlink" title="4.7è®°å½•"></a>4.7è®°å½•</h3><h3 id="4-8åŒ…"><a href="#4-8åŒ…" class="headerlink" title="4.8åŒ…"></a>4.8åŒ…</h3><h3 id="4-9JARæ–‡ä»¶"><a href="#4-9JARæ–‡ä»¶" class="headerlink" title="4.9JARæ–‡ä»¶"></a>4.9JARæ–‡ä»¶</h3><h3 id="4-10æ–‡æ¡£æ³¨é‡Š"><a href="#4-10æ–‡æ¡£æ³¨é‡Š" class="headerlink" title="4.10æ–‡æ¡£æ³¨é‡Š"></a>4.10æ–‡æ¡£æ³¨é‡Š</h3><h3 id="4-11ç±»è®¾è®¡æŠ€å·§"><a href="#4-11ç±»è®¾è®¡æŠ€å·§" class="headerlink" title="4.11ç±»è®¾è®¡æŠ€å·§"></a>4.11ç±»è®¾è®¡æŠ€å·§</h3><p>hashmapåˆå§‹å¤§å°ä¸º16 16ä¸ªæ¡¶</p><p>åªè¦æœ‰ä¸€ä¸ªæ¡¶ä¸­å…ƒç´ åˆ°è¾¾8ï¼Œåˆ™çœ‹çœ‹æ¡¶æ˜¯å¦è¾¾åˆ°64ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™æ¡¶æ•°é‡ç¿»å€ï¼Œè‹¥æœ‰ï¼Œåˆ™å°†é“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘</p><p>hashmapä¸­çš„æ€»å…ƒç´ è¾¾åˆ° è´Ÿè½½å› å­*æ¡¶æ€»æ•°æ—¶ï¼Œéœ€è¦æ‰©å®¹</p><p>æ‰©å®¹ä¸ºæ¡¶çš„æ•°é‡*2ï¼Œ</p><p>10000 -&gt; 100000</p><p>å¦‚ä½•è·å–å…ƒç´ åœ¨å“ªä¸ªæ¡¶ä¸­ï¼Ÿ</p><p>é€šè¿‡ 10000 - 1 &#x3D; 01111 &amp;å“ˆå¸Œå€¼</p><p>å†è½¬å›10è¿›åˆ¶å¾—åˆ°ä¸‹æ ‡</p><p>&#x2F;&#x2F;è¿™å°±æ˜¯hashmapçš„æ¡¶å®¹é‡ä¸º2^4,å¹¶ä¸”æ¯æ¬¡æ‰©å®¹éƒ½æ˜¯å®¹é‡*2å¸¦æ¥çš„å¥½å¤„ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p><p>æ‰©å®¹åçš„æ–°ä¸‹æ ‡ä¹Ÿå¾ˆå®¹æ˜“è·å¾—ï¼š10000(åŸå¤§å°) &amp; hash &#x3D;&#x3D;&#x3D;&gt;è‹¥ä¸º0ï¼Œåˆ™ä¸‹æ ‡ä¸å˜ï¼›ä¸º1åˆ™ä¸‹æ ‡+&#x3D;åŸå¤§å°</p><h2 id="Chapter12â€”â€”å¹¶å‘ï¼š"><a href="#Chapter12â€”â€”å¹¶å‘ï¼š" class="headerlink" title="Chapter12â€”â€”å¹¶å‘ï¼š"></a>Chapter12â€”â€”å¹¶å‘ï¼š</h2><h3 id="12-1-ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼š"><a href="#12-1-ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼š" class="headerlink" title="12.1.ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼š"></a><u>12.1.ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼š</u></h3><ul><li><p>æ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰å„è‡ªçš„ä¸€å¥—å˜é‡</p></li><li><p>ä¸€ä¸ªç¨‹åºå¯ä»¥è¿è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹é—´å…±äº«æ•°æ®</p></li></ul><p>â€‹<strong>Runnable</strong>æ¥å£ï¼šéœ€è¦å®ç°run()æ–¹æ³•ï¼Œä½¿ç”¨ä½ å¸Œæœ›æ‰§è¡Œçš„ä¸šåŠ¡</p><p>â€‹<strong>Thread</strong>ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java.lang.Threadç±»çš„é‡è¦ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Thread ç±»çš„æ„é€ å‡½æ•°ï¼Œå½¢å‚ä¸ºä¸€ä¸ªRunnableç±»å‹çš„å¼•ç”¨ï¼Œç”¨äºå¾—åˆ°threadå¯¹è±¡</span></span><br><span class="line">Thread(Runnable target);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯åŠ¨çº¿ç¨‹ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨runæ–¹æ³•</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒåŠ¨ç›¸å…³Runnableçš„è¢«å®ç°çš„runæ–¹æ³•</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼‘çœ æŒ‡å®šçš„æ¯«ç§’æ•°</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sleep</span><span class="params">(<span class="type">long</span> millis)</span></span><br></pre></td></tr></table></figure><ul><li><strong>ä¸è¦ç›´æ¥è°ƒç”¨Threadæˆ–Runnableä¸­çš„runæ–¹æ³•ï¼Œå› ä¸ºè¿™æ ·ä¸ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹</strong></li><li><u><strong>åº”å½“åˆ›å»ºThreadå¯¹è±¡ï¼Œè¿è¡Œå…¶startæ–¹æ³•æ¥åˆ›å»ºæ–°çš„çº¿ç¨‹</strong></u></li></ul><h3 id="12-2-çº¿ç¨‹çŠ¶æ€ï¼š"><a href="#12-2-çº¿ç¨‹çŠ¶æ€ï¼š" class="headerlink" title="12.2.çº¿ç¨‹çŠ¶æ€ï¼š"></a><u>12.2.çº¿ç¨‹çŠ¶æ€ï¼š</u></h3><p>â€‹çº¿ç¨‹å¯ä»¥æœ‰ä»¥ä¸‹6ç§çŠ¶æ€ï¼š</p><table><thead><tr><th>New(æ–°å»º)</th><th>Runnable(å¯è¿è¡Œ)</th><th>Blocked(é˜»å¡)</th><th>Waiting(ç­‰å¾…)</th><th>Time waiting(è®¡æ—¶ç­‰å¾…)</th><th>Terminated(ç»ˆæ­¢)</th></tr></thead></table><h4 id="newï¼š"><a href="#newï¼š" class="headerlink" title="newï¼š"></a>newï¼š</h4><p>â€‹newäº†Threadå¯¹è±¡ï¼Œä»…æ­¤è€Œå·²ã€‚</p><h4 id="Runnableï¼š"><a href="#Runnableï¼š" class="headerlink" title="Runnableï¼š"></a>Runnableï¼š</h4><p>â€‹çº¿ç¨‹è°ƒç”¨äº†startæ–¹æ³•åï¼Œå°±ä¼šå¤„äºå¯è¿è¡ŒçŠ¶æ€ã€‚</p><h4 id="Blocked-and-Waiting-and-Time-waiting"><a href="#Blocked-and-Waiting-and-Time-waiting" class="headerlink" title="Blocked and Waiting and Time waiting:"></a>Blocked and Waiting and Time waiting:</h4><ul><li>å½“çº¿ç¨‹è¯•å›¾è·å–ä¸€ä¸ªå†…éƒ¨å¯¹è±¡é”ï¼Œè€Œé”è¢«å…¶ä»–çº¿ç¨‹å æœ‰æ—¶ï¼Œçº¿ç¨‹**é˜»å¡(Blocked)**ï¼Œå½“æ‰€æœ‰å…¶ä»–çº¿ç¨‹éƒ½ä¸å æœ‰è¿™ä¸ªé”&amp;çº¿ç¨‹è°ƒåº¦å™¨å…è®¸è¯¥çº¿ç¨‹æŒæœ‰è¿™ä¸ªé”æ—¶ï¼Œå˜å›RunnableçŠ¶æ€ã€‚</li><li>å½“çº¿ç¨‹ç­‰å¾…å¦ä¸€çº¿ç¨‹é€šçŸ¥è°ƒåº¦å™¨å‡ºç°æŸä¸ªæ¡ä»¶æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šè¿›å…¥**ç­‰å¾…(Waiting)**çŠ¶æ€ã€‚</li><li>æŸäº›æ–¹æ³•è®¾ç½®äº†è¶…æ—¶å‚æ•°ï¼Œè°ƒç”¨è¿™äº›æ–¹æ³•ä¼šè¿›å…¥**è®¡æ—¶ç­‰å¾…(Time waiting)**çŠ¶æ€ï¼Œè¶…æ—¶æœŸæ»¡æˆ–æ”¶åˆ°é€‚å½“çš„é€šçŸ¥æ‰ä¼šå›åˆ°RunnableçŠ¶æ€ã€‚</li></ul><h4 id="Terminatedï¼š"><a href="#Terminatedï¼š" class="headerlink" title="Terminatedï¼š"></a>Terminatedï¼š</h4><ul><li>çº¿ç¨‹æ­£å¸¸æ‰§è¡Œå®Œrunæ–¹æ³•ï¼Œè‡ªç„¶ç»ˆæ­¢</li><li>çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€ä¸ªæœªæ•è·çš„å¼‚å¸¸ï¼Œä¼šå¯¼è‡´çº¿ç¨‹æ„å¤–ç»ˆæ­¢</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java.lang.Threadç±»ä¸­çš„ç›¸å…³æ–¹æ³•</span></span><br><span class="line"><span class="comment">//ä½¿å½“å‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å‘å¦ä¸€çº¿ç¨‹äº¤å‡ºè¿è¡Œæƒ</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">yield</span><span class="params">()</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//ç­‰å¾…æŒ‡å®šçš„çº¿ç¨‹ç»ˆæ­¢</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">join</span><span class="params">()</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//ç­‰å¾…æŒ‡å®šçš„çº¿ç¨‹ç»ˆæ­¢,æˆ–ç­‰å¾…ç»è¿‡æŒ‡å®šçš„æ¯«ç§’æ•°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">join</span><span class="params">(<span class="type">long</span> millis)</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//è·å–çº¿ç¨‹çš„çŠ¶æ€,å–å€¼ä¸ºï¼šNewã€Runnableã€Blockedã€Waitingã€Time waitingã€Terminated</span></span><br><span class="line">Thread.State <span class="title function_">getState</span><span class="params">()</span></span><br></pre></td></tr></table></figure><h3 id="12-3-çº¿ç¨‹å±æ€§"><a href="#12-3-çº¿ç¨‹å±æ€§" class="headerlink" title="12.3.çº¿ç¨‹å±æ€§"></a><u>12.3.çº¿ç¨‹å±æ€§</u></h3><h4 id="ä¸­æ–­çº¿ç¨‹ï¼š-çº¿ç¨‹çš„ä¸€ä¸ªå±æ€§â€”â€”ä¸­æ–­çŠ¶æ€"><a href="#ä¸­æ–­çº¿ç¨‹ï¼š-çº¿ç¨‹çš„ä¸€ä¸ªå±æ€§â€”â€”ä¸­æ–­çŠ¶æ€" class="headerlink" title="ä¸­æ–­çº¿ç¨‹ï¼š(çº¿ç¨‹çš„ä¸€ä¸ªå±æ€§â€”â€”ä¸­æ–­çŠ¶æ€)"></a>ä¸­æ–­çº¿ç¨‹ï¼š(çº¿ç¨‹çš„ä¸€ä¸ªå±æ€§â€”â€”ä¸­æ–­çŠ¶æ€)</h4><p>â€‹æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª<strong>ä¸­æ–­çŠ¶æ€å±æ€§</strong>(booleanç±»å‹),æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥ä¸æ—¶åœ°æ£€æŸ¥è¿™ä¸ªå±æ€§ï¼Œä»¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­</p><p>â€‹å¦‚æœåœ¨ä¸€ä¸ª<strong>è¢«sleepæˆ–waitæ–¹æ³•è°ƒç”¨é˜»å¡çš„çº¿ç¨‹</strong>è°ƒç”¨äº†interruptæ–¹æ³•(è®¾ç½®ä¸­æ–­çŠ¶æ€)ï¼Œ<br>â€‹é‚£ä¹ˆ<strong>è¯¥çº¿ç¨‹çš„é˜»å¡è°ƒç”¨å°†è¢«InterruptedExceptionå¼‚å¸¸ä¸­æ–­</strong>ã€‚</p><p>â€‹å¦‚æœçº¿ç¨‹è®¾ç½®äº†ä¸­æ–­**(ä¸­æ–­çŠ¶æ€ä¸ºtrue)<strong>åæˆ‘ä»¬ä½¿ç”¨sleepç­‰æ–¹æ³•è°ƒç”¨é˜»å¡ï¼Œå®é™…ä¸Šä¼š</strong>æ¸…é™¤ä¸­æ–­çŠ¶æ€(å°†ä¸­æ–­çŠ¶æ€ç½®ä¸ºfalse)**å¹¶æŠ›å‡ºInterruptedExceptionå¼‚å¸¸ï¼Œ<u>å› æ­¤å¦‚æœæˆ‘ä»¬éœ€è¦å¯¹æ­¤æƒ…å†µè¿›è¡Œå¤„ç†ï¼Œæˆ‘ä»¬éœ€è¦å¯¹InterruptedExceptionå¼‚å¸¸è¿›è¡Œæ•è·ï¼Œè€Œä¸æ˜¯æ£€æŸ¥ä¸­æ–­çŠ¶æ€</u></p><p>ğŸŒŸå¦‚æœæˆ‘ä»¬æƒ³è®©çº¿ç¨‹çš„è°ƒç”¨è€…å¯Ÿè§‰åˆ°â¬†ï¸ä¸Šé¢æƒ…å†µçš„å‘ç”Ÿï¼Œæœ‰2ç§æ–¹å¼ï¼š</p><ul><li>catch InterruptedExceptionå¼‚å¸¸åï¼Œå°†ä¸­æ–­çŠ¶æ€å†æ¬¡è®¾ç½®ä¸ºtrue(å®é™…ä¸Šå¤šæ­¤ä¸€ä¸¾ï¼Œå› æ­¤æ¨èä¸‹é¢çš„æ–¹æ³•)</li><li>throw InterruptedException å¼‚å¸¸å³å¯ï¼Œè°ƒç”¨è€…å†try-catchå³å¯æ•è·å¼‚å¸¸</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java.lang.Threadç±»ä¸­çš„ç›¸å…³æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘çº¿ç¨‹å‘é€ä¸­æ–­è¯·æ±‚ï¼Œçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€å°†è¢«è®¾ç½®ä¸ºtrueï¼Œæ­¤æ—¶å¦‚æœçº¿ç¨‹å·²ç»è¢«sleepæ–¹æ³•è°ƒç”¨é˜»å¡ï¼Œå°†ä¼šæŠ›å‡ºInterruptedExceptionå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">interrupt</span><span class="params">()</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//æµ‹è¯•å½“å‰è¿›ç¨‹æ˜¯å¦è¢«ä¸­æ–­â€”â€”é™æ€æ–¹æ³•â€”â€”ä¼šå°†å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€é‡åˆ¶ä¸ºfalseï¼ï¼ï¼</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">interrupted</span><span class="params">()</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//æµ‹è¯•å½“å‰è¿›ç¨‹æ˜¯å¦è¢«ä¸­æ–­â€”â€”â€”â€”ä¸ä¼šæ”¹å˜çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isInterrupted</span><span class="params">()</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//è¿”å›å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹çš„Threadå¯¹è±¡</span></span><br><span class="line"><span class="keyword">static</span> Thread <span class="title function_">currentThread</span><span class="params">()</span></span><br></pre></td></tr></table></figure><h4 id="å®ˆæŠ¤çº¿ç¨‹-daemon-thread-ï¼š"><a href="#å®ˆæŠ¤çº¿ç¨‹-daemon-thread-ï¼š" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹(daemon thread)ï¼š"></a>å®ˆæŠ¤çº¿ç¨‹(daemon thread)ï¼š</h4><ul><li>**å¯ä»¥é€šè¿‡è°ƒç”¨ çº¿ç¨‹å.setDaemon(true)**å°†ä¸€ä¸ªçº¿ç¨‹è½¬æ¢ä¸ºå®ˆæŠ¤çº¿ç¨‹</li></ul><p>â€‹å®ˆæŠ¤çº¿ç¨‹ç”¨äºä¸ºå…¶ä»–çº¿ç¨‹æä¾›æœåŠ¡ï¼Œå¦‚ï¼šè®¡æ—¶å™¨çº¿ç¨‹ã€æ¸…ç©ºè¿‡æ—¶ç¼“å­˜é¡¹çš„çº¿ç¨‹</p><p>â€‹å½“åªå‰©ä¸‹å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼Œè™šæ‹Ÿæœºä¼šé€€å‡º</p><h4 id="çº¿ç¨‹åï¼š"><a href="#çº¿ç¨‹åï¼š" class="headerlink" title="çº¿ç¨‹åï¼š"></a>çº¿ç¨‹åï¼š</h4><ul><li>å¯ä»¥é€šè¿‡ <strong>å¯¹è±¡å.setName(â€œnew nameâ€)</strong> å¯¹åˆ›å»ºçš„çº¿ç¨‹å¯¹è±¡è¿›è¡Œé‡å‘½å     â€”â€”â€”â€”åœ¨çº¿ç¨‹è½¬å‚¨æ—¶å¯èƒ½æœ‰å¤§ç”¨å¤„</li></ul><p>â€‹çº¿ç¨‹æœ‰é»˜è®¤çš„åå­—ï¼šThread-1ç­‰</p><h4 id="æœªæ•è·å¼‚å¸¸çš„å¤„ç†å™¨ï¼š"><a href="#æœªæ•è·å¼‚å¸¸çš„å¤„ç†å™¨ï¼š" class="headerlink" title="æœªæ•è·å¼‚å¸¸çš„å¤„ç†å™¨ï¼š"></a>æœªæ•è·å¼‚å¸¸çš„å¤„ç†å™¨ï¼š</h4><p>â€‹çº¿ç¨‹æœ‰ä»¥ä¸‹ä¸¤ä¸ªå±æ€§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> UncaughtExceptionHandler uncaughtExceptionHandler;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> UncaughtExceptionHandler defaultUncaughtExceptionHandler;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ </p><ul><li><p><strong>Static</strong> void <strong>setDefaultUncaughtExceptionHandler</strong>(Thread.UncaughtExceptionHandler handler)<br>æ¥ä¸ºæ‰€æœ‰çº¿ç¨‹è®¾ç½®é»˜è®¤çš„æœªæ•è·å¼‚å¸¸çš„å¤„ç†å™¨</p></li><li><p>void **setUncaughtExceptionHandler(**Thread.UncaughtExceptionHandler handler)</p><p>æ¥ä¸ºæŸä¸ªçº¿ç¨‹å¯¹è±¡è®¾ç½®æœªæ•è·å¼‚å¸¸çš„å¤„ç†å™¨</p></li></ul><p>æ³¨æ„ï¼š</p><p>â€‹1.<strong>uncaughtExceptionHandlerä¼˜å…ˆçº§ é«˜äº defaultUncaughtExceptionHandler</strong></p><p>â€‹2.ä¼ å…¥çš„handleræ˜¯å®ç°äº†Thread.UncaughtExceptionHandleræ¥å£ä¸­uncaughtExceptionæ–¹æ³•çš„å¯¹è±¡ï¼Œå³æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰æœªæ•è·å¼‚å¸¸çš„å¤„ç†å™¨ï¼Œåœ¨setè¿›çº¿ç¨‹çš„å¯¹åº”å±æ€§é‡Œé¢å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> UncaughtExceptionHandler <span class="title function_">getDefaultUncaughtExceptionHandler</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> defaultUncaughtExceptionHandler;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> UncaughtExceptionHandler <span class="title function_">getUncaughtExceptionHandler</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> uncaughtExceptionHandler != <span class="literal">null</span> ? uncaughtExceptionHandler : group;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çº¿ç¨‹å…ˆæ‰¾è‡ªå·±çš„<strong>uncaughtExceptionHandler</strong>ï¼Œè‹¥ä¸æ˜¯nullï¼Œå°±ç”¨å®ƒ<br>è‹¥æ˜¯nullï¼Œåˆ™æŸ¥çœ‹è¯¥çº¿ç¨‹æ‰€åœ¨çš„groupæ˜¯å¦å®ç°äº†Thread.UncaughtExceptionHandleræ¥å£ä¸­uncaughtExceptionæ–¹æ³•ï¼Œè‹¥å®ç°äº†ï¼Œå°±ç”¨å®ƒå¦åˆ™ä½¿ç”¨çº¿ç¨‹çš„ <strong><u>default</u>UncaughtExceptionHandler</strong>ï¼Œè‹¥ä¸ä¸ºnullï¼Œå°±ç”¨å®ƒ<br>å¦åˆ™å°†ä¿¡æ¯è¾“å‡ºåˆ°System.errä¸­</p><h4 id="çº¿ç¨‹ä¼˜å…ˆçº§ï¼š"><a href="#çº¿ç¨‹ä¼˜å…ˆçº§ï¼š" class="headerlink" title="çº¿ç¨‹ä¼˜å…ˆçº§ï¼š"></a>çº¿ç¨‹ä¼˜å…ˆçº§ï¼š</h4><p>â€‹æœ€é«˜ä¼˜å…ˆçº§ä¸º10ï¼›</p><p>â€‹æœ€ä½ä¼˜å…ˆçº§ä¸º1ï¼›</p><p>â€‹é»˜è®¤ä¼˜å…ˆçº§ä¸º5ï¼›</p><p>å¯ä»¥é€šè¿‡ setPriority(int newPriority)æ¥è‡ªè¡Œè®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§</p><h3 id="12-4-åŒæ­¥ï¼š"><a href="#12-4-åŒæ­¥ï¼š" class="headerlink" title="12.4.åŒæ­¥ï¼š"></a><u>12.4.åŒæ­¥ï¼š</u></h3><p>â€‹ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„çº¿ç¨‹éœ€è¦å…±äº«å­˜å–ç›¸åŒçš„æ•°æ®ï¼Œå½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œä¼šå¯¼è‡´çº¿ç¨‹ç›¸äº’è¦†ç›–(è¿™ç§æƒ…å†µç§°ä¸º ç«æ€æ¡ä»¶)</p><ul><li><strong>ä¸´ç•ŒåŒº</strong>ï¼šæ˜¯ä¸€ä¸ªè®¿é—®å…±ç”¨èµ„æºï¼ˆä¾‹å¦‚ï¼šå…±ç”¨è®¾å¤‡æˆ–æ˜¯å…±ç”¨å­˜å‚¨å™¨ï¼‰çš„ç¨‹åºç‰‡æ®µï¼Œè€Œè¿™äº›å…±ç”¨èµ„æºåˆæ— æ³•åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ã€‚</li></ul><h4 id="ä¸ºäº†é˜²æ­¢å¹¶å‘è®¿é—®-javaæä¾›äº†ä¸¤ç§æœºåˆ¶ï¼š"><a href="#ä¸ºäº†é˜²æ­¢å¹¶å‘è®¿é—®-javaæä¾›äº†ä¸¤ç§æœºåˆ¶ï¼š" class="headerlink" title="ä¸ºäº†é˜²æ­¢å¹¶å‘è®¿é—® javaæä¾›äº†ä¸¤ç§æœºåˆ¶ï¼š"></a><em>ä¸ºäº†é˜²æ­¢å¹¶å‘è®¿é—® javaæä¾›äº†ä¸¤ç§æœºåˆ¶ï¼š</em></h4><h5 id="1-Lock-Condition-é”å¯¹è±¡-æ¡ä»¶å¯¹è±¡"><a href="#1-Lock-Condition-é”å¯¹è±¡-æ¡ä»¶å¯¹è±¡" class="headerlink" title="1.Lock+Condition(é”å¯¹è±¡+æ¡ä»¶å¯¹è±¡)"></a>1.Lock+Condition(é”å¯¹è±¡+æ¡ä»¶å¯¹è±¡)</h5><h6 id="ReentrantLockç±»-é‡å…¥é”-ï¼š"><a href="#ReentrantLockç±»-é‡å…¥é”-ï¼š" class="headerlink" title="ReentrantLockç±»(é‡å…¥é”)ï¼š"></a>ReentrantLockç±»(é‡å…¥é”)ï¼š</h6><p>â€‹é‡å…¥é”ï¼šçº¿ç¨‹å¯ä»¥é‡å¤è·å–å·²ç»è·å¾—çš„é”(é€šè¿‡ä¸€ä¸ªè®¡æ•°å˜é‡å®ç°ï¼šåå¤è·å–ä¸€æ¬¡è®¡æ•°+1ï¼Œé‡Šæ”¾åˆ™-1ï¼Œ</p><p>â€‹å› æ­¤è®¡æ•°ä¸º0æ—¶ï¼Œè¡¨ç¤ºçº¿ç¨‹é‡Šæ”¾äº†é”)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReentrantLock</span> <span class="keyword">implements</span> <span class="title class_">Lock</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯ä»¥åœ¨éœ€è¦ä¸Šé”çš„ç±»ä¸­æ·»åŠ ReentrantLockå¯¹è±¡  Lock k = new ReentrantLock();</span></span><br><span class="line"><span class="comment">//åœ¨éœ€è¦ä¸Šé”çš„æ–¹æ³•å¼€å§‹å‰å…ˆç”¨æ­¤å¯¹è±¡è·å–é”       k.lock()  </span></span><br><span class="line"><span class="comment">//åœ¨æ‰§è¡Œä¸´ç•ŒåŒºä»£ç ï¼š                        try&#123;ä¸´ç•ŒåŒºä»£ç å&#125;finally&#123;k.unlock();&#125;</span></span><br></pre></td></tr></table></figure><ul><li><p>å¿…é¡»æŠŠ unlockæ”¾åœ¨finallyä¸­ï¼Œé˜²æ­¢ä¸´ç•ŒåŒºä»£ç æŠ›å‡ºå¼‚å¸¸ç¨‹åºç»ˆæ­¢ï¼Œå¯¼è‡´é”æ°¸ä¸è¢«é‡Šæ”¾</p></li><li><p>æ³¨æ„ä¸èƒ½ç”±äºæŠ›å‡ºå¼‚å¸¸è€Œç»•è¿‡ä¸´ç•ŒåŒºçš„ä»£ç (æŒ‡ä¸´ç•ŒåŒºä¸­äº§ç”Ÿå¼‚å¸¸ï¼Œæˆ‘ä»¬å°†å…¶æŠ›å‡ºè‡³è°ƒç”¨è€…çš„è¯ï¼Œå°±ä¸ä¼šå†æ‰§è¡Œä¸´ç•ŒåŒºä¸­æ²¡èµ°å®Œçš„ä»£ç ï¼Œå³ç»•è¿‡ä¸´ç•ŒåŒºçš„ä»£ç å—),å› ä¸ºå¦‚æœç»•è¿‡ï¼Œå¯¹è±¡å¯èƒ½å¤„äºè¢«ç ´åçš„çŠ¶æ€(æ“ä½œåšä¸€åŠæœªå®Œæˆ)</p></li></ul><h6 id="æ¡ä»¶å¯¹è±¡ï¼š"><a href="#æ¡ä»¶å¯¹è±¡ï¼š" class="headerlink" title="æ¡ä»¶å¯¹è±¡ï¼š"></a>æ¡ä»¶å¯¹è±¡ï¼š</h6><p>å½“çº¿ç¨‹éœ€è¦æ»¡è¶³æŸäº›æ¡ä»¶æ‰èƒ½è¿›å…¥éœ€è¦é”çš„ä¸´ç•ŒåŒºæ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿè¿™æ ·çš„æƒ…å†µï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. çº¿ç¨‹Aæ»¡è¶³äº†æ¡ä»¶ï¼Œä¸‹ä¸€æ¡è¯­å¥å°±æ˜¯è·å–é”è¿›å…¥ä¸´ç•ŒåŒº</span><br><span class="line">2. çº¿ç¨‹Bä¿®æ”¹äº†çº¿ç¨‹Aä¸­çš„æŸäº›å€¼ï¼Œå¯¼è‡´çº¿ç¨‹Aä¸æ»¡è¶³æ¡ä»¶</span><br><span class="line">3. ç”±äºçº¿ç¨‹Aå·²ç»é€šè¿‡äº†æ¡ä»¶åˆ¤æ–­çš„è¯­å¥ï¼Œä»ç„¶å¯ä»¥è·å–é”ï¼Œè¿›å…¥ä¸´ç•ŒåŒºï¼Œäºæ˜¯ä¾¿å¯¼è‡´äº†é”™è¯¯ã€‚</span><br></pre></td></tr></table></figure><p>javaä¸­å¯ä»¥ä½¿ç”¨æ¡ä»¶å¯¹è±¡æ¥ç®¡ç†é‚£äº›ï¼š<strong>å·²ç»è·å¾—äº†ä¸€ä¸ªé”å´ä¸èƒ½æœ‰æ•ˆå·¥ä½œçš„çº¿ç¨‹</strong></p><p><strong>æ¯ä¸ªé”å¯ä»¥åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ª</strong>ä¸è¿™ä¸ªé”ç›¸å…³çš„<strong>æ¡ä»¶å¯¹è±¡</strong>ï¼š</p><p>â€‹å½“æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œè¯¥æ¡ä»¶å¯¹è±¡(ä½¿ç”¨ await() æ–¹æ³•)å°†è¯¥çº¿ç¨‹æ”¾å…¥wait setä¸­ï¼Œå³è¯¥çº¿ç¨‹è¢«é˜»å¡</p><p>â€‹å½“æœ‰ä¸€ä¸ªçº¿ç¨‹æ»¡è¶³æ¡ä»¶ï¼Œå¹¶æ‰§è¡Œå®Œä¸´ç•ŒåŒºä¸­çš„ä»£ç åï¼Œå…¶æ¡ä»¶å¯¹è±¡(ä½¿ç”¨ signalAll() æ–¹æ³•)å°†æ‰€æœ‰å¤„äº<strong>è¯¥æ¡ä»¶çš„wait set</strong>ä¸­çš„çº¿ç¨‹æ¿€æ´»ï¼Œè®©ä»–ä»¬é‡æ–°åˆ¤æ–­æ¡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.å…ˆå£°æ˜æ¡ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="comment">//2.ä½¿ç”¨çº¿ç¨‹çš„é”å¯¹è±¡ç”Ÿæˆæ¡ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="comment">//3.å°†æ¡ä»¶å¯¹è±¡ä¸ä¸šåŠ¡æ¡ä»¶è¿›è¡Œæ­é…ä½¿ç”¨</span></span><br><span class="line">  å¦‚ï¼š</span><br><span class="line">  <span class="comment">//Condition æ¡ä»¶å¯¹è±¡ï¼›</span></span><br><span class="line">  <span class="comment">//æ¡ä»¶å¯¹è±¡ = bankLock.newCondition();</span></span><br><span class="line">  bankLock.lock();</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="keyword">while</span>(account[from] &lt; amount)&#123;</span><br><span class="line">  æ¡ä»¶å¯¹è±¡.await();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//...è·å–é”å¹¶æ‰§è¡Œä¸´ç•ŒåŒºä»£ç </span></span><br><span class="line">      æ¡ä»¶å¯¹è±¡.signalAll();</span><br><span class="line">      &#125;</span><br><span class="line"><span class="keyword">finally</span>&#123;</span><br><span class="line">        bankLock.unlock();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç›¸å…³æ–¹æ³•ï¼š</span><br><span class="line"><span class="comment">//java.util.concurrent.locks.Lockä¸­ï¼š</span></span><br><span class="line"><span class="comment">//è¿”å›ä¸€ä¸ªä¸è¿™ä¸ªé”ç›¸å…³çš„æ¡ä»¶å¯¹è±¡  </span></span><br><span class="line">Condition <span class="title function_">newCondition</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//java.util.concurrent.Conditionä¸­ï¼š</span></span><br><span class="line"><span class="comment">//å°†è¯¥çº¿ç¨‹æ”¾å…¥è¿™ä¸ªæ¡ä»¶çš„awaité›†ä¸­</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">wait</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">//è§£é™¤è¿™ä¸ªæ¡ä»¶ä¸­æ‰€æœ‰çº¿ç¨‹çš„é˜»å¡çŠ¶æ€(å°†æ‰€æœ‰awaité›†ä¸­çš„çº¿ç¨‹æ”¾å‡º)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">signalAll</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">//éšæœºè§£é™¤è¿™ä¸ªæ¡ä»¶ä¸­çš„æŸä¸ªçº¿ç¨‹çš„é˜»å¡çŠ¶æ€</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">signal</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><h5 id="2-synchronizedï¼š"><a href="#2-synchronizedï¼š" class="headerlink" title="2.synchronizedï¼š"></a>2.synchronizedï¼š</h5><h6 id="synchronizedå…³é”®å­—ï¼š"><a href="#synchronizedå…³é”®å­—ï¼š" class="headerlink" title="synchronizedå…³é”®å­—ï¼š"></a>synchronizedå…³é”®å­—ï¼š</h6><p>â€‹javaæä¾›çš„synchronizeå…³é”®å­—å°è£…äº†ä¸Šè¿° é”+æ¡ä»¶å¯¹è±¡ çš„å½¢å¼</p><p>â€‹æˆ‘ä»¬ç›´æ¥å°†éœ€è¦ä¸Šé”çš„æ–¹æ³•å£°æ˜ä¸ºsynchronizedå³ä½¿ç”¨äº†é”</p><p>â€‹æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨<strong>Objectç±»</strong>ä¸­çš„ <strong>wait() notifyAll() notyfy()</strong> æ–¹æ³•æ¥å®ç°æ¡ä»¶å¯¹è±¡çš„ä½œç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ³¨æ„âš ï¸ï¼š</span><br><span class="line">ä¸ºäº†ä¸ Objectç±»ä¸­çš„ wait()  notifyAll()  notyfy() æ–¹æ³• è¿›è¡ŒåŒºåˆ† åªèƒ½ç”¨åœ¨synchronizedä¿®é¥°çš„æ–¹æ³•ä¸­ï¼Œå…¶ä¸­waitä¸­å¯è¾“å…¥å½¢å‚è¡¨ç¤ºwaitçš„æ—¶é—´</span><br><span class="line">Conditionç±»ä¸­çš„æ–¹æ³•åä¸º await() signalAll()  signal()</span><br></pre></td></tr></table></figure><p>synchronizeåº•å±‚æœºåˆ¶ï¼š</p><p>â€‹<strong>javaä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€æŠŠå†…éƒ¨é”</strong>ï¼Œå½“ä½ ä½¿ç”¨synchronizedä¿®é¥°æ—¶å…¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå†…éƒ¨é”å°±ä¼šä¿æŠ¤æ•´ä¸ªæ–¹æ³•</p><p>â€‹<strong><u><em>javaä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨é”ï¼Œå¹¶ä¸”è¿™ä¸ªå†…éƒ¨é”æœ‰ä¸€ä¸ªå†…éƒ¨æ¡ä»¶ï¼›</em></u></strong></p><p>â€‹<strong><u>å†…éƒ¨é”ä¼šç®¡ç†è¯•å›¾è¿›å…¥synchronizedæ–¹æ³•çš„çº¿ç¨‹ï¼Œå†…éƒ¨æ¡ä»¶ä¼šç®¡ç†è°ƒç”¨äº†wait()æ–¹æ³•çš„çº¿ç¨‹ï¼›</u></strong></p><p>â€‹æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†é™æ€æ–¹æ³•å£°æ˜ä¸ºåŒæ­¥(synchronized)ï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå…³è”ç±»å¯¹è±¡(ç±»å.classçš„å¯¹è±¡)çš„å†…éƒ¨é”ä¼šä¿æŠ¤è¿™ä¸ªç±»çš„æ‰€æœ‰é™æ€åŒæ­¥æ–¹æ³•ã€‚</p><p>â€‹synchronizedæ–¹æ¡ˆçš„åŠ£åŠ¿ï¼š</p><ul><li>ä¸èƒ½ä¸­æ–­ä¸€ä¸ªæ­£åœ¨å°è¯•è·å¾—é”çš„çº¿ç¨‹ï¼ŒLockæ˜¯æœ‰ä¸­æ–­èƒ½åŠ›çš„</li><li>ä¸èƒ½æŒ‡å®šå°è¯•è·å¾—é”çš„è¶…æ—¶æ—¶é—´ï¼Œ                    ç›¸æ¯”ä¹‹ä¸‹ï¼ŒLockå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ã€‚</li><li>æ¯ä¸ªé”åªæœ‰ä¸€ä¸ªæ¡ä»¶å¯¹è±¡ï¼Œä½æ•ˆ</li></ul><p>åœ¨å®é™…æƒ…å†µä¸­ï¼Œèƒ½ä¸ç”¨é”å°±ä¸ç”¨é”ï¼Œéè¦ç”¨çš„è¯ä¼˜å…ˆä½¿ç”¨synchronizedï¼Œå¦‚æœæ— æ³•æ»¡è¶³éœ€æ±‚å†ç”¨Lock&#x2F;Condition</p><h6 id="synchronizedä»£ç å—-åŒæ­¥å—ï¼Œsynchronized-block"><a href="#synchronizedä»£ç å—-åŒæ­¥å—ï¼Œsynchronized-block" class="headerlink" title="synchronizedä»£ç å—(åŒæ­¥å—ï¼Œsynchronized block)"></a>synchronizedä»£ç å—(åŒæ­¥å—ï¼Œsynchronized block)</h6><p>â€‹synchronized(obj){</p><p>â€‹   â€¦â€¦.</p><p>â€‹}</p><p>â€‹åŸç†æ˜¯ä½¿ç”¨objå¯¹è±¡çš„å†…éƒ¨é”æ¥è¿›è¡Œé”å®šï¼Œ</p><p>â€‹è¦ä½¿ç”¨åŒæ­¥ä»£ç å—æ—¶ï¼Œéœ€è¦è®©çº¿ç¨‹ä½¿ç”¨ç›¸åŒå¯¹è±¡çš„å†…éƒ¨é”(è¿™æ ·æ‰é”å¾—ä½)ï¼Œè€Œä¸”ä¸èƒ½è®©æ— å…³çº¿ç¨‹è·å–ä½ çš„é”</p><h6 id="ç›‘è§†å™¨-monitor-æ¦‚å¿µï¼š"><a href="#ç›‘è§†å™¨-monitor-æ¦‚å¿µï¼š" class="headerlink" title="ç›‘è§†å™¨(monitor)æ¦‚å¿µï¼š"></a>ç›‘è§†å™¨(monitor)æ¦‚å¿µï¼š</h6><p>â€‹ç›‘è§†å™¨æŒ‡ï¼šåªæœ‰ç§æœ‰å¯¹è±¡çš„ç±»ï¼›ç›‘è§†å™¨ç±»çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç›¸å…³è”çš„é”ï¼Œ</p><p>â€‹è¿™æ ·çœ‹æ¥synchronizedä¿®é¥°çš„æ–¹æ³•ä¼¼ä¹ä¸ç›‘è§†å™¨ä¸­çš„æ–¹æ³•æœ‰ç›¸åŒçš„ä½œç”¨ã€‚</p><p>ä½†javaå¯¹è±¡ä¸åŒäºç›‘è§†å™¨ï¼š</p><ul><li><p>å­—æ®µä¸è¦æ±‚æ˜¯private</p></li><li><p>æ–¹æ³•ä¸è¦æ±‚æ˜¯synchronized</p></li><li><p>å†…éƒ¨é”å¯ä»¥è¢«ç”¨æˆ·ä½¿ç”¨</p><p>è¿™å‰Šå¼±äº†çº¿ç¨‹å®‰å…¨æ€§</p></li></ul><h6 id="volatileå­—æ®µï¼š"><a href="#volatileå­—æ®µï¼š" class="headerlink" title="volatileå­—æ®µï¼š"></a>volatileå­—æ®µï¼š</h6><p>volatileæ„ä¸ºä¸ç¨³å®šçš„ï¼Œåªèƒ½<strong>ä¿®é¥°ç±»ä¸­çš„å±æ€§</strong>ï¼Œå½“ä¸€ä¸ªå­—æ®µè¢«å£°æ˜ä¸ºvolatileï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å’Œè™šæ‹Ÿæœºå°±ä¼šè€ƒè™‘åˆ°è¯¥å­—æ®µå¯èƒ½è¢«å¦ä¸€çº¿ç¨‹å¹¶å‘æ›´æ–°ã€‚</p><p>â€‹<strong>volatileå…³é”®å­—ä½¿ç³»ç»Ÿä¸­æ‰€æœ‰çº¿ç¨‹å¯¹è¯¥å…³é”®å­—ä¿®é¥°çš„å˜é‡å…±äº«å¯è§ï¼Œå¯ä»¥ç¦æ­¢çº¿ç¨‹çš„å·¥ä½œå†…å­˜å¯¹volatileä¿®é¥°çš„å˜é‡è¿›è¡Œç¼“å­˜ã€‚</strong></p><ul><li><p><strong>å¯è§æ€§</strong>ï¼š</p><p>â€‹    <strong>å½“ä¸€ä¸ªå…±äº«å˜é‡è¢«volatileä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚</strong></p><p>â€‹è€Œæ™®é€šçš„å…±äº«å˜é‡ä¸èƒ½ä¿è¯å¯è§æ€§ï¼Œå› ä¸ºæ™®é€šå…±äº«å˜é‡è¢«ä¿®æ”¹ä¹‹åï¼Œä»€ä¹ˆæ—¶å€™è¢«å†™å…¥ä¸»å­˜æ˜¯ä¸ç¡®å®šçš„ï¼Œå½“å…¶ä»–çº¿ç¨‹å»è¯»å–æ—¶ï¼Œæ­¤æ—¶å†…å­˜ä¸­å¯èƒ½è¿˜æ˜¯åŸæ¥çš„æ—§å€¼ï¼Œå› æ­¤æ— æ³•ä¿è¯å¯è§æ€§ã€‚</p></li><li><p><strong>åŸå­æ€§ï¼š</strong></p></li></ul><p>â€‹ç”±äºç›´æ¥å°†å˜é‡å€¼æ›´æ–°åˆ°ä¸»å­˜ï¼Œvolatileä¿®é¥°çš„ç®€å•æ•°æ®ç±»å‹çš„æ“ä½œå°±ä¼šå˜æˆåŸå­çº§åˆ«çš„</p><p>â€‹æ³¨æ„âš ï¸å£°æ˜ä¸ºvolatileçš„ç®€å•å˜é‡<strong>å¦‚æœå½“å‰å€¼ç”±è¯¥å˜é‡ä»¥å‰çš„å€¼ç›¸å…³</strong>ï¼Œé‚£ä¹ˆvolatileå…³é”®å­—ä¸èµ·ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚ä¸‹çš„è¡¨è¾¾å¼éƒ½ä¸æ˜¯åŸå­æ“ä½œï¼š </p><p>â€‹n &#x3D; n +  1 ;<br>â€‹n ++ ;<br>â€‹n &#x3D; !n;</p><h6 id="finalå˜é‡ï¼š"><a href="#finalå˜é‡ï¼š" class="headerlink" title="finalå˜é‡ï¼š"></a>finalå˜é‡ï¼š</h6><p>â€‹ä¸ºå­—æ®µæ·»åŠ finalä¿®é¥°ç¬¦åï¼Œå…¶ä»–çº¿ç¨‹ä¼šçœ‹åˆ°è¯¥å­—æ®µåˆå§‹åŒ–ä¹‹åçš„å€¼ï¼Œè€Œä¸ä¼šçœ‹åˆ°å­—æ®µåˆå§‹åŒ–æœªå®Œæˆæ—¶é»˜è®¤ç©ºå€¼çš„çŠ¶æ€ï¼</p><h6 id="åŸå­æ€§ï¼š"><a href="#åŸå­æ€§ï¼š" class="headerlink" title="åŸå­æ€§ï¼š"></a>åŸå­æ€§ï¼š</h6><p>â€‹java.util.concurrent.atomicåŒ…ä¸­çš„APIå¯ä»¥å®ç°å„ç§ç±»å‹æ•°æ®ä»¥åŸå­æ–¹å¼å®ç°è‡ªå¢ç­‰æ“ä½œï¼Œ</p><p>â€‹å…¶å¹¶æ²¡æœ‰ä½¿ç”¨åŠ é”çš„æ–¹å¼å®ç°åŸå­æ€§ï¼Œè€Œæ˜¯åœ¨ç¡¬ä»¶å±‚é¢è¿›è¡Œé˜»å¡ï¼Œå› è€Œæ›´åŠ é«˜æ•ˆã€‚</p><h6 id="æ­»é”ï¼š"><a href="#æ­»é”ï¼š" class="headerlink" title="æ­»é”ï¼š"></a>æ­»é”ï¼š</h6><p>â€‹javaä¸­æ²¡æœ‰ä»»ä½•ç‰¹æ€§èƒ½å¤Ÿé¿å…ã€æ‰“ç ´æ­»é”ï¼Œè®¾è®¡ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬è¦ç¡®ä¿ä¸å‡ºç°æ­»é”ã€‚</p><h6 id="ä¸ºä»€ä¹ˆåºŸå¼ƒstopã€suspendæ–¹æ³•ï¼š"><a href="#ä¸ºä»€ä¹ˆåºŸå¼ƒstopã€suspendæ–¹æ³•ï¼š" class="headerlink" title="ä¸ºä»€ä¹ˆåºŸå¼ƒstopã€suspendæ–¹æ³•ï¼š"></a>ä¸ºä»€ä¹ˆåºŸå¼ƒstopã€suspendæ–¹æ³•ï¼š</h6><p>â€‹stopæ–¹æ³•ç«‹å³åœæ­¢çº¿ç¨‹ï¼Œä¼šç»ˆæ­¢è¯¥çº¿ç¨‹æ‰€æœ‰æœªå®Œæˆçš„æ–¹æ³•ï¼Œå¯¼è‡´çº¿ç¨‹å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ã€‚</p><p>å› ä¸ºçº¿ç¨‹ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å¯ä»¥å®‰å…¨åœ°stopå…¶ä»–çº¿ç¨‹ï¼Œå› æ­¤stopæ˜¯ä¸å®‰å…¨(å¯¼è‡´stopè¢«å¼ƒç”¨)çš„ï¼›</p><p><strong>å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›åœæ­¢çº¿ç¨‹æ—¶ï¼Œåº”å½“å…ˆä¸­æ–­(interrupt)è¯¥çº¿ç¨‹ï¼Œè¢«ä¸­æ–­çš„çº¿ç¨‹å¯ä»¥åœ¨å®‰å…¨çš„æ—¶å€™ç»ˆæ­¢ã€‚</strong></p><p>â€‹</p><p>â€‹suspendæ–¹æ³•å°†ä¼šæŒ‚èµ·ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹å¦‚æœæŒæœ‰é”ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªçº¿ç¨‹æ¢å¤è¿è¡Œä¹‹å‰ï¼Œè¿™ä¸ªé”æ˜¯ä¸å¯ç”¨çš„</p><p>ä¸€ç§å¾ˆå¸¸è§çš„æ­»é”ï¼šA å°† æŒæœ‰ä¸€ä¸ªé”çš„B æŒ‚èµ·ï¼Œè€ŒAåˆéœ€è¦Bå æœ‰çš„é”ï¼Œè¿™æ—¶å€™å°±ä¼šå¯¼è‡´æ­»é”ã€‚ã€‚</p><p><strong>å› æ­¤ï¼Œä¸ºäº†å®‰å…¨åœ°æŒ‚èµ·çº¿ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªsuspendRequested(è¯·æ±‚æŒ‚èµ·)å˜é‡ï¼Œåœ¨<u>è¯¥çº¿ç¨‹ä¸æŒæœ‰ä»»ä½•é”çš„ä½ç½®</u>æµ‹è¯•è¯¥å˜é‡ï¼Œå¦‚æœå‘ç°suspendRequestedå˜é‡è¢«è®¾ç½®ä¸ºæŒ‚èµ·ï¼Œåˆ™è®©è¯¥çº¿ç¨‹åœ¨æ­¤å¤„ç­‰å¾…ï¼Œç›´åˆ°è¢«å…¶ä»–çº¿ç¨‹å”¤é†’ï¼</strong></p><h6 id="æŒ‰éœ€åˆå§‹åŒ–ï¼š"><a href="#æŒ‰éœ€åˆå§‹åŒ–ï¼š" class="headerlink" title="æŒ‰éœ€åˆå§‹åŒ–ï¼š"></a>æŒ‰éœ€åˆå§‹åŒ–ï¼š</h6><p>â€‹å¯¹äºæŸäº›æ•°æ®ï¼Œå¦‚æœä½ åªå¸Œæœ›åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨å®ƒçš„æ—¶å€™æ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸å¦¨åˆ©ç”¨è¿™æ ·ä¸€ä¸ªäº‹å®ï¼š<strong>è™šæ‹Ÿæœºä¼šåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æŸä¸ªç±»æ—¶æ‰§è¡Œä¸€ä¸ªé™æ€åˆå§‹åŒ–å™¨ï¼Œå¹¶åªæ‰§è¡Œä¸€æ¬¡</strong>â€”â€”è™šæ‹Ÿæœºåˆ©ç”¨ä¸€ä¸ªé”ç¡®ä¿è¿™ä¸€ç‚¹ã€‚</p><p>â€‹æˆ‘ä»¬éœ€è¦åœ¨è¯¥ç±»çš„<strong>é™æ€</strong>åˆå§‹åŒ–å™¨ä¸Šå†™å…¥éœ€è¦åˆå§‹åŒ–çš„ä»£ç ï¼Œ</p><p>â€‹â€”â€”æˆ‘ä»¬å¿…é¡»ç¡®ä¿ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºè™šæ‹Ÿæœºå¯¹æ¯ä¸ªç±»åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ï¼Œè‹¥æŠ›å‡ºå¼‚å¸¸ï¼Œå¯èƒ½è¿˜æ²¡æ‰§è¡Œåˆå§‹åŒ–è¯­å¥å°±è·³å‡ºäº†ã€‚</p><h6 id="çº¿ç¨‹å±€éƒ¨å˜é‡ï¼š"><a href="#çº¿ç¨‹å±€éƒ¨å˜é‡ï¼š" class="headerlink" title="çº¿ç¨‹å±€éƒ¨å˜é‡ï¼š"></a>çº¿ç¨‹å±€éƒ¨å˜é‡ï¼š</h6><p>â€‹å„ä¸ªçº¿ç¨‹é—´ï¼Œæœ‰æ—¶éœ€è¦é¿å…å…±äº«å˜é‡ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ThreadLocalè¾…åŠ©ç±»ä¸ºå„ä¸ªçº¿ç¨‹æä¾›å„è‡ªçš„å®ä¾‹ã€‚</p><p>æˆ‘ä»¬éœ€è¦åœ¨çº¿ç¨‹ç±»ä¸­åˆ›å»ºThreadLocalå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨è¯¥å¯¹è±¡æ¥ä¸ºæ¯ä¸ªçº¿ç¨‹ç”Ÿæˆå±äºè‡ªå·±çš„å±€éƒ¨å˜é‡</p><p>å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// One implementation</span></span><br><span class="line">ThreadLocal&lt;DateFormat&gt; localFormatter</span><br><span class="line">  = ThreadLocal.withInitial(() -&gt; <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>());</span><br><span class="line"><span class="comment">// Usage</span></span><br><span class="line"><span class="type">DateFormat</span> <span class="variable">formatter</span> <span class="operator">=</span> localFormatter.get();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">java.lang.ThreadLocal&lt;T&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œåˆå§‹å€¼é€šè¿‡è°ƒç”¨ç»™å®šçš„æä¾›è€…ç”Ÿæˆ</span></span><br><span class="line"><span class="keyword">static</span> &lt;S&gt; ThreadLocal&lt;S&gt; <span class="title function_">withInitial</span><span class="params">(Supplier&lt;? extends S&gt; supplier)</span></span><br><span class="line">  <span class="comment">//å¾—åˆ°å±äºè¿™ä¸ªçº¿ç¨‹çš„å±€éƒ¨å˜é‡å€¼</span></span><br><span class="line">  T <span class="title function_">get</span><span class="params">()</span></span><br><span class="line">  <span class="comment">//ä¸º è¿™ä¸ªçº¿ç¨‹ çš„ è¿™ä¸ªå±€éƒ¨å˜é‡ è®¾ç½®ä¸€ä¸ªæ–°å€¼ï¼Œè¿™æ ·ä¼šå¯¼è‡´è¿™ä¸ªçº¿ç¨‹çš„å…¶ä»–åœ°æ–¹å¦‚æœè¦è·å–è¯¥å±€éƒ¨å˜é‡ï¼Œä¹Ÿä¼šè·å–æ–°å€¼ï¼</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(T t)</span></span><br><span class="line">  <span class="comment">//ç§»é™¤è¯¥çº¿ç¨‹çš„æŸä¸ªå±€éƒ¨å˜é‡</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="12-5-çº¿ç¨‹å®‰å…¨çš„é›†åˆï¼š"><a href="#12-5-çº¿ç¨‹å®‰å…¨çš„é›†åˆï¼š" class="headerlink" title="12.5.çº¿ç¨‹å®‰å…¨çš„é›†åˆï¼š"></a><u>12.5.çº¿ç¨‹å®‰å…¨çš„é›†åˆï¼š</u></h3><h4 id="é˜»å¡é˜Ÿåˆ—ï¼š"><a href="#é˜»å¡é˜Ÿåˆ—ï¼š" class="headerlink" title="é˜»å¡é˜Ÿåˆ—ï¼š"></a>é˜»å¡é˜Ÿåˆ—ï¼š</h4><p>â€‹ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—å­˜æ”¾å¾…æ‰§è¡Œçš„æŒ‡ä»¤å¯¹è±¡ (æŒ‡ä»¤ä¼šä¸²è¡Œæ‰§è¡Œ â€”-&gt; ä¸ä¼šé€ æˆçº¿ç¨‹å®‰å…¨é—®é¢˜)</p><p><img src="https://cdn.jsdelivr.net/gh/Tangjiayang/picodemo/img/image-20230421093013063.png" alt="image-20230421093013063"></p><p><strong>å¦‚æœè¦ä½¿ç”¨é˜Ÿåˆ—ä½œä¸ºçº¿ç¨‹ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<u>put()</u>ã€<u>take()</u>æ–¹æ³•</strong></p><p>peekå’Œpollé€šè¿‡è¿”å›nullæ¥è¡¨ç¤ºæ“ä½œå¤±è´¥ï¼Œæˆ‘ä»¬åˆ‡å¿Œåœ¨æ“ä½œä¸­å‘é˜Ÿåˆ—æ’å…¥nullå…ƒç´ (å¯¼è‡´æ— æ³•åˆ†è¾¨é˜Ÿåˆ—ä¸­å…ƒç´ ä¸ºnullè¿˜æ˜¯å–æ•°å¤±è´¥)</p><h4 id="é«˜æ•ˆçš„æ˜ å°„ã€é›†å’Œé˜Ÿåˆ—"><a href="#é«˜æ•ˆçš„æ˜ å°„ã€é›†å’Œé˜Ÿåˆ—" class="headerlink" title="é«˜æ•ˆçš„æ˜ å°„ã€é›†å’Œé˜Ÿåˆ—"></a>é«˜æ•ˆçš„æ˜ å°„ã€é›†å’Œé˜Ÿåˆ—</h4><p>â€‹java.util.concurrentåŒ…æä¾›<strong>å…è®¸å¹¶å‘è®¿é—®</strong>çš„æ•°æ®ç»“æ„ï¼Œå¦‚ï¼šConcurrentHashMapã€â€¦â€¦</p><p>â€‹â€”â€”ä½¿ç”¨äº†å¤æ‚çš„ç®—æ³•ä½¿è®¿é—®è¿™äº›æ•°æ®ç»“æ„çš„ä¸åŒéƒ¨åˆ†ä»è€Œå‡å°‘ç«äº‰</p><p>â€‹ConcurrentHashMapä¸­æœ‰ size()ä¸mappingCount()æ–¹æ³•å¯ä»¥è®¡ç®—map çš„å¤§å°ï¼š</p><p>â€‹sizeæ–¹æ³•ç”¨Integerè®°å½•å¤§å°å¯èƒ½ä¼šè¶Šç•Œï¼Œ</p><p>â€‹mappingCountä½¿ç”¨Longè®°å½•å¤§å°ï¼Œä¸ä¼šè¶Šç•Œ</p><p>â€‹å¦‚æœå¤šä¸ªçº¿ç¨‹è®¿é—®ConcurrentHashMapä¸­<strong>ä¸åŒçš„æ¡¶</strong>ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½èƒ½å¤Ÿè®¿é—®è€Œ<strong>ä¸é˜»å¡</strong></p><h4 id="æ˜ å°„æ¡ç›®çš„åŸå­æ›´æ–°ï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½"><a href="#æ˜ å°„æ¡ç›®çš„åŸå­æ›´æ–°ï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½" class="headerlink" title="* æ˜ å°„æ¡ç›®çš„åŸå­æ›´æ–°ï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½"></a>* æ˜ å°„æ¡ç›®çš„åŸå­æ›´æ–°ï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½</h4><h4 id="å¹¶å‘æ•£åˆ—æ˜ å°„çš„æ‰¹æ“ä½œï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½"><a href="#å¹¶å‘æ•£åˆ—æ˜ å°„çš„æ‰¹æ“ä½œï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½" class="headerlink" title="* å¹¶å‘æ•£åˆ—æ˜ å°„çš„æ‰¹æ“ä½œï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½"></a>* å¹¶å‘æ•£åˆ—æ˜ å°„çš„æ‰¹æ“ä½œï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½</h4><h4 id="å¹¶å‘é›†è§†å›¾ï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½"><a href="#å¹¶å‘é›†è§†å›¾ï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½" class="headerlink" title="* å¹¶å‘é›†è§†å›¾ï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½"></a>* å¹¶å‘é›†è§†å›¾ï¼šæš‚æ—¶çœ‹ä¸æ˜ç™½</h4><h4 id="å†™æ—¶æ‹·è´æ•°ç»„ï¼š"><a href="#å†™æ—¶æ‹·è´æ•°ç»„ï¼š" class="headerlink" title="å†™æ—¶æ‹·è´æ•°ç»„ï¼š"></a>å†™æ—¶æ‹·è´æ•°ç»„ï¼š</h4><p>â€‹CopyOnWriteArrayListã€CopyOnWriteArraySetæ˜¯çº¿ç¨‹å®‰å…¨çš„é›†åˆï¼Œæ‰€æœ‰æ›´æ”¹ä¹‹å‰ä¼šå…ˆåˆ›å»ºåº•å±‚æ•°ç»„çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå› æ­¤ä¸­é€”æ•°ç»„è¢«ä¿®æ”¹äº†ï¼Œè¿­ä»£å™¨ä¹Ÿèƒ½è®¿é—®åŸæœ¬çš„æ•°ç»„(è™½ç„¶å¯èƒ½è¿‡æ—¶ï¼Œä½†å±äºä¸€è‡´çŠ¶æ€ï¼)</p><h4 id="å¹¶è¡Œæ•°ç»„ç®—æ³•"><a href="#å¹¶è¡Œæ•°ç»„ç®—æ³•" class="headerlink" title="* å¹¶è¡Œæ•°ç»„ç®—æ³•"></a>* å¹¶è¡Œæ•°ç»„ç®—æ³•</h4><h4 id="è¾ƒæ—©çš„çº¿ç¨‹å®‰å…¨é›†åˆ"><a href="#è¾ƒæ—©çš„çº¿ç¨‹å®‰å…¨é›†åˆ" class="headerlink" title="* è¾ƒæ—©çš„çº¿ç¨‹å®‰å…¨é›†åˆ"></a>* è¾ƒæ—©çš„çº¿ç¨‹å®‰å…¨é›†åˆ</h4><p>*æœ¬ç« å¾€åçš„éƒ¨åˆ†éƒ½çœ‹å¾—ä¸ç²¾ï¼ŒåŸºç¡€ä¸ç‰¢ï¼Œå…ˆå»çœ‹å‰é¢çš„çŸ¥è¯†äº†</p><h3 id="12-6-ä»»åŠ¡å’Œçº¿ç¨‹æ± "><a href="#12-6-ä»»åŠ¡å’Œçº¿ç¨‹æ± " class="headerlink" title="12.6.ä»»åŠ¡å’Œçº¿ç¨‹æ± "></a><u>12.6.ä»»åŠ¡å’Œçº¿ç¨‹æ± </u></h3><h4 id="Callableå’ŒFuture"><a href="#Callableå’ŒFuture" class="headerlink" title="*Callableå’ŒFuture"></a>*Callableå’ŒFuture</h4><h4 id="æ‰§è¡Œå™¨-Executors-ï¼š"><a href="#æ‰§è¡Œå™¨-Executors-ï¼š" class="headerlink" title="*æ‰§è¡Œå™¨(Executors)ï¼š"></a>*æ‰§è¡Œå™¨(Executors)ï¼š</h4><p>â€‹æ‰§è¡Œå™¨ä¸­æœ‰è®¸å¤šæ„é€ çº¿ç¨‹æ± çš„é™æ€å·¥å‚æ–¹æ³•ï¼Œå¯ä»¥æ„é€ å„ç§çº¿ç¨‹æ± </p><h5 id="ä½¿ç”¨çº¿ç¨‹æ± ä¸€èˆ¬æµç¨‹ï¼š"><a href="#ä½¿ç”¨çº¿ç¨‹æ± ä¸€èˆ¬æµç¨‹ï¼š" class="headerlink" title="ä½¿ç”¨çº¿ç¨‹æ± ä¸€èˆ¬æµç¨‹ï¼š"></a>ä½¿ç”¨çº¿ç¨‹æ± ä¸€èˆ¬æµç¨‹ï¼š</h5><ul><li>è°ƒç”¨Executorä¸­çš„é™æ€æ–¹æ³•newCachedThreadPool æˆ– newFixedThreadPool åˆ›å»ºçº¿ç¨‹æ± </li><li>è°ƒç”¨submitæäº¤Runnableæˆ–Callableå¯¹è±¡ â€”&gt;ç”¨äºå°†ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± </li><li>ä¿ç•™è¿”å›çš„Futureå¯¹è±¡ï¼Œä»¥ä¾¿å¾—åˆ°ç»“æœæˆ–å–æ¶ˆä»»åŠ¡</li><li>ä¸æƒ³å†æäº¤ä»»ä½•ä»»åŠ¡æ—¶ï¼Œè°ƒç”¨shutdown()å…³é—­çº¿ç¨‹æ± </li></ul><table><thead><tr><th>newCachedThreadPool</th><th>è¿”å›ä¸€ä¸ªç¼“å­˜çº¿ç¨‹æ± ï¼Œå¿…è¦æ—¶åˆ›å»ºçº¿ç¨‹ï¼Œè‹¥çº¿ç¨‹ç©ºé—²äº†60ç§’åˆ™ç»ˆæ­¢è¯¥çº¿ç¨‹</th></tr></thead><tbody><tr><td>newFixedThreadPool(int threads)</td><td>è¿”å›ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œä½¿ç”¨ç»™å®šæ•°ç›®çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</td></tr></tbody></table><h3 id="12-7-å¼‚æ­¥è®¡ç®—"><a href="#12-7-å¼‚æ­¥è®¡ç®—" class="headerlink" title="12.7.å¼‚æ­¥è®¡ç®—"></a><u>12.7.å¼‚æ­¥è®¡ç®—</u></h3><h3 id="12-8-è¿›ç¨‹"><a href="#12-8-è¿›ç¨‹" class="headerlink" title="12.8.è¿›ç¨‹"></a><u>12.8.è¿›ç¨‹</u></h3>]]></content>
      
      
      <categories>
          
          <category> javaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•å°ç»“</title>
      <link href="/2023/05/26/%E7%AE%97%E6%B3%95%E5%B0%8F%E7%BB%93/"/>
      <url>/2023/05/26/%E7%AE%97%E6%B3%95%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>åä¸ºç¬”è¯•è€ƒç‚¹ï¼š<a href="http://www.cyc2018.xyz/%E7%AE%97%E6%B3%95/Leetcode%20%E9%A2%98%E8%A7%A3/Leetcode%20%E9%A2%98%E8%A7%A3%20-%20%E7%9B%AE%E5%BD%95.html#%E5%89%8D%E8%A8%80">this</a></p><h1 id="ç®—æ³•æ€æƒ³ï¼š"><a href="#ç®—æ³•æ€æƒ³ï¼š" class="headerlink" title="ç®—æ³•æ€æƒ³ï¼š"></a>ç®—æ³•æ€æƒ³ï¼š</h1><h2 id="åŒæŒ‡é’ˆï¼š"><a href="#åŒæŒ‡é’ˆï¼š" class="headerlink" title="åŒæŒ‡é’ˆï¼š"></a>åŒæŒ‡é’ˆï¼š</h2><h1 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h1><p>æœ‰ä¸¤ç§è®¡ç®—ä¸­å€¼ m çš„æ–¹å¼ï¼š</p><ul><li><p>m &#x3D; (l + h) &#x2F; 2</p></li><li><p>m &#x3D; l + (h - l) &#x2F; 2</p><p><strong>l + h å¯èƒ½å‡ºç°åŠ æ³•æº¢å‡º</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´åŠ æ³•çš„ç»“æœå¤§äºæ•´å‹èƒ½å¤Ÿè¡¨ç¤ºçš„èŒƒå›´ã€‚ä½†æ˜¯ l å’Œ h éƒ½ä¸ºæ­£æ•°ï¼Œå› æ­¤ h - l ä¸ä¼šå‡ºç°åŠ æ³•æº¢å‡ºé—®é¢˜ã€‚æ‰€ä»¥ï¼Œæœ€å¥½ä½¿ç”¨ç¬¬äºŒç§è®¡ç®—æ³•æ–¹æ³•ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœwhileä¸­æ˜¯ l &lt;= h çš„è¯ï¼Œé‚£ä¹ˆä¸‹é¢ä¹Ÿè¦å¯¹åº”çš„ l = m + 1; r = m - 1</span></span><br><span class="line"><span class="comment">//å¦‚ï¼š</span></span><br><span class="line"><span class="keyword">while</span>(l &lt;= h)&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + (h - l)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(nums[mid] &lt; target)&#123;</span><br><span class="line">        l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[mid] &gt;= target)&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums[mid] == target)&#123;tag = <span class="literal">true</span>;&#125;</span><br><span class="line">        h = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯  l &lt; h çš„è¯ï¼Œé‚£ä¹ˆä¸‹é¢åªéœ€è¦å‡ºç°ä¸€ä¸ª &#123;l = m + 1  and  r = m&#125;  æˆ–è€…  &#123;l = m  and  r = m - 1&#125;!</span></span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/capacity-to-ship-packages-within-d-days/">1011. åœ¨ D å¤©å†…é€è¾¾åŒ…è£¹çš„èƒ½åŠ›</a></p><p>&#x2F;&#x2F;è¿™é¢˜å¥½å¦™ï¼Œæœ¬èœé¸Ÿæ ¹æœ¬æƒ³ä¸åˆ°è¿™é¢˜è¿˜èƒ½äºŒåˆ†ï¼Œé•¿è§è¯†äº†ï¼</p><p>æˆ‘ä»¬å¯¹è¿è½½èƒ½åŠ›è¿›è¡Œè®¨è®ºï¼šå¯¹äºæŸè¿è½½èƒ½åŠ›ï¼Œ</p><ul><li><p>å¦‚æœæ­¤è¿è½½èƒ½åŠ›ä¸‹éœ€è¦çš„å¤©æ•°å¤§äºç³»ç»Ÿæ‰€è¿°çš„å¤©æ•°ï¼Œé‚£ä¹ˆéœ€è¦æé«˜è¿è½½èƒ½åŠ›ï¼›</p></li><li><p>å¦‚æœ    è¿è½½èƒ½åŠ›ä¸‹éœ€è¦çš„å¤©æ•°å°äºç³»ç»Ÿæ‰€è¿°çš„å¤©æ•°ï¼Œé‚£ä¹ˆéœ€è¦é™ä½è¿è½½èƒ½åŠ›ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">shipWithinDays</span><span class="params">(<span class="type">int</span>[] weights, <span class="type">int</span> days)</span> &#123;</span><br><span class="line">        <span class="comment">// ç¡®å®šäºŒåˆ†æŸ¥æ‰¾å·¦å³è¾¹ç•Œ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> Arrays.stream(weights).max().getAsInt(), right = Arrays.stream(weights).sum();</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="comment">// need ä¸ºéœ€è¦è¿é€çš„å¤©æ•°</span></span><br><span class="line">            <span class="comment">// cur ä¸ºå½“å‰è¿™ä¸€å¤©å·²ç»è¿é€çš„åŒ…è£¹é‡é‡ä¹‹å’Œ</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">need</span> <span class="operator">=</span> <span class="number">1</span>, cur = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> weight : weights) &#123;</span><br><span class="line">                <span class="keyword">if</span> (cur + weight &gt; mid) &#123;</span><br><span class="line">                    ++need;</span><br><span class="line">                    cur = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                cur += weight;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//å› ä¸ºè¦æ±‚æœ€å°çš„è¿è½½èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¾—åˆ°ç¬¦åˆæ¡ä»¶æ‰€è¿°å¤©æ•°çš„è¿è½½èƒ½åŠ›æ—¶ï¼Œè¦å†å¾€å°çš„è¿è½½èƒ½åŠ›é‚£è¾¹è¯•è¯•</span></span><br><span class="line">            <span class="keyword">if</span> (need &lt;= days) &#123;</span><br><span class="line">                right = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p><a href="https://leetcode.cn/problems/minimize-the-maximum-difference-of-pairs/">2616. æœ€å°åŒ–æ•°å¯¹çš„æœ€å¤§å·®å€¼</a></p><p>ä¸ä¸Šä¸€é¢˜æ€è·¯ç›¸åŒï¼š</p><p>â€‹ğŸŒŸçœ‹åˆ°ã€Œ<strong>æœ€å¤§åŒ–æœ€å°å€¼</strong>ã€æˆ–è€…ã€Œ<strong>æœ€å°åŒ–æœ€å¤§å€¼</strong>ã€å°±è¦æƒ³åˆ°<u>äºŒåˆ†ç­”æ¡ˆ</u>ï¼Œè¿™æ˜¯ä¸€ä¸ªå›ºå®šçš„å¥—è·¯ã€‚</p><p>ä¸ºä»€ä¹ˆï¼Ÿä¸€èˆ¬æ¥è¯´ï¼ŒäºŒåˆ†çš„å€¼è¶Šå¤§ï¼Œè¶Šèƒ½&#x2F;ä¸èƒ½æ»¡è¶³è¦æ±‚ï¼›äºŒåˆ†çš„å€¼è¶Šå°ï¼Œè¶Šä¸èƒ½&#x2F;èƒ½æ»¡è¶³è¦æ±‚ï¼Œæœ‰å•è°ƒæ€§ï¼Œå¯ä»¥äºŒåˆ†ã€‚</p><p>åœ¨è¿™ä¸€é¢˜ä¸­ï¼Œæˆ‘ä»¬å¯¹ <strong>æœ€å¤§å·®å€¼çš„æœ€å°å€¼</strong> è¿›è¡ŒäºŒåˆ†(å·¦è¾¹ç•Œä¸º ä¸¤æ•°ç›¸ç­‰çš„å·®å€¼ï¼š0ï¼›å³è¾¹ç•Œä¸ºæœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®å€¼)å¯¹äºæŸä¸€ æœ€å¤§å·®å€¼çš„æœ€å°å€¼ midï¼šå¦‚æœæ»¡è¶³<u>å·®å€¼å°äºmid çš„æ•°å¯¹æ•°é‡</u>å¤§äºpï¼Œåˆ™åº”å½“å‡å°mid(æ»¡è¶³çš„å¤ªå¤šäº†ï¼Œè¦è®©æ¡ä»¶ä¸¥æ ¼ä¸€äº›)ï¼Œå¦åˆ™åä¹‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimizeMax</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> p)</span> &#123;</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length, left = -<span class="number">1</span>, right = nums[n - <span class="number">1</span>] - nums[<span class="number">0</span>]; <span class="comment">// å¼€åŒºé—´</span></span><br><span class="line">        <span class="keyword">while</span> (left + <span class="number">1</span> &lt; right) &#123; <span class="comment">// å¼€åŒºé—´</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) &gt;&gt;&gt; <span class="number">1</span>, cnt = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n - <span class="number">1</span>; ++i)</span><br><span class="line">                <span class="keyword">if</span> (nums[i + <span class="number">1</span>] - nums[i] &lt;= mid) &#123; <span class="comment">// éƒ½é€‰</span></span><br><span class="line">                    ++cnt;</span><br><span class="line">                    ++i;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">if</span> (cnt &gt;= p) right = mid;</span><br><span class="line">            <span class="keyword">else</span> left = mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šendlesscheng</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/minimize-the-maximum-difference-of-pairs/solution/er-fen-da-an-tan-xin-by-endlesscheng-dlxv/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><h1 id="åˆ†æ²»ï¼š"><a href="#åˆ†æ²»ï¼š" class="headerlink" title="åˆ†æ²»ï¼š"></a>åˆ†æ²»ï¼š</h1><p><a href="https://leetcode.cn/problems/different-ways-to-add-parentheses/">241. ä¸ºè¿ç®—è¡¨è¾¾å¼è®¾è®¡ä¼˜å…ˆçº§</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">diffWaysToCompute</span><span class="params">(String input)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; ways = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; input.length(); i++) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> input.charAt(i);</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">&#x27;+&#x27;</span> || c == <span class="string">&#x27;-&#x27;</span> || c == <span class="string">&#x27;*&#x27;</span>) &#123;</span><br><span class="line">            List&lt;Integer&gt; left = diffWaysToCompute(input.substring(<span class="number">0</span>, i));</span><br><span class="line">            List&lt;Integer&gt; right = diffWaysToCompute(input.substring(i + <span class="number">1</span>));</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> l : left) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> r : right) &#123;</span><br><span class="line">                    <span class="keyword">switch</span> (c) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">                            ways.add(l + r);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">                            ways.add(l - r);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">                            ways.add(l * r);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ways.size() == <span class="number">0</span>) &#123;</span><br><span class="line">        ways.add(Integer.valueOf(input));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ways;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//çœŸçš„å¤ªä¼˜ç¾äº†ï¼</span></span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/unique-binary-search-trees-ii/">95. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;TreeNode&gt; <span class="title function_">generateTrees</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;TreeNode&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> generate(<span class="number">1</span>,n);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> List&lt;TreeNode&gt; <span class="title function_">generate</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span>&#123;</span><br><span class="line">        List&lt;TreeNode&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;TreeNode&gt;();</span><br><span class="line">        <span class="keyword">if</span>(start &gt; end)&#123;</span><br><span class="line">            res.add(<span class="literal">null</span>);</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i&lt;=end; i++)&#123;</span><br><span class="line">            List&lt;TreeNode&gt; left = generate(start, i - <span class="number">1</span>);</span><br><span class="line">            List&lt;TreeNode&gt; right = generate(i + <span class="number">1</span>, end);</span><br><span class="line">            <span class="keyword">for</span>(TreeNode l: left)&#123;</span><br><span class="line">                <span class="keyword">for</span>(TreeNode r: right)&#123;</span><br><span class="line">                    <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(i);</span><br><span class="line">                    root.left = l;</span><br><span class="line">                    root.right = r;</span><br><span class="line">                    res.add(root);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>åšå®Œè¿™ä¸¤é“ï¼Œæ„Ÿè§‰å·²ç»æ‘¸æ¸…äº†åˆ†æ²»çš„åº•ç»†ï¼ éå†ç‰¹å¾ç‚¹ï¼Œå·¦è¾¹å’Œå³è¾¹çš„ä¸åŒæƒ…å†µæ’åˆ—ç»„åˆå¾—åˆ°å¤šç§ç»“æœ</p><h1 id="æœç´¢ï¼š"><a href="#æœç´¢ï¼š" class="headerlink" title="æœç´¢ï¼š"></a>æœç´¢ï¼š</h1><h2 id="BFSï¼š"><a href="#BFSï¼š" class="headerlink" title="BFSï¼š"></a>BFSï¼š</h2><p>â€‹åœ¨ç¨‹åºå®ç° BFS æ—¶éœ€è¦è€ƒè™‘ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li><strong>é˜Ÿåˆ—</strong>ï¼šç”¨æ¥å­˜å‚¨æ¯ä¸€è½®éå†å¾—åˆ°çš„èŠ‚ç‚¹ï¼›</li><li><strong>æ ‡è®°</strong>ï¼šå¯¹äºéå†è¿‡çš„èŠ‚ç‚¹ï¼Œåº”è¯¥å°†å®ƒæ ‡è®°ï¼Œé˜²æ­¢é‡å¤éå†ã€‚</li></ul><p>LinkedList&lt;&gt;() çš„APIï¼š<strong>poll</strong>è·å–å¹¶åˆ é™¤é˜Ÿå¤´å…ƒç´ ï¼›<strong>offer</strong>å‘é˜Ÿå°¾æ·»åŠ å…ƒç´ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">ladderLength</span><span class="params">(String beginWord, String endWord, List&lt;String&gt; wordList)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(!wordList.contains(endWord))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (beginWord.equals(endWord))<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//æ ‡è®°</span></span><br><span class="line">        HashSet&lt;String&gt; hashset = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//bfs</span></span><br><span class="line">        LinkedList&lt;String&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line">        queue.offer(beginWord);</span><br><span class="line">        hashset.add(beginWord);</span><br><span class="line">        <span class="keyword">while</span>(queue.size() != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sz</span> <span class="operator">=</span> queue.size();</span><br><span class="line">            res++;</span><br><span class="line">            <span class="keyword">while</span>(sz-- != <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">word</span> <span class="operator">=</span> queue.poll();</span><br><span class="line"><span class="comment">//                if(word.equals(endWord))return res;</span></span><br><span class="line"><span class="comment">//                res++;</span></span><br><span class="line"><span class="comment">//                if(hashset.contains(word))continue;</span></span><br><span class="line">                <span class="keyword">for</span>(String s:wordList)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(judge(word,s) &amp;&amp; !hashset.contains(s))&#123;</span><br><span class="line">                        queue.offer(s);</span><br><span class="line">                        <span class="keyword">if</span>(s.equals(endWord))<span class="keyword">return</span> res;</span><br><span class="line">                        <span class="comment">// System.out.println(word + &quot;-&gt;&quot; +s);</span></span><br><span class="line">                        hashset.add(s);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//éœ€è¦å†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å·®å¼‚æ˜¯å¦ä¸ºä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">judge</span> <span class="params">(String s1, String s2)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s1.length() != s2.length())<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s1.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s1.charAt(i) != s2.charAt(i))count++;</span><br><span class="line">            <span class="keyword">if</span>(count &gt; <span class="number">1</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="DFS"><a href="#DFS" class="headerlink" title="DFS:"></a>DFS:</h2><p>â€‹ä»ä¸€ä¸ªèŠ‚ç‚¹å‡ºå‘ï¼Œä½¿ç”¨ DFS å¯¹ä¸€ä¸ªå›¾è¿›è¡Œéå†æ—¶ï¼Œèƒ½å¤Ÿéå†åˆ°çš„èŠ‚ç‚¹éƒ½æ˜¯ä»åˆå§‹èŠ‚ç‚¹å¯è¾¾çš„ï¼ŒDFS å¸¸ç”¨æ¥æ±‚è§£è¿™ç§ <strong>å¯è¾¾æ€§</strong> é—®é¢˜ã€‚</p><p>åœ¨ç¨‹åºå®ç° DFS æ—¶éœ€è¦è€ƒè™‘ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li><strong>æ ˆ</strong>ï¼šç”¨æ ˆæ¥ä¿å­˜å½“å‰èŠ‚ç‚¹ä¿¡æ¯ï¼Œå½“éå†æ–°èŠ‚ç‚¹è¿”å›æ—¶èƒ½å¤Ÿç»§ç»­éå†å½“å‰èŠ‚ç‚¹ã€‚å¯ä»¥ä½¿ç”¨é€’å½’æ ˆã€‚</li><li><strong>æ ‡è®°</strong>ï¼šå’Œ BFS ä¸€æ ·åŒæ ·éœ€è¦å¯¹å·²ç»éå†è¿‡çš„èŠ‚ç‚¹è¿›è¡Œæ ‡è®°ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¥—è·¯æ ¼å¼</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">int</span> [][] direction =  <span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;<span class="comment">//æ–¹å‘ï¼Œè§†é¢˜ç›®è€Œå®š</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxAreaOfIsland</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; grid.length; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; j++)&#123;</span><br><span class="line">                res = Math.max(res, dfs(grid, i, j));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> [][] grid, <span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">      <span class="comment">//å‡ºç•Œæˆ–è€…å·²ç»åˆ°è¾¾è¿‡</span></span><br><span class="line">        <span class="keyword">if</span>(i &lt; <span class="number">0</span> || j &lt; <span class="number">0</span> || i &gt;= grid.length || j &gt;= grid[<span class="number">0</span>].length || grid[i][j] == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">addition</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        grid[i][j] = <span class="number">0</span>;<span class="comment">//åˆ°è¾¾è¿‡çš„åœ°ç‚¹å…¨éƒ¨è¿›è¡Œæ ‡è®°(ä¸èƒ½å†æ¬¡åˆ°è¾¾)</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; direction.length; k++)&#123;</span><br><span class="line">            addition += dfs(grid, i + direction[k][<span class="number">0</span>], j + direction[k][<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> addition;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å›æº¯ï¼š"><a href="#å›æº¯ï¼š" class="headerlink" title="å›æº¯ï¼š"></a>å›æº¯ï¼š</h2><p>â€‹Backtrackingï¼ˆå›æº¯ï¼‰å±äº DFSã€‚</p><ul><li>æ™®é€š DFS ä¸»è¦ç”¨åœ¨ <strong>å¯è¾¾æ€§é—®é¢˜</strong> ï¼Œè¿™ç§é—®é¢˜åªéœ€è¦æ‰§è¡Œåˆ°ç‰¹ç‚¹çš„ä½ç½®ç„¶åè¿”å›å³å¯ã€‚</li><li>è€Œ Backtracking ä¸»è¦ç”¨äºæ±‚è§£ <strong>æ’åˆ—ç»„åˆ</strong> é—®é¢˜ï¼Œä¾‹å¦‚æœ‰ { â€˜aâ€™,â€™bâ€™,â€™câ€™ } ä¸‰ä¸ªå­—ç¬¦ï¼Œæ±‚è§£æ‰€æœ‰ç”±è¿™ä¸‰ä¸ªå­—ç¬¦æ’åˆ—å¾—åˆ°çš„å­—ç¬¦ä¸²ï¼Œè¿™ç§é—®é¢˜åœ¨æ‰§è¡Œåˆ°ç‰¹å®šçš„ä½ç½®è¿”å›ä¹‹åè¿˜ä¼šç»§ç»­æ‰§è¡Œæ±‚è§£è¿‡ç¨‹ã€‚</li></ul><p>å› ä¸º Backtracking ä¸æ˜¯ç«‹å³è¿”å›ï¼Œè€Œè¦ç»§ç»­æ±‚è§£ï¼Œå› æ­¤åœ¨ç¨‹åºå®ç°æ—¶ï¼Œéœ€è¦æ³¨æ„å¯¹å…ƒç´ çš„æ ‡è®°é—®é¢˜ï¼š</p><ul><li>åœ¨è®¿é—®ä¸€ä¸ªæ–°å…ƒç´ è¿›å…¥æ–°çš„é€’å½’è°ƒç”¨æ—¶ï¼Œéœ€è¦å°†æ–°å…ƒç´ æ ‡è®°ä¸ºå·²ç»è®¿é—®ï¼Œè¿™æ ·æ‰èƒ½åœ¨ç»§ç»­é€’å½’è°ƒç”¨æ—¶ä¸ç”¨é‡å¤è®¿é—®è¯¥å…ƒç´ ï¼›</li><li>ä½†æ˜¯åœ¨é€’å½’è¿”å›æ—¶ï¼Œéœ€è¦å°†å…ƒç´ æ ‡è®°ä¸ºæœªè®¿é—®ï¼Œå› ä¸ºåªéœ€è¦ä¿è¯åœ¨ä¸€ä¸ªé€’å½’é“¾ä¸­ä¸åŒæ—¶è®¿é—®ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥è®¿é—®å·²ç»è®¿é—®è¿‡ä½†æ˜¯ä¸åœ¨å½“å‰é€’å½’é“¾ä¸­çš„å…ƒç´ ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¯¹äºä¸€å®šè§„åˆ™ä¸‹çš„æ’åˆ—ç»„åˆé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨å›æº¯æ³•è¿›è¡Œæ±‚è§£</span><br><span class="line">å›æº¯æ³• = dfs+å›æº¯æ“ä½œ</span><br><span class="line">ä¸€èˆ¬è€Œè¨€void dfsçš„å‚æ•°å¦‚ä¸‹(int n, &lt;T&gt;å­˜å‚¨å½“å‰æ­¥éª¤ç”Ÿæˆçš„ä¸­é—´ç»“æœçš„å˜é‡,ç”¨äºå­˜å‚¨æœ€ç»ˆå„ç§æƒ…å†µçš„å˜é‡[ä¸€èˆ¬ä¸ºä¸€ä¸ªArrayList], å¾…è¿›è¡Œæ“ä½œçš„å…ƒç´ )ï¼›</span><br><span class="line">å¦‚ï¼šdfs(0,new StringBuilder(),res,s);</span><br><span class="line">dfsä¸­åˆšå¼€å§‹å†™ä¸Šç»ˆæ­¢æ¡ä»¶ï¼šnåˆ°è¾¾æŒ‡å®šè½®æ•°æˆ–ä¸æ»¡è¶³å…¶ä»–é™åˆ¶æ¡ä»¶ï¼Œç›´æ¥return</span><br><span class="line">æ¥ä¸‹æ¥æ ¹æ®å½“å‰å­˜å‚¨çš„ä¸­é—´ç»“æœï¼Œå†Â·ç»™ä¸­é—´ç»“æœæ·»åŠ è¿™è½®å¾—åˆ°çš„äº§ç‰© Â·Â·å¯¹å…¶è¿›è¡Œä¸‹ä¸€è½®dfs Â·Â·Â·å°†è¿™è½®çš„äº§ç‰©åˆ å»ï¼Œå¹¶æ¢æˆè¿™ä¸€è½®äº§ç‰©çš„ä¸‹ä¸€ç§æƒ…å†µï¼</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å›æº¯æ¨¡ç‰ˆï¼š</span></span><br><span class="line"><span class="comment">//åœ¨å›æº¯æ—¶ï¼Œå¦‚æœä½¿ç”¨ArrayListç­‰å¼•ç”¨å¯¹è±¡å­˜æ”¾ä½ äº§ç”Ÿçš„ç»“æœï¼Œåœ¨å°†å…¶æ·»åŠ è‡³ç»“æœé›†ä¸­æ—¶éœ€è¦é‡æ–°åˆ›å»ºä¸€ä¸ªä¸å…¶ç›¸åŒçš„å‰¯æœ¬ï¼Œå°†å‰¯æœ¬åŠ å…¥ç»“æœé›†ï¼Œå¦‚æœä¸è¿™æ ·åšï¼Œå›æº¯ååˆ é™¤äº†å…ƒç´ ä¼šå¯¼è‡´ç»“æœé›†ä¸­å…ƒç´ çš„æ”¹å˜ã€‚ã€‚</span></span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">permute</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(nums.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">   ArrayList&lt;Integer&gt; curNum = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">        <span class="type">boolean</span>[] tag = <span class="keyword">new</span> <span class="title class_">boolean</span>[nums.length];</span><br><span class="line">        dfs(curNum, tag, res, nums);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(ArrayList&lt;Integer&gt; curNum,<span class="type">boolean</span>[] tag, List&lt;List&lt;Integer&gt;&gt; res, <span class="type">int</span>[] nums)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(curNum.size() == nums.length)&#123;</span><br><span class="line">            res.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(curNum));<span class="comment">//##############################å°±è¯´çš„æ˜¯è¿™é‡Œï¼ï¼ï¼ï¼</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!tag[i])&#123;</span><br><span class="line">                curNum.add(nums[i]);</span><br><span class="line">                tag[i] = <span class="literal">true</span>;</span><br><span class="line">                dfs(curNum, tag, res, nums);</span><br><span class="line">                curNum.remove(curNum.size() - <span class="number">1</span>);</span><br><span class="line">                tag[i] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºæ’åˆ—é—®é¢˜ï¼šæˆ‘ä»¬åªéœ€è¦éå†å¹¶å›æº¯æ‰€æœ‰çš„æƒ…å†µå¹¶è®°å½•å³å¯ï¼Œ</p><p><strong>ç»„åˆé—®é¢˜</strong>ï¼Œç›¸å¯¹äºæ’åˆ—é—®é¢˜è€Œè¨€ï¼Œä¸è®¡è¾ƒä¸€ä¸ªç»„åˆå†…å…ƒç´ çš„é¡ºåºæ€§ï¼ˆå³ [1, 2, 3] ä¸ [1, 3, 2] è®¤ä¸ºæ˜¯åŒä¸€ä¸ªç»„åˆï¼‰ï¼Œå› æ­¤å¾ˆå¤šæ—¶å€™<strong>éœ€è¦æŒ‰æŸç§é¡ºåºå±•å¼€æœç´¢</strong>ï¼Œè¿™æ ·æ‰èƒ½åšåˆ°ä¸é‡ä¸æ¼ã€‚</p><p>æˆ‘ä»¬éœ€è¦æŒ‰ç…§æŸç§é¡ºåº(æ¯”å¦‚å¤§å°é¡ºåº)è¿›è¡Œæœç´¢ï¼Œä¹Ÿå°±æ˜¯â€œå‰ªæâ€</p><p><u>ç¬”è®°çš„å›æº¯ç¬¬11ã€12ã€13ã€14ã€15é¢˜æœªåšï¼</u></p><h1 id="è´ªå¿ƒï¼š"><a href="#è´ªå¿ƒï¼š" class="headerlink" title="è´ªå¿ƒï¼š"></a>è´ªå¿ƒï¼š</h1><h3 id="é€‚ç”¨èŒƒå›´ï¼š"><a href="#é€‚ç”¨èŒƒå›´ï¼š" class="headerlink" title="é€‚ç”¨èŒƒå›´ï¼š"></a>é€‚ç”¨èŒƒå›´ï¼š</h3><p>è´ªå¿ƒç®—æ³•åœ¨<strong>æœ‰æœ€ä¼˜å­ç»“æ„</strong>çš„é—®é¢˜ä¸­å°¤ä¸ºæœ‰æ•ˆã€‚æœ€ä¼˜å­ç»“æ„çš„æ„æ€æ˜¯é—®é¢˜èƒ½å¤Ÿåˆ†è§£æˆå­é—®é¢˜æ¥è§£å†³ï¼Œå­é—®é¢˜çš„æœ€ä¼˜è§£èƒ½é€’æ¨åˆ°æœ€ç»ˆé—®é¢˜çš„æœ€ä¼˜è§£ã€‚</p><h2 id="ä¸¤ç§å¸¸è§æ€è·¯ï¼š"><a href="#ä¸¤ç§å¸¸è§æ€è·¯ï¼š" class="headerlink" title="ä¸¤ç§å¸¸è§æ€è·¯ï¼š"></a>ä¸¤ç§å¸¸è§æ€è·¯ï¼š</h2><h3 id="æ’åºè§£æ³•"><a href="#æ’åºè§£æ³•" class="headerlink" title="æ’åºè§£æ³•"></a>æ’åºè§£æ³•</h3><p>ç”¨æ’åºæ³•å¸¸è§çš„æƒ…å†µæ˜¯è¾“å…¥ä¸€ä¸ªåŒ…å«å‡ ä¸ªï¼ˆä¸€èˆ¬ä¸€åˆ°ä¸¤ä¸ªï¼‰æƒå€¼çš„æ•°ç»„ï¼Œé€šè¿‡æ’åºç„¶åéå†æ¨¡æ‹Ÿè®¡ç®—çš„æ–¹æ³•æ±‚å‡ºæœ€ä¼˜å€¼ã€‚</p><h3 id="åæ‚”è§£æ³•"><a href="#åæ‚”è§£æ³•" class="headerlink" title="åæ‚”è§£æ³•"></a>åæ‚”è§£æ³•</h3><p>æ€è·¯æ˜¯æ— è®ºå½“å‰çš„é€‰é¡¹æ˜¯å¦æœ€ä¼˜éƒ½æ¥å—ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœé€‰æ‹©ä¹‹åä¸æ˜¯æœ€ä¼˜äº†ï¼Œåˆ™åæ‚”ï¼Œèˆå¼ƒæ‰è¿™ä¸ªé€‰é¡¹ï¼›å¦åˆ™ï¼Œæ­£å¼æ¥å—ã€‚å¦‚æ­¤å¾€å¤ã€‚</p><h1 id="åŠ¨æ€è§„åˆ’ï¼"><a href="#åŠ¨æ€è§„åˆ’ï¼" class="headerlink" title="åŠ¨æ€è§„åˆ’ï¼"></a>åŠ¨æ€è§„åˆ’ï¼</h1><p>â€‹å†™åˆ°0-1èƒŒåŒ…ç¬¬ä¸‰é¢˜</p><h1 id="é“¾è¡¨ï¼š"><a href="#é“¾è¡¨ï¼š" class="headerlink" title="é“¾è¡¨ï¼š"></a>é“¾è¡¨ï¼š</h1><h3 id="çº¯é“¾è¡¨æ“ä½œçš„é¢˜ç›®æœ‰å¾ˆå¤šéƒ½å¯ä»¥ä½¿ç”¨-é€’å½’-è§£å†³ï¼"><a href="#çº¯é“¾è¡¨æ“ä½œçš„é¢˜ç›®æœ‰å¾ˆå¤šéƒ½å¯ä»¥ä½¿ç”¨-é€’å½’-è§£å†³ï¼" class="headerlink" title="çº¯é“¾è¡¨æ“ä½œçš„é¢˜ç›®æœ‰å¾ˆå¤šéƒ½å¯ä»¥ä½¿ç”¨ é€’å½’ è§£å†³ï¼"></a>çº¯é“¾è¡¨æ“ä½œçš„é¢˜ç›®æœ‰å¾ˆå¤šéƒ½å¯ä»¥ä½¿ç”¨ <em>é€’å½’</em> è§£å†³ï¼</h3><p>å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¦æ±‚ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">swapPairs</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">null</span> || head.next == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">next</span> <span class="operator">=</span> head.next;</span><br><span class="line">    head.next = swapPairs(next.next);</span><br><span class="line">    next.next = head;</span><br><span class="line">    <span class="keyword">return</span> next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é™¤äº†é€’å½’å¾ˆå¸¸è§ä»¥å¤–ï¼Œå¿«æ…¢æŒ‡é’ˆçš„æ–¹æ³•-ä¹Ÿå¾ˆå¸¸è§"><a href="#é™¤äº†é€’å½’å¾ˆå¸¸è§ä»¥å¤–ï¼Œå¿«æ…¢æŒ‡é’ˆçš„æ–¹æ³•-ä¹Ÿå¾ˆå¸¸è§" class="headerlink" title="é™¤äº†é€’å½’å¾ˆå¸¸è§ä»¥å¤–ï¼Œå¿«æ…¢æŒ‡é’ˆçš„æ–¹æ³• ä¹Ÿå¾ˆå¸¸è§"></a>é™¤äº†é€’å½’å¾ˆå¸¸è§ä»¥å¤–ï¼Œ<u><em>å¿«æ…¢æŒ‡é’ˆçš„æ–¹æ³•</em></u> ä¹Ÿå¾ˆå¸¸è§</h3><p>å¦‚åˆ¤æ–­é“¾è¡¨æ˜¯å¦å›æ–‡ï¼Œå¯ä»¥ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´(å…·ä½“å¥‡å¶ä½å†è€ƒè™‘)ï¼Œå†å°†é“¾è¡¨åˆ†å‰²ä½ä¸¤ä¸ªå­é“¾è¡¨ï¼Œåè½¬å…¶ä¸€ï¼Œå¦‚æœä¸¤ä¸ªå­é“¾è¡¨ç›¸ç­‰åˆ™å›æ–‡ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPalindrome</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head, fast = head.next;</span><br><span class="line">    <span class="keyword">while</span> (fast != <span class="literal">null</span> &amp;&amp; fast.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        slow = slow.next;</span><br><span class="line">        fast = fast.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (fast != <span class="literal">null</span>) slow = slow.next;  <span class="comment">// å¶æ•°èŠ‚ç‚¹ï¼Œè®© slow æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    cut(head, slow);                     <span class="comment">// åˆ‡æˆä¸¤ä¸ªé“¾è¡¨</span></span><br><span class="line">    <span class="keyword">return</span> isEqual(head, reverse(slow));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">cut</span><span class="params">(ListNode head, ListNode cutNode)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (head.next != cutNode) &#123;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    head.next = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> ListNode <span class="title function_">reverse</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">newHead</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">nextNode</span> <span class="operator">=</span> head.next;</span><br><span class="line">        head.next = newHead;</span><br><span class="line">        newHead = head;</span><br><span class="line">        head = nextNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newHead;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isEqual</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (l1 != <span class="literal">null</span> &amp;&amp; l2 != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (l1.val != l2.val) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        l1 = l1.next;</span><br><span class="line">        l2 = l2.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ ‘ï¼š"><a href="#æ ‘ï¼š" class="headerlink" title="æ ‘ï¼š"></a>æ ‘ï¼š</h1><h2 id="é€’å½’ï¼š"><a href="#é€’å½’ï¼š" class="headerlink" title="é€’å½’ï¼š"></a>é€’å½’ï¼š</h2><p>ä¸€æ£µæ ‘è¦ä¹ˆæ˜¯ç©ºæ ‘ï¼Œè¦ä¹ˆæœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œæ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€æ£µæ ‘ã€‚æ ‘æ˜¯ä¸€ç§é€’å½’ç»“æ„ï¼Œå¾ˆå¤šæ ‘çš„é—®é¢˜å¯ä»¥ä½¿ç”¨<strong>é€’å½’</strong>æ¥å¤„ç†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">å¯¹æ ‘çš„æ“ä½œï¼Œä¸€èˆ¬å¯ä»¥ç”¨é€’å½’è§£å†³ï¼š</span><br><span class="line"><span class="comment">//é€šç”¨æ ¼å¼ï¼š</span></span><br><span class="line">functionname ( TreeNode root )&#123;</span><br><span class="line"><span class="keyword">if</span>(root  == <span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> xx;</span><br><span class="line">  &#125;  </span><br><span class="line">  root.left = functionname(xxx);</span><br><span class="line">  root.right = functionname(xxx);</span><br><span class="line">  <span class="keyword">return</span> xxx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¾‹1:</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">diameterOfBinaryTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    depth(root);</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">depth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">leftDepth</span> <span class="operator">=</span> depth(root.left);</span><br><span class="line">    <span class="type">int</span> <span class="variable">rightDepth</span> <span class="operator">=</span> depth(root.right);</span><br><span class="line">    max = Math.max(max, leftDepth + rightDepth);</span><br><span class="line">    <span class="keyword">return</span> Math.max(leftDepth, rightDepth) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¾‹2:</span></span><br><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">invertTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">null</span>)&#123;<span class="keyword">return</span> root;&#125;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">temp</span> <span class="operator">=</span> root.left;</span><br><span class="line">        root.left = invertTree(root.right);</span><br><span class="line">        root.right = invertTree(temp);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">//ä¾‹3:</span></span><br><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">mergeTrees</span><span class="params">(TreeNode root1, TreeNode root2)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root1 == <span class="literal">null</span> &amp;&amp; root2 == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(root1 == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> root2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(root2 == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> root1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">res</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(root1.val + root2.val);</span><br><span class="line">        res.left = mergeTrees(root1.left, root2.left);</span><br><span class="line">        res.right = mergeTrees(root1.right, root2.right);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¾‹4:ä¸€ç§æœ‰ç‚¹å¦™çš„æ ¼å¼ï¼š</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSubtree</span><span class="params">(TreeNode s, TreeNode t)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> isSubtreeWithRoot(s, t) || isSubtree(s.left, t) || isSubtree(s.right, t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isSubtreeWithRoot</span><span class="params">(TreeNode s, TreeNode t)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (t == <span class="literal">null</span> &amp;&amp; s == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (t == <span class="literal">null</span> || s == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (t.val != s.val) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> isSubtreeWithRoot(s.left, t.left) &amp;&amp; isSubtreeWithRoot(s.right, t.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»§ç»­åšå‰ä¸­ååºéå†!</p><h2 id="å±‚æ¬¡éå†ï¼š"><a href="#å±‚æ¬¡éå†ï¼š" class="headerlink" title="å±‚æ¬¡éå†ï¼š"></a>å±‚æ¬¡éå†ï¼š</h2><p>å¹¿åº¦ä¼˜å…ˆå³å¯</p><h2 id="å‰ä¸­ååºéå†ï¼š"><a href="#å‰ä¸­ååºéå†ï¼š" class="headerlink" title="å‰ä¸­ååºéå†ï¼š"></a>å‰ä¸­ååºéå†ï¼š</h2><h2 id="BSTï¼š"><a href="#BSTï¼š" class="headerlink" title="BSTï¼š"></a>BSTï¼š</h2><h2 id="Trieï¼š"><a href="#Trieï¼š" class="headerlink" title="Trieï¼š"></a>Trieï¼š</h2><h1 id="æ•°ç»„ä¸çŸ©é˜µï¼š"><a href="#æ•°ç»„ä¸çŸ©é˜µï¼š" class="headerlink" title="æ•°ç»„ä¸çŸ©é˜µï¼š"></a>æ•°ç»„ä¸çŸ©é˜µï¼š</h1><p>çœ‹åˆ°ï¼š5. æœ‰åºçŸ©é˜µçš„ Kth Element</p><h1 id="å›¾ï¼š"><a href="#å›¾ï¼š" class="headerlink" title="å›¾ï¼š"></a>å›¾ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//javaå»ºå›¾æ¨¡æ¿</span></span><br><span class="line">g = <span class="keyword">new</span> <span class="title class_">ArrayList</span>[n];</span><br><span class="line">Arrays.setAll(g, e -&gt; <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;() );</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> e : edges)&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> e[<span class="number">0</span>], y = e[<span class="number">1</span>];</span><br><span class="line">    g[x].add(y);</span><br><span class="line">    g[y].add(x);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒåˆ†å›¾ï¼š"><a href="#äºŒåˆ†å›¾ï¼š" class="headerlink" title="äºŒåˆ†å›¾ï¼š"></a>äºŒåˆ†å›¾ï¼š</h2><p>â€‹å¦‚æœå¯ä»¥ç”¨ä¸¤ç§é¢œè‰²å¯¹å›¾ä¸­çš„èŠ‚ç‚¹è¿›è¡Œç€è‰²ï¼Œå¹¶ä¸”ä¿è¯ç›¸é‚»çš„èŠ‚ç‚¹é¢œè‰²ä¸åŒï¼Œé‚£ä¹ˆè¿™ä¸ªå›¾å°±æ˜¯äºŒåˆ†å›¾ã€‚</p><p>â€‹&#x2F;&#x2F;åˆ¤æ–­æ˜¯å¦æ˜¯äºŒåˆ†å›¾â¬‡ï¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">judge</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isBipartite</span><span class="params">(<span class="type">int</span>[][] graph)</span> &#123;</span><br><span class="line">       <span class="comment">//colorè®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„é¢œè‰²ï¼Œ0ä¸ºè¿˜æ²¡è¢«æŸ“è‰²ï¼Œ1ã€2åˆ†åˆ«ä¸ºä¸¤ç§é¢œè‰²</span></span><br><span class="line">       <span class="type">int</span> color[] = <span class="keyword">new</span> <span class="title class_">int</span>[graph.length];</span><br><span class="line">       <span class="comment">//æˆ‘è®¤ä¸ºåº”è¯¥æ·±åº¦éå†è¿™ä¸ªå›¾ï¼Œç»™éå†è¿‡çš„ç»“ç‚¹æŸ“è‰²ï¼Œ</span></span><br><span class="line">       <span class="comment">//å¦‚æœé‡åˆ°å·²ç»æŸ“è‰²çš„ï¼Œçœ‹çœ‹å¦‚æœå’Œè‡ªå·±é¢œè‰²ç›¸åŒï¼Œåˆ™ä¸æ˜¯äºŒåˆ†å›¾ï¼</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; graph.length; i++)&#123;</span><br><span class="line">           <span class="comment">//å¯¹äºæ¯æ£µå­æ ‘ï¼Œå¦‚æœæœ‰ä¸€ä¸ªèŠ‚ç‚¹è¢«dfsè¿‡ï¼Œé‚£ä¹ˆå¦‚æœå¯ä»¥æ„æˆäºŒåˆ†å­å›¾çš„è¯ï¼Œè¿™é¢—å­æ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¸å¿…å†è¿›è¡Œdfsäº†ï¼Œæ•…æ­¤å¤„åªæ‰¾è¿˜æœªè¢«æ¶‚è‰²çš„èŠ‚ç‚¹è¿›è¡Œdfsï¼</span></span><br><span class="line">           <span class="keyword">if</span>(color[i] == <span class="number">0</span>) &#123;</span><br><span class="line">               dfs(graph, i, <span class="number">1</span>, color);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> judge;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[][] graph, <span class="type">int</span> i, <span class="type">int</span> thisColor, <span class="type">int</span>[] color)</span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(!judge)<span class="keyword">return</span>;</span><br><span class="line">       color[i] = thisColor;</span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; graph[i].length; j++)&#123;</span><br><span class="line">           <span class="keyword">if</span>(color[graph[i][j]] == <span class="number">0</span>)&#123;</span><br><span class="line">               dfs(graph, graph[i][j], thisColor==<span class="number">1</span>?<span class="number">2</span>:<span class="number">1</span>, color);</span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               <span class="keyword">if</span>(color[i] == color[graph[i][j]])&#123;</span><br><span class="line">                   judge = <span class="literal">false</span>;</span><br><span class="line">                   <span class="keyword">return</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="æ‹“æ‰‘æ’åºï¼š"><a href="#æ‹“æ‰‘æ’åºï¼š" class="headerlink" title="æ‹“æ‰‘æ’åºï¼š"></a>æ‹“æ‰‘æ’åºï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†é‚»æ¥çŸ©é˜µè½¬æ¢ä¸ºé‚»æ¥è¡¨ï¼š</span></span><br><span class="line"><span class="type">int</span>[][] prerequisites <span class="comment">//é‚»æ¥çŸ©é˜µ</span></span><br><span class="line">List&lt;Integer&gt;[] graphic = <span class="keyword">new</span> <span class="title class_">List</span>[numCourses];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numCourses; i++) &#123;</span><br><span class="line">    graphic[i] = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span>[] pre : prerequisites) &#123;</span><br><span class="line">    graphic[pre[<span class="number">0</span>]].add(pre[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹æ³•1: æ·±åº¦ä¼˜å…ˆ</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*å®šä¹‰ä¸‰ç§çŠ¶æ€ï¼š0-&gt;æœªæœç´¢ï¼›1-&gt;æœç´¢ä¸­ï¼›2-&gt;å·²å®Œæˆ</span></span><br><span class="line"><span class="comment">*éå†æ‰€æœ‰ç»“ç‚¹ï¼Œå¯¹æœªæœç´¢çš„ç»“ç‚¹è¿›è¡Œdfsï¼Œ</span></span><br><span class="line"><span class="comment">*å¯¹äºdfsï¼šå…ˆå°†è¯¥ç»“ç‚¹ç½®ä¸º1çŠ¶æ€ï¼Œéå†æ‰€æœ‰è¯¥ç»“ç‚¹éœ€è¦çš„ç»“ç‚¹ï¼Œå¦‚æœæ²¡æœ‰ä¾èµ–çš„ç»“ç‚¹æˆ–è€…ä¾èµ–çš„ç»“ç‚¹çš„çŠ¶æ€éƒ½ä¸º2ï¼Œåˆ™è¯¥ç»“ç‚¹ä¹Ÿ</span></span><br><span class="line"><span class="comment">*å¯ä»¥æ ‡è®°æˆ2ï¼›å¦‚æœè¯¥ç»“ç‚¹ä¾èµ–çš„ç»“ç‚¹çŠ¶æ€ä¸º0ï¼Œåˆ™dfsä¾èµ–çš„ç»“ç‚¹ï¼›å¦‚æœä¾èµ–çš„ç»“ç‚¹çš„çŠ¶æ€ä¸º1ï¼Œåˆ™è¯´æ˜å­˜åœ¨ç¯ï¼Œä¸æ»¡è¶³æ‹“æ‰‘æ’</span></span><br><span class="line"><span class="comment">*åºï¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//æ·±åº¦ä¼˜å…ˆåˆ¤æ–­æ‹“æ‰‘æ’åºâ¬‡ï¸</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">loop</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] findOrderByDFS(<span class="type">int</span> numCourses, <span class="type">int</span>[][] prerequisites) &#123;</span><br><span class="line">        <span class="comment">//1.æ„å»ºå›¾</span></span><br><span class="line">        List&lt;Integer&gt;[] relation = <span class="keyword">new</span> <span class="title class_">ArrayList</span>[numCourses];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numCourses; i++)&#123;</span><br><span class="line">            relation[i] = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span>[] arr: prerequisites)&#123;</span><br><span class="line">            relation[arr[<span class="number">0</span>]].add(arr[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ„å»ºæ•°ç»„ï¼Œå­˜æ”¾æ¯é—¨è¯¾ç¨‹çš„çŠ¶æ€0ï¼Œ1ï¼Œ2</span></span><br><span class="line">        <span class="type">int</span>[] status = <span class="keyword">new</span> <span class="title class_">int</span>[numCourses];</span><br><span class="line">        LinkedList&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();<span class="comment">//ç”¨äºå­˜æ”¾è¯¾ç¨‹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numCourses; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(status[i] == <span class="number">0</span>)&#123; <span class="comment">//æœªæœç´¢è¿‡ï¼Œäºæ˜¯å¯¹å…¶è¿›è¡Œdfsæœç´¢ï¼</span></span><br><span class="line">                dfs(i, relation, status,stack);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(loop)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[numCourses];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> numCourses - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">            res[i] = stack.pop();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> curCourse, List&lt;Integer&gt;[] relation, <span class="type">int</span>[] status, LinkedList&lt;Integer&gt; stack)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(loop)<span class="keyword">return</span>;</span><br><span class="line">        status[curCourse] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> next: relation[curCourse])&#123;</span><br><span class="line">            <span class="keyword">if</span>(status[next] == <span class="number">0</span>)&#123;</span><br><span class="line">                dfs(next, relation, status,stack);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(status[next] == <span class="number">1</span>)&#123;</span><br><span class="line">                loop = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(curCourse);</span><br><span class="line">        status[curCourse] = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹æ³•2: å¹¿åº¦ä¼˜å…ˆ</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*å°†é‚»æ¥çŸ©é˜µè½¬åŒ–ä¸ºé‚»æ¥è¡¨ å…¶ä¸­ï¼šAéœ€è¦B == B-&gt;A å› æ­¤ ä»»åŠ¡Kå…¥åº¦ä¸º0è¡¨ç¤ºKå¯ä»¥ç›´æ¥å®Œæˆï¼</span></span><br><span class="line"><span class="comment">  *ä½¿ç”¨é˜Ÿåˆ—ï¼Œå°†å…¥åº¦ä¸º0çš„ä»»åŠ¡æ·»åŠ è‡³é˜Ÿåˆ—ï¼Œéå†è¿™äº›ä»»åŠ¡ï¼Œå°†å®ƒä»¬æŒ‡å‘çš„é˜Ÿåˆ—çš„å…¥åº¦--ï¼›å°†æ“ä½œåå…¥åº¦ä¸º0çš„å†æ·»åŠ è¿›é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">  *ç›´åˆ°é˜Ÿåˆ—ä¸ºç©º(å¦‚æœä»é˜Ÿåˆ—å¼¹å‡ºçš„ä»»åŠ¡æ€»æ•° &lt; æ€»ä»»åŠ¡æ•°ï¼Œåˆ™è¯´æ˜å›¾ä¸­æœ‰ç¯ï¼Œä¸èƒ½æ„æˆæ‹“æ‰‘æ’åº)</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">//å¹¿åº¦ä¼˜å…ˆåˆ¤æ–­æ‹“æ‰‘æ’åº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] findOrderByBFS(<span class="type">int</span> numCourses, <span class="type">int</span>[][] prerequisites) &#123;</span><br><span class="line">        <span class="comment">//1.æ„å»ºå›¾</span></span><br><span class="line">        <span class="comment">//å¹¿åº¦ä¼˜å…ˆï¼Œaéœ€è¦b åˆ™ b-&gt;a</span></span><br><span class="line">        <span class="comment">//æ¯æ¬¡è®°å½•å…¥åº¦ä¸º0çš„è¯¾ç¨‹,å› æ­¤éœ€è¦åˆ›å»ºæ•°ç»„è®°å½•æ¯ä¸ªè¯¾ç¨‹çš„å…¥åº¦</span></span><br><span class="line">        List&lt;Integer&gt;[] relation = <span class="keyword">new</span> <span class="title class_">ArrayList</span>[numCourses];</span><br><span class="line">        <span class="type">int</span> []inDegree = <span class="keyword">new</span> <span class="title class_">int</span>[numCourses];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numCourses; i++)&#123;</span><br><span class="line">            relation[i] = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span>[] arr: prerequisites)&#123;</span><br><span class="line">            relation[arr[<span class="number">1</span>]].add(arr[<span class="number">0</span>]);</span><br><span class="line">            inDegree[arr[<span class="number">0</span>]]++;</span><br><span class="line">        &#125;</span><br><span class="line">        LinkedList&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—åˆå§‹åŒ–ï¼šå°†æ‰€æœ‰å…¥åº¦ä¸º0çš„è¯¾ç¨‹éƒ½åŠ å…¥queue</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numCourses; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(inDegree[i] == <span class="number">0</span>)&#123;</span><br><span class="line">                queue.offer(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[numCourses];</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–å®Œæ¯•ï¼Œå¼€å§‹å¸¸è§„bfs</span></span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sz</span> <span class="operator">=</span> queue.size();</span><br><span class="line">            <span class="keyword">while</span>(sz-- &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">curCourse</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i: relation[curCourse])&#123;</span><br><span class="line">                    inDegree[i]--;</span><br><span class="line">                    <span class="keyword">if</span>(inDegree[i] == <span class="number">0</span>)&#123;</span><br><span class="line">                        queue.offer(i);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                res[index++] = curCourse;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index == numCourses? res: <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="å¹¶æŸ¥é›†ï¼š"><a href="#å¹¶æŸ¥é›†ï¼š" class="headerlink" title="å¹¶æŸ¥é›†ï¼š"></a>å¹¶æŸ¥é›†ï¼š</h2><p>å¹¶æŸ¥é›†å¯ä»¥åŠ¨æ€åœ°è¿é€šä¸¤ä¸ªç‚¹ï¼Œå¹¶ä¸”å¯ä»¥éå¸¸å¿«é€Ÿåœ°åˆ¤æ–­ä¸¤ä¸ªç‚¹æ˜¯å¦è¿é€šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *===============================å¹¶æŸ¥é›†æ¨¡æ¿ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼ï¼ï¼=====================================</span></span><br><span class="line"><span class="comment"> * æ•°ç»„æ¨¡æ‹Ÿæ ‘ï¼Œå®ç°å¹¶æŸ¥é›†ã€‚æ•°ç»„å†…çš„å…ƒç´ è¡¨ç¤ºçˆ¶äº²çš„ä¸‹è§’è¡¨ï¼Œç›¸å½“äºæŒ‡é’ˆã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnionFind</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] parent;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UnionFind</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = size;</span><br><span class="line">        parent = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            parent[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> element)</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (element != parent[element]) &#123;</span><br><span class="line">            element = parent[element];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> element;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> firstElement, <span class="type">int</span> secondElement)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> find(firstElement) == find(secondElement);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unionElements</span><span class="params">(<span class="type">int</span> firstElement, <span class="type">int</span> secondElement)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">firstRoot</span> <span class="operator">=</span> find(firstElement);</span><br><span class="line">        <span class="type">int</span> <span class="variable">secondRoot</span> <span class="operator">=</span> find(secondElement);</span><br><span class="line">        <span class="keyword">if</span> (firstRoot == secondRoot) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        parent[firstRoot] = secondRoot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹¶æŸ¥é›†çš„åº”ç”¨ï¼š</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] findRedundantConnection(<span class="type">int</span>[][] edges) &#123;</span><br><span class="line">        <span class="type">UnionFind</span> <span class="variable">unionfind</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">UnionFind</span>(edges.length + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span>[] edge:edges)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!unionfind.isConnected(edge[<span class="number">0</span>],edge[<span class="number">1</span>]))&#123;</span><br><span class="line">                unionfind.unionElements(edge[<span class="number">0</span>], edge[<span class="number">1</span>]);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> edge;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯»æ‰¾å›¾ä¸­çš„æœ€å¤§ç¯ï¼š"><a href="#å¯»æ‰¾å›¾ä¸­çš„æœ€å¤§ç¯ï¼š" class="headerlink" title="å¯»æ‰¾å›¾ä¸­çš„æœ€å¤§ç¯ï¼š"></a>å¯»æ‰¾å›¾ä¸­çš„æœ€å¤§ç¯ï¼š</h2><h1 id="è®¡æ•°æ’åº"><a href="#è®¡æ•°æ’åº" class="headerlink" title="è®¡æ•°æ’åº"></a>è®¡æ•°æ’åº</h1><p>ç”¨äº<u><strong>å€¼åŸŸè¾ƒå°çš„å¤§é‡æ•°å­—çš„æ’åº</strong></u>ï¼Œå°†å„ä¸ª<strong>æ•°å­—çš„å€¼</strong>ä¸<strong>ä¸ªæ•°</strong>ä½œä¸ºä¸€ä¸ª<strong>æ•°ç»„çš„ä¸‹æ ‡</strong>å’Œ<strong>å€¼</strong>é€šè¿‡éå†æ•°ç»„ï¼Œç´¯åŠ arr[]çš„å€¼ &#x3D; k<strong>å¾—åˆ°ç¬¬kå°çš„æ•°å­—</strong></p><h1 id="æ¡¶æ’åºï¼š"><a href="#æ¡¶æ’åºï¼š" class="headerlink" title="æ¡¶æ’åºï¼š"></a>æ¡¶æ’åºï¼š</h1><p>â€‹è®¾ç½®è‹¥å¹²ä¸ªæ¡¶ bucket[i] å­˜å‚¨å‡ºç°æ¬¡æ•°ä¸ºiçš„æ•°ï¼Œ bucketå®šä¹‰ä¸º ArrayList[ ] ç±»å‹</p><h1 id="å¿«é€Ÿé€‰æ‹©ï¼š"><a href="#å¿«é€Ÿé€‰æ‹©ï¼š" class="headerlink" title="å¿«é€Ÿé€‰æ‹©ï¼š"></a>å¿«é€Ÿé€‰æ‹©ï¼š</h1><p>å¹³å¸¸äººä»¬<strong>é€‰æ‹©æ•°æ®ä¸­æŸä¸ªç¬¬å‡ å¤§</strong>çš„æ•°æ®ï¼Œå¾€å¾€ä½¿ç”¨å…ˆæ’åºåœ¨é€‰æ‹©çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æœ€å¿«ä¸ºOnlognï¼ˆå¿«æ’æ—¶é—´å¤æ‚åº¦ï¼‰ï¼Œä½†åœ¨æ•°æ®è¾ƒå¤§æ—¶å¾€å¾€ä¼šè¶…å‡ºæ—¶é—´é™åˆ¶ï¼Œæ•…æœ¬æ¬¡ä»‹ç»æ—¶é—´å¤æ‚åº¦ä¸ºOnçš„å¿«é€Ÿé€‰æ‹©æ–¹æ³•</p><p>å¿«é€Ÿé€‰æ‹©ç®—æ³•ï¼šç®—æ³•æ ¸å¿ƒä¸ºé€’å½’å’Œåˆ†æ²»ï¼Œå’Œå¿«é€Ÿæ’åºç®—æ³•æœ‰ä¸€å®šçš„ç›¸ä¼¼åº¦ï¼Œç®—æ³•å¤§æ¦‚è¿‡ç¨‹ä¸º<br>1.å…ˆåˆ¤æ–­åŒºé—´çš„ç«¯ç‚¹l,rå’Œæ¯”è¾ƒæ•°pivot,pivotå¯å–ä¸ºarr[l],arr[r],arr[(l + r) &#x2F; 2)]ã€‚</p><p>2.è¿›è¡Œæ’åºäº¤æ¢ï¼Œä½¿åŒºé—´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå·¦è¾¹éƒ¨åˆ†å°äºç­‰äºpivotï¼Œå³è¾¹éƒ¨åˆ†å¤§äºç­‰äºpivotã€‚</p><p>3.é€’å½’æ’åºå·¦å³è¾¹ï¼Œå½“è¦æ±‚çš„ç¬¬Kä¸ªæ•°,k &gt;&#x3D; slï¼Œåˆ™é€’å½’æ’åºå³è¾¹ï¼Œå¦åˆ™é€’å½’æ’åºå·¦è¾¹ï¼Œå¦‚æœåŒºé—´åªæœ‰ä¸€ä¸ªæ•°åˆ™è¿”å›ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">quickChoose</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> [] arr,<span class="type">int</span> k)</span>&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœå½“å‰åªæœ‰ä¸€ä¸ªæ•°å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">           <span class="keyword">return</span> arr[l];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦åˆ™è¿›è¡Œæ’åºå’ŒæŸ¥æ‰¾</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l - <span class="number">1</span>,j = r + <span class="number">1</span>,pivot = arr[l];</span><br><span class="line">        <span class="comment">//æœ¬æ¬¡è¿”å›j,j + 1</span></span><br><span class="line">        <span class="comment">//å½“å‰å…ƒç´ åŒºé—´ä¸æ­¢ä¸ºä¸€ä¸ªæ•°æ—¶</span></span><br><span class="line">        <span class="keyword">while</span>(i &lt; j)&#123;</span><br><span class="line">            <span class="keyword">while</span>(arr[++i] &lt; pivot);</span><br><span class="line">            <span class="keyword">while</span>(arr[--j] &gt; pivot);</span><br><span class="line">            <span class="comment">//å¦‚æœæ»¡è¶³åŒºé—´å…ƒç´ ä¸ä¸º1</span></span><br><span class="line">            <span class="keyword">if</span>(i &lt; j)&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                arr[j] = arr[i];</span><br><span class="line">                arr[i] = t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœåœ¨å·¦åŠéƒ¨åˆ†ï¼Œç›´æ¥æ’åºå·¦è¾¹æ±‚è§£</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">s1</span> <span class="operator">=</span> j - l + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(s1 &gt;= k)&#123;</span><br><span class="line">            <span class="keyword">return</span> quickChoose(l,i - <span class="number">1</span>,arr,k);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//å¦åˆ™æ’åºå³è¾¹æ•°ç»„</span></span><br><span class="line">            k = k - s1;</span><br><span class="line">            <span class="keyword">return</span> quickChoose( i,r,arr,k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="åŒˆç‰™åˆ©ç®—æ³•ï¼š"><a href="#åŒˆç‰™åˆ©ç®—æ³•ï¼š" class="headerlink" title="åŒˆç‰™åˆ©ç®—æ³•ï¼š"></a>åŒˆç‰™åˆ©ç®—æ³•ï¼š</h1><ul><li><p><strong>åŒˆç‰™åˆ©ç®—æ³•ä¸»è¦ç”¨æ¥è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼šæ±‚äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…æ•°å’Œæœ€å°ç‚¹è¦†ç›–æ•°</strong>ã€‚</p><p>æ±‚äºŒåˆ†å›¾æœ€å¤§è¿é€šæ•° æ¨¡ç‰ˆâ¬‡ï¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ç±»åå¿…é¡»ä¸º Main, ä¸è¦æœ‰ä»»ä½• package xxx ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="comment">// æ³¨æ„ hasNext å’Œ hasNextLine çš„åŒºåˆ«</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line">        List&lt;Integer&gt; odd = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;Integer&gt; even = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line">            <span class="keyword">if</span>(temp % <span class="number">2</span> == <span class="number">0</span>)&#123;even.add(temp);&#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;odd.add(temp);&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> [] match = <span class="keyword">new</span> <span class="title class_">int</span> [even.size()];</span><br><span class="line">        <span class="keyword">if</span>(odd.size() == <span class="number">0</span> || even.size() == <span class="number">0</span>)&#123; <span class="comment">//ç¼ºå°‘å¥‡æ•°æˆ–è€…å¶æ•°æ— æ³•æ„æˆç´ æ•°</span></span><br><span class="line">            System.out.println(count);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i: odd)&#123;</span><br><span class="line">            <span class="type">boolean</span> [] used = <span class="keyword">new</span> <span class="title class_">boolean</span> [even.size()];</span><br><span class="line">            <span class="keyword">if</span>(find(i,even, match, used))count++;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        System.out.println(count);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> i, List&lt;Integer&gt; even, <span class="type">int</span>[] match,<span class="type">boolean</span> [] used)</span> &#123;</span><br><span class="line">        <span class="comment">// TODO</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; even.size(); j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isPrime(i + even.get(j)) &amp;&amp; !used[j])&#123;</span><br><span class="line">                used[j] = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">if</span>(match[j] == <span class="number">0</span> || find(match[j], even, match,used))&#123;</span><br><span class="line">                    match[j] = i;  </span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i * i &lt;= n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(n % i == <span class="number">0</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="å¤šè·¯å½’å¹¶ï¼š"><a href="#å¤šè·¯å½’å¹¶ï¼š" class="headerlink" title="å¤šè·¯å½’å¹¶ï¼š"></a>å¤šè·¯å½’å¹¶ï¼š</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://lfool.github.io/LFool-Notes/algorithm/å¤šè·¯å½’å¹¶æŠ€å·§æ€»ç»“.html</span><br></pre></td></tr></table></figure><ul><li><p>21.åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨(ç®€å•)</p></li><li><p>23.åˆå¹¶Kä¸ªå‡åºé“¾è¡¨(<strong>å›°éš¾</strong>)</p><p>æ¯æ¬¡ä»æ‰€æœ‰é“¾è¡¨å¤´ä¸­é€‰æ‹©æ•°å€¼æœ€å°çš„å€¼åŠ å…¥ç»“æœé“¾è¡¨ä¸­å³å¯ã€‚è‡ªå·±åšæ—¶åªä½¿ç”¨äº†éå†çš„æ–¹æ³•ï¼Œä½†æ˜¯å‘ç°å¤§ç¥ä»¬<strong>ä½¿ç”¨å°æ ¹å †</strong>æ¥è·å–æœ€å°çš„é“¾è¡¨å¤´éƒ¨ï¼</p><ul><li>è¿˜å¯ä»¥ä½¿ç”¨å½’å¹¶çš„æ–¹æ³•ï¼Œ(åˆå¹¶nä¸ªé“¾è¡¨â€”â€“åˆ†åŠåˆ†åŠå†åˆ†åŠâ€”â€“&gt;åˆå¹¶2ä¸ªé“¾è¡¨)ï¼Œé’ˆå¯¹åˆå¹¶2ä¸ªé“¾è¡¨ç¼–å†™ä»£ç </li><li>è¿˜å¯ä»¥ä½¿ç”¨PriorityQueue<ListNode>ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå®ƒè‡ªåŠ¨å°†é˜Ÿåˆ—å†…çš„å…ƒç´ æŒ‰ç…§æä¾›çš„é‡å†™çš„compareæ–¹æ³•æ¥æ’åºï¼Œæ¯æ¬¡pollå‡ºæœ€å°çš„ï¼Œå†æŠŠå®ƒçš„next(å¦‚æœæœ‰)æ”¾å…¥é˜Ÿåˆ—</li></ul></li></ul><h1 id="å•è°ƒæ ˆï¼š"><a href="#å•è°ƒæ ˆï¼š" class="headerlink" title="å•è°ƒæ ˆï¼š"></a>å•è°ƒæ ˆï¼š</h1><p>â€‹<strong>ç”¨äºå¤„ç† è·å–é€’å¢å­åºåˆ—ä¹‹ç±»çš„é¢˜ç›®</strong></p><p>â€‹éå†æ‰€ç»™çš„æ•°æ®ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªæ ˆï¼Œ</p><p>â€‹æ¯”å¦‚ç°åœ¨éœ€è¦æ‰¾å‡ºé•¿åº¦ä¸ºnçš„æœ€å°å­—å…¸åºå­å­—ç¬¦ä¸²</p><p>â€‹å¦‚æœè·å¾—çš„æ•°æ®æ¯”æ ˆé¡¶çš„å°ï¼Œåˆ™å¼¹å‡ºæ ˆé¡¶ï¼Œç›´åˆ°æ ˆä¸ºç©º æˆ– æ ˆé¡¶å…ƒç´ å°äºæ‰€æŒå…ƒç´ ï¼Œ (è¿™é‡Œè¿˜æ³¨æ„ï¼šå› ä¸ºæˆ‘ä»¬éœ€è¦çš„æ˜¯é•¿åº¦ä¸ºnçš„å­åºåˆ—ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬æ¯æ¬¡æƒ³è¦popçš„æ—¶å€™éƒ½éœ€è¦åˆ¤æ–­ï¼šæ ˆä¸­å…ƒç´ ä»¥åŠæœªéå†çš„å…ƒç´ æ€»æ•°æ˜¯å¦è¾¾åˆ°äº†äº†nï¼Œè‹¥&gt;nï¼Œåˆ™å…è®¸pop)</p><p>æœ€åå°†æ ˆä¸­çš„æ•°æ®ä¾æ¬¡popï¼Œå†reverseä¸€ä¸‹å³å¯</p><h1 id="TreeSetçš„ä½¿ç”¨ï¼š"><a href="#TreeSetçš„ä½¿ç”¨ï¼š" class="headerlink" title="TreeSetçš„ä½¿ç”¨ï¼š"></a>TreeSetçš„ä½¿ç”¨ï¼š</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        TreeSet&lt;Integer&gt; treeSet = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">        in.next();</span><br><span class="line">        <span class="keyword">while</span> (in.hasNextInt()) &#123; <span class="comment">// æ³¨æ„ while å¤„ç†å¤šä¸ª case</span></span><br><span class="line">            treeSet.add(in.nextInt());           </span><br><span class="line">        &#125;</span><br><span class="line">        Iterator&lt;Integer&gt; tree = treeSet.iterator();</span><br><span class="line">        <span class="keyword">while</span> (tree.hasNext())&#123;</span><br><span class="line">            System.out.println(tree.next());</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="System-arraycopy-çš„ä½¿ç”¨"><a href="#System-arraycopy-çš„ä½¿ç”¨" class="headerlink" title="System.arraycopy()çš„ä½¿ç”¨"></a>System.arraycopy()çš„ä½¿ç”¨</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span>      src      the source array. æºæ•°ç»„</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span>      srcPos   starting position in the source array. æºæ•°ç»„çš„èµ·å§‹ä½ç½®</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span>      dest     the destination array. ç›®æ ‡æ•°ç»„</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span>      destPos  starting position in the destination data. ç›®æ ‡æ•°ç»„çš„èµ·å§‹ä½ç½®</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span>      length   the number of array elements to be copied. å¤åˆ¶çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">arraycopy(Object src,<span class="type">int</span> srcPos,Object dest, <span class="type">int</span> destPos, <span class="type">int</span> length)ï¼›</span><br></pre></td></tr></table></figure><h1 id="åŠ¨æ€è§„åˆ’ï¼š"><a href="#åŠ¨æ€è§„åˆ’ï¼š" class="headerlink" title="åŠ¨æ€è§„åˆ’ï¼š"></a>åŠ¨æ€è§„åˆ’ï¼š</h1><h4 id="1031-ä¸¤ä¸ªéé‡å å­æ•°ç»„çš„æœ€å¤§å’Œ"><a href="#1031-ä¸¤ä¸ªéé‡å å­æ•°ç»„çš„æœ€å¤§å’Œ" class="headerlink" title="1031. ä¸¤ä¸ªéé‡å å­æ•°ç»„çš„æœ€å¤§å’Œ"></a><a href="https://leetcode.cn/problems/maximum-sum-of-two-non-overlapping-subarrays/">1031. ä¸¤ä¸ªéé‡å å­æ•°ç»„çš„æœ€å¤§å’Œ</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸¤ä¸ªæ•´æ•° firstLen å’Œ secondLenï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªéé‡å  å­æ•°ç»„ ä¸­å…ƒç´ çš„æœ€å¤§å’Œï¼Œé•¿åº¦åˆ†åˆ«ä¸º firstLen å’Œ secondLen ã€‚</span><br><span class="line">é•¿åº¦ä¸º firstLen çš„å­æ•°ç»„å¯ä»¥å‡ºç°åœ¨é•¿ä¸º secondLen çš„å­æ•°ç»„ä¹‹å‰æˆ–ä¹‹åï¼Œä½†äºŒè€…å¿…é¡»æ˜¯ä¸é‡å çš„ã€‚</span><br><span class="line">å­æ•°ç»„æ˜¯æ•°ç»„çš„ä¸€ä¸ª è¿ç»­ éƒ¨åˆ†ã€‚</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åŠ¨æ€è§„åˆ’ ï¼š</p><ul><li><p>dp1[ i ]è¡¨ç¤ºå‰iä¸ªæ•°ä¸­é•¿åº¦ä¸ºfirstLençš„å­æ•°ç»„çš„æœ€å¤§å€¼ (è‹¥ i &lt; firstLen)åˆ™dp1[ i ] &#x3D; å‰iä¸ªæ•°ä¹‹å’Œ</p></li><li><p>dp2[ i ]è¡¨ç¤ºå‰iä¸ªæ•°ä¸­é•¿åº¦ä¸ºsecondLençš„å­æ•°ç»„çš„æœ€å¤§å€¼</p><p>æˆ‘ä»¬å¾—åˆ°dp1[ ]ä¸dp2[ ]æ•°ç»„åï¼Œå¯¹äºæ¯ä¸ªiï¼Œæˆ‘ä»¬å¯ä»¥è®©res &#x3D; Max{res, æ•°ç»„1(firstLen)åŒ…å«äº†æœ€æ–°çš„ç¬¬iä½ï¼Œæ•°ç»„2(secondLen)åŒ…å«äº†æœ€æ–°çš„ç¬¬iä½}</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSumTwoNoOverlap</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> firstLen, <span class="type">int</span> secondLen)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            nums[i] += nums[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] arr1 = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">        <span class="type">int</span>[] arr2 = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">        arr1[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        arr2[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            arr1[i] = firstLen&gt;i?nums[i]: Math.max(nums[i] - nums[i - firstLen],arr1[i - <span class="number">1</span>]);</span><br><span class="line">            arr2[i] = secondLen&gt;i?nums[i]: Math.max(nums[i] - nums[i - secondLen],arr2[i - <span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span> (firstLen + secondLen &gt; i)&#123;</span><br><span class="line">                res = nums[i];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                res = Math.max(res, nums[i] - nums[i - firstLen] + arr2[i - firstLen]);</span><br><span class="line">                res = Math.max(res, nums[i] - nums[i - secondLen] + arr1[i - secondLen]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul><p>**1606è‡ªå·±åšçš„è¶…æ—¶äº†ï¼Œç­”æ¡ˆçš„æ•°æ®ç»“æ„æœ‰ç‚¹å¤æ‚ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æœ‰ç©ºå†çœ‹çœ‹ï½</p><p>**2151 äºŒè¿›åˆ¶æšä¸¾ï¼Œæœ‰ç©ºæ¥å¤ç›˜ï¼</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> algorithm </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
